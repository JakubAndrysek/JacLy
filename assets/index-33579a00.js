var vM=Object.defineProperty;var bM=(r,n,i)=>n in r?vM(r,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[n]=i;var Lu=(r,n,i)=>(bM(r,typeof n!="symbol"?n+"":n,i),i);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function i(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(a){if(a.ep)return;a.ep=!0;const u=i(a);fetch(a.href,u)}})();var ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Pv(r){if(r.__esModule)return r;var n=r.default;if(typeof n=="function"){var i=function s(){if(this instanceof s){var a=[null];a.push.apply(a,arguments);var u=Function.bind.apply(n,a);return new u}return n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var a=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(i,s,a.get?a:{enumerable:!0,get:function(){return r[s]}})}),i}var Gk={exports:{}},Bf={},Vk={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kc=Symbol.for("react.element"),yM=Symbol.for("react.portal"),wM=Symbol.for("react.fragment"),SM=Symbol.for("react.strict_mode"),IM=Symbol.for("react.profiler"),OM=Symbol.for("react.provider"),RM=Symbol.for("react.context"),kM=Symbol.for("react.forward_ref"),CM=Symbol.for("react.suspense"),AM=Symbol.for("react.memo"),LM=Symbol.for("react.lazy"),uI=Symbol.iterator;function NM(r){return r===null||typeof r!="object"?null:(r=uI&&r[uI]||r["@@iterator"],typeof r=="function"?r:null)}var Wk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jk=Object.assign,zk={};function Pa(r,n,i){this.props=r,this.context=n,this.refs=zk,this.updater=i||Wk}Pa.prototype.isReactComponent={};Pa.prototype.setState=function(r,n){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,n,"setState")};Pa.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function Xk(){}Xk.prototype=Pa.prototype;function Bv(r,n,i){this.props=r,this.context=n,this.refs=zk,this.updater=i||Wk}var Fv=Bv.prototype=new Xk;Fv.constructor=Bv;jk(Fv,Pa.prototype);Fv.isPureReactComponent=!0;var cI=Array.isArray,Yk=Object.prototype.hasOwnProperty,Uv={current:null},Kk={key:!0,ref:!0,__self:!0,__source:!0};function qk(r,n,i){var s,a={},u=null,h=null;if(n!=null)for(s in n.ref!==void 0&&(h=n.ref),n.key!==void 0&&(u=""+n.key),n)Yk.call(n,s)&&!Kk.hasOwnProperty(s)&&(a[s]=n[s]);var d=arguments.length-2;if(d===1)a.children=i;else if(1<d){for(var p=Array(d),T=0;T<d;T++)p[T]=arguments[T+2];a.children=p}if(r&&r.defaultProps)for(s in d=r.defaultProps,d)a[s]===void 0&&(a[s]=d[s]);return{$$typeof:kc,type:r,key:u,ref:h,props:a,_owner:Uv.current}}function xM(r,n){return{$$typeof:kc,type:r.type,key:n,ref:r.ref,props:r.props,_owner:r._owner}}function Hv(r){return typeof r=="object"&&r!==null&&r.$$typeof===kc}function MM(r){var n={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(i){return n[i]})}var hI=/\/+/g;function J$(r,n){return typeof r=="object"&&r!==null&&r.key!=null?MM(""+r.key):n.toString(36)}function Nd(r,n,i,s,a){var u=typeof r;(u==="undefined"||u==="boolean")&&(r=null);var h=!1;if(r===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(r.$$typeof){case kc:case yM:h=!0}}if(h)return h=r,a=a(h),r=s===""?"."+J$(h,0):s,cI(a)?(i="",r!=null&&(i=r.replace(hI,"$&/")+"/"),Nd(a,n,i,"",function(T){return T})):a!=null&&(Hv(a)&&(a=xM(a,i+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(hI,"$&/")+"/")+r)),n.push(a)),1;if(h=0,s=s===""?".":s+":",cI(r))for(var d=0;d<r.length;d++){u=r[d];var p=s+J$(u,d);h+=Nd(u,n,i,p,a)}else if(p=NM(r),typeof p=="function")for(r=p.call(r),d=0;!(u=r.next()).done;)u=u.value,p=s+J$(u,d++),h+=Nd(u,n,i,p,a);else if(u==="object")throw n=String(r),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return h}function ld(r,n,i){if(r==null)return r;var s=[],a=0;return Nd(r,s,"","",function(u){return n.call(i,u,a++)}),s}function DM(r){if(r._status===-1){var n=r._result;n=n(),n.then(function(i){(r._status===0||r._status===-1)&&(r._status=1,r._result=i)},function(i){(r._status===0||r._status===-1)&&(r._status=2,r._result=i)}),r._status===-1&&(r._status=0,r._result=n)}if(r._status===1)return r._result.default;throw r._result}var Gr={current:null},xd={transition:null},PM={ReactCurrentDispatcher:Gr,ReactCurrentBatchConfig:xd,ReactCurrentOwner:Uv};Et.Children={map:ld,forEach:function(r,n,i){ld(r,function(){n.apply(this,arguments)},i)},count:function(r){var n=0;return ld(r,function(){n++}),n},toArray:function(r){return ld(r,function(n){return n})||[]},only:function(r){if(!Hv(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Et.Component=Pa;Et.Fragment=wM;Et.Profiler=IM;Et.PureComponent=Bv;Et.StrictMode=SM;Et.Suspense=CM;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PM;Et.cloneElement=function(r,n,i){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var s=jk({},r.props),a=r.key,u=r.ref,h=r._owner;if(n!=null){if(n.ref!==void 0&&(u=n.ref,h=Uv.current),n.key!==void 0&&(a=""+n.key),r.type&&r.type.defaultProps)var d=r.type.defaultProps;for(p in n)Yk.call(n,p)&&!Kk.hasOwnProperty(p)&&(s[p]=n[p]===void 0&&d!==void 0?d[p]:n[p])}var p=arguments.length-2;if(p===1)s.children=i;else if(1<p){d=Array(p);for(var T=0;T<p;T++)d[T]=arguments[T+2];s.children=d}return{$$typeof:kc,type:r.type,key:a,ref:u,props:s,_owner:h}};Et.createContext=function(r){return r={$$typeof:RM,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:OM,_context:r},r.Consumer=r};Et.createElement=qk;Et.createFactory=function(r){var n=qk.bind(null,r);return n.type=r,n};Et.createRef=function(){return{current:null}};Et.forwardRef=function(r){return{$$typeof:kM,render:r}};Et.isValidElement=Hv;Et.lazy=function(r){return{$$typeof:LM,_payload:{_status:-1,_result:r},_init:DM}};Et.memo=function(r,n){return{$$typeof:AM,type:r,compare:n===void 0?null:n}};Et.startTransition=function(r){var n=xd.transition;xd.transition={};try{r()}finally{xd.transition=n}};Et.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Et.useCallback=function(r,n){return Gr.current.useCallback(r,n)};Et.useContext=function(r){return Gr.current.useContext(r)};Et.useDebugValue=function(){};Et.useDeferredValue=function(r){return Gr.current.useDeferredValue(r)};Et.useEffect=function(r,n){return Gr.current.useEffect(r,n)};Et.useId=function(){return Gr.current.useId()};Et.useImperativeHandle=function(r,n,i){return Gr.current.useImperativeHandle(r,n,i)};Et.useInsertionEffect=function(r,n){return Gr.current.useInsertionEffect(r,n)};Et.useLayoutEffect=function(r,n){return Gr.current.useLayoutEffect(r,n)};Et.useMemo=function(r,n){return Gr.current.useMemo(r,n)};Et.useReducer=function(r,n,i){return Gr.current.useReducer(r,n,i)};Et.useRef=function(r){return Gr.current.useRef(r)};Et.useState=function(r){return Gr.current.useState(r)};Et.useSyncExternalStore=function(r,n,i){return Gr.current.useSyncExternalStore(r,n,i)};Et.useTransition=function(){return Gr.current.useTransition()};Et.version="18.2.0";Vk.exports=Et;var Yo=Vk.exports;const Dt=qs(Yo);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BM=Yo,FM=Symbol.for("react.element"),UM=Symbol.for("react.fragment"),HM=Object.prototype.hasOwnProperty,GM=BM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VM={key:!0,ref:!0,__self:!0,__source:!0};function Zk(r,n,i){var s,a={},u=null,h=null;i!==void 0&&(u=""+i),n.key!==void 0&&(u=""+n.key),n.ref!==void 0&&(h=n.ref);for(s in n)HM.call(n,s)&&!VM.hasOwnProperty(s)&&(a[s]=n[s]);if(r&&r.defaultProps)for(s in n=r.defaultProps,n)a[s]===void 0&&(a[s]=n[s]);return{$$typeof:FM,type:r,key:u,ref:h,props:a,_owner:GM.current}}Bf.Fragment=UM;Bf.jsx=Zk;Bf.jsxs=Zk;Gk.exports=Bf;var yt=Gk.exports,iT={},Jk={exports:{}},gn={},Qk={exports:{}},eC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function n(re,ge){var ue=re.length;re.push(ge);e:for(;0<ue;){var ie=ue-1>>>1,A=re[ie];if(0<a(A,ge))re[ie]=ge,re[ue]=A,ue=ie;else break e}}function i(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var ge=re[0],ue=re.pop();if(ue!==ge){re[0]=ue;e:for(var ie=0,A=re.length,Y=A>>>1;ie<Y;){var K=2*(ie+1)-1,pe=re[K],j=K+1,ee=re[j];if(0>a(pe,ue))j<A&&0>a(ee,pe)?(re[ie]=ee,re[j]=ue,ie=j):(re[ie]=pe,re[K]=ue,ie=K);else if(j<A&&0>a(ee,ue))re[ie]=ee,re[j]=ue,ie=j;else break e}}return ge}function a(re,ge){var ue=re.sortIndex-ge.sortIndex;return ue!==0?ue:re.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,d=h.now();r.unstable_now=function(){return h.now()-d}}var p=[],T=[],E=1,y=null,S=3,x=!1,B=!1,H=!1,W=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(re){for(var ge=i(T);ge!==null;){if(ge.callback===null)s(T);else if(ge.startTime<=re)s(T),ge.sortIndex=ge.expirationTime,n(p,ge);else break;ge=i(T)}}function D(re){if(H=!1,I(re),!B)if(i(p)!==null)B=!0,ce(C);else{var ge=i(T);ge!==null&&fe(D,ge.startTime-re)}}function C(re,ge){B=!1,H&&(H=!1,$(te),te=-1),x=!0;var ue=S;try{for(I(ge),y=i(p);y!==null&&(!(y.expirationTime>ge)||re&&!we());){var ie=y.callback;if(typeof ie=="function"){y.callback=null,S=y.priorityLevel;var A=ie(y.expirationTime<=ge);ge=r.unstable_now(),typeof A=="function"?y.callback=A:y===i(p)&&s(p),I(ge)}else s(p);y=i(p)}if(y!==null)var Y=!0;else{var K=i(T);K!==null&&fe(D,K.startTime-ge),Y=!1}return Y}finally{y=null,S=ue,x=!1}}var U=!1,V=null,te=-1,ae=5,de=-1;function we(){return!(r.unstable_now()-de<ae)}function q(){if(V!==null){var re=r.unstable_now();de=re;var ge=!0;try{ge=V(!0,re)}finally{ge?J():(U=!1,V=null)}}else U=!1}var J;if(typeof m=="function")J=function(){m(q)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,X=G.port2;G.port1.onmessage=q,J=function(){X.postMessage(null)}}else J=function(){W(q,0)};function ce(re){V=re,U||(U=!0,J())}function fe(re,ge){te=W(function(){re(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){B||x||(B=!0,ce(C))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return i(p)},r.unstable_next=function(re){switch(S){case 1:case 2:case 3:var ge=3;break;default:ge=S}var ue=S;S=ge;try{return re()}finally{S=ue}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,ge){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ue=S;S=re;try{return ge()}finally{S=ue}},r.unstable_scheduleCallback=function(re,ge,ue){var ie=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ie+ue:ie):ue=ie,re){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=ue+A,re={id:E++,callback:ge,priorityLevel:re,startTime:ue,expirationTime:A,sortIndex:-1},ue>ie?(re.sortIndex=ue,n(T,re),i(p)===null&&re===i(T)&&(H?($(te),te=-1):H=!0,fe(D,ue-ie))):(re.sortIndex=A,n(p,re),B||x||(B=!0,ce(C))),re},r.unstable_shouldYield=we,r.unstable_wrapCallback=function(re){var ge=S;return function(){var ue=S;S=ge;try{return re.apply(this,arguments)}finally{S=ue}}}})(eC);Qk.exports=eC;var WM=Qk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tC=Yo,pn=WM;function We(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rC=new Set,sc={};function Zs(r,n){ya(r,n),ya(r+"Capture",n)}function ya(r,n){for(sc[r]=n,r=0;r<n.length;r++)rC.add(n[r])}var no=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oT=Object.prototype.hasOwnProperty,jM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dI={},fI={};function zM(r){return oT.call(fI,r)?!0:oT.call(dI,r)?!1:jM.test(r)?fI[r]=!0:(dI[r]=!0,!1)}function XM(r,n,i,s){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function YM(r,n,i,s){if(n===null||typeof n>"u"||XM(r,n,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Vr(r,n,i,s,a,u,h){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=i,this.propertyName=r,this.type=n,this.sanitizeURL=u,this.removeEmptyString=h}var Sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Sr[r]=new Vr(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var n=r[0];Sr[n]=new Vr(n,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Sr[r]=new Vr(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Sr[r]=new Vr(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Sr[r]=new Vr(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Sr[r]=new Vr(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Sr[r]=new Vr(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Sr[r]=new Vr(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Sr[r]=new Vr(r,5,!1,r.toLowerCase(),null,!1,!1)});var Gv=/[\-:]([a-z])/g;function Vv(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var n=r.replace(Gv,Vv);Sr[n]=new Vr(n,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var n=r.replace(Gv,Vv);Sr[n]=new Vr(n,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var n=r.replace(Gv,Vv);Sr[n]=new Vr(n,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Sr[r]=new Vr(r,1,!1,r.toLowerCase(),null,!1,!1)});Sr.xlinkHref=new Vr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Sr[r]=new Vr(r,1,!1,r.toLowerCase(),null,!0,!0)});function Wv(r,n,i,s){var a=Sr.hasOwnProperty(n)?Sr[n]:null;(a!==null?a.type!==0:s||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(YM(n,i,a,s)&&(i=null),s||a===null?zM(n)&&(i===null?r.removeAttribute(n):r.setAttribute(n,""+i)):a.mustUseProperty?r[a.propertyName]=i===null?a.type===3?!1:"":i:(n=a.attributeName,s=a.attributeNamespace,i===null?r.removeAttribute(n):(a=a.type,i=a===3||a===4&&i===!0?"":""+i,s?r.setAttributeNS(s,n,i):r.setAttribute(n,i))))}var ao=tC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ad=Symbol.for("react.element"),Zl=Symbol.for("react.portal"),Jl=Symbol.for("react.fragment"),jv=Symbol.for("react.strict_mode"),sT=Symbol.for("react.profiler"),nC=Symbol.for("react.provider"),iC=Symbol.for("react.context"),zv=Symbol.for("react.forward_ref"),lT=Symbol.for("react.suspense"),aT=Symbol.for("react.suspense_list"),Xv=Symbol.for("react.memo"),xo=Symbol.for("react.lazy"),oC=Symbol.for("react.offscreen"),pI=Symbol.iterator;function Nu(r){return r===null||typeof r!="object"?null:(r=pI&&r[pI]||r["@@iterator"],typeof r=="function"?r:null)}var Kt=Object.assign,Q$;function Vu(r){if(Q$===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Q$=n&&n[1]||""}return`
`+Q$+r}var e_=!1;function t_(r,n){if(!r||e_)return"";e_=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(T){var s=T}Reflect.construct(r,[],n)}else{try{n.call()}catch(T){s=T}r.call(n.prototype)}else{try{throw Error()}catch(T){s=T}r()}}catch(T){if(T&&s&&typeof T.stack=="string"){for(var a=T.stack.split(`
`),u=s.stack.split(`
`),h=a.length-1,d=u.length-1;1<=h&&0<=d&&a[h]!==u[d];)d--;for(;1<=h&&0<=d;h--,d--)if(a[h]!==u[d]){if(h!==1||d!==1)do if(h--,d--,0>d||a[h]!==u[d]){var p=`
`+a[h].replace(" at new "," at ");return r.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",r.displayName)),p}while(1<=h&&0<=d);break}}}finally{e_=!1,Error.prepareStackTrace=i}return(r=r?r.displayName||r.name:"")?Vu(r):""}function KM(r){switch(r.tag){case 5:return Vu(r.type);case 16:return Vu("Lazy");case 13:return Vu("Suspense");case 19:return Vu("SuspenseList");case 0:case 2:case 15:return r=t_(r.type,!1),r;case 11:return r=t_(r.type.render,!1),r;case 1:return r=t_(r.type,!0),r;default:return""}}function uT(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Jl:return"Fragment";case Zl:return"Portal";case sT:return"Profiler";case jv:return"StrictMode";case lT:return"Suspense";case aT:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case iC:return(r.displayName||"Context")+".Consumer";case nC:return(r._context.displayName||"Context")+".Provider";case zv:var n=r.render;return r=r.displayName,r||(r=n.displayName||n.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Xv:return n=r.displayName||null,n!==null?n:uT(r.type)||"Memo";case xo:n=r._payload,r=r._init;try{return uT(r(n))}catch{}}return null}function qM(r){var n=r.type;switch(r.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=n.render,r=r.displayName||r.name||"",n.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uT(n);case 8:return n===jv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Ko(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function sC(r){var n=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ZM(r){var n=sC(r)?"checked":"value",i=Object.getOwnPropertyDescriptor(r.constructor.prototype,n),s=""+r[n];if(!r.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,u=i.set;return Object.defineProperty(r,n,{configurable:!0,get:function(){return a.call(this)},set:function(h){s=""+h,u.call(this,h)}}),Object.defineProperty(r,n,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(h){s=""+h},stopTracking:function(){r._valueTracker=null,delete r[n]}}}}function ud(r){r._valueTracker||(r._valueTracker=ZM(r))}function lC(r){if(!r)return!1;var n=r._valueTracker;if(!n)return!0;var i=n.getValue(),s="";return r&&(s=sC(r)?r.checked?"true":"false":r.value),r=s,r!==i?(n.setValue(r),!0):!1}function Qd(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function cT(r,n){var i=n.checked;return Kt({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??r._wrapperState.initialChecked})}function gI(r,n){var i=n.defaultValue==null?"":n.defaultValue,s=n.checked!=null?n.checked:n.defaultChecked;i=Ko(n.value!=null?n.value:i),r._wrapperState={initialChecked:s,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function aC(r,n){n=n.checked,n!=null&&Wv(r,"checked",n,!1)}function hT(r,n){aC(r,n);var i=Ko(n.value),s=n.type;if(i!=null)s==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+i):r.value!==""+i&&(r.value=""+i);else if(s==="submit"||s==="reset"){r.removeAttribute("value");return}n.hasOwnProperty("value")?dT(r,n.type,i):n.hasOwnProperty("defaultValue")&&dT(r,n.type,Ko(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(r.defaultChecked=!!n.defaultChecked)}function mI(r,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var s=n.type;if(!(s!=="submit"&&s!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+r._wrapperState.initialValue,i||n===r.value||(r.value=n),r.defaultValue=n}i=r.name,i!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,i!==""&&(r.name=i)}function dT(r,n,i){(n!=="number"||Qd(r.ownerDocument)!==r)&&(i==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+i&&(r.defaultValue=""+i))}var Wu=Array.isArray;function ha(r,n,i,s){if(r=r.options,n){n={};for(var a=0;a<i.length;a++)n["$"+i[a]]=!0;for(i=0;i<r.length;i++)a=n.hasOwnProperty("$"+r[i].value),r[i].selected!==a&&(r[i].selected=a),a&&s&&(r[i].defaultSelected=!0)}else{for(i=""+Ko(i),n=null,a=0;a<r.length;a++){if(r[a].value===i){r[a].selected=!0,s&&(r[a].defaultSelected=!0);return}n!==null||r[a].disabled||(n=r[a])}n!==null&&(n.selected=!0)}}function fT(r,n){if(n.dangerouslySetInnerHTML!=null)throw Error(We(91));return Kt({},n,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function $I(r,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(We(92));if(Wu(i)){if(1<i.length)throw Error(We(93));i=i[0]}n=i}n==null&&(n=""),i=n}r._wrapperState={initialValue:Ko(i)}}function uC(r,n){var i=Ko(n.value),s=Ko(n.defaultValue);i!=null&&(i=""+i,i!==r.value&&(r.value=i),n.defaultValue==null&&r.defaultValue!==i&&(r.defaultValue=i)),s!=null&&(r.defaultValue=""+s)}function _I(r){var n=r.textContent;n===r._wrapperState.initialValue&&n!==""&&n!==null&&(r.value=n)}function cC(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pT(r,n){return r==null||r==="http://www.w3.org/1999/xhtml"?cC(n):r==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var cd,hC=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,s,a){MSApp.execUnsafeLocalFunction(function(){return r(n,i,s,a)})}:r}(function(r,n){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=n;else{for(cd=cd||document.createElement("div"),cd.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=cd.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;n.firstChild;)r.appendChild(n.firstChild)}});function lc(r,n){if(n){var i=r.firstChild;if(i&&i===r.lastChild&&i.nodeType===3){i.nodeValue=n;return}}r.textContent=n}var Ku={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JM=["Webkit","ms","Moz","O"];Object.keys(Ku).forEach(function(r){JM.forEach(function(n){n=n+r.charAt(0).toUpperCase()+r.substring(1),Ku[n]=Ku[r]})});function dC(r,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||Ku.hasOwnProperty(r)&&Ku[r]?(""+n).trim():n+"px"}function fC(r,n){r=r.style;for(var i in n)if(n.hasOwnProperty(i)){var s=i.indexOf("--")===0,a=dC(i,n[i],s);i==="float"&&(i="cssFloat"),s?r.setProperty(i,a):r[i]=a}}var QM=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gT(r,n){if(n){if(QM[r]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(We(137,r));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(We(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(We(61))}if(n.style!=null&&typeof n.style!="object")throw Error(We(62))}}function mT(r,n){if(r.indexOf("-")===-1)return typeof n.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $T=null;function Yv(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _T=null,da=null,fa=null;function EI(r){if(r=Lc(r)){if(typeof _T!="function")throw Error(We(280));var n=r.stateNode;n&&(n=Vf(n),_T(r.stateNode,r.type,n))}}function pC(r){da?fa?fa.push(r):fa=[r]:da=r}function gC(){if(da){var r=da,n=fa;if(fa=da=null,EI(r),n)for(r=0;r<n.length;r++)EI(n[r])}}function mC(r,n){return r(n)}function $C(){}var r_=!1;function _C(r,n,i){if(r_)return r(n,i);r_=!0;try{return mC(r,n,i)}finally{r_=!1,(da!==null||fa!==null)&&($C(),gC())}}function ac(r,n){var i=r.stateNode;if(i===null)return null;var s=Vf(i);if(s===null)return null;i=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(r=r.type,s=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!s;break e;default:r=!1}if(r)return null;if(i&&typeof i!="function")throw Error(We(231,n,typeof i));return i}var ET=!1;if(no)try{var xu={};Object.defineProperty(xu,"passive",{get:function(){ET=!0}}),window.addEventListener("test",xu,xu),window.removeEventListener("test",xu,xu)}catch{ET=!1}function e1(r,n,i,s,a,u,h,d,p){var T=Array.prototype.slice.call(arguments,3);try{n.apply(i,T)}catch(E){this.onError(E)}}var qu=!1,ef=null,tf=!1,TT=null,t1={onError:function(r){qu=!0,ef=r}};function r1(r,n,i,s,a,u,h,d,p){qu=!1,ef=null,e1.apply(t1,arguments)}function n1(r,n,i,s,a,u,h,d,p){if(r1.apply(this,arguments),qu){if(qu){var T=ef;qu=!1,ef=null}else throw Error(We(198));tf||(tf=!0,TT=T)}}function Js(r){var n=r,i=r;if(r.alternate)for(;n.return;)n=n.return;else{r=n;do n=r,n.flags&4098&&(i=n.return),r=n.return;while(r)}return n.tag===3?i:null}function EC(r){if(r.tag===13){var n=r.memoizedState;if(n===null&&(r=r.alternate,r!==null&&(n=r.memoizedState)),n!==null)return n.dehydrated}return null}function TI(r){if(Js(r)!==r)throw Error(We(188))}function i1(r){var n=r.alternate;if(!n){if(n=Js(r),n===null)throw Error(We(188));return n!==r?null:r}for(var i=r,s=n;;){var a=i.return;if(a===null)break;var u=a.alternate;if(u===null){if(s=a.return,s!==null){i=s;continue}break}if(a.child===u.child){for(u=a.child;u;){if(u===i)return TI(a),r;if(u===s)return TI(a),n;u=u.sibling}throw Error(We(188))}if(i.return!==s.return)i=a,s=u;else{for(var h=!1,d=a.child;d;){if(d===i){h=!0,i=a,s=u;break}if(d===s){h=!0,s=a,i=u;break}d=d.sibling}if(!h){for(d=u.child;d;){if(d===i){h=!0,i=u,s=a;break}if(d===s){h=!0,s=u,i=a;break}d=d.sibling}if(!h)throw Error(We(189))}}if(i.alternate!==s)throw Error(We(190))}if(i.tag!==3)throw Error(We(188));return i.stateNode.current===i?r:n}function TC(r){return r=i1(r),r!==null?vC(r):null}function vC(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var n=vC(r);if(n!==null)return n;r=r.sibling}return null}var bC=pn.unstable_scheduleCallback,vI=pn.unstable_cancelCallback,o1=pn.unstable_shouldYield,s1=pn.unstable_requestPaint,or=pn.unstable_now,l1=pn.unstable_getCurrentPriorityLevel,Kv=pn.unstable_ImmediatePriority,yC=pn.unstable_UserBlockingPriority,rf=pn.unstable_NormalPriority,a1=pn.unstable_LowPriority,wC=pn.unstable_IdlePriority,Ff=null,ki=null;function u1(r){if(ki&&typeof ki.onCommitFiberRoot=="function")try{ki.onCommitFiberRoot(Ff,r,void 0,(r.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:d1,c1=Math.log,h1=Math.LN2;function d1(r){return r>>>=0,r===0?32:31-(c1(r)/h1|0)|0}var hd=64,dd=4194304;function ju(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function nf(r,n){var i=r.pendingLanes;if(i===0)return 0;var s=0,a=r.suspendedLanes,u=r.pingedLanes,h=i&268435455;if(h!==0){var d=h&~a;d!==0?s=ju(d):(u&=h,u!==0&&(s=ju(u)))}else h=i&~a,h!==0?s=ju(h):u!==0&&(s=ju(u));if(s===0)return 0;if(n!==0&&n!==s&&!(n&a)&&(a=s&-s,u=n&-n,a>=u||a===16&&(u&4194240)!==0))return n;if(s&4&&(s|=i&16),n=r.entangledLanes,n!==0)for(r=r.entanglements,n&=s;0<n;)i=31-Qn(n),a=1<<i,s|=r[i],n&=~a;return s}function f1(r,n){switch(r){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function p1(r,n){for(var i=r.suspendedLanes,s=r.pingedLanes,a=r.expirationTimes,u=r.pendingLanes;0<u;){var h=31-Qn(u),d=1<<h,p=a[h];p===-1?(!(d&i)||d&s)&&(a[h]=f1(d,n)):p<=n&&(r.expiredLanes|=d),u&=~d}}function vT(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function SC(){var r=hd;return hd<<=1,!(hd&4194240)&&(hd=64),r}function n_(r){for(var n=[],i=0;31>i;i++)n.push(r);return n}function Cc(r,n,i){r.pendingLanes|=n,n!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,n=31-Qn(n),r[n]=i}function g1(r,n){var i=r.pendingLanes&~n;r.pendingLanes=n,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=n,r.mutableReadLanes&=n,r.entangledLanes&=n,n=r.entanglements;var s=r.eventTimes;for(r=r.expirationTimes;0<i;){var a=31-Qn(i),u=1<<a;n[a]=0,s[a]=-1,r[a]=-1,i&=~u}}function qv(r,n){var i=r.entangledLanes|=n;for(r=r.entanglements;i;){var s=31-Qn(i),a=1<<s;a&n|r[s]&n&&(r[s]|=n),i&=~a}}var Ot=0;function IC(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var OC,Zv,RC,kC,CC,bT=!1,fd=[],Uo=null,Ho=null,Go=null,uc=new Map,cc=new Map,Do=[],m1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bI(r,n){switch(r){case"focusin":case"focusout":Uo=null;break;case"dragenter":case"dragleave":Ho=null;break;case"mouseover":case"mouseout":Go=null;break;case"pointerover":case"pointerout":uc.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(n.pointerId)}}function Mu(r,n,i,s,a,u){return r===null||r.nativeEvent!==u?(r={blockedOn:n,domEventName:i,eventSystemFlags:s,nativeEvent:u,targetContainers:[a]},n!==null&&(n=Lc(n),n!==null&&Zv(n)),r):(r.eventSystemFlags|=s,n=r.targetContainers,a!==null&&n.indexOf(a)===-1&&n.push(a),r)}function $1(r,n,i,s,a){switch(n){case"focusin":return Uo=Mu(Uo,r,n,i,s,a),!0;case"dragenter":return Ho=Mu(Ho,r,n,i,s,a),!0;case"mouseover":return Go=Mu(Go,r,n,i,s,a),!0;case"pointerover":var u=a.pointerId;return uc.set(u,Mu(uc.get(u)||null,r,n,i,s,a)),!0;case"gotpointercapture":return u=a.pointerId,cc.set(u,Mu(cc.get(u)||null,r,n,i,s,a)),!0}return!1}function AC(r){var n=Ms(r.target);if(n!==null){var i=Js(n);if(i!==null){if(n=i.tag,n===13){if(n=EC(i),n!==null){r.blockedOn=n,CC(r.priority,function(){RC(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){r.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Md(r){if(r.blockedOn!==null)return!1;for(var n=r.targetContainers;0<n.length;){var i=yT(r.domEventName,r.eventSystemFlags,n[0],r.nativeEvent);if(i===null){i=r.nativeEvent;var s=new i.constructor(i.type,i);$T=s,i.target.dispatchEvent(s),$T=null}else return n=Lc(i),n!==null&&Zv(n),r.blockedOn=i,!1;n.shift()}return!0}function yI(r,n,i){Md(r)&&i.delete(n)}function _1(){bT=!1,Uo!==null&&Md(Uo)&&(Uo=null),Ho!==null&&Md(Ho)&&(Ho=null),Go!==null&&Md(Go)&&(Go=null),uc.forEach(yI),cc.forEach(yI)}function Du(r,n){r.blockedOn===n&&(r.blockedOn=null,bT||(bT=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,_1)))}function hc(r){function n(a){return Du(a,r)}if(0<fd.length){Du(fd[0],r);for(var i=1;i<fd.length;i++){var s=fd[i];s.blockedOn===r&&(s.blockedOn=null)}}for(Uo!==null&&Du(Uo,r),Ho!==null&&Du(Ho,r),Go!==null&&Du(Go,r),uc.forEach(n),cc.forEach(n),i=0;i<Do.length;i++)s=Do[i],s.blockedOn===r&&(s.blockedOn=null);for(;0<Do.length&&(i=Do[0],i.blockedOn===null);)AC(i),i.blockedOn===null&&Do.shift()}var pa=ao.ReactCurrentBatchConfig,of=!0;function E1(r,n,i,s){var a=Ot,u=pa.transition;pa.transition=null;try{Ot=1,Jv(r,n,i,s)}finally{Ot=a,pa.transition=u}}function T1(r,n,i,s){var a=Ot,u=pa.transition;pa.transition=null;try{Ot=4,Jv(r,n,i,s)}finally{Ot=a,pa.transition=u}}function Jv(r,n,i,s){if(of){var a=yT(r,n,i,s);if(a===null)f_(r,n,s,sf,i),bI(r,s);else if($1(a,r,n,i,s))s.stopPropagation();else if(bI(r,s),n&4&&-1<m1.indexOf(r)){for(;a!==null;){var u=Lc(a);if(u!==null&&OC(u),u=yT(r,n,i,s),u===null&&f_(r,n,s,sf,i),u===a)break;a=u}a!==null&&s.stopPropagation()}else f_(r,n,s,null,i)}}var sf=null;function yT(r,n,i,s){if(sf=null,r=Yv(s),r=Ms(r),r!==null)if(n=Js(r),n===null)r=null;else if(i=n.tag,i===13){if(r=EC(n),r!==null)return r;r=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null);return sf=r,null}function LC(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l1()){case Kv:return 1;case yC:return 4;case rf:case a1:return 16;case wC:return 536870912;default:return 16}default:return 16}}var Bo=null,Qv=null,Dd=null;function NC(){if(Dd)return Dd;var r,n=Qv,i=n.length,s,a="value"in Bo?Bo.value:Bo.textContent,u=a.length;for(r=0;r<i&&n[r]===a[r];r++);var h=i-r;for(s=1;s<=h&&n[i-s]===a[u-s];s++);return Dd=a.slice(r,1<s?1-s:void 0)}function Pd(r){var n=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&n===13&&(r=13)):r=n,r===10&&(r=13),32<=r||r===13?r:0}function pd(){return!0}function wI(){return!1}function mn(r){function n(i,s,a,u,h){this._reactName=i,this._targetInst=a,this.type=s,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var d in r)r.hasOwnProperty(d)&&(i=r[d],this[d]=i?i(u):u[d]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?pd:wI,this.isPropagationStopped=wI,this}return Kt(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),n}var Ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eb=mn(Ba),Ac=Kt({},Ba,{view:0,detail:0}),v1=mn(Ac),i_,o_,Pu,Uf=Kt({},Ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tb,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Pu&&(Pu&&r.type==="mousemove"?(i_=r.screenX-Pu.screenX,o_=r.screenY-Pu.screenY):o_=i_=0,Pu=r),i_)},movementY:function(r){return"movementY"in r?r.movementY:o_}}),SI=mn(Uf),b1=Kt({},Uf,{dataTransfer:0}),y1=mn(b1),w1=Kt({},Ac,{relatedTarget:0}),s_=mn(w1),S1=Kt({},Ba,{animationName:0,elapsedTime:0,pseudoElement:0}),I1=mn(S1),O1=Kt({},Ba,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),R1=mn(O1),k1=Kt({},Ba,{data:0}),II=mn(k1),C1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N1(r){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(r):(r=L1[r])?!!n[r]:!1}function tb(){return N1}var x1=Kt({},Ac,{key:function(r){if(r.key){var n=C1[r.key]||r.key;if(n!=="Unidentified")return n}return r.type==="keypress"?(r=Pd(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?A1[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tb,charCode:function(r){return r.type==="keypress"?Pd(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Pd(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),M1=mn(x1),D1=Kt({},Uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),OI=mn(D1),P1=Kt({},Ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tb}),B1=mn(P1),F1=Kt({},Ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),U1=mn(F1),H1=Kt({},Uf,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),G1=mn(H1),V1=[9,13,27,32],rb=no&&"CompositionEvent"in window,Zu=null;no&&"documentMode"in document&&(Zu=document.documentMode);var W1=no&&"TextEvent"in window&&!Zu,xC=no&&(!rb||Zu&&8<Zu&&11>=Zu),RI=String.fromCharCode(32),kI=!1;function MC(r,n){switch(r){case"keyup":return V1.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DC(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ql=!1;function j1(r,n){switch(r){case"compositionend":return DC(n);case"keypress":return n.which!==32?null:(kI=!0,RI);case"textInput":return r=n.data,r===RI&&kI?null:r;default:return null}}function z1(r,n){if(Ql)return r==="compositionend"||!rb&&MC(r,n)?(r=NC(),Dd=Qv=Bo=null,Ql=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return xC&&n.locale!=="ko"?null:n.data;default:return null}}var X1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CI(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n==="input"?!!X1[r.type]:n==="textarea"}function PC(r,n,i,s){pC(s),n=lf(n,"onChange"),0<n.length&&(i=new eb("onChange","change",null,i,s),r.push({event:i,listeners:n}))}var Ju=null,dc=null;function Y1(r){YC(r,0)}function Hf(r){var n=ra(r);if(lC(n))return r}function K1(r,n){if(r==="change")return n}var BC=!1;if(no){var l_;if(no){var a_="oninput"in document;if(!a_){var AI=document.createElement("div");AI.setAttribute("oninput","return;"),a_=typeof AI.oninput=="function"}l_=a_}else l_=!1;BC=l_&&(!document.documentMode||9<document.documentMode)}function LI(){Ju&&(Ju.detachEvent("onpropertychange",FC),dc=Ju=null)}function FC(r){if(r.propertyName==="value"&&Hf(dc)){var n=[];PC(n,dc,r,Yv(r)),_C(Y1,n)}}function q1(r,n,i){r==="focusin"?(LI(),Ju=n,dc=i,Ju.attachEvent("onpropertychange",FC)):r==="focusout"&&LI()}function Z1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Hf(dc)}function J1(r,n){if(r==="click")return Hf(n)}function Q1(r,n){if(r==="input"||r==="change")return Hf(n)}function eD(r,n){return r===n&&(r!==0||1/r===1/n)||r!==r&&n!==n}var ti=typeof Object.is=="function"?Object.is:eD;function fc(r,n){if(ti(r,n))return!0;if(typeof r!="object"||r===null||typeof n!="object"||n===null)return!1;var i=Object.keys(r),s=Object.keys(n);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var a=i[s];if(!oT.call(n,a)||!ti(r[a],n[a]))return!1}return!0}function NI(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xI(r,n){var i=NI(r);r=0;for(var s;i;){if(i.nodeType===3){if(s=r+i.textContent.length,r<=n&&s>=n)return{node:i,offset:n-r};r=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=NI(i)}}function UC(r,n){return r&&n?r===n?!0:r&&r.nodeType===3?!1:n&&n.nodeType===3?UC(r,n.parentNode):"contains"in r?r.contains(n):r.compareDocumentPosition?!!(r.compareDocumentPosition(n)&16):!1:!1}function HC(){for(var r=window,n=Qd();n instanceof r.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)r=n.contentWindow;else break;n=Qd(r.document)}return n}function nb(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n&&(n==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||n==="textarea"||r.contentEditable==="true")}function tD(r){var n=HC(),i=r.focusedElem,s=r.selectionRange;if(n!==i&&i&&i.ownerDocument&&UC(i.ownerDocument.documentElement,i)){if(s!==null&&nb(i)){if(n=s.start,r=s.end,r===void 0&&(r=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(r,i.value.length);else if(r=(n=i.ownerDocument||document)&&n.defaultView||window,r.getSelection){r=r.getSelection();var a=i.textContent.length,u=Math.min(s.start,a);s=s.end===void 0?u:Math.min(s.end,a),!r.extend&&u>s&&(a=s,s=u,u=a),a=xI(i,u);var h=xI(i,s);a&&h&&(r.rangeCount!==1||r.anchorNode!==a.node||r.anchorOffset!==a.offset||r.focusNode!==h.node||r.focusOffset!==h.offset)&&(n=n.createRange(),n.setStart(a.node,a.offset),r.removeAllRanges(),u>s?(r.addRange(n),r.extend(h.node,h.offset)):(n.setEnd(h.node,h.offset),r.addRange(n)))}}for(n=[],r=i;r=r.parentNode;)r.nodeType===1&&n.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)r=n[i],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var rD=no&&"documentMode"in document&&11>=document.documentMode,ea=null,wT=null,Qu=null,ST=!1;function MI(r,n,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ST||ea==null||ea!==Qd(s)||(s=ea,"selectionStart"in s&&nb(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Qu&&fc(Qu,s)||(Qu=s,s=lf(wT,"onSelect"),0<s.length&&(n=new eb("onSelect","select",null,n,i),r.push({event:n,listeners:s}),n.target=ea)))}function gd(r,n){var i={};return i[r.toLowerCase()]=n.toLowerCase(),i["Webkit"+r]="webkit"+n,i["Moz"+r]="moz"+n,i}var ta={animationend:gd("Animation","AnimationEnd"),animationiteration:gd("Animation","AnimationIteration"),animationstart:gd("Animation","AnimationStart"),transitionend:gd("Transition","TransitionEnd")},u_={},GC={};no&&(GC=document.createElement("div").style,"AnimationEvent"in window||(delete ta.animationend.animation,delete ta.animationiteration.animation,delete ta.animationstart.animation),"TransitionEvent"in window||delete ta.transitionend.transition);function Gf(r){if(u_[r])return u_[r];if(!ta[r])return r;var n=ta[r],i;for(i in n)if(n.hasOwnProperty(i)&&i in GC)return u_[r]=n[i];return r}var VC=Gf("animationend"),WC=Gf("animationiteration"),jC=Gf("animationstart"),zC=Gf("transitionend"),XC=new Map,DI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qo(r,n){XC.set(r,n),Zs(n,[r])}for(var c_=0;c_<DI.length;c_++){var h_=DI[c_],nD=h_.toLowerCase(),iD=h_[0].toUpperCase()+h_.slice(1);Qo(nD,"on"+iD)}Qo(VC,"onAnimationEnd");Qo(WC,"onAnimationIteration");Qo(jC,"onAnimationStart");Qo("dblclick","onDoubleClick");Qo("focusin","onFocus");Qo("focusout","onBlur");Qo(zC,"onTransitionEnd");ya("onMouseEnter",["mouseout","mouseover"]);ya("onMouseLeave",["mouseout","mouseover"]);ya("onPointerEnter",["pointerout","pointerover"]);ya("onPointerLeave",["pointerout","pointerover"]);Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oD=new Set("cancel close invalid load scroll toggle".split(" ").concat(zu));function PI(r,n,i){var s=r.type||"unknown-event";r.currentTarget=i,n1(s,n,void 0,r),r.currentTarget=null}function YC(r,n){n=(n&4)!==0;for(var i=0;i<r.length;i++){var s=r[i],a=s.event;s=s.listeners;e:{var u=void 0;if(n)for(var h=s.length-1;0<=h;h--){var d=s[h],p=d.instance,T=d.currentTarget;if(d=d.listener,p!==u&&a.isPropagationStopped())break e;PI(a,d,T),u=p}else for(h=0;h<s.length;h++){if(d=s[h],p=d.instance,T=d.currentTarget,d=d.listener,p!==u&&a.isPropagationStopped())break e;PI(a,d,T),u=p}}}if(tf)throw r=TT,tf=!1,TT=null,r}function Ft(r,n){var i=n[CT];i===void 0&&(i=n[CT]=new Set);var s=r+"__bubble";i.has(s)||(KC(n,r,2,!1),i.add(s))}function d_(r,n,i){var s=0;n&&(s|=4),KC(i,r,s,n)}var md="_reactListening"+Math.random().toString(36).slice(2);function pc(r){if(!r[md]){r[md]=!0,rC.forEach(function(i){i!=="selectionchange"&&(oD.has(i)||d_(i,!1,r),d_(i,!0,r))});var n=r.nodeType===9?r:r.ownerDocument;n===null||n[md]||(n[md]=!0,d_("selectionchange",!1,n))}}function KC(r,n,i,s){switch(LC(n)){case 1:var a=E1;break;case 4:a=T1;break;default:a=Jv}i=a.bind(null,n,i,r),a=void 0,!ET||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(a=!0),s?a!==void 0?r.addEventListener(n,i,{capture:!0,passive:a}):r.addEventListener(n,i,!0):a!==void 0?r.addEventListener(n,i,{passive:a}):r.addEventListener(n,i,!1)}function f_(r,n,i,s,a){var u=s;if(!(n&1)&&!(n&2)&&s!==null)e:for(;;){if(s===null)return;var h=s.tag;if(h===3||h===4){var d=s.stateNode.containerInfo;if(d===a||d.nodeType===8&&d.parentNode===a)break;if(h===4)for(h=s.return;h!==null;){var p=h.tag;if((p===3||p===4)&&(p=h.stateNode.containerInfo,p===a||p.nodeType===8&&p.parentNode===a))return;h=h.return}for(;d!==null;){if(h=Ms(d),h===null)return;if(p=h.tag,p===5||p===6){s=u=h;continue e}d=d.parentNode}}s=s.return}_C(function(){var T=u,E=Yv(i),y=[];e:{var S=XC.get(r);if(S!==void 0){var x=eb,B=r;switch(r){case"keypress":if(Pd(i)===0)break e;case"keydown":case"keyup":x=M1;break;case"focusin":B="focus",x=s_;break;case"focusout":B="blur",x=s_;break;case"beforeblur":case"afterblur":x=s_;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=SI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=y1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=B1;break;case VC:case WC:case jC:x=I1;break;case zC:x=U1;break;case"scroll":x=v1;break;case"wheel":x=G1;break;case"copy":case"cut":case"paste":x=R1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=OI}var H=(n&4)!==0,W=!H&&r==="scroll",$=H?S!==null?S+"Capture":null:S;H=[];for(var m=T,I;m!==null;){I=m;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,$!==null&&(D=ac(m,$),D!=null&&H.push(gc(m,D,I)))),W)break;m=m.return}0<H.length&&(S=new x(S,B,null,i,E),y.push({event:S,listeners:H}))}}if(!(n&7)){e:{if(S=r==="mouseover"||r==="pointerover",x=r==="mouseout"||r==="pointerout",S&&i!==$T&&(B=i.relatedTarget||i.fromElement)&&(Ms(B)||B[io]))break e;if((x||S)&&(S=E.window===E?E:(S=E.ownerDocument)?S.defaultView||S.parentWindow:window,x?(B=i.relatedTarget||i.toElement,x=T,B=B?Ms(B):null,B!==null&&(W=Js(B),B!==W||B.tag!==5&&B.tag!==6)&&(B=null)):(x=null,B=T),x!==B)){if(H=SI,D="onMouseLeave",$="onMouseEnter",m="mouse",(r==="pointerout"||r==="pointerover")&&(H=OI,D="onPointerLeave",$="onPointerEnter",m="pointer"),W=x==null?S:ra(x),I=B==null?S:ra(B),S=new H(D,m+"leave",x,i,E),S.target=W,S.relatedTarget=I,D=null,Ms(E)===T&&(H=new H($,m+"enter",B,i,E),H.target=I,H.relatedTarget=W,D=H),W=D,x&&B)t:{for(H=x,$=B,m=0,I=H;I;I=Xl(I))m++;for(I=0,D=$;D;D=Xl(D))I++;for(;0<m-I;)H=Xl(H),m--;for(;0<I-m;)$=Xl($),I--;for(;m--;){if(H===$||$!==null&&H===$.alternate)break t;H=Xl(H),$=Xl($)}H=null}else H=null;x!==null&&BI(y,S,x,H,!1),B!==null&&W!==null&&BI(y,W,B,H,!0)}}e:{if(S=T?ra(T):window,x=S.nodeName&&S.nodeName.toLowerCase(),x==="select"||x==="input"&&S.type==="file")var C=K1;else if(CI(S))if(BC)C=Q1;else{C=Z1;var U=q1}else(x=S.nodeName)&&x.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(C=J1);if(C&&(C=C(r,T))){PC(y,C,i,E);break e}U&&U(r,S,T),r==="focusout"&&(U=S._wrapperState)&&U.controlled&&S.type==="number"&&dT(S,"number",S.value)}switch(U=T?ra(T):window,r){case"focusin":(CI(U)||U.contentEditable==="true")&&(ea=U,wT=T,Qu=null);break;case"focusout":Qu=wT=ea=null;break;case"mousedown":ST=!0;break;case"contextmenu":case"mouseup":case"dragend":ST=!1,MI(y,i,E);break;case"selectionchange":if(rD)break;case"keydown":case"keyup":MI(y,i,E)}var V;if(rb)e:{switch(r){case"compositionstart":var te="onCompositionStart";break e;case"compositionend":te="onCompositionEnd";break e;case"compositionupdate":te="onCompositionUpdate";break e}te=void 0}else Ql?MC(r,i)&&(te="onCompositionEnd"):r==="keydown"&&i.keyCode===229&&(te="onCompositionStart");te&&(xC&&i.locale!=="ko"&&(Ql||te!=="onCompositionStart"?te==="onCompositionEnd"&&Ql&&(V=NC()):(Bo=E,Qv="value"in Bo?Bo.value:Bo.textContent,Ql=!0)),U=lf(T,te),0<U.length&&(te=new II(te,r,null,i,E),y.push({event:te,listeners:U}),V?te.data=V:(V=DC(i),V!==null&&(te.data=V)))),(V=W1?j1(r,i):z1(r,i))&&(T=lf(T,"onBeforeInput"),0<T.length&&(E=new II("onBeforeInput","beforeinput",null,i,E),y.push({event:E,listeners:T}),E.data=V))}YC(y,n)})}function gc(r,n,i){return{instance:r,listener:n,currentTarget:i}}function lf(r,n){for(var i=n+"Capture",s=[];r!==null;){var a=r,u=a.stateNode;a.tag===5&&u!==null&&(a=u,u=ac(r,i),u!=null&&s.unshift(gc(r,u,a)),u=ac(r,n),u!=null&&s.push(gc(r,u,a))),r=r.return}return s}function Xl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function BI(r,n,i,s,a){for(var u=n._reactName,h=[];i!==null&&i!==s;){var d=i,p=d.alternate,T=d.stateNode;if(p!==null&&p===s)break;d.tag===5&&T!==null&&(d=T,a?(p=ac(i,u),p!=null&&h.unshift(gc(i,p,d))):a||(p=ac(i,u),p!=null&&h.push(gc(i,p,d)))),i=i.return}h.length!==0&&r.push({event:n,listeners:h})}var sD=/\r\n?/g,lD=/\u0000|\uFFFD/g;function FI(r){return(typeof r=="string"?r:""+r).replace(sD,`
`).replace(lD,"")}function $d(r,n,i){if(n=FI(n),FI(r)!==n&&i)throw Error(We(425))}function af(){}var IT=null,OT=null;function RT(r,n){return r==="textarea"||r==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var kT=typeof setTimeout=="function"?setTimeout:void 0,aD=typeof clearTimeout=="function"?clearTimeout:void 0,UI=typeof Promise=="function"?Promise:void 0,uD=typeof queueMicrotask=="function"?queueMicrotask:typeof UI<"u"?function(r){return UI.resolve(null).then(r).catch(cD)}:kT;function cD(r){setTimeout(function(){throw r})}function p_(r,n){var i=n,s=0;do{var a=i.nextSibling;if(r.removeChild(i),a&&a.nodeType===8)if(i=a.data,i==="/$"){if(s===0){r.removeChild(a),hc(n);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=a}while(i);hc(n)}function Vo(r){for(;r!=null;r=r.nextSibling){var n=r.nodeType;if(n===1||n===3)break;if(n===8){if(n=r.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return r}function HI(r){r=r.previousSibling;for(var n=0;r;){if(r.nodeType===8){var i=r.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return r;n--}else i==="/$"&&n++}r=r.previousSibling}return null}var Fa=Math.random().toString(36).slice(2),Oi="__reactFiber$"+Fa,mc="__reactProps$"+Fa,io="__reactContainer$"+Fa,CT="__reactEvents$"+Fa,hD="__reactListeners$"+Fa,dD="__reactHandles$"+Fa;function Ms(r){var n=r[Oi];if(n)return n;for(var i=r.parentNode;i;){if(n=i[io]||i[Oi]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(r=HI(r);r!==null;){if(i=r[Oi])return i;r=HI(r)}return n}r=i,i=r.parentNode}return null}function Lc(r){return r=r[Oi]||r[io],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ra(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(We(33))}function Vf(r){return r[mc]||null}var AT=[],na=-1;function es(r){return{current:r}}function Ut(r){0>na||(r.current=AT[na],AT[na]=null,na--)}function Bt(r,n){na++,AT[na]=r.current,r.current=n}var qo={},Lr=es(qo),en=es(!1),Vs=qo;function wa(r,n){var i=r.type.contextTypes;if(!i)return qo;var s=r.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===n)return s.__reactInternalMemoizedMaskedChildContext;var a={},u;for(u in i)a[u]=n[u];return s&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=a),a}function tn(r){return r=r.childContextTypes,r!=null}function uf(){Ut(en),Ut(Lr)}function GI(r,n,i){if(Lr.current!==qo)throw Error(We(168));Bt(Lr,n),Bt(en,i)}function qC(r,n,i){var s=r.stateNode;if(n=n.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var a in s)if(!(a in n))throw Error(We(108,qM(r)||"Unknown",a));return Kt({},i,s)}function cf(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||qo,Vs=Lr.current,Bt(Lr,r),Bt(en,en.current),!0}function VI(r,n,i){var s=r.stateNode;if(!s)throw Error(We(169));i?(r=qC(r,n,Vs),s.__reactInternalMemoizedMergedChildContext=r,Ut(en),Ut(Lr),Bt(Lr,r)):Ut(en),Bt(en,i)}var Zi=null,Wf=!1,g_=!1;function ZC(r){Zi===null?Zi=[r]:Zi.push(r)}function fD(r){Wf=!0,ZC(r)}function ts(){if(!g_&&Zi!==null){g_=!0;var r=0,n=Ot;try{var i=Zi;for(Ot=1;r<i.length;r++){var s=i[r];do s=s(!0);while(s!==null)}Zi=null,Wf=!1}catch(a){throw Zi!==null&&(Zi=Zi.slice(r+1)),bC(Kv,ts),a}finally{Ot=n,g_=!1}}return null}var ia=[],oa=0,hf=null,df=0,On=[],Rn=0,Ws=null,Ji=1,Qi="";function Ns(r,n){ia[oa++]=df,ia[oa++]=hf,hf=r,df=n}function JC(r,n,i){On[Rn++]=Ji,On[Rn++]=Qi,On[Rn++]=Ws,Ws=r;var s=Ji;r=Qi;var a=32-Qn(s)-1;s&=~(1<<a),i+=1;var u=32-Qn(n)+a;if(30<u){var h=a-a%5;u=(s&(1<<h)-1).toString(32),s>>=h,a-=h,Ji=1<<32-Qn(n)+a|i<<a|s,Qi=u+r}else Ji=1<<u|i<<a|s,Qi=r}function ib(r){r.return!==null&&(Ns(r,1),JC(r,1,0))}function ob(r){for(;r===hf;)hf=ia[--oa],ia[oa]=null,df=ia[--oa],ia[oa]=null;for(;r===Ws;)Ws=On[--Rn],On[Rn]=null,Qi=On[--Rn],On[Rn]=null,Ji=On[--Rn],On[Rn]=null}var fn=null,dn=null,Wt=!1,Jn=null;function QC(r,n){var i=kn(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=r,n=r.deletions,n===null?(r.deletions=[i],r.flags|=16):n.push(i)}function WI(r,n){switch(r.tag){case 5:var i=r.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(r.stateNode=n,fn=r,dn=Vo(n.firstChild),!0):!1;case 6:return n=r.pendingProps===""||n.nodeType!==3?null:n,n!==null?(r.stateNode=n,fn=r,dn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=Ws!==null?{id:Ji,overflow:Qi}:null,r.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=kn(18,null,null,0),i.stateNode=n,i.return=r,r.child=i,fn=r,dn=null,!0):!1;default:return!1}}function LT(r){return(r.mode&1)!==0&&(r.flags&128)===0}function NT(r){if(Wt){var n=dn;if(n){var i=n;if(!WI(r,n)){if(LT(r))throw Error(We(418));n=Vo(i.nextSibling);var s=fn;n&&WI(r,n)?QC(s,i):(r.flags=r.flags&-4097|2,Wt=!1,fn=r)}}else{if(LT(r))throw Error(We(418));r.flags=r.flags&-4097|2,Wt=!1,fn=r}}}function jI(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;fn=r}function _d(r){if(r!==fn)return!1;if(!Wt)return jI(r),Wt=!0,!1;var n;if((n=r.tag!==3)&&!(n=r.tag!==5)&&(n=r.type,n=n!=="head"&&n!=="body"&&!RT(r.type,r.memoizedProps)),n&&(n=dn)){if(LT(r))throw eA(),Error(We(418));for(;n;)QC(r,n),n=Vo(n.nextSibling)}if(jI(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(We(317));e:{for(r=r.nextSibling,n=0;r;){if(r.nodeType===8){var i=r.data;if(i==="/$"){if(n===0){dn=Vo(r.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}r=r.nextSibling}dn=null}}else dn=fn?Vo(r.stateNode.nextSibling):null;return!0}function eA(){for(var r=dn;r;)r=Vo(r.nextSibling)}function Sa(){dn=fn=null,Wt=!1}function sb(r){Jn===null?Jn=[r]:Jn.push(r)}var pD=ao.ReactCurrentBatchConfig;function Kn(r,n){if(r&&r.defaultProps){n=Kt({},n),r=r.defaultProps;for(var i in r)n[i]===void 0&&(n[i]=r[i]);return n}return n}var ff=es(null),pf=null,sa=null,lb=null;function ab(){lb=sa=pf=null}function ub(r){var n=ff.current;Ut(ff),r._currentValue=n}function xT(r,n,i){for(;r!==null;){var s=r.alternate;if((r.childLanes&n)!==n?(r.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),r===i)break;r=r.return}}function ga(r,n){pf=r,lb=sa=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&n&&(Qr=!0),r.firstContext=null)}function Ln(r){var n=r._currentValue;if(lb!==r)if(r={context:r,memoizedValue:n,next:null},sa===null){if(pf===null)throw Error(We(308));sa=r,pf.dependencies={lanes:0,firstContext:r}}else sa=sa.next=r;return n}var Ds=null;function cb(r){Ds===null?Ds=[r]:Ds.push(r)}function tA(r,n,i,s){var a=n.interleaved;return a===null?(i.next=i,cb(n)):(i.next=a.next,a.next=i),n.interleaved=i,oo(r,s)}function oo(r,n){r.lanes|=n;var i=r.alternate;for(i!==null&&(i.lanes|=n),i=r,r=r.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),i=r,r=r.return;return i.tag===3?i.stateNode:null}var Mo=!1;function hb(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rA(r,n){r=r.updateQueue,n.updateQueue===r&&(n.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function to(r,n){return{eventTime:r,lane:n,tag:0,payload:null,callback:null,next:null}}function Wo(r,n,i){var s=r.updateQueue;if(s===null)return null;if(s=s.shared,St&2){var a=s.pending;return a===null?n.next=n:(n.next=a.next,a.next=n),s.pending=n,oo(r,i)}return a=s.interleaved,a===null?(n.next=n,cb(s)):(n.next=a.next,a.next=n),s.interleaved=n,oo(r,i)}function Bd(r,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var s=n.lanes;s&=r.pendingLanes,i|=s,n.lanes=i,qv(r,i)}}function zI(r,n){var i=r.updateQueue,s=r.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var a=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var h={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};u===null?a=u=h:u=u.next=h,i=i.next}while(i!==null);u===null?a=u=n:u=u.next=n}else a=u=n;i={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:u,shared:s.shared,effects:s.effects},r.updateQueue=i;return}r=i.lastBaseUpdate,r===null?i.firstBaseUpdate=n:r.next=n,i.lastBaseUpdate=n}function gf(r,n,i,s){var a=r.updateQueue;Mo=!1;var u=a.firstBaseUpdate,h=a.lastBaseUpdate,d=a.shared.pending;if(d!==null){a.shared.pending=null;var p=d,T=p.next;p.next=null,h===null?u=T:h.next=T,h=p;var E=r.alternate;E!==null&&(E=E.updateQueue,d=E.lastBaseUpdate,d!==h&&(d===null?E.firstBaseUpdate=T:d.next=T,E.lastBaseUpdate=p))}if(u!==null){var y=a.baseState;h=0,E=T=p=null,d=u;do{var S=d.lane,x=d.eventTime;if((s&S)===S){E!==null&&(E=E.next={eventTime:x,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var B=r,H=d;switch(S=n,x=i,H.tag){case 1:if(B=H.payload,typeof B=="function"){y=B.call(x,y,S);break e}y=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=H.payload,S=typeof B=="function"?B.call(x,y,S):B,S==null)break e;y=Kt({},y,S);break e;case 2:Mo=!0}}d.callback!==null&&d.lane!==0&&(r.flags|=64,S=a.effects,S===null?a.effects=[d]:S.push(d))}else x={eventTime:x,lane:S,tag:d.tag,payload:d.payload,callback:d.callback,next:null},E===null?(T=E=x,p=y):E=E.next=x,h|=S;if(d=d.next,d===null){if(d=a.shared.pending,d===null)break;S=d,d=S.next,S.next=null,a.lastBaseUpdate=S,a.shared.pending=null}}while(1);if(E===null&&(p=y),a.baseState=p,a.firstBaseUpdate=T,a.lastBaseUpdate=E,n=a.shared.interleaved,n!==null){a=n;do h|=a.lane,a=a.next;while(a!==n)}else u===null&&(a.shared.lanes=0);zs|=h,r.lanes=h,r.memoizedState=y}}function XI(r,n,i){if(r=n.effects,n.effects=null,r!==null)for(n=0;n<r.length;n++){var s=r[n],a=s.callback;if(a!==null){if(s.callback=null,s=i,typeof a!="function")throw Error(We(191,a));a.call(s)}}}var nA=new tC.Component().refs;function MT(r,n,i,s){n=r.memoizedState,i=i(s,n),i=i==null?n:Kt({},n,i),r.memoizedState=i,r.lanes===0&&(r.updateQueue.baseState=i)}var jf={isMounted:function(r){return(r=r._reactInternals)?Js(r)===r:!1},enqueueSetState:function(r,n,i){r=r._reactInternals;var s=Hr(),a=zo(r),u=to(s,a);u.payload=n,i!=null&&(u.callback=i),n=Wo(r,u,a),n!==null&&(ei(n,r,a,s),Bd(n,r,a))},enqueueReplaceState:function(r,n,i){r=r._reactInternals;var s=Hr(),a=zo(r),u=to(s,a);u.tag=1,u.payload=n,i!=null&&(u.callback=i),n=Wo(r,u,a),n!==null&&(ei(n,r,a,s),Bd(n,r,a))},enqueueForceUpdate:function(r,n){r=r._reactInternals;var i=Hr(),s=zo(r),a=to(i,s);a.tag=2,n!=null&&(a.callback=n),n=Wo(r,a,s),n!==null&&(ei(n,r,s,i),Bd(n,r,s))}};function YI(r,n,i,s,a,u,h){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(s,u,h):n.prototype&&n.prototype.isPureReactComponent?!fc(i,s)||!fc(a,u):!0}function iA(r,n,i){var s=!1,a=qo,u=n.contextType;return typeof u=="object"&&u!==null?u=Ln(u):(a=tn(n)?Vs:Lr.current,s=n.contextTypes,u=(s=s!=null)?wa(r,a):qo),n=new n(i,u),r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=jf,r.stateNode=n,n._reactInternals=r,s&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=u),n}function KI(r,n,i,s){r=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,s),n.state!==r&&jf.enqueueReplaceState(n,n.state,null)}function DT(r,n,i,s){var a=r.stateNode;a.props=i,a.state=r.memoizedState,a.refs=nA,hb(r);var u=n.contextType;typeof u=="object"&&u!==null?a.context=Ln(u):(u=tn(n)?Vs:Lr.current,a.context=wa(r,u)),a.state=r.memoizedState,u=n.getDerivedStateFromProps,typeof u=="function"&&(MT(r,n,u,i),a.state=r.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(n=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),n!==a.state&&jf.enqueueReplaceState(a,a.state,null),gf(r,i,a,s),a.state=r.memoizedState),typeof a.componentDidMount=="function"&&(r.flags|=4194308)}function Bu(r,n,i){if(r=i.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(We(309));var s=i.stateNode}if(!s)throw Error(We(147,r));var a=s,u=""+r;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===u?n.ref:(n=function(h){var d=a.refs;d===nA&&(d=a.refs={}),h===null?delete d[u]:d[u]=h},n._stringRef=u,n)}if(typeof r!="string")throw Error(We(284));if(!i._owner)throw Error(We(290,r))}return r}function Ed(r,n){throw r=Object.prototype.toString.call(n),Error(We(31,r==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":r))}function qI(r){var n=r._init;return n(r._payload)}function oA(r){function n($,m){if(r){var I=$.deletions;I===null?($.deletions=[m],$.flags|=16):I.push(m)}}function i($,m){if(!r)return null;for(;m!==null;)n($,m),m=m.sibling;return null}function s($,m){for($=new Map;m!==null;)m.key!==null?$.set(m.key,m):$.set(m.index,m),m=m.sibling;return $}function a($,m){return $=Xo($,m),$.index=0,$.sibling=null,$}function u($,m,I){return $.index=I,r?(I=$.alternate,I!==null?(I=I.index,I<m?($.flags|=2,m):I):($.flags|=2,m)):($.flags|=1048576,m)}function h($){return r&&$.alternate===null&&($.flags|=2),$}function d($,m,I,D){return m===null||m.tag!==6?(m=b_(I,$.mode,D),m.return=$,m):(m=a(m,I),m.return=$,m)}function p($,m,I,D){var C=I.type;return C===Jl?E($,m,I.props.children,D,I.key):m!==null&&(m.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===xo&&qI(C)===m.type)?(D=a(m,I.props),D.ref=Bu($,m,I),D.return=$,D):(D=Wd(I.type,I.key,I.props,null,$.mode,D),D.ref=Bu($,m,I),D.return=$,D)}function T($,m,I,D){return m===null||m.tag!==4||m.stateNode.containerInfo!==I.containerInfo||m.stateNode.implementation!==I.implementation?(m=y_(I,$.mode,D),m.return=$,m):(m=a(m,I.children||[]),m.return=$,m)}function E($,m,I,D,C){return m===null||m.tag!==7?(m=Us(I,$.mode,D,C),m.return=$,m):(m=a(m,I),m.return=$,m)}function y($,m,I){if(typeof m=="string"&&m!==""||typeof m=="number")return m=b_(""+m,$.mode,I),m.return=$,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ad:return I=Wd(m.type,m.key,m.props,null,$.mode,I),I.ref=Bu($,null,m),I.return=$,I;case Zl:return m=y_(m,$.mode,I),m.return=$,m;case xo:var D=m._init;return y($,D(m._payload),I)}if(Wu(m)||Nu(m))return m=Us(m,$.mode,I,null),m.return=$,m;Ed($,m)}return null}function S($,m,I,D){var C=m!==null?m.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return C!==null?null:d($,m,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ad:return I.key===C?p($,m,I,D):null;case Zl:return I.key===C?T($,m,I,D):null;case xo:return C=I._init,S($,m,C(I._payload),D)}if(Wu(I)||Nu(I))return C!==null?null:E($,m,I,D,null);Ed($,I)}return null}function x($,m,I,D,C){if(typeof D=="string"&&D!==""||typeof D=="number")return $=$.get(I)||null,d(m,$,""+D,C);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ad:return $=$.get(D.key===null?I:D.key)||null,p(m,$,D,C);case Zl:return $=$.get(D.key===null?I:D.key)||null,T(m,$,D,C);case xo:var U=D._init;return x($,m,I,U(D._payload),C)}if(Wu(D)||Nu(D))return $=$.get(I)||null,E(m,$,D,C,null);Ed(m,D)}return null}function B($,m,I,D){for(var C=null,U=null,V=m,te=m=0,ae=null;V!==null&&te<I.length;te++){V.index>te?(ae=V,V=null):ae=V.sibling;var de=S($,V,I[te],D);if(de===null){V===null&&(V=ae);break}r&&V&&de.alternate===null&&n($,V),m=u(de,m,te),U===null?C=de:U.sibling=de,U=de,V=ae}if(te===I.length)return i($,V),Wt&&Ns($,te),C;if(V===null){for(;te<I.length;te++)V=y($,I[te],D),V!==null&&(m=u(V,m,te),U===null?C=V:U.sibling=V,U=V);return Wt&&Ns($,te),C}for(V=s($,V);te<I.length;te++)ae=x(V,$,te,I[te],D),ae!==null&&(r&&ae.alternate!==null&&V.delete(ae.key===null?te:ae.key),m=u(ae,m,te),U===null?C=ae:U.sibling=ae,U=ae);return r&&V.forEach(function(we){return n($,we)}),Wt&&Ns($,te),C}function H($,m,I,D){var C=Nu(I);if(typeof C!="function")throw Error(We(150));if(I=C.call(I),I==null)throw Error(We(151));for(var U=C=null,V=m,te=m=0,ae=null,de=I.next();V!==null&&!de.done;te++,de=I.next()){V.index>te?(ae=V,V=null):ae=V.sibling;var we=S($,V,de.value,D);if(we===null){V===null&&(V=ae);break}r&&V&&we.alternate===null&&n($,V),m=u(we,m,te),U===null?C=we:U.sibling=we,U=we,V=ae}if(de.done)return i($,V),Wt&&Ns($,te),C;if(V===null){for(;!de.done;te++,de=I.next())de=y($,de.value,D),de!==null&&(m=u(de,m,te),U===null?C=de:U.sibling=de,U=de);return Wt&&Ns($,te),C}for(V=s($,V);!de.done;te++,de=I.next())de=x(V,$,te,de.value,D),de!==null&&(r&&de.alternate!==null&&V.delete(de.key===null?te:de.key),m=u(de,m,te),U===null?C=de:U.sibling=de,U=de);return r&&V.forEach(function(q){return n($,q)}),Wt&&Ns($,te),C}function W($,m,I,D){if(typeof I=="object"&&I!==null&&I.type===Jl&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ad:e:{for(var C=I.key,U=m;U!==null;){if(U.key===C){if(C=I.type,C===Jl){if(U.tag===7){i($,U.sibling),m=a(U,I.props.children),m.return=$,$=m;break e}}else if(U.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===xo&&qI(C)===U.type){i($,U.sibling),m=a(U,I.props),m.ref=Bu($,U,I),m.return=$,$=m;break e}i($,U);break}else n($,U);U=U.sibling}I.type===Jl?(m=Us(I.props.children,$.mode,D,I.key),m.return=$,$=m):(D=Wd(I.type,I.key,I.props,null,$.mode,D),D.ref=Bu($,m,I),D.return=$,$=D)}return h($);case Zl:e:{for(U=I.key;m!==null;){if(m.key===U)if(m.tag===4&&m.stateNode.containerInfo===I.containerInfo&&m.stateNode.implementation===I.implementation){i($,m.sibling),m=a(m,I.children||[]),m.return=$,$=m;break e}else{i($,m);break}else n($,m);m=m.sibling}m=y_(I,$.mode,D),m.return=$,$=m}return h($);case xo:return U=I._init,W($,m,U(I._payload),D)}if(Wu(I))return B($,m,I,D);if(Nu(I))return H($,m,I,D);Ed($,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,m!==null&&m.tag===6?(i($,m.sibling),m=a(m,I),m.return=$,$=m):(i($,m),m=b_(I,$.mode,D),m.return=$,$=m),h($)):i($,m)}return W}var Ia=oA(!0),sA=oA(!1),Nc={},Ci=es(Nc),$c=es(Nc),_c=es(Nc);function Ps(r){if(r===Nc)throw Error(We(174));return r}function db(r,n){switch(Bt(_c,n),Bt($c,r),Bt(Ci,Nc),r=n.nodeType,r){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:pT(null,"");break;default:r=r===8?n.parentNode:n,n=r.namespaceURI||null,r=r.tagName,n=pT(n,r)}Ut(Ci),Bt(Ci,n)}function Oa(){Ut(Ci),Ut($c),Ut(_c)}function lA(r){Ps(_c.current);var n=Ps(Ci.current),i=pT(n,r.type);n!==i&&(Bt($c,r),Bt(Ci,i))}function fb(r){$c.current===r&&(Ut(Ci),Ut($c))}var Xt=es(0);function mf(r){for(var n=r;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var m_=[];function pb(){for(var r=0;r<m_.length;r++)m_[r]._workInProgressVersionPrimary=null;m_.length=0}var Fd=ao.ReactCurrentDispatcher,$_=ao.ReactCurrentBatchConfig,js=0,Yt=null,dr=null,_r=null,$f=!1,ec=!1,Ec=0,gD=0;function kr(){throw Error(We(321))}function gb(r,n){if(n===null)return!1;for(var i=0;i<n.length&&i<r.length;i++)if(!ti(r[i],n[i]))return!1;return!0}function mb(r,n,i,s,a,u){if(js=u,Yt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Fd.current=r===null||r.memoizedState===null?ED:TD,r=i(s,a),ec){u=0;do{if(ec=!1,Ec=0,25<=u)throw Error(We(301));u+=1,_r=dr=null,n.updateQueue=null,Fd.current=vD,r=i(s,a)}while(ec)}if(Fd.current=_f,n=dr!==null&&dr.next!==null,js=0,_r=dr=Yt=null,$f=!1,n)throw Error(We(300));return r}function $b(){var r=Ec!==0;return Ec=0,r}function bi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?Yt.memoizedState=_r=r:_r=_r.next=r,_r}function Nn(){if(dr===null){var r=Yt.alternate;r=r!==null?r.memoizedState:null}else r=dr.next;var n=_r===null?Yt.memoizedState:_r.next;if(n!==null)_r=n,dr=r;else{if(r===null)throw Error(We(310));dr=r,r={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},_r===null?Yt.memoizedState=_r=r:_r=_r.next=r}return _r}function Tc(r,n){return typeof n=="function"?n(r):n}function __(r){var n=Nn(),i=n.queue;if(i===null)throw Error(We(311));i.lastRenderedReducer=r;var s=dr,a=s.baseQueue,u=i.pending;if(u!==null){if(a!==null){var h=a.next;a.next=u.next,u.next=h}s.baseQueue=a=u,i.pending=null}if(a!==null){u=a.next,s=s.baseState;var d=h=null,p=null,T=u;do{var E=T.lane;if((js&E)===E)p!==null&&(p=p.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),s=T.hasEagerState?T.eagerState:r(s,T.action);else{var y={lane:E,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};p===null?(d=p=y,h=s):p=p.next=y,Yt.lanes|=E,zs|=E}T=T.next}while(T!==null&&T!==u);p===null?h=s:p.next=d,ti(s,n.memoizedState)||(Qr=!0),n.memoizedState=s,n.baseState=h,n.baseQueue=p,i.lastRenderedState=s}if(r=i.interleaved,r!==null){a=r;do u=a.lane,Yt.lanes|=u,zs|=u,a=a.next;while(a!==r)}else a===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function E_(r){var n=Nn(),i=n.queue;if(i===null)throw Error(We(311));i.lastRenderedReducer=r;var s=i.dispatch,a=i.pending,u=n.memoizedState;if(a!==null){i.pending=null;var h=a=a.next;do u=r(u,h.action),h=h.next;while(h!==a);ti(u,n.memoizedState)||(Qr=!0),n.memoizedState=u,n.baseQueue===null&&(n.baseState=u),i.lastRenderedState=u}return[u,s]}function aA(){}function uA(r,n){var i=Yt,s=Nn(),a=n(),u=!ti(s.memoizedState,a);if(u&&(s.memoizedState=a,Qr=!0),s=s.queue,_b(dA.bind(null,i,s,r),[r]),s.getSnapshot!==n||u||_r!==null&&_r.memoizedState.tag&1){if(i.flags|=2048,vc(9,hA.bind(null,i,s,a,n),void 0,null),Er===null)throw Error(We(349));js&30||cA(i,n,a)}return a}function cA(r,n,i){r.flags|=16384,r={getSnapshot:n,value:i},n=Yt.updateQueue,n===null?(n={lastEffect:null,stores:null},Yt.updateQueue=n,n.stores=[r]):(i=n.stores,i===null?n.stores=[r]:i.push(r))}function hA(r,n,i,s){n.value=i,n.getSnapshot=s,fA(n)&&pA(r)}function dA(r,n,i){return i(function(){fA(n)&&pA(r)})}function fA(r){var n=r.getSnapshot;r=r.value;try{var i=n();return!ti(r,i)}catch{return!0}}function pA(r){var n=oo(r,1);n!==null&&ei(n,r,1,-1)}function ZI(r){var n=bi();return typeof r=="function"&&(r=r()),n.memoizedState=n.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tc,lastRenderedState:r},n.queue=r,r=r.dispatch=_D.bind(null,Yt,r),[n.memoizedState,r]}function vc(r,n,i,s){return r={tag:r,create:n,destroy:i,deps:s,next:null},n=Yt.updateQueue,n===null?(n={lastEffect:null,stores:null},Yt.updateQueue=n,n.lastEffect=r.next=r):(i=n.lastEffect,i===null?n.lastEffect=r.next=r:(s=i.next,i.next=r,r.next=s,n.lastEffect=r)),r}function gA(){return Nn().memoizedState}function Ud(r,n,i,s){var a=bi();Yt.flags|=r,a.memoizedState=vc(1|n,i,void 0,s===void 0?null:s)}function zf(r,n,i,s){var a=Nn();s=s===void 0?null:s;var u=void 0;if(dr!==null){var h=dr.memoizedState;if(u=h.destroy,s!==null&&gb(s,h.deps)){a.memoizedState=vc(n,i,u,s);return}}Yt.flags|=r,a.memoizedState=vc(1|n,i,u,s)}function JI(r,n){return Ud(8390656,8,r,n)}function _b(r,n){return zf(2048,8,r,n)}function mA(r,n){return zf(4,2,r,n)}function $A(r,n){return zf(4,4,r,n)}function _A(r,n){if(typeof n=="function")return r=r(),n(r),function(){n(null)};if(n!=null)return r=r(),n.current=r,function(){n.current=null}}function EA(r,n,i){return i=i!=null?i.concat([r]):null,zf(4,4,_A.bind(null,n,r),i)}function Eb(){}function TA(r,n){var i=Nn();n=n===void 0?null:n;var s=i.memoizedState;return s!==null&&n!==null&&gb(n,s[1])?s[0]:(i.memoizedState=[r,n],r)}function vA(r,n){var i=Nn();n=n===void 0?null:n;var s=i.memoizedState;return s!==null&&n!==null&&gb(n,s[1])?s[0]:(r=r(),i.memoizedState=[r,n],r)}function bA(r,n,i){return js&21?(ti(i,n)||(i=SC(),Yt.lanes|=i,zs|=i,r.baseState=!0),n):(r.baseState&&(r.baseState=!1,Qr=!0),r.memoizedState=i)}function mD(r,n){var i=Ot;Ot=i!==0&&4>i?i:4,r(!0);var s=$_.transition;$_.transition={};try{r(!1),n()}finally{Ot=i,$_.transition=s}}function yA(){return Nn().memoizedState}function $D(r,n,i){var s=zo(r);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},wA(r))SA(n,i);else if(i=tA(r,n,i,s),i!==null){var a=Hr();ei(i,r,s,a),IA(i,n,s)}}function _D(r,n,i){var s=zo(r),a={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(wA(r))SA(n,a);else{var u=r.alternate;if(r.lanes===0&&(u===null||u.lanes===0)&&(u=n.lastRenderedReducer,u!==null))try{var h=n.lastRenderedState,d=u(h,i);if(a.hasEagerState=!0,a.eagerState=d,ti(d,h)){var p=n.interleaved;p===null?(a.next=a,cb(n)):(a.next=p.next,p.next=a),n.interleaved=a;return}}catch{}finally{}i=tA(r,n,a,s),i!==null&&(a=Hr(),ei(i,r,s,a),IA(i,n,s))}}function wA(r){var n=r.alternate;return r===Yt||n!==null&&n===Yt}function SA(r,n){ec=$f=!0;var i=r.pending;i===null?n.next=n:(n.next=i.next,i.next=n),r.pending=n}function IA(r,n,i){if(i&4194240){var s=n.lanes;s&=r.pendingLanes,i|=s,n.lanes=i,qv(r,i)}}var _f={readContext:Ln,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},ED={readContext:Ln,useCallback:function(r,n){return bi().memoizedState=[r,n===void 0?null:n],r},useContext:Ln,useEffect:JI,useImperativeHandle:function(r,n,i){return i=i!=null?i.concat([r]):null,Ud(4194308,4,_A.bind(null,n,r),i)},useLayoutEffect:function(r,n){return Ud(4194308,4,r,n)},useInsertionEffect:function(r,n){return Ud(4,2,r,n)},useMemo:function(r,n){var i=bi();return n=n===void 0?null:n,r=r(),i.memoizedState=[r,n],r},useReducer:function(r,n,i){var s=bi();return n=i!==void 0?i(n):n,s.memoizedState=s.baseState=n,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:n},s.queue=r,r=r.dispatch=$D.bind(null,Yt,r),[s.memoizedState,r]},useRef:function(r){var n=bi();return r={current:r},n.memoizedState=r},useState:ZI,useDebugValue:Eb,useDeferredValue:function(r){return bi().memoizedState=r},useTransition:function(){var r=ZI(!1),n=r[0];return r=mD.bind(null,r[1]),bi().memoizedState=r,[n,r]},useMutableSource:function(){},useSyncExternalStore:function(r,n,i){var s=Yt,a=bi();if(Wt){if(i===void 0)throw Error(We(407));i=i()}else{if(i=n(),Er===null)throw Error(We(349));js&30||cA(s,n,i)}a.memoizedState=i;var u={value:i,getSnapshot:n};return a.queue=u,JI(dA.bind(null,s,u,r),[r]),s.flags|=2048,vc(9,hA.bind(null,s,u,i,n),void 0,null),i},useId:function(){var r=bi(),n=Er.identifierPrefix;if(Wt){var i=Qi,s=Ji;i=(s&~(1<<32-Qn(s)-1)).toString(32)+i,n=":"+n+"R"+i,i=Ec++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=gD++,n=":"+n+"r"+i.toString(32)+":";return r.memoizedState=n},unstable_isNewReconciler:!1},TD={readContext:Ln,useCallback:TA,useContext:Ln,useEffect:_b,useImperativeHandle:EA,useInsertionEffect:mA,useLayoutEffect:$A,useMemo:vA,useReducer:__,useRef:gA,useState:function(){return __(Tc)},useDebugValue:Eb,useDeferredValue:function(r){var n=Nn();return bA(n,dr.memoizedState,r)},useTransition:function(){var r=__(Tc)[0],n=Nn().memoizedState;return[r,n]},useMutableSource:aA,useSyncExternalStore:uA,useId:yA,unstable_isNewReconciler:!1},vD={readContext:Ln,useCallback:TA,useContext:Ln,useEffect:_b,useImperativeHandle:EA,useInsertionEffect:mA,useLayoutEffect:$A,useMemo:vA,useReducer:E_,useRef:gA,useState:function(){return E_(Tc)},useDebugValue:Eb,useDeferredValue:function(r){var n=Nn();return dr===null?n.memoizedState=r:bA(n,dr.memoizedState,r)},useTransition:function(){var r=E_(Tc)[0],n=Nn().memoizedState;return[r,n]},useMutableSource:aA,useSyncExternalStore:uA,useId:yA,unstable_isNewReconciler:!1};function Ra(r,n){try{var i="",s=n;do i+=KM(s),s=s.return;while(s);var a=i}catch(u){a=`
Error generating stack: `+u.message+`
`+u.stack}return{value:r,source:n,stack:a,digest:null}}function T_(r,n,i){return{value:r,source:null,stack:i??null,digest:n??null}}function PT(r,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var bD=typeof WeakMap=="function"?WeakMap:Map;function OA(r,n,i){i=to(-1,i),i.tag=3,i.payload={element:null};var s=n.value;return i.callback=function(){Tf||(Tf=!0,XT=s),PT(r,n)},i}function RA(r,n,i){i=to(-1,i),i.tag=3;var s=r.type.getDerivedStateFromError;if(typeof s=="function"){var a=n.value;i.payload=function(){return s(a)},i.callback=function(){PT(r,n)}}var u=r.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(i.callback=function(){PT(r,n),typeof s!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var h=n.stack;this.componentDidCatch(n.value,{componentStack:h!==null?h:""})}),i}function QI(r,n,i){var s=r.pingCache;if(s===null){s=r.pingCache=new bD;var a=new Set;s.set(n,a)}else a=s.get(n),a===void 0&&(a=new Set,s.set(n,a));a.has(i)||(a.add(i),r=DD.bind(null,r,n,i),n.then(r,r))}function eO(r){do{var n;if((n=r.tag===13)&&(n=r.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return r;r=r.return}while(r!==null);return null}function tO(r,n,i,s,a){return r.mode&1?(r.flags|=65536,r.lanes=a,r):(r===n?r.flags|=65536:(r.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=to(-1,1),n.tag=2,Wo(i,n,1))),i.lanes|=1),r)}var yD=ao.ReactCurrentOwner,Qr=!1;function Ur(r,n,i,s){n.child=r===null?sA(n,null,i,s):Ia(n,r.child,i,s)}function rO(r,n,i,s,a){i=i.render;var u=n.ref;return ga(n,a),s=mb(r,n,i,s,u,a),i=$b(),r!==null&&!Qr?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~a,so(r,n,a)):(Wt&&i&&ib(n),n.flags|=1,Ur(r,n,s,a),n.child)}function nO(r,n,i,s,a){if(r===null){var u=i.type;return typeof u=="function"&&!Ob(u)&&u.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=u,kA(r,n,u,s,a)):(r=Wd(i.type,null,s,n,n.mode,a),r.ref=n.ref,r.return=n,n.child=r)}if(u=r.child,!(r.lanes&a)){var h=u.memoizedProps;if(i=i.compare,i=i!==null?i:fc,i(h,s)&&r.ref===n.ref)return so(r,n,a)}return n.flags|=1,r=Xo(u,s),r.ref=n.ref,r.return=n,n.child=r}function kA(r,n,i,s,a){if(r!==null){var u=r.memoizedProps;if(fc(u,s)&&r.ref===n.ref)if(Qr=!1,n.pendingProps=s=u,(r.lanes&a)!==0)r.flags&131072&&(Qr=!0);else return n.lanes=r.lanes,so(r,n,a)}return BT(r,n,i,s,a)}function CA(r,n,i){var s=n.pendingProps,a=s.children,u=r!==null?r.memoizedState:null;if(s.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(aa,hn),hn|=i;else{if(!(i&1073741824))return r=u!==null?u.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:r,cachePool:null,transitions:null},n.updateQueue=null,Bt(aa,hn),hn|=r,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=u!==null?u.baseLanes:i,Bt(aa,hn),hn|=s}else u!==null?(s=u.baseLanes|i,n.memoizedState=null):s=i,Bt(aa,hn),hn|=s;return Ur(r,n,a,i),n.child}function AA(r,n){var i=n.ref;(r===null&&i!==null||r!==null&&r.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function BT(r,n,i,s,a){var u=tn(i)?Vs:Lr.current;return u=wa(n,u),ga(n,a),i=mb(r,n,i,s,u,a),s=$b(),r!==null&&!Qr?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~a,so(r,n,a)):(Wt&&s&&ib(n),n.flags|=1,Ur(r,n,i,a),n.child)}function iO(r,n,i,s,a){if(tn(i)){var u=!0;cf(n)}else u=!1;if(ga(n,a),n.stateNode===null)Hd(r,n),iA(n,i,s),DT(n,i,s,a),s=!0;else if(r===null){var h=n.stateNode,d=n.memoizedProps;h.props=d;var p=h.context,T=i.contextType;typeof T=="object"&&T!==null?T=Ln(T):(T=tn(i)?Vs:Lr.current,T=wa(n,T));var E=i.getDerivedStateFromProps,y=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function";y||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(d!==s||p!==T)&&KI(n,h,s,T),Mo=!1;var S=n.memoizedState;h.state=S,gf(n,s,h,a),p=n.memoizedState,d!==s||S!==p||en.current||Mo?(typeof E=="function"&&(MT(n,i,E,s),p=n.memoizedState),(d=Mo||YI(n,i,d,s,S,p,T))?(y||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=p),h.props=s,h.state=p,h.context=T,s=d):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{h=n.stateNode,rA(r,n),d=n.memoizedProps,T=n.type===n.elementType?d:Kn(n.type,d),h.props=T,y=n.pendingProps,S=h.context,p=i.contextType,typeof p=="object"&&p!==null?p=Ln(p):(p=tn(i)?Vs:Lr.current,p=wa(n,p));var x=i.getDerivedStateFromProps;(E=typeof x=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(d!==y||S!==p)&&KI(n,h,s,p),Mo=!1,S=n.memoizedState,h.state=S,gf(n,s,h,a);var B=n.memoizedState;d!==y||S!==B||en.current||Mo?(typeof x=="function"&&(MT(n,i,x,s),B=n.memoizedState),(T=Mo||YI(n,i,T,s,S,B,p)||!1)?(E||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,B,p),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,B,p)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||d===r.memoizedProps&&S===r.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||d===r.memoizedProps&&S===r.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=B),h.props=s,h.state=B,h.context=p,s=T):(typeof h.componentDidUpdate!="function"||d===r.memoizedProps&&S===r.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||d===r.memoizedProps&&S===r.memoizedState||(n.flags|=1024),s=!1)}return FT(r,n,i,s,u,a)}function FT(r,n,i,s,a,u){AA(r,n);var h=(n.flags&128)!==0;if(!s&&!h)return a&&VI(n,i,!1),so(r,n,u);s=n.stateNode,yD.current=n;var d=h&&typeof i.getDerivedStateFromError!="function"?null:s.render();return n.flags|=1,r!==null&&h?(n.child=Ia(n,r.child,null,u),n.child=Ia(n,null,d,u)):Ur(r,n,d,u),n.memoizedState=s.state,a&&VI(n,i,!0),n.child}function LA(r){var n=r.stateNode;n.pendingContext?GI(r,n.pendingContext,n.pendingContext!==n.context):n.context&&GI(r,n.context,!1),db(r,n.containerInfo)}function oO(r,n,i,s,a){return Sa(),sb(a),n.flags|=256,Ur(r,n,i,s),n.child}var UT={dehydrated:null,treeContext:null,retryLane:0};function HT(r){return{baseLanes:r,cachePool:null,transitions:null}}function NA(r,n,i){var s=n.pendingProps,a=Xt.current,u=!1,h=(n.flags&128)!==0,d;if((d=h)||(d=r!==null&&r.memoizedState===null?!1:(a&2)!==0),d?(u=!0,n.flags&=-129):(r===null||r.memoizedState!==null)&&(a|=1),Bt(Xt,a&1),r===null)return NT(n),r=n.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(n.mode&1?r.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(h=s.children,r=s.fallback,u?(s=n.mode,u=n.child,h={mode:"hidden",children:h},!(s&1)&&u!==null?(u.childLanes=0,u.pendingProps=h):u=Kf(h,s,0,null),r=Us(r,s,i,null),u.return=n,r.return=n,u.sibling=r,n.child=u,n.child.memoizedState=HT(i),n.memoizedState=UT,r):Tb(n,h));if(a=r.memoizedState,a!==null&&(d=a.dehydrated,d!==null))return wD(r,n,h,s,d,a,i);if(u){u=s.fallback,h=n.mode,a=r.child,d=a.sibling;var p={mode:"hidden",children:s.children};return!(h&1)&&n.child!==a?(s=n.child,s.childLanes=0,s.pendingProps=p,n.deletions=null):(s=Xo(a,p),s.subtreeFlags=a.subtreeFlags&14680064),d!==null?u=Xo(d,u):(u=Us(u,h,i,null),u.flags|=2),u.return=n,s.return=n,s.sibling=u,n.child=s,s=u,u=n.child,h=r.child.memoizedState,h=h===null?HT(i):{baseLanes:h.baseLanes|i,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=r.childLanes&~i,n.memoizedState=UT,s}return u=r.child,r=u.sibling,s=Xo(u,{mode:"visible",children:s.children}),!(n.mode&1)&&(s.lanes=i),s.return=n,s.sibling=null,r!==null&&(i=n.deletions,i===null?(n.deletions=[r],n.flags|=16):i.push(r)),n.child=s,n.memoizedState=null,s}function Tb(r,n){return n=Kf({mode:"visible",children:n},r.mode,0,null),n.return=r,r.child=n}function Td(r,n,i,s){return s!==null&&sb(s),Ia(n,r.child,null,i),r=Tb(n,n.pendingProps.children),r.flags|=2,n.memoizedState=null,r}function wD(r,n,i,s,a,u,h){if(i)return n.flags&256?(n.flags&=-257,s=T_(Error(We(422))),Td(r,n,h,s)):n.memoizedState!==null?(n.child=r.child,n.flags|=128,null):(u=s.fallback,a=n.mode,s=Kf({mode:"visible",children:s.children},a,0,null),u=Us(u,a,h,null),u.flags|=2,s.return=n,u.return=n,s.sibling=u,n.child=s,n.mode&1&&Ia(n,r.child,null,h),n.child.memoizedState=HT(h),n.memoizedState=UT,u);if(!(n.mode&1))return Td(r,n,h,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var d=s.dgst;return s=d,u=Error(We(419)),s=T_(u,s,void 0),Td(r,n,h,s)}if(d=(h&r.childLanes)!==0,Qr||d){if(s=Er,s!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|h)?0:a,a!==0&&a!==u.retryLane&&(u.retryLane=a,oo(r,a),ei(s,r,a,-1))}return Ib(),s=T_(Error(We(421))),Td(r,n,h,s)}return a.data==="$?"?(n.flags|=128,n.child=r.child,n=PD.bind(null,r),a._reactRetry=n,null):(r=u.treeContext,dn=Vo(a.nextSibling),fn=n,Wt=!0,Jn=null,r!==null&&(On[Rn++]=Ji,On[Rn++]=Qi,On[Rn++]=Ws,Ji=r.id,Qi=r.overflow,Ws=n),n=Tb(n,s.children),n.flags|=4096,n)}function sO(r,n,i){r.lanes|=n;var s=r.alternate;s!==null&&(s.lanes|=n),xT(r.return,n,i)}function v_(r,n,i,s,a){var u=r.memoizedState;u===null?r.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:a}:(u.isBackwards=n,u.rendering=null,u.renderingStartTime=0,u.last=s,u.tail=i,u.tailMode=a)}function xA(r,n,i){var s=n.pendingProps,a=s.revealOrder,u=s.tail;if(Ur(r,n,s.children,i),s=Xt.current,s&2)s=s&1|2,n.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=n.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&sO(r,i,n);else if(r.tag===19)sO(r,i,n);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}s&=1}if(Bt(Xt,s),!(n.mode&1))n.memoizedState=null;else switch(a){case"forwards":for(i=n.child,a=null;i!==null;)r=i.alternate,r!==null&&mf(r)===null&&(a=i),i=i.sibling;i=a,i===null?(a=n.child,n.child=null):(a=i.sibling,i.sibling=null),v_(n,!1,a,i,u);break;case"backwards":for(i=null,a=n.child,n.child=null;a!==null;){if(r=a.alternate,r!==null&&mf(r)===null){n.child=a;break}r=a.sibling,a.sibling=i,i=a,a=r}v_(n,!0,i,null,u);break;case"together":v_(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Hd(r,n){!(n.mode&1)&&r!==null&&(r.alternate=null,n.alternate=null,n.flags|=2)}function so(r,n,i){if(r!==null&&(n.dependencies=r.dependencies),zs|=n.lanes,!(i&n.childLanes))return null;if(r!==null&&n.child!==r.child)throw Error(We(153));if(n.child!==null){for(r=n.child,i=Xo(r,r.pendingProps),n.child=i,i.return=n;r.sibling!==null;)r=r.sibling,i=i.sibling=Xo(r,r.pendingProps),i.return=n;i.sibling=null}return n.child}function SD(r,n,i){switch(n.tag){case 3:LA(n),Sa();break;case 5:lA(n);break;case 1:tn(n.type)&&cf(n);break;case 4:db(n,n.stateNode.containerInfo);break;case 10:var s=n.type._context,a=n.memoizedProps.value;Bt(ff,s._currentValue),s._currentValue=a;break;case 13:if(s=n.memoizedState,s!==null)return s.dehydrated!==null?(Bt(Xt,Xt.current&1),n.flags|=128,null):i&n.child.childLanes?NA(r,n,i):(Bt(Xt,Xt.current&1),r=so(r,n,i),r!==null?r.sibling:null);Bt(Xt,Xt.current&1);break;case 19:if(s=(i&n.childLanes)!==0,r.flags&128){if(s)return xA(r,n,i);n.flags|=128}if(a=n.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Bt(Xt,Xt.current),s)break;return null;case 22:case 23:return n.lanes=0,CA(r,n,i)}return so(r,n,i)}var MA,GT,DA,PA;MA=function(r,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)r.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};GT=function(){};DA=function(r,n,i,s){var a=r.memoizedProps;if(a!==s){r=n.stateNode,Ps(Ci.current);var u=null;switch(i){case"input":a=cT(r,a),s=cT(r,s),u=[];break;case"select":a=Kt({},a,{value:void 0}),s=Kt({},s,{value:void 0}),u=[];break;case"textarea":a=fT(r,a),s=fT(r,s),u=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(r.onclick=af)}gT(i,s);var h;i=null;for(T in a)if(!s.hasOwnProperty(T)&&a.hasOwnProperty(T)&&a[T]!=null)if(T==="style"){var d=a[T];for(h in d)d.hasOwnProperty(h)&&(i||(i={}),i[h]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(sc.hasOwnProperty(T)?u||(u=[]):(u=u||[]).push(T,null));for(T in s){var p=s[T];if(d=a!=null?a[T]:void 0,s.hasOwnProperty(T)&&p!==d&&(p!=null||d!=null))if(T==="style")if(d){for(h in d)!d.hasOwnProperty(h)||p&&p.hasOwnProperty(h)||(i||(i={}),i[h]="");for(h in p)p.hasOwnProperty(h)&&d[h]!==p[h]&&(i||(i={}),i[h]=p[h])}else i||(u||(u=[]),u.push(T,i)),i=p;else T==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,d=d?d.__html:void 0,p!=null&&d!==p&&(u=u||[]).push(T,p)):T==="children"?typeof p!="string"&&typeof p!="number"||(u=u||[]).push(T,""+p):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(sc.hasOwnProperty(T)?(p!=null&&T==="onScroll"&&Ft("scroll",r),u||d===p||(u=[])):(u=u||[]).push(T,p))}i&&(u=u||[]).push("style",i);var T=u;(n.updateQueue=T)&&(n.flags|=4)}};PA=function(r,n,i,s){i!==s&&(n.flags|=4)};function Fu(r,n){if(!Wt)switch(r.tailMode){case"hidden":n=r.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?r.tail=null:i.sibling=null;break;case"collapsed":i=r.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?n||r.tail===null?r.tail=null:r.tail.sibling=null:s.sibling=null}}function Cr(r){var n=r.alternate!==null&&r.alternate.child===r.child,i=0,s=0;if(n)for(var a=r.child;a!==null;)i|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=r,a=a.sibling;else for(a=r.child;a!==null;)i|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=r,a=a.sibling;return r.subtreeFlags|=s,r.childLanes=i,n}function ID(r,n,i){var s=n.pendingProps;switch(ob(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(n),null;case 1:return tn(n.type)&&uf(),Cr(n),null;case 3:return s=n.stateNode,Oa(),Ut(en),Ut(Lr),pb(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(r===null||r.child===null)&&(_d(n)?n.flags|=4:r===null||r.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Jn!==null&&(qT(Jn),Jn=null))),GT(r,n),Cr(n),null;case 5:fb(n);var a=Ps(_c.current);if(i=n.type,r!==null&&n.stateNode!=null)DA(r,n,i,s,a),r.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!s){if(n.stateNode===null)throw Error(We(166));return Cr(n),null}if(r=Ps(Ci.current),_d(n)){s=n.stateNode,i=n.type;var u=n.memoizedProps;switch(s[Oi]=n,s[mc]=u,r=(n.mode&1)!==0,i){case"dialog":Ft("cancel",s),Ft("close",s);break;case"iframe":case"object":case"embed":Ft("load",s);break;case"video":case"audio":for(a=0;a<zu.length;a++)Ft(zu[a],s);break;case"source":Ft("error",s);break;case"img":case"image":case"link":Ft("error",s),Ft("load",s);break;case"details":Ft("toggle",s);break;case"input":gI(s,u),Ft("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!u.multiple},Ft("invalid",s);break;case"textarea":$I(s,u),Ft("invalid",s)}gT(i,u),a=null;for(var h in u)if(u.hasOwnProperty(h)){var d=u[h];h==="children"?typeof d=="string"?s.textContent!==d&&(u.suppressHydrationWarning!==!0&&$d(s.textContent,d,r),a=["children",d]):typeof d=="number"&&s.textContent!==""+d&&(u.suppressHydrationWarning!==!0&&$d(s.textContent,d,r),a=["children",""+d]):sc.hasOwnProperty(h)&&d!=null&&h==="onScroll"&&Ft("scroll",s)}switch(i){case"input":ud(s),mI(s,u,!0);break;case"textarea":ud(s),_I(s);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(s.onclick=af)}s=a,n.updateQueue=s,s!==null&&(n.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=cC(i)),r==="http://www.w3.org/1999/xhtml"?i==="script"?(r=h.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof s.is=="string"?r=h.createElement(i,{is:s.is}):(r=h.createElement(i),i==="select"&&(h=r,s.multiple?h.multiple=!0:s.size&&(h.size=s.size))):r=h.createElementNS(r,i),r[Oi]=n,r[mc]=s,MA(r,n,!1,!1),n.stateNode=r;e:{switch(h=mT(i,s),i){case"dialog":Ft("cancel",r),Ft("close",r),a=s;break;case"iframe":case"object":case"embed":Ft("load",r),a=s;break;case"video":case"audio":for(a=0;a<zu.length;a++)Ft(zu[a],r);a=s;break;case"source":Ft("error",r),a=s;break;case"img":case"image":case"link":Ft("error",r),Ft("load",r),a=s;break;case"details":Ft("toggle",r),a=s;break;case"input":gI(r,s),a=cT(r,s),Ft("invalid",r);break;case"option":a=s;break;case"select":r._wrapperState={wasMultiple:!!s.multiple},a=Kt({},s,{value:void 0}),Ft("invalid",r);break;case"textarea":$I(r,s),a=fT(r,s),Ft("invalid",r);break;default:a=s}gT(i,a),d=a;for(u in d)if(d.hasOwnProperty(u)){var p=d[u];u==="style"?fC(r,p):u==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&hC(r,p)):u==="children"?typeof p=="string"?(i!=="textarea"||p!=="")&&lc(r,p):typeof p=="number"&&lc(r,""+p):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(sc.hasOwnProperty(u)?p!=null&&u==="onScroll"&&Ft("scroll",r):p!=null&&Wv(r,u,p,h))}switch(i){case"input":ud(r),mI(r,s,!1);break;case"textarea":ud(r),_I(r);break;case"option":s.value!=null&&r.setAttribute("value",""+Ko(s.value));break;case"select":r.multiple=!!s.multiple,u=s.value,u!=null?ha(r,!!s.multiple,u,!1):s.defaultValue!=null&&ha(r,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(r.onclick=af)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Cr(n),null;case 6:if(r&&n.stateNode!=null)PA(r,n,r.memoizedProps,s);else{if(typeof s!="string"&&n.stateNode===null)throw Error(We(166));if(i=Ps(_c.current),Ps(Ci.current),_d(n)){if(s=n.stateNode,i=n.memoizedProps,s[Oi]=n,(u=s.nodeValue!==i)&&(r=fn,r!==null))switch(r.tag){case 3:$d(s.nodeValue,i,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&$d(s.nodeValue,i,(r.mode&1)!==0)}u&&(n.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[Oi]=n,n.stateNode=s}return Cr(n),null;case 13:if(Ut(Xt),s=n.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Wt&&dn!==null&&n.mode&1&&!(n.flags&128))eA(),Sa(),n.flags|=98560,u=!1;else if(u=_d(n),s!==null&&s.dehydrated!==null){if(r===null){if(!u)throw Error(We(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(We(317));u[Oi]=n}else Sa(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Cr(n),u=!1}else Jn!==null&&(qT(Jn),Jn=null),u=!0;if(!u)return n.flags&65536?n:null}return n.flags&128?(n.lanes=i,n):(s=s!==null,s!==(r!==null&&r.memoizedState!==null)&&s&&(n.child.flags|=8192,n.mode&1&&(r===null||Xt.current&1?fr===0&&(fr=3):Ib())),n.updateQueue!==null&&(n.flags|=4),Cr(n),null);case 4:return Oa(),GT(r,n),r===null&&pc(n.stateNode.containerInfo),Cr(n),null;case 10:return ub(n.type._context),Cr(n),null;case 17:return tn(n.type)&&uf(),Cr(n),null;case 19:if(Ut(Xt),u=n.memoizedState,u===null)return Cr(n),null;if(s=(n.flags&128)!==0,h=u.rendering,h===null)if(s)Fu(u,!1);else{if(fr!==0||r!==null&&r.flags&128)for(r=n.child;r!==null;){if(h=mf(r),h!==null){for(n.flags|=128,Fu(u,!1),s=h.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),n.subtreeFlags=0,s=i,i=n.child;i!==null;)u=i,r=s,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=r,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,r=h.dependencies,u.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i=i.sibling;return Bt(Xt,Xt.current&1|2),n.child}r=r.sibling}u.tail!==null&&or()>ka&&(n.flags|=128,s=!0,Fu(u,!1),n.lanes=4194304)}else{if(!s)if(r=mf(h),r!==null){if(n.flags|=128,s=!0,i=r.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),Fu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!Wt)return Cr(n),null}else 2*or()-u.renderingStartTime>ka&&i!==1073741824&&(n.flags|=128,s=!0,Fu(u,!1),n.lanes=4194304);u.isBackwards?(h.sibling=n.child,n.child=h):(i=u.last,i!==null?i.sibling=h:n.child=h,u.last=h)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=or(),n.sibling=null,i=Xt.current,Bt(Xt,s?i&1|2:i&1),n):(Cr(n),null);case 22:case 23:return Sb(),s=n.memoizedState!==null,r!==null&&r.memoizedState!==null!==s&&(n.flags|=8192),s&&n.mode&1?hn&1073741824&&(Cr(n),n.subtreeFlags&6&&(n.flags|=8192)):Cr(n),null;case 24:return null;case 25:return null}throw Error(We(156,n.tag))}function OD(r,n){switch(ob(n),n.tag){case 1:return tn(n.type)&&uf(),r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 3:return Oa(),Ut(en),Ut(Lr),pb(),r=n.flags,r&65536&&!(r&128)?(n.flags=r&-65537|128,n):null;case 5:return fb(n),null;case 13:if(Ut(Xt),r=n.memoizedState,r!==null&&r.dehydrated!==null){if(n.alternate===null)throw Error(We(340));Sa()}return r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 19:return Ut(Xt),null;case 4:return Oa(),null;case 10:return ub(n.type._context),null;case 22:case 23:return Sb(),null;case 24:return null;default:return null}}var vd=!1,Ar=!1,RD=typeof WeakSet=="function"?WeakSet:Set,et=null;function la(r,n){var i=r.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){rr(r,n,s)}else i.current=null}function VT(r,n,i){try{i()}catch(s){rr(r,n,s)}}var lO=!1;function kD(r,n){if(IT=of,r=HC(),nb(r)){if("selectionStart"in r)var i={start:r.selectionStart,end:r.selectionEnd};else e:{i=(i=r.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var a=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var h=0,d=-1,p=-1,T=0,E=0,y=r,S=null;t:for(;;){for(var x;y!==i||a!==0&&y.nodeType!==3||(d=h+a),y!==u||s!==0&&y.nodeType!==3||(p=h+s),y.nodeType===3&&(h+=y.nodeValue.length),(x=y.firstChild)!==null;)S=y,y=x;for(;;){if(y===r)break t;if(S===i&&++T===a&&(d=h),S===u&&++E===s&&(p=h),(x=y.nextSibling)!==null)break;y=S,S=y.parentNode}y=x}i=d===-1||p===-1?null:{start:d,end:p}}else i=null}i=i||{start:0,end:0}}else i=null;for(OT={focusedElem:r,selectionRange:i},of=!1,et=n;et!==null;)if(n=et,r=n.child,(n.subtreeFlags&1028)!==0&&r!==null)r.return=n,et=r;else for(;et!==null;){n=et;try{var B=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var H=B.memoizedProps,W=B.memoizedState,$=n.stateNode,m=$.getSnapshotBeforeUpdate(n.elementType===n.type?H:Kn(n.type,H),W);$.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var I=n.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(We(163))}}catch(D){rr(n,n.return,D)}if(r=n.sibling,r!==null){r.return=n.return,et=r;break}et=n.return}return B=lO,lO=!1,B}function tc(r,n,i){var s=n.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var u=a.destroy;a.destroy=void 0,u!==void 0&&VT(n,i,u)}a=a.next}while(a!==s)}}function Xf(r,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.create;i.destroy=s()}i=i.next}while(i!==n)}}function WT(r){var n=r.ref;if(n!==null){var i=r.stateNode;switch(r.tag){case 5:r=i;break;default:r=i}typeof n=="function"?n(r):n.current=r}}function BA(r){var n=r.alternate;n!==null&&(r.alternate=null,BA(n)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(n=r.stateNode,n!==null&&(delete n[Oi],delete n[mc],delete n[CT],delete n[hD],delete n[dD])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function FA(r){return r.tag===5||r.tag===3||r.tag===4}function aO(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||FA(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function jT(r,n,i){var s=r.tag;if(s===5||s===6)r=r.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(r,n):i.insertBefore(r,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(r,i)):(n=i,n.appendChild(r)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=af));else if(s!==4&&(r=r.child,r!==null))for(jT(r,n,i),r=r.sibling;r!==null;)jT(r,n,i),r=r.sibling}function zT(r,n,i){var s=r.tag;if(s===5||s===6)r=r.stateNode,n?i.insertBefore(r,n):i.appendChild(r);else if(s!==4&&(r=r.child,r!==null))for(zT(r,n,i),r=r.sibling;r!==null;)zT(r,n,i),r=r.sibling}var yr=null,qn=!1;function Ao(r,n,i){for(i=i.child;i!==null;)UA(r,n,i),i=i.sibling}function UA(r,n,i){if(ki&&typeof ki.onCommitFiberUnmount=="function")try{ki.onCommitFiberUnmount(Ff,i)}catch{}switch(i.tag){case 5:Ar||la(i,n);case 6:var s=yr,a=qn;yr=null,Ao(r,n,i),yr=s,qn=a,yr!==null&&(qn?(r=yr,i=i.stateNode,r.nodeType===8?r.parentNode.removeChild(i):r.removeChild(i)):yr.removeChild(i.stateNode));break;case 18:yr!==null&&(qn?(r=yr,i=i.stateNode,r.nodeType===8?p_(r.parentNode,i):r.nodeType===1&&p_(r,i),hc(r)):p_(yr,i.stateNode));break;case 4:s=yr,a=qn,yr=i.stateNode.containerInfo,qn=!0,Ao(r,n,i),yr=s,qn=a;break;case 0:case 11:case 14:case 15:if(!Ar&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var u=a,h=u.destroy;u=u.tag,h!==void 0&&(u&2||u&4)&&VT(i,n,h),a=a.next}while(a!==s)}Ao(r,n,i);break;case 1:if(!Ar&&(la(i,n),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(d){rr(i,n,d)}Ao(r,n,i);break;case 21:Ao(r,n,i);break;case 22:i.mode&1?(Ar=(s=Ar)||i.memoizedState!==null,Ao(r,n,i),Ar=s):Ao(r,n,i);break;default:Ao(r,n,i)}}function uO(r){var n=r.updateQueue;if(n!==null){r.updateQueue=null;var i=r.stateNode;i===null&&(i=r.stateNode=new RD),n.forEach(function(s){var a=BD.bind(null,r,s);i.has(s)||(i.add(s),s.then(a,a))})}}function jn(r,n){var i=n.deletions;if(i!==null)for(var s=0;s<i.length;s++){var a=i[s];try{var u=r,h=n,d=h;e:for(;d!==null;){switch(d.tag){case 5:yr=d.stateNode,qn=!1;break e;case 3:yr=d.stateNode.containerInfo,qn=!0;break e;case 4:yr=d.stateNode.containerInfo,qn=!0;break e}d=d.return}if(yr===null)throw Error(We(160));UA(u,h,a),yr=null,qn=!1;var p=a.alternate;p!==null&&(p.return=null),a.return=null}catch(T){rr(a,n,T)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)HA(n,r),n=n.sibling}function HA(r,n){var i=r.alternate,s=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(jn(n,r),_i(r),s&4){try{tc(3,r,r.return),Xf(3,r)}catch(H){rr(r,r.return,H)}try{tc(5,r,r.return)}catch(H){rr(r,r.return,H)}}break;case 1:jn(n,r),_i(r),s&512&&i!==null&&la(i,i.return);break;case 5:if(jn(n,r),_i(r),s&512&&i!==null&&la(i,i.return),r.flags&32){var a=r.stateNode;try{lc(a,"")}catch(H){rr(r,r.return,H)}}if(s&4&&(a=r.stateNode,a!=null)){var u=r.memoizedProps,h=i!==null?i.memoizedProps:u,d=r.type,p=r.updateQueue;if(r.updateQueue=null,p!==null)try{d==="input"&&u.type==="radio"&&u.name!=null&&aC(a,u),mT(d,h);var T=mT(d,u);for(h=0;h<p.length;h+=2){var E=p[h],y=p[h+1];E==="style"?fC(a,y):E==="dangerouslySetInnerHTML"?hC(a,y):E==="children"?lc(a,y):Wv(a,E,y,T)}switch(d){case"input":hT(a,u);break;case"textarea":uC(a,u);break;case"select":var S=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!u.multiple;var x=u.value;x!=null?ha(a,!!u.multiple,x,!1):S!==!!u.multiple&&(u.defaultValue!=null?ha(a,!!u.multiple,u.defaultValue,!0):ha(a,!!u.multiple,u.multiple?[]:"",!1))}a[mc]=u}catch(H){rr(r,r.return,H)}}break;case 6:if(jn(n,r),_i(r),s&4){if(r.stateNode===null)throw Error(We(162));a=r.stateNode,u=r.memoizedProps;try{a.nodeValue=u}catch(H){rr(r,r.return,H)}}break;case 3:if(jn(n,r),_i(r),s&4&&i!==null&&i.memoizedState.isDehydrated)try{hc(n.containerInfo)}catch(H){rr(r,r.return,H)}break;case 4:jn(n,r),_i(r);break;case 13:jn(n,r),_i(r),a=r.child,a.flags&8192&&(u=a.memoizedState!==null,a.stateNode.isHidden=u,!u||a.alternate!==null&&a.alternate.memoizedState!==null||(yb=or())),s&4&&uO(r);break;case 22:if(E=i!==null&&i.memoizedState!==null,r.mode&1?(Ar=(T=Ar)||E,jn(n,r),Ar=T):jn(n,r),_i(r),s&8192){if(T=r.memoizedState!==null,(r.stateNode.isHidden=T)&&!E&&r.mode&1)for(et=r,E=r.child;E!==null;){for(y=et=E;et!==null;){switch(S=et,x=S.child,S.tag){case 0:case 11:case 14:case 15:tc(4,S,S.return);break;case 1:la(S,S.return);var B=S.stateNode;if(typeof B.componentWillUnmount=="function"){s=S,i=S.return;try{n=s,B.props=n.memoizedProps,B.state=n.memoizedState,B.componentWillUnmount()}catch(H){rr(s,i,H)}}break;case 5:la(S,S.return);break;case 22:if(S.memoizedState!==null){hO(y);continue}}x!==null?(x.return=S,et=x):hO(y)}E=E.sibling}e:for(E=null,y=r;;){if(y.tag===5){if(E===null){E=y;try{a=y.stateNode,T?(u=a.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(d=y.stateNode,p=y.memoizedProps.style,h=p!=null&&p.hasOwnProperty("display")?p.display:null,d.style.display=dC("display",h))}catch(H){rr(r,r.return,H)}}}else if(y.tag===6){if(E===null)try{y.stateNode.nodeValue=T?"":y.memoizedProps}catch(H){rr(r,r.return,H)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===r)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===r)break e;for(;y.sibling===null;){if(y.return===null||y.return===r)break e;E===y&&(E=null),y=y.return}E===y&&(E=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:jn(n,r),_i(r),s&4&&uO(r);break;case 21:break;default:jn(n,r),_i(r)}}function _i(r){var n=r.flags;if(n&2){try{e:{for(var i=r.return;i!==null;){if(FA(i)){var s=i;break e}i=i.return}throw Error(We(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(lc(a,""),s.flags&=-33);var u=aO(r);zT(r,u,a);break;case 3:case 4:var h=s.stateNode.containerInfo,d=aO(r);jT(r,d,h);break;default:throw Error(We(161))}}catch(p){rr(r,r.return,p)}r.flags&=-3}n&4096&&(r.flags&=-4097)}function CD(r,n,i){et=r,GA(r)}function GA(r,n,i){for(var s=(r.mode&1)!==0;et!==null;){var a=et,u=a.child;if(a.tag===22&&s){var h=a.memoizedState!==null||vd;if(!h){var d=a.alternate,p=d!==null&&d.memoizedState!==null||Ar;d=vd;var T=Ar;if(vd=h,(Ar=p)&&!T)for(et=a;et!==null;)h=et,p=h.child,h.tag===22&&h.memoizedState!==null?dO(a):p!==null?(p.return=h,et=p):dO(a);for(;u!==null;)et=u,GA(u),u=u.sibling;et=a,vd=d,Ar=T}cO(r)}else a.subtreeFlags&8772&&u!==null?(u.return=a,et=u):cO(r)}}function cO(r){for(;et!==null;){var n=et;if(n.flags&8772){var i=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Ar||Xf(5,n);break;case 1:var s=n.stateNode;if(n.flags&4&&!Ar)if(i===null)s.componentDidMount();else{var a=n.elementType===n.type?i.memoizedProps:Kn(n.type,i.memoizedProps);s.componentDidUpdate(a,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var u=n.updateQueue;u!==null&&XI(n,u,s);break;case 3:var h=n.updateQueue;if(h!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}XI(n,h,i)}break;case 5:var d=n.stateNode;if(i===null&&n.flags&4){i=d;var p=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&i.focus();break;case"img":p.src&&(i.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var T=n.alternate;if(T!==null){var E=T.memoizedState;if(E!==null){var y=E.dehydrated;y!==null&&hc(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(We(163))}Ar||n.flags&512&&WT(n)}catch(S){rr(n,n.return,S)}}if(n===r){et=null;break}if(i=n.sibling,i!==null){i.return=n.return,et=i;break}et=n.return}}function hO(r){for(;et!==null;){var n=et;if(n===r){et=null;break}var i=n.sibling;if(i!==null){i.return=n.return,et=i;break}et=n.return}}function dO(r){for(;et!==null;){var n=et;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{Xf(4,n)}catch(p){rr(n,i,p)}break;case 1:var s=n.stateNode;if(typeof s.componentDidMount=="function"){var a=n.return;try{s.componentDidMount()}catch(p){rr(n,a,p)}}var u=n.return;try{WT(n)}catch(p){rr(n,u,p)}break;case 5:var h=n.return;try{WT(n)}catch(p){rr(n,h,p)}}}catch(p){rr(n,n.return,p)}if(n===r){et=null;break}var d=n.sibling;if(d!==null){d.return=n.return,et=d;break}et=n.return}}var AD=Math.ceil,Ef=ao.ReactCurrentDispatcher,vb=ao.ReactCurrentOwner,Cn=ao.ReactCurrentBatchConfig,St=0,Er=null,cr=null,wr=0,hn=0,aa=es(0),fr=0,bc=null,zs=0,Yf=0,bb=0,rc=null,Jr=null,yb=0,ka=1/0,qi=null,Tf=!1,XT=null,jo=null,bd=!1,Fo=null,vf=0,nc=0,YT=null,Gd=-1,Vd=0;function Hr(){return St&6?or():Gd!==-1?Gd:Gd=or()}function zo(r){return r.mode&1?St&2&&wr!==0?wr&-wr:pD.transition!==null?(Vd===0&&(Vd=SC()),Vd):(r=Ot,r!==0||(r=window.event,r=r===void 0?16:LC(r.type)),r):1}function ei(r,n,i,s){if(50<nc)throw nc=0,YT=null,Error(We(185));Cc(r,i,s),(!(St&2)||r!==Er)&&(r===Er&&(!(St&2)&&(Yf|=i),fr===4&&Po(r,wr)),rn(r,s),i===1&&St===0&&!(n.mode&1)&&(ka=or()+500,Wf&&ts()))}function rn(r,n){var i=r.callbackNode;p1(r,n);var s=nf(r,r===Er?wr:0);if(s===0)i!==null&&vI(i),r.callbackNode=null,r.callbackPriority=0;else if(n=s&-s,r.callbackPriority!==n){if(i!=null&&vI(i),n===1)r.tag===0?fD(fO.bind(null,r)):ZC(fO.bind(null,r)),uD(function(){!(St&6)&&ts()}),i=null;else{switch(IC(s)){case 1:i=Kv;break;case 4:i=yC;break;case 16:i=rf;break;case 536870912:i=wC;break;default:i=rf}i=qA(i,VA.bind(null,r))}r.callbackPriority=n,r.callbackNode=i}}function VA(r,n){if(Gd=-1,Vd=0,St&6)throw Error(We(327));var i=r.callbackNode;if(ma()&&r.callbackNode!==i)return null;var s=nf(r,r===Er?wr:0);if(s===0)return null;if(s&30||s&r.expiredLanes||n)n=bf(r,s);else{n=s;var a=St;St|=2;var u=jA();(Er!==r||wr!==n)&&(qi=null,ka=or()+500,Fs(r,n));do try{xD();break}catch(d){WA(r,d)}while(1);ab(),Ef.current=u,St=a,cr!==null?n=0:(Er=null,wr=0,n=fr)}if(n!==0){if(n===2&&(a=vT(r),a!==0&&(s=a,n=KT(r,a))),n===1)throw i=bc,Fs(r,0),Po(r,s),rn(r,or()),i;if(n===6)Po(r,s);else{if(a=r.current.alternate,!(s&30)&&!LD(a)&&(n=bf(r,s),n===2&&(u=vT(r),u!==0&&(s=u,n=KT(r,u))),n===1))throw i=bc,Fs(r,0),Po(r,s),rn(r,or()),i;switch(r.finishedWork=a,r.finishedLanes=s,n){case 0:case 1:throw Error(We(345));case 2:xs(r,Jr,qi);break;case 3:if(Po(r,s),(s&130023424)===s&&(n=yb+500-or(),10<n)){if(nf(r,0)!==0)break;if(a=r.suspendedLanes,(a&s)!==s){Hr(),r.pingedLanes|=r.suspendedLanes&a;break}r.timeoutHandle=kT(xs.bind(null,r,Jr,qi),n);break}xs(r,Jr,qi);break;case 4:if(Po(r,s),(s&4194240)===s)break;for(n=r.eventTimes,a=-1;0<s;){var h=31-Qn(s);u=1<<h,h=n[h],h>a&&(a=h),s&=~u}if(s=a,s=or()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*AD(s/1960))-s,10<s){r.timeoutHandle=kT(xs.bind(null,r,Jr,qi),s);break}xs(r,Jr,qi);break;case 5:xs(r,Jr,qi);break;default:throw Error(We(329))}}}return rn(r,or()),r.callbackNode===i?VA.bind(null,r):null}function KT(r,n){var i=rc;return r.current.memoizedState.isDehydrated&&(Fs(r,n).flags|=256),r=bf(r,n),r!==2&&(n=Jr,Jr=i,n!==null&&qT(n)),r}function qT(r){Jr===null?Jr=r:Jr.push.apply(Jr,r)}function LD(r){for(var n=r;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var a=i[s],u=a.getSnapshot;a=a.value;try{if(!ti(u(),a))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Po(r,n){for(n&=~bb,n&=~Yf,r.suspendedLanes|=n,r.pingedLanes&=~n,r=r.expirationTimes;0<n;){var i=31-Qn(n),s=1<<i;r[i]=-1,n&=~s}}function fO(r){if(St&6)throw Error(We(327));ma();var n=nf(r,0);if(!(n&1))return rn(r,or()),null;var i=bf(r,n);if(r.tag!==0&&i===2){var s=vT(r);s!==0&&(n=s,i=KT(r,s))}if(i===1)throw i=bc,Fs(r,0),Po(r,n),rn(r,or()),i;if(i===6)throw Error(We(345));return r.finishedWork=r.current.alternate,r.finishedLanes=n,xs(r,Jr,qi),rn(r,or()),null}function wb(r,n){var i=St;St|=1;try{return r(n)}finally{St=i,St===0&&(ka=or()+500,Wf&&ts())}}function Xs(r){Fo!==null&&Fo.tag===0&&!(St&6)&&ma();var n=St;St|=1;var i=Cn.transition,s=Ot;try{if(Cn.transition=null,Ot=1,r)return r()}finally{Ot=s,Cn.transition=i,St=n,!(St&6)&&ts()}}function Sb(){hn=aa.current,Ut(aa)}function Fs(r,n){r.finishedWork=null,r.finishedLanes=0;var i=r.timeoutHandle;if(i!==-1&&(r.timeoutHandle=-1,aD(i)),cr!==null)for(i=cr.return;i!==null;){var s=i;switch(ob(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&uf();break;case 3:Oa(),Ut(en),Ut(Lr),pb();break;case 5:fb(s);break;case 4:Oa();break;case 13:Ut(Xt);break;case 19:Ut(Xt);break;case 10:ub(s.type._context);break;case 22:case 23:Sb()}i=i.return}if(Er=r,cr=r=Xo(r.current,null),wr=hn=n,fr=0,bc=null,bb=Yf=zs=0,Jr=rc=null,Ds!==null){for(n=0;n<Ds.length;n++)if(i=Ds[n],s=i.interleaved,s!==null){i.interleaved=null;var a=s.next,u=i.pending;if(u!==null){var h=u.next;u.next=a,s.next=h}i.pending=s}Ds=null}return r}function WA(r,n){do{var i=cr;try{if(ab(),Fd.current=_f,$f){for(var s=Yt.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}$f=!1}if(js=0,_r=dr=Yt=null,ec=!1,Ec=0,vb.current=null,i===null||i.return===null){fr=1,bc=n,cr=null;break}e:{var u=r,h=i.return,d=i,p=n;if(n=wr,d.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var T=p,E=d,y=E.tag;if(!(E.mode&1)&&(y===0||y===11||y===15)){var S=E.alternate;S?(E.updateQueue=S.updateQueue,E.memoizedState=S.memoizedState,E.lanes=S.lanes):(E.updateQueue=null,E.memoizedState=null)}var x=eO(h);if(x!==null){x.flags&=-257,tO(x,h,d,u,n),x.mode&1&&QI(u,T,n),n=x,p=T;var B=n.updateQueue;if(B===null){var H=new Set;H.add(p),n.updateQueue=H}else B.add(p);break e}else{if(!(n&1)){QI(u,T,n),Ib();break e}p=Error(We(426))}}else if(Wt&&d.mode&1){var W=eO(h);if(W!==null){!(W.flags&65536)&&(W.flags|=256),tO(W,h,d,u,n),sb(Ra(p,d));break e}}u=p=Ra(p,d),fr!==4&&(fr=2),rc===null?rc=[u]:rc.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,n&=-n,u.lanes|=n;var $=OA(u,p,n);zI(u,$);break e;case 1:d=p;var m=u.type,I=u.stateNode;if(!(u.flags&128)&&(typeof m.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(jo===null||!jo.has(I)))){u.flags|=65536,n&=-n,u.lanes|=n;var D=RA(u,d,n);zI(u,D);break e}}u=u.return}while(u!==null)}XA(i)}catch(C){n=C,cr===i&&i!==null&&(cr=i=i.return);continue}break}while(1)}function jA(){var r=Ef.current;return Ef.current=_f,r===null?_f:r}function Ib(){(fr===0||fr===3||fr===2)&&(fr=4),Er===null||!(zs&268435455)&&!(Yf&268435455)||Po(Er,wr)}function bf(r,n){var i=St;St|=2;var s=jA();(Er!==r||wr!==n)&&(qi=null,Fs(r,n));do try{ND();break}catch(a){WA(r,a)}while(1);if(ab(),St=i,Ef.current=s,cr!==null)throw Error(We(261));return Er=null,wr=0,fr}function ND(){for(;cr!==null;)zA(cr)}function xD(){for(;cr!==null&&!o1();)zA(cr)}function zA(r){var n=KA(r.alternate,r,hn);r.memoizedProps=r.pendingProps,n===null?XA(r):cr=n,vb.current=null}function XA(r){var n=r;do{var i=n.alternate;if(r=n.return,n.flags&32768){if(i=OD(i,n),i!==null){i.flags&=32767,cr=i;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{fr=6,cr=null;return}}else if(i=ID(i,n,hn),i!==null){cr=i;return}if(n=n.sibling,n!==null){cr=n;return}cr=n=r}while(n!==null);fr===0&&(fr=5)}function xs(r,n,i){var s=Ot,a=Cn.transition;try{Cn.transition=null,Ot=1,MD(r,n,i,s)}finally{Cn.transition=a,Ot=s}return null}function MD(r,n,i,s){do ma();while(Fo!==null);if(St&6)throw Error(We(327));i=r.finishedWork;var a=r.finishedLanes;if(i===null)return null;if(r.finishedWork=null,r.finishedLanes=0,i===r.current)throw Error(We(177));r.callbackNode=null,r.callbackPriority=0;var u=i.lanes|i.childLanes;if(g1(r,u),r===Er&&(cr=Er=null,wr=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||bd||(bd=!0,qA(rf,function(){return ma(),null})),u=(i.flags&15990)!==0,i.subtreeFlags&15990||u){u=Cn.transition,Cn.transition=null;var h=Ot;Ot=1;var d=St;St|=4,vb.current=null,kD(r,i),HA(i,r),tD(OT),of=!!IT,OT=IT=null,r.current=i,CD(i),s1(),St=d,Ot=h,Cn.transition=u}else r.current=i;if(bd&&(bd=!1,Fo=r,vf=a),u=r.pendingLanes,u===0&&(jo=null),u1(i.stateNode),rn(r,or()),n!==null)for(s=r.onRecoverableError,i=0;i<n.length;i++)a=n[i],s(a.value,{componentStack:a.stack,digest:a.digest});if(Tf)throw Tf=!1,r=XT,XT=null,r;return vf&1&&r.tag!==0&&ma(),u=r.pendingLanes,u&1?r===YT?nc++:(nc=0,YT=r):nc=0,ts(),null}function ma(){if(Fo!==null){var r=IC(vf),n=Cn.transition,i=Ot;try{if(Cn.transition=null,Ot=16>r?16:r,Fo===null)var s=!1;else{if(r=Fo,Fo=null,vf=0,St&6)throw Error(We(331));var a=St;for(St|=4,et=r.current;et!==null;){var u=et,h=u.child;if(et.flags&16){var d=u.deletions;if(d!==null){for(var p=0;p<d.length;p++){var T=d[p];for(et=T;et!==null;){var E=et;switch(E.tag){case 0:case 11:case 15:tc(8,E,u)}var y=E.child;if(y!==null)y.return=E,et=y;else for(;et!==null;){E=et;var S=E.sibling,x=E.return;if(BA(E),E===T){et=null;break}if(S!==null){S.return=x,et=S;break}et=x}}}var B=u.alternate;if(B!==null){var H=B.child;if(H!==null){B.child=null;do{var W=H.sibling;H.sibling=null,H=W}while(H!==null)}}et=u}}if(u.subtreeFlags&2064&&h!==null)h.return=u,et=h;else e:for(;et!==null;){if(u=et,u.flags&2048)switch(u.tag){case 0:case 11:case 15:tc(9,u,u.return)}var $=u.sibling;if($!==null){$.return=u.return,et=$;break e}et=u.return}}var m=r.current;for(et=m;et!==null;){h=et;var I=h.child;if(h.subtreeFlags&2064&&I!==null)I.return=h,et=I;else e:for(h=m;et!==null;){if(d=et,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Xf(9,d)}}catch(C){rr(d,d.return,C)}if(d===h){et=null;break e}var D=d.sibling;if(D!==null){D.return=d.return,et=D;break e}et=d.return}}if(St=a,ts(),ki&&typeof ki.onPostCommitFiberRoot=="function")try{ki.onPostCommitFiberRoot(Ff,r)}catch{}s=!0}return s}finally{Ot=i,Cn.transition=n}}return!1}function pO(r,n,i){n=Ra(i,n),n=OA(r,n,1),r=Wo(r,n,1),n=Hr(),r!==null&&(Cc(r,1,n),rn(r,n))}function rr(r,n,i){if(r.tag===3)pO(r,r,i);else for(;n!==null;){if(n.tag===3){pO(n,r,i);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(jo===null||!jo.has(s))){r=Ra(i,r),r=RA(n,r,1),n=Wo(n,r,1),r=Hr(),n!==null&&(Cc(n,1,r),rn(n,r));break}}n=n.return}}function DD(r,n,i){var s=r.pingCache;s!==null&&s.delete(n),n=Hr(),r.pingedLanes|=r.suspendedLanes&i,Er===r&&(wr&i)===i&&(fr===4||fr===3&&(wr&130023424)===wr&&500>or()-yb?Fs(r,0):bb|=i),rn(r,n)}function YA(r,n){n===0&&(r.mode&1?(n=dd,dd<<=1,!(dd&130023424)&&(dd=4194304)):n=1);var i=Hr();r=oo(r,n),r!==null&&(Cc(r,n,i),rn(r,i))}function PD(r){var n=r.memoizedState,i=0;n!==null&&(i=n.retryLane),YA(r,i)}function BD(r,n){var i=0;switch(r.tag){case 13:var s=r.stateNode,a=r.memoizedState;a!==null&&(i=a.retryLane);break;case 19:s=r.stateNode;break;default:throw Error(We(314))}s!==null&&s.delete(n),YA(r,i)}var KA;KA=function(r,n,i){if(r!==null)if(r.memoizedProps!==n.pendingProps||en.current)Qr=!0;else{if(!(r.lanes&i)&&!(n.flags&128))return Qr=!1,SD(r,n,i);Qr=!!(r.flags&131072)}else Qr=!1,Wt&&n.flags&1048576&&JC(n,df,n.index);switch(n.lanes=0,n.tag){case 2:var s=n.type;Hd(r,n),r=n.pendingProps;var a=wa(n,Lr.current);ga(n,i),a=mb(null,n,s,r,a,i);var u=$b();return n.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,tn(s)?(u=!0,cf(n)):u=!1,n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,hb(n),a.updater=jf,n.stateNode=a,a._reactInternals=n,DT(n,s,r,i),n=FT(null,n,s,!0,u,i)):(n.tag=0,Wt&&u&&ib(n),Ur(null,n,a,i),n=n.child),n;case 16:s=n.elementType;e:{switch(Hd(r,n),r=n.pendingProps,a=s._init,s=a(s._payload),n.type=s,a=n.tag=UD(s),r=Kn(s,r),a){case 0:n=BT(null,n,s,r,i);break e;case 1:n=iO(null,n,s,r,i);break e;case 11:n=rO(null,n,s,r,i);break e;case 14:n=nO(null,n,s,Kn(s.type,r),i);break e}throw Error(We(306,s,""))}return n;case 0:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Kn(s,a),BT(r,n,s,a,i);case 1:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Kn(s,a),iO(r,n,s,a,i);case 3:e:{if(LA(n),r===null)throw Error(We(387));s=n.pendingProps,u=n.memoizedState,a=u.element,rA(r,n),gf(n,s,null,i);var h=n.memoizedState;if(s=h.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},n.updateQueue.baseState=u,n.memoizedState=u,n.flags&256){a=Ra(Error(We(423)),n),n=oO(r,n,s,i,a);break e}else if(s!==a){a=Ra(Error(We(424)),n),n=oO(r,n,s,i,a);break e}else for(dn=Vo(n.stateNode.containerInfo.firstChild),fn=n,Wt=!0,Jn=null,i=sA(n,null,s,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Sa(),s===a){n=so(r,n,i);break e}Ur(r,n,s,i)}n=n.child}return n;case 5:return lA(n),r===null&&NT(n),s=n.type,a=n.pendingProps,u=r!==null?r.memoizedProps:null,h=a.children,RT(s,a)?h=null:u!==null&&RT(s,u)&&(n.flags|=32),AA(r,n),Ur(r,n,h,i),n.child;case 6:return r===null&&NT(n),null;case 13:return NA(r,n,i);case 4:return db(n,n.stateNode.containerInfo),s=n.pendingProps,r===null?n.child=Ia(n,null,s,i):Ur(r,n,s,i),n.child;case 11:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Kn(s,a),rO(r,n,s,a,i);case 7:return Ur(r,n,n.pendingProps,i),n.child;case 8:return Ur(r,n,n.pendingProps.children,i),n.child;case 12:return Ur(r,n,n.pendingProps.children,i),n.child;case 10:e:{if(s=n.type._context,a=n.pendingProps,u=n.memoizedProps,h=a.value,Bt(ff,s._currentValue),s._currentValue=h,u!==null)if(ti(u.value,h)){if(u.children===a.children&&!en.current){n=so(r,n,i);break e}}else for(u=n.child,u!==null&&(u.return=n);u!==null;){var d=u.dependencies;if(d!==null){h=u.child;for(var p=d.firstContext;p!==null;){if(p.context===s){if(u.tag===1){p=to(-1,i&-i),p.tag=2;var T=u.updateQueue;if(T!==null){T=T.shared;var E=T.pending;E===null?p.next=p:(p.next=E.next,E.next=p),T.pending=p}}u.lanes|=i,p=u.alternate,p!==null&&(p.lanes|=i),xT(u.return,i,n),d.lanes|=i;break}p=p.next}}else if(u.tag===10)h=u.type===n.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(We(341));h.lanes|=i,d=h.alternate,d!==null&&(d.lanes|=i),xT(h,i,n),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===n){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}Ur(r,n,a.children,i),n=n.child}return n;case 9:return a=n.type,s=n.pendingProps.children,ga(n,i),a=Ln(a),s=s(a),n.flags|=1,Ur(r,n,s,i),n.child;case 14:return s=n.type,a=Kn(s,n.pendingProps),a=Kn(s.type,a),nO(r,n,s,a,i);case 15:return kA(r,n,n.type,n.pendingProps,i);case 17:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Kn(s,a),Hd(r,n),n.tag=1,tn(s)?(r=!0,cf(n)):r=!1,ga(n,i),iA(n,s,a),DT(n,s,a,i),FT(null,n,s,!0,r,i);case 19:return xA(r,n,i);case 22:return CA(r,n,i)}throw Error(We(156,n.tag))};function qA(r,n){return bC(r,n)}function FD(r,n,i,s){this.tag=r,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(r,n,i,s){return new FD(r,n,i,s)}function Ob(r){return r=r.prototype,!(!r||!r.isReactComponent)}function UD(r){if(typeof r=="function")return Ob(r)?1:0;if(r!=null){if(r=r.$$typeof,r===zv)return 11;if(r===Xv)return 14}return 2}function Xo(r,n){var i=r.alternate;return i===null?(i=kn(r.tag,n,r.key,r.mode),i.elementType=r.elementType,i.type=r.type,i.stateNode=r.stateNode,i.alternate=r,r.alternate=i):(i.pendingProps=n,i.type=r.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=r.flags&14680064,i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,n=r.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=r.sibling,i.index=r.index,i.ref=r.ref,i}function Wd(r,n,i,s,a,u){var h=2;if(s=r,typeof r=="function")Ob(r)&&(h=1);else if(typeof r=="string")h=5;else e:switch(r){case Jl:return Us(i.children,a,u,n);case jv:h=8,a|=8;break;case sT:return r=kn(12,i,n,a|2),r.elementType=sT,r.lanes=u,r;case lT:return r=kn(13,i,n,a),r.elementType=lT,r.lanes=u,r;case aT:return r=kn(19,i,n,a),r.elementType=aT,r.lanes=u,r;case oC:return Kf(i,a,u,n);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case nC:h=10;break e;case iC:h=9;break e;case zv:h=11;break e;case Xv:h=14;break e;case xo:h=16,s=null;break e}throw Error(We(130,r==null?r:typeof r,""))}return n=kn(h,i,n,a),n.elementType=r,n.type=s,n.lanes=u,n}function Us(r,n,i,s){return r=kn(7,r,s,n),r.lanes=i,r}function Kf(r,n,i,s){return r=kn(22,r,s,n),r.elementType=oC,r.lanes=i,r.stateNode={isHidden:!1},r}function b_(r,n,i){return r=kn(6,r,null,n),r.lanes=i,r}function y_(r,n,i){return n=kn(4,r.children!==null?r.children:[],r.key,n),n.lanes=i,n.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},n}function HD(r,n,i,s,a){this.tag=n,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=n_(0),this.expirationTimes=n_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=n_(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Rb(r,n,i,s,a,u,h,d,p){return r=new HD(r,n,i,d,p),n===1?(n=1,u===!0&&(n|=8)):n=0,u=kn(3,null,null,n),r.current=u,u.stateNode=r,u.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},hb(u),r}function GD(r,n,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zl,key:s==null?null:""+s,children:r,containerInfo:n,implementation:i}}function ZA(r){if(!r)return qo;r=r._reactInternals;e:{if(Js(r)!==r||r.tag!==1)throw Error(We(170));var n=r;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(tn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(We(171))}if(r.tag===1){var i=r.type;if(tn(i))return qC(r,i,n)}return n}function JA(r,n,i,s,a,u,h,d,p){return r=Rb(i,s,!0,r,a,u,h,d,p),r.context=ZA(null),i=r.current,s=Hr(),a=zo(i),u=to(s,a),u.callback=n??null,Wo(i,u,a),r.current.lanes=a,Cc(r,a,s),rn(r,s),r}function qf(r,n,i,s){var a=n.current,u=Hr(),h=zo(a);return i=ZA(i),n.context===null?n.context=i:n.pendingContext=i,n=to(u,h),n.payload={element:r},s=s===void 0?null:s,s!==null&&(n.callback=s),r=Wo(a,n,h),r!==null&&(ei(r,a,h,u),Bd(r,a,h)),h}function yf(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function gO(r,n){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var i=r.retryLane;r.retryLane=i!==0&&i<n?i:n}}function kb(r,n){gO(r,n),(r=r.alternate)&&gO(r,n)}function VD(){return null}var QA=typeof reportError=="function"?reportError:function(r){console.error(r)};function Cb(r){this._internalRoot=r}Zf.prototype.render=Cb.prototype.render=function(r){var n=this._internalRoot;if(n===null)throw Error(We(409));qf(r,n,null,null)};Zf.prototype.unmount=Cb.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var n=r.containerInfo;Xs(function(){qf(null,r,null,null)}),n[io]=null}};function Zf(r){this._internalRoot=r}Zf.prototype.unstable_scheduleHydration=function(r){if(r){var n=kC();r={blockedOn:null,target:r,priority:n};for(var i=0;i<Do.length&&n!==0&&n<Do[i].priority;i++);Do.splice(i,0,r),i===0&&AC(r)}};function Ab(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Jf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function mO(){}function WD(r,n,i,s,a){if(a){if(typeof s=="function"){var u=s;s=function(){var T=yf(h);u.call(T)}}var h=JA(n,s,r,0,null,!1,!1,"",mO);return r._reactRootContainer=h,r[io]=h.current,pc(r.nodeType===8?r.parentNode:r),Xs(),h}for(;a=r.lastChild;)r.removeChild(a);if(typeof s=="function"){var d=s;s=function(){var T=yf(p);d.call(T)}}var p=Rb(r,0,!1,null,null,!1,!1,"",mO);return r._reactRootContainer=p,r[io]=p.current,pc(r.nodeType===8?r.parentNode:r),Xs(function(){qf(n,p,i,s)}),p}function Qf(r,n,i,s,a){var u=i._reactRootContainer;if(u){var h=u;if(typeof a=="function"){var d=a;a=function(){var p=yf(h);d.call(p)}}qf(n,h,r,a)}else h=WD(i,n,r,a,s);return yf(h)}OC=function(r){switch(r.tag){case 3:var n=r.stateNode;if(n.current.memoizedState.isDehydrated){var i=ju(n.pendingLanes);i!==0&&(qv(n,i|1),rn(n,or()),!(St&6)&&(ka=or()+500,ts()))}break;case 13:Xs(function(){var s=oo(r,1);if(s!==null){var a=Hr();ei(s,r,1,a)}}),kb(r,1)}};Zv=function(r){if(r.tag===13){var n=oo(r,134217728);if(n!==null){var i=Hr();ei(n,r,134217728,i)}kb(r,134217728)}};RC=function(r){if(r.tag===13){var n=zo(r),i=oo(r,n);if(i!==null){var s=Hr();ei(i,r,n,s)}kb(r,n)}};kC=function(){return Ot};CC=function(r,n){var i=Ot;try{return Ot=r,n()}finally{Ot=i}};_T=function(r,n,i){switch(n){case"input":if(hT(r,i),n=i.name,i.type==="radio"&&n!=null){for(i=r;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var s=i[n];if(s!==r&&s.form===r.form){var a=Vf(s);if(!a)throw Error(We(90));lC(s),hT(s,a)}}}break;case"textarea":uC(r,i);break;case"select":n=i.value,n!=null&&ha(r,!!i.multiple,n,!1)}};mC=wb;$C=Xs;var jD={usingClientEntryPoint:!1,Events:[Lc,ra,Vf,pC,gC,wb]},Uu={findFiberByHostInstance:Ms,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zD={bundleType:Uu.bundleType,version:Uu.version,rendererPackageName:Uu.rendererPackageName,rendererConfig:Uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ao.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=TC(r),r===null?null:r.stateNode},findFiberByHostInstance:Uu.findFiberByHostInstance||VD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yd.isDisabled&&yd.supportsFiber)try{Ff=yd.inject(zD),ki=yd}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jD;gn.createPortal=function(r,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ab(n))throw Error(We(200));return GD(r,n,null,i)};gn.createRoot=function(r,n){if(!Ab(r))throw Error(We(299));var i=!1,s="",a=QA;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),n=Rb(r,1,!1,null,null,i,!1,s,a),r[io]=n.current,pc(r.nodeType===8?r.parentNode:r),new Cb(n)};gn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var n=r._reactInternals;if(n===void 0)throw typeof r.render=="function"?Error(We(188)):(r=Object.keys(r).join(","),Error(We(268,r)));return r=TC(n),r=r===null?null:r.stateNode,r};gn.flushSync=function(r){return Xs(r)};gn.hydrate=function(r,n,i){if(!Jf(n))throw Error(We(200));return Qf(null,r,n,!0,i)};gn.hydrateRoot=function(r,n,i){if(!Ab(r))throw Error(We(405));var s=i!=null&&i.hydratedSources||null,a=!1,u="",h=QA;if(i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),n=JA(n,null,r,1,i??null,a,!1,u,h),r[io]=n.current,pc(r),s)for(r=0;r<s.length;r++)i=s[r],a=i._getVersion,a=a(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,a]:n.mutableSourceEagerHydrationData.push(i,a);return new Zf(n)};gn.render=function(r,n,i){if(!Jf(n))throw Error(We(200));return Qf(null,r,n,!1,i)};gn.unmountComponentAtNode=function(r){if(!Jf(r))throw Error(We(40));return r._reactRootContainer?(Xs(function(){Qf(null,null,r,!1,function(){r._reactRootContainer=null,r[io]=null})}),!0):!1};gn.unstable_batchedUpdates=wb;gn.unstable_renderSubtreeIntoContainer=function(r,n,i,s){if(!Jf(i))throw Error(We(200));if(r==null||r._reactInternals===void 0)throw Error(We(38));return Qf(r,n,i,!1,s)};gn.version="18.2.0-next-9e3b772b8-20220608";function eL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eL)}catch(r){console.error(r)}}eL(),Jk.exports=gn;var XD=Jk.exports,$O=XD;iT.createRoot=$O.createRoot,iT.hydrateRoot=$O.hydrateRoot;var tL={exports:{}},w_={exports:{}},S_={exports:{}},I_={exports:{}},O_={exports:{}},_O;function Lb(){return _O||(_O=1,function(r,n){(function(i,s){r.exports=s()})(ut,function(){var i={},s,a,u,h,d,p,T,E,y,S,x,B,H,W,$,m,I,D,C,U,V,te,ae,de,we,q,J,G,X,ce,fe,re,ge,ue,ie,A,Y,K,pe,j,ee,me,Se,Ne,O,F,Oe,Ae,nt,P,v,w,M,Te,Me,se,be,De,Fe,Ge,ze,Xe,st,oe,f,R,Q,le,Z,ye,N,Be,ot,_,ke,Ie,z,$e,Re,Qe,b,k,ne,Ee,Le,Ue,tt,gt,jt,Ye,Ht,lt,pr,Nt,Tr,Or,xr,mp,Ha,cy,$p,ri,ho,_p,Ep,Fc,Tp,ns,Uc,vp,bp,hy,dy,yp,Ga,fy,py,fo,wp,ni,gy,my,$y,Sp,_y,Ey,Ty,vy,by,Ip,yy,wy,Hc,Sy,Iy,Op,Gc,Oy,ii,Ry,ky,Cy,Ay,Ly,Ny,xy,Rp,po,Vc,kp,My,Dy,Py,By,Fy,Uy,Hy,Gy,Cp,Vy,go,Wy,jy,zy,nl,Ap,il,Lp,Np,xp,ol,Wc,jc,Xy,Va,Mp,Dp,Pp,Bp,Fp,Up,Yy,Wa,Hp,sl,zc,Mn,Gp,Vp,Ky,ja,Wp,jp,qy,Xc,zp,Zy,Jy,Qy,ew,tw,ll,Xp,Yp,za,Kp,rw,nw,qp,Zp,Li,Jp,Qp,iw,ow,sw,lw,eg,aw,tg,uw,mo,Xa,Yc,Kc,is,rg,qc,ng,zt,Zc,al,os,cw,ig,Jc,_n,og,Qc,sg,lg,hw,dw,fw,ag,nn,pw,gw,Dn,xt,mw,$w,ug,Ni,eh,_w,Ya,th,Ew,rh,Tw,nh,cg,hg,vw,dg,ih,bw,yw,ww,fg,oh,pg,sh,Sw,lh,Iw,Ow,Wr,rt,jr,vr,Mt,oi,ul,Ke,Zt,gg,Rw,mg,$g,_g,Eg,Tg,vg,cl,hl,bg,kw,ah,yg,uh,wg,Cw,Sg,Ig,Og,Rg,Ka,Aw,kg,ch,Lw,Nw,Cg,qa,xw,Mw,Dw,Pw,Za,Ag,Lg,Ng,Bw,Ja,xg,dl,Fw,Mg,Dg,Pg,Bg,Fg,Ug,Hg,Gg,hh,Qa,Vg,Uw,Wg,jg,zg,Xg,Yg,Kg,qg,Hw,Zg,$o,dh,fh,Jg,Gw,Qg,ph,em,tm,Vw,rm,Ww,nm,im,om,gh,sm,mh,$h,_h,jw,zw,Xw,Yw,Kw,qw,Zw,Jw,lm,am,um,cm,Qw,eS,hm,dm,fm,pm,gm,mm,$m,_m,tS,rS,it;s=function(e,t,o,l){if(!(e instanceof He)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof t!="string"||t.trim()==="")throw Error('Invalid name "'+t+'". The name must be a non-empty string.');const c=t.toLowerCase();if(!o)throw Error("Can not register a null value");let g=_o[e],L=Eh[e];if(g||(g=_o[e]=Object.create(null),L=Eh[e]=Object.create(null)),a(e,o),!l&&g[c])throw Error('Name "'+c+'" with type "'+e+'" already registered.');g[c]=o,L[c]=t},a=function(e,t){switch(e){case String(He.FIELD):if(typeof t.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},u=function(e,t){e=`${e}`.toLowerCase(),t=t.toLowerCase();const o=_o[e];o&&o[t]?(delete _o[e][t],delete Eh[e][t]):console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},h=function(e,t,o){e=`${e}`.toLowerCase(),t=t.toLowerCase();const l=_o[e];if(!l||!l[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",o)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return l[t]},d=function(e,t){return e=`${e}`.toLowerCase(),t=t.toLowerCase(),(e=_o[e])?!!e[t]:!1},p=function(e,t,o){return h(e,t,o)},T=function(e,t,o){return h(e,t,o)},E=function(e,t,o){e=`${e}`.toLowerCase();var l=_o[e];if(!l){if(l=`Unable to find [${e}] in the registry.`,o)throw Error(`${l} You must require or register a ${e} plugin.`);return console.warn(l),null}if(!t)return l;e=Eh[e],o=Object.create(null);for(const c of Object.keys(l))o[e[c]]=l[c];return o},y=function(e,t,o){return t=t.plugins[String(e)]||xi,typeof t=="function"?t:p(e,t,o)},S=function(e){return eu[e]||null},x=function(){const e=[];for(const t in eu)e.push(eu[t]);return e},B=function(e){eu[e.id]=e},H=function(e){delete eu[e.id]},W=function(){return nS},$=function(e){nS=e},m=function(){return iS},I=function(e){iS=e},D=function(){return oS},C=function(e){oS=e},U=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const t=e.getParentSvg(),o=e.getCachedParentSvgSize();var l=t.parentElement;if(l instanceof HTMLElement){var c=l.offsetWidth;l=l.offsetHeight,o.width!==c&&(t.setAttribute("width",c+"px"),e.setCachedParentSvgSize(c,null)),o.height!==l&&(t.setAttribute("height",l+"px"),e.setCachedParentSvgSize(null,l)),e.resize()}},V=function(e,t){const o=Object.create(null),l=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=l.indexOf(e),l.splice(e,l.length-e));for(let c=0,g;g=l[c];c++)o[g.type]?o[g.type]++:o[g.type]=1;return o},te=function(e){return function(){this.jsonInit(e)}},ae=function(e){sS.defineBlocksWithJsonArrayInternal(e)},de=function(e){i.defineBlocks$$module$build$src$core$common(i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const t={};for(let o=0;o<e.length;o++){const l=e[o];if(!l){console.warn(`Block definition #${o} in JSON array is ${l}. Skipping`);continue}const c=l.type;c?t[c]={init:te(l)}:console.warn(`Block definition #${o} in JSON array is missing a type attribute. Skipping.`)}return t},i.defineBlocks$$module$build$src$core$common=function(e){for(const t of Object.keys(e)){const o=e[t];t in Xr&&console.warn(`Block definiton "${t}" overwrites previous definition.`),Xr[t]=o}},we=function(){return"blockly-"+(Ox++).toString(36)},q=function(){return aS.genUid()},J=function(e){pl=e},G=function(){return pl},X=function(e){wh.fireInternal(e)},ce=function(e){if(ue()){if(!cs.length)try{requestAnimationFrame(()=>{setTimeout(fe,0)})}catch{setTimeout(fe,0)}cs.push(e)}},fe=function(){var e=re(cs,!0);cs.length=0;for(let o=0,l;l=e[o];o++)if(l.workspaceId){var t=S(l.workspaceId);t&&t.fireChangeListener(l)}e=new Set(e.map(o=>o.workspaceId));for(const o of e){if(!o||(e=S(o),!e))continue;e=e.getUndoStack();let l;for(t=e.length;0<t;t--){const c=e[t-1];if(c.group==="")break;if(l===void 0)l=c.group;else if(c.group!==l)break}l&&t!=e.length-1&&(t=e.splice(t,e.length-t),t=re(t,!0),e.push(...t))}},re=function(e,t){e=e.slice(),t||e.reverse();const o=[],l=Object.create(null);for(let L=0,he;he=e[L];L++)if(!he.isNull()){var c=[he.isUiEvent?bh:he.type,he.blockId,he.workspaceId].join(" "),g=l[c];const xe=g?g.event:null;g?he.type===i.MOVE$$module$build$src$core$events$utils&&g.index===L-1?(c=he,xe.newParentId=c.newParentId,xe.newInputName=c.newInputName,xe.newCoordinate=c.newCoordinate,c.reason&&(xe.reason?(c=new Set(c.reason.concat(xe.reason)),xe.reason=Array.from(c)):xe.reason=c.reason),g.index=L):he.type===i.CHANGE$$module$build$src$core$events$utils&&he.element===xe.element&&he.name===xe.name?xe.newValue=he.newValue:he.type===vo?(g=he,xe.viewTop=g.viewTop,xe.viewLeft=g.viewLeft,xe.scale=g.scale,xe.oldScale=g.oldScale):(he.type!==Di||xe.type!==si)&&(l[c]={event:he,index:L},o.push(he)):(l[c]={event:he,index:L},o.push(he))}e=o.filter(function(L){return!L.isNull()}),t||e.reverse();for(let L=1,he;he=e[L];L++)he.type===i.CHANGE$$module$build$src$core$events$utils&&he.element==="mutation"&&e.unshift(e.splice(L,1)[0]);return e},ge=function(){for(let e=0,t;t=cs[e];e++)t.recordUndo=!1},i.disable$$module$build$src$core$events$utils=function(){vh++},i.enable$$module$build$src$core$events$utils=function(){vh--},ue=function(){return vh===0},i.getGroup$$module$build$src$core$events$utils=function(){return Em},i.setGroup$$module$build$src$core$events$utils=function(e){wh.setGroupInternal(e)},ie=function(e){Em=typeof e=="boolean"?e?q():"":e},A=function(e){const t=[];e=e.getDescendants(!1);for(let o=0,l;l=e[o];o++)t[o]=l.id;return t},Y=function(e,t){const o=K(e.type);if(!o)throw Error("Unknown event type.");return o.fromJson(e,t)},K=function(e){const t=p(He.EVENT,e);if(!t)throw Error(`Event type ${e} not found in registry.`);return t},pe=function(e){if((e.type===i.MOVE$$module$build$src$core$events$utils||e.type===i.CREATE$$module$build$src$core$events$utils)&&e.workspaceId){var t=S(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=t.getBlockById(e.blockId)){const o=pl;try{pl=!1;const l=e.getParent();if(l&&l.isEnabled()){const c=e.getDescendants(!1);for(let g=0,L;L=c[g];g++)L.setEnabled(!0)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())do e.setEnabled(!1),e=e.getNextBlock();while(e)}finally{pl=o}}}},j=function(e){return e.saveState!==void 0&&e.loadState!==void 0},ee=function(e){({document:Ih=Ih,DOMParser:tu=tu,XMLSerializer:ru=ru}=e),Sh=new tu,Tm=new ru},i.createElement$$module$build$src$core$utils$xml=function(e){return Ih.createElementNS(uS,e)},i.createTextNode$$module$build$src$core$utils$xml=function(e){return Ih.createTextNode(e)},i.textToDom$$module$build$src$core$utils$xml=function(e){let t=Sh.parseFromString(e,"text/xml");if(t&&t.documentElement&&!t.getElementsByTagName("parsererror").length)return t.documentElement;if((t=Sh.parseFromString(e,"text/html"))&&t.body.firstChild&&t.body.firstChild.nodeName.toLowerCase()==="xml")return t.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},me=function(e){return Se(Tm.serializeToString(e))},Se=function(e){return e.replace(Rx,t=>`&#${t.charCodeAt(0)};`)},Ne=function(e,t,o,l){e=e+" was deprecated in "+t+" and will be deleted in "+o+".",l&&(e+=`
Use `+l+" instead."),console.warn(e)},O=function(e,t,o){e=document.createElementNS(Oh,`${e}`);for(const l in t)e.setAttribute(l,`${t[l]}`);return o&&o.appendChild(e),e},F=function(e,t){return t=t.split(" "),t.every(o=>e.classList.contains(o))?!1:(e.classList.add(...t),!0)},Oe=function(e,t){e.classList.remove(...t.split(" "))},Ae=function(e,t){return t=t.split(" "),t.every(o=>!e.classList.contains(o))?!1:(e.classList.remove(...t),!0)},nt=function(e,t){return e.classList.contains(t)},P=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},v=function(e,t){const o=t.nextSibling;if(t=t.parentNode,!t)throw Error("Reference node has no parent.");o?t.insertBefore(e,o):t.appendChild(e)},w=function(e,t){return Ne("Blockly.utils.dom.containsNode","version 10","version 11",'Use native "contains" DOM method'),e.contains(t)},M=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},Te=function(){vm++,Bn||(Bn=Object.create(null))},Me=function(){vm--,vm||(Bn=null)},se=function(e){const t=e.textContent+`
`+e.className.baseVal;let o;if(Bn&&(o=Bn[t]))return o;try{o=e.getComputedTextLength()}catch{return 8*e.textContent.length}return Bn&&(Bn[t]=o),o},be=function(e,t,o,l){return De(e,t+"pt",o,l)},De=function(e,t,o,l){const c=e.textContent;e=c+`
`+e.className.baseVal;var g;return Bn&&(g=Bn[e])||(Rh||(g=document.createElement("canvas"),g.className="blocklyComputeCanvas",document.body.appendChild(g),Rh=g.getContext("2d")),Rh.font=o+" "+t+" "+l,g=c?Rh.measureText(c).width:0,Bn&&(Bn[e]=g)),g},Fe=function(e,t,o,l){const c=document.createElement("span");c.style.font=o+" "+t+" "+l,c.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",t=document.createElement("div"),t.setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),t.appendChild(c),t.appendChild(e),document.body.appendChild(t),o={height:0,baseline:0};try{t.style.alignItems="baseline",o.baseline=e.offsetTop-c.offsetTop,t.style.alignItems="flex-end",o.height=e.offsetTop-c.offsetTop}finally{document.body.removeChild(t)}return o},Ge=function(e,t){hS(e,t)},ze=function(e){hS=e},Xe=function(e,t){pS.confirmInternal(e,t)},st=function(e,t){dS(e,t)},oe=function(e){dS=e},f=function(e,t,o){fS(e,t,o)},R=function(e){fS=e},Q=function(e){return e.getVariableModel!==void 0},le=function(e){return e.getProcedureDef!==void 0},Z=function(e){return e.getProcedureCall!==void 0&&e.renameProcedure!==void 0},i.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let o=0;o<e.length;o++){const l=e[o].getVarModels();if(l)for(let c=0;c<l.length;c++){const g=l[c];g.getId()&&t.add(g)}}return Array.from(t.values())},i.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let l=0,c;c=e[l];l++){var o=c.getDeveloperVariables;if(o){o=o();for(let g=0;g<o.length;g++)t.add(o[g])}}return Array.from(t.values())},ye=function(e){let t=[];const o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(l){ke(l.getTargetWorkspace())}),t.push(o),e=N(e),t=t.concat(e)},N=function(e){e=e.getVariablesOfType("");const t=[];if(0<e.length){var o=e[e.length-1];if(Xr.variables_set){var l=i.createElement$$module$build$src$core$utils$xml("block");l.setAttribute("type","variables_set"),l.setAttribute("gap",Xr.math_change?"8":"24"),l.appendChild(i.generateVariableFieldDom$$module$build$src$core$variables(o)),t.push(l)}if(Xr.math_change&&(l=i.createElement$$module$build$src$core$utils$xml("block"),l.setAttribute("type","math_change"),l.setAttribute("gap",Xr.variables_get?"20":"8"),l.appendChild(i.generateVariableFieldDom$$module$build$src$core$variables(o)),o=i.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),l.appendChild(o),t.push(l)),Xr.variables_get){e.sort(iu.compareByName);for(let c=0,g;g=e[c];c++)o=i.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","variables_get"),o.setAttribute("gap","8"),o.appendChild(i.generateVariableFieldDom$$module$build$src$core$variables(g)),t.push(o)}}return t},Be=function(e){return gS.generateUniqueNameInternal(e)},ot=function(e){return _(Sm.charAt(0),e.getAllVariableNames())},_=function(e,t){if(!t.length)return e;const o=Sm;let l="",c=o.indexOf(e);for(;;){let g=!1;for(let L=0;L<t.length;L++)if(t[L].toLowerCase()===e){g=!0;break}if(!g)break;c++,c===o.length&&(c=0,l=`${Number(l)+1}`),e=o.charAt(c)+l}return e},ke=function(e,t,o){function l(g){Ie(i.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,g,function(L){if(L){var he=$e(L,e);if(he){if(he.type===c)var xe=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",he.name);else xe=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,xe=xe.replace("%1",he.name).replace("%2",he.type);Ge(xe,function(){l(L)})}else e.createVariable(L,c),t&&t(L)}else t&&t(null)})}const c=o||"";l("")},i.renameVariable$$module$build$src$core$variables=function(e,t,o){function l(c){const g=i.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",t.name);Ie(g,c,function(L){if(L){var he=z(L,t.type,e),xe=Re(t.name,L,e);if(he||xe){var Ze="";he?Ze=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",he.name).replace("%2",he.type):xe&&(Ze=i.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",L).replace("%2",xe)),Ge(Ze,function(){l(L)})}else e.renameVariableById(t.getId(),L),o&&o(L)}else o&&o(null)})}l("")},Ie=function(e,t,o){f(e,t,function(l){l&&(l=l.replace(/[\s\xa0]+/g," ").trim(),l===i.Msg$$module$build$src$core$msg.RENAME_VARIABLE||l===i.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(l=null),o(l)})},z=function(e,t,o){o=o.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let l=0,c;c=o[l];l++)if(c.name.toLowerCase()===e&&c.type!==t)return c;return null},$e=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let o=0,l;l=t[o];o++)if(l.name.toLowerCase()===e)return l;return null},Re=function(e,t,o){return o.getProcedureMap().getProcedures().length?Qe(e,t,o):b(e,t,o)},Qe=function(e,t,o){e=e.toLowerCase(),t=t.toLowerCase(),o=o.getProcedureMap().getProcedures();for(const c of o){var l=c.getParameters().filter(Q).map(g=>g.getVariableModel().name);if(l&&(o=l.some(g=>g.toLowerCase()===e),l=l.some(g=>g.toLowerCase()===t),o&&l))return c.getName()}return null},b=function(e,t,o){e=e.toLowerCase(),t=t.toLowerCase(),o=o.getAllBlocks(!1);for(const c of o){if(!le(c))continue;o=c.getProcedureDef();var l=o[1];const g=l.some(L=>L.toLowerCase()===e);if(l=l.some(L=>L.toLowerCase()===t),g&&l)return o[0]}return null},i.generateVariableFieldDom$$module$build$src$core$variables=function(e){const t=i.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.type),e=i.createTextNode$$module$build$src$core$utils$xml(e.name),t.appendChild(e),t},i.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,t,o,l){let c=i.getVariable$$module$build$src$core$variables(e,t,o,l);return c||(c=k(e,t,o,l)),c},i.getVariable$$module$build$src$core$variables=function(e,t,o,l){const c=e.getPotentialVariableMap();let g=null;if(t&&(g=e.getVariableById(t),!g&&c&&(g=c.getVariableById(t)),g))return g;if(o){if(l===void 0)throw Error("Tried to look up a variable by name without a type");g=e.getVariable(o,l),!g&&c&&(g=c.getVariable(o,l))}return g},k=function(e,t,o,l){const c=e.getPotentialVariableMap();return o||(o=Be(e.isFlyout?e.targetWorkspace:e)),c?c.createVariable(o,l,t):e.createVariable(o,l,t)},ne=function(e,t){e=e.getAllVariables();const o=[];if(t.length!==e.length)for(let l=0;l<e.length;l++){const c=e[l];t.indexOf(c)===-1&&o.push(c)}return o},Ee=function(e,t){Le(),Ah=setTimeout(function(){t&&t.handleRightClick(e)},kx)},Le=function(){Ah&&(clearTimeout(Ah),Ah=0)},Ue=function(){Ch=null},tt=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&jt(e)},gt=function(e){return`${e.pointerId}`},jt=function(e){const t=gt(e);return Ch?Ch===t:e.type==="pointerdown"?(Ch=t,!0):!1},Ye=function(e,t,o,l,c){function g(he){(c||tt(he))&&(o?l.call(o,he):l(he))}const L=[];if(t in ds)for(let he=0;he<ds[t].length;he++){const xe=ds[t][he];e.addEventListener(xe,g,!1),L.push([e,xe,g])}else e.addEventListener(t,g,!1),L.push([e,t,g]);return L},Ht=function(e,t,o,l){function c(L){o?l.call(o,L):l(L)}const g=[];if(t in ds)for(let L=0;L<ds[t].length;L++){const he=ds[t][L];e.addEventListener(he,c,!1),g.push([e,he,c])}else e.addEventListener(t,c,!1),g.push([e,t,c]);return g},lt=function(e){const t=e[e.length-1][2];for(;e.length;){const[o,l,c]=e.pop();o.removeEventListener(l,c,!1)}return t},pr=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},Nt=function(e){return e.ctrlKey&&Cm?!0:e.button===2},Tr=function(e,t,o){const l=t.createSVGPoint();return l.x=e.clientX,l.y=e.clientY,o||(o=t.getScreenCTM().inverse()),l.matrixTransform(o)},Or=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*wS,y:e.deltaY*wS};case 2:return{x:e.deltaX*SS,y:e.deltaY*SS}}},xr=function(e){if(Lm)throw Error("CSS already injected");Nm+=`
`+e},mp=function(e,t){Lm||(Lm=!0,e&&(e=t.replace(/[\\/]$/,""),t=Nm.replace(/<<<PATH>>>/g,e),Nm="",e=document.createElement("style"),e.id="blockly-common-style",t=document.createTextNode(t),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild)))},Ha=function(e){return IS.getSizeInternal(e)},cy=function(e){if(ri(e,"display")!=="none")return $p(e);const t=e.style,o=t.display,l=t.visibility,c=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";const g=e.offsetWidth;return e=e.offsetHeight,t.display=o,t.position=c,t.visibility=l,new At(g,e)},$p=function(e){return new At(e.offsetWidth,e.offsetHeight)},ri=function(e,t){return e=window.getComputedStyle(e),e[t]||e.getPropertyValue(t)},ho=function(e){const t=new je(0,0);e=e.getBoundingClientRect();var o=document.documentElement;return o=new je(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),t.x=e.left+o.x,t.y=e.top+o.y,t},_p=function(){const e=document.body,t=document.documentElement;return new je(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},Ep=function(e){const t=parseFloat(ri(e,"borderLeftWidth")),o=parseFloat(ri(e,"borderRightWidth")),l=parseFloat(ri(e,"borderTopWidth"));return e=parseFloat(ri(e,"borderBottomWidth")),new Rt(l,e,t,o)},Fc=function(e,t,o){e=Tp(e,t,o),t.scrollLeft=e.x,t.scrollTop=e.y},Tp=function(e,t,o){var l=ho(e),c=ho(t),g=Ep(t);const L=l.x-c.x-g.left;return l=l.y-c.y-g.top,c=$p(e),e=t.clientWidth-c.width,c=t.clientHeight-c.height,g=t.scrollLeft,t=t.scrollTop,o?(g+=L-e/2,t+=l-c/2):(g+=Math.min(L,Math.max(L-e,0)),t+=Math.min(l,Math.max(l-c,0))),new je(g,t)},ns=function(e){const t=new je(0,0);var o=e.x&&e.getAttribute("x");const l=e.y&&e.getAttribute("y");return o&&(t.x=parseInt(o)),l&&(t.y=parseInt(l)),(o=(o=e.getAttribute("transform"))&&o.match(OS))&&(t.x+=Number(o[1]),o[3]&&(t.y+=Number(o[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(RS))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},Uc=function(e){let t=0,o=0;for(;e;){const l=ns(e);if(t+=l.x,o+=l.y,(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;e=e.parentNode}return new je(t,o)},vp=function(){const e=_p();return new Rt(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},bp=function(){const e=document.documentElement,t=window;return new je(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},hy=function(e,t){var o=t.x;t=t.y;const l=e.getInjectionDiv().getBoundingClientRect();return o=new je(o-l.left,t-l.top),t=e.getOriginOffsetInPixels(),je.difference(o,t).scale(1/e.scale)},dy=function(e,t){const o=i.createElement$$module$build$src$core$utils$xml("xml");var l=yp(i.allUsedVarModels$$module$build$src$core$variables(e));l.hasChildNodes()&&o.appendChild(l),l=e.getTopComments(!0);for(let c=0;c<l.length;c++)o.appendChild(l[c].toXmlWithXY(t));for(e=e.getTopBlocks(!0),l=0;l<e.length;l++)o.appendChild(Ga(e[l],t));return o},yp=function(e){const t=i.createElement$$module$build$src$core$utils$xml("variables");for(let o=0;o<e.length;o++){const l=e[o],c=i.createElement$$module$build$src$core$utils$xml("variable");c.appendChild(i.createTextNode$$module$build$src$core$utils$xml(l.name)),l.type&&c.setAttribute("type",l.type),c.id=l.getId(),t.appendChild(c)}return t},Ga=function(e,t){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let o=0;if(e.workspace.RTL&&(o=e.workspace.getWidth()),t=fo(e,t),Op(t)){const l=e.getRelativeToSurfaceXY();t.setAttribute("x",String(Math.round(e.workspace.RTL?o-l.x:l.x))),t.setAttribute("y",String(Math.round(l.y)))}return t},fy=function(e){if(e.isSerializable()){const t=i.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},py=function(e,t){for(let o=0;o<e.inputList.length;o++){const l=e.inputList[o];for(let c=0;c<l.fieldRow.length;c++){const g=fy(l.fieldRow[c]);g&&t.appendChild(g)}}},fo=function(e,t){if(e.isInsertionMarker())return(t=e.getChildren(!1)[0])?fo(t):new DocumentFragment;const o=i.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(o.setAttribute("type",e.type),t||(o.id=e.id),e.mutationToDom){var l=e.mutationToDom();l&&(l.hasChildNodes()||l.hasAttributes())&&o.appendChild(l)}if(py(e,o),l=e.getCommentText()){var c=e.getIcon(Yr.COMMENT),g=c.getBubbleSize();c=c.bubbleIsVisible();var L=i.createElement$$module$build$src$core$utils$xml("comment");L.appendChild(i.createTextNode$$module$build$src$core$utils$xml(l)),L.setAttribute("pinned",`${c}`),L.setAttribute("h",String(g.height)),L.setAttribute("w",String(g.width)),o.appendChild(L)}for(e.data&&(l=i.createElement$$module$build$src$core$utils$xml("data"),l.appendChild(i.createTextNode$$module$build$src$core$utils$xml(e.data)),o.appendChild(l)),l=0;l<e.inputList.length;l++){g=e.inputList[l];var he=void 0;if(c=!0,g.type!==i.inputTypes$$module$build$src$core$inputs$input_types.DUMMY){L=g.connection.targetBlock(),g.type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE?he=i.createElement$$module$build$src$core$utils$xml("value"):g.type===i.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(he=i.createElement$$module$build$src$core$utils$xml("statement"));const Ze=g.connection.getShadowDom();!Ze||L&&L.isShadow()||he.appendChild(wp(Ze,t)),L&&(L=fo(L,t),L.nodeType===Bi.ELEMENT_NODE&&(he.appendChild(L),c=!1)),he.setAttribute("name",g.name),c||o.appendChild(he)}}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&o.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&o.setAttribute("collapsed","true"),e.isEnabled()||o.setAttribute("disabled","true"),e.isDeletable()||e.isShadow()||o.setAttribute("deletable","false"),e.isMovable()||e.isShadow()||o.setAttribute("movable","false"),e.isEditable()||o.setAttribute("editable","false"),he=e.getNextBlock();let xe;return he&&(l=fo(he,t),l.nodeType===Bi.ELEMENT_NODE&&(xe=i.createElement$$module$build$src$core$utils$xml("next"),xe.appendChild(l),o.appendChild(xe))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||he&&he.isShadow()||xe.appendChild(wp(e,t)),o},wp=function(e,t){let o=e=e.cloneNode(!0),l;for(;o;)if(t&&o.nodeName==="shadow"&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;){l=o,o=o.parentNode;let c;l.nodeType===Bi.TEXT_NODE&&l.data.trim()===""&&((c=o)==null?void 0:c.firstChild)!==l&&P(l)}o&&(l=o,o=o.nextSibling,l.nodeType===Bi.TEXT_NODE&&l.data.trim()===""&&P(l))}return e},ni=function(e){return me(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},gy=function(e){e=ni(e).split("<");let t="";for(let o=1;o<e.length;o++){const l=e[o];l[0]==="/"&&(t=t.substring(2)),e[o]=t+"<"+l,l[0]!=="/"&&l.slice(-2)!=="/>"&&(t+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},my=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=i.domToWorkspace$$module$build$src$core$xml(e,t),t.setResizesEnabled(!0),e},i.domToWorkspace$$module$build$src$core$xml=function(e,t){let o=0;t.RTL&&(o=t.getWidth());const l=[];Te();const c=i.getGroup$$module$build$src$core$events$utils();c||i.setGroup$$module$build$src$core$events$utils(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);let g=!0;try{for(let L=0,he;he=e.childNodes[L];L++){const xe=he.nodeName.toLowerCase(),Ze=he;if(xe==="block"||xe==="shadow"&&!G()){const Vt=i.domToBlock$$module$build$src$core$xml(Ze,t);l.push(Vt.id);let kt;const qr=parseInt((kt=Ze.getAttribute("x"))!=null?kt:"10",10);let jl;const zl=parseInt((jl=Ze.getAttribute("y"))!=null?jl:"10",10);isNaN(qr)||isNaN(zl)||Vt.moveBy(t.RTL?o-qr:qr,zl,["create"]),g=!1}else{if(xe==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(xe==="comment")t.rendered?Rr.fromXmlRendered(Ze,t,o):ai.fromXml(Ze,t);else if(xe==="variables"){if(g)Sp(Ze,t);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");g=!1}}}}finally{i.setGroup$$module$build$src$core$events$utils(c),Me()}return t.setResizesEnabled&&t.setResizesEnabled(!0),X(new(K(us))(t)),l},$y=function(e,t){if(!t.getBlocksBoundingBox)return i.domToWorkspace$$module$build$src$core$xml(e,t);var o=t.getBlocksBoundingBox();if(e=i.domToWorkspace$$module$build$src$core$xml(e,t),o&&o.top!==o.bottom){var l=o.bottom;o=t.RTL?o.right:o.left;var c=1/0;let g=-1/0,L=1/0;for(let he=0;he<e.length;he++){const xe=t.getBlockById(e[he]).getRelativeToSurfaceXY();xe.y<L&&(L=xe.y),xe.x<c&&(c=xe.x),xe.x>g&&(g=xe.x)}for(l=l-L+10,o=t.RTL?o-g:o-c,c=0;c<e.length;c++)t.getBlockById(e[c]).moveBy(o,l,["create"])}return e},i.domToBlock$$module$build$src$core$xml=function(e,t){i.disable$$module$build$src$core$events$utils();var o=t.getAllVariables();let l;try{if(l=Hc(e,t),t.rendered){const c=l,g=l.getDescendants(!1);c.setConnectionTracking(!1);for(let L=g.length-1;0<=L;L--)g[L].initSvg();for(let L=g.length-1;0<=L;L--)g[L].render(!1);setTimeout(function(){c.disposed||c.setConnectionTracking(!0)},1),c.updateDisabled(),t.resizeContents()}else{const c=l.getDescendants(!1);for(let g=c.length-1;0<=g;g--)c[g].initModel()}}finally{i.enable$$module$build$src$core$events$utils()}if(ue()){for(e=ne(t,o),t=0;t<e.length;t++)o=e[t],X(new(K(To))(o));X(new(K(i.CREATE$$module$build$src$core$events$utils))(l))}return l},Sp=function(e,t){for(let l=0;l<e.children.length;l++){var o=e.children[l];const c=o.getAttribute("type"),g=o.getAttribute("id");if(o=o.textContent,!o)break;t.createVariable(o,c,g)}},_y=function(e){const t={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let o=0;o<e.children.length;o++){const l=e.children[o];if(l.nodeType!==Bi.TEXT_NODE)switch(l.nodeName.toLowerCase()){case"mutation":t.mutation.push(l);break;case"comment":t.comment.push(l);break;case"data":t.data.push(l);break;case"title":case"field":t.field.push(l);break;case"value":case"statement":t.input.push(l);break;case"next":t.next.push(l);break;default:console.warn("Ignoring unknown tag: "+l.nodeName)}}return t},Ey=function(e,t){let o=!1;for(let l=0;l<e.length;l++){const c=e[l];t.domToMutation&&(t.domToMutation(c),t.initSvg&&(o=!0))}return o},Ty=function(e,t){for(let l=0;l<e.length;l++){var o=e[l];const c=o.textContent,g=o.getAttribute("pinned")==="true";let L;const he=parseInt((L=o.getAttribute("w"))!=null?L:"50",10);let xe;o=parseInt((xe=o.getAttribute("h"))!=null?xe:"50",10),t.setCommentText(c);const Ze=t.getIcon(Yr.COMMENT);isNaN(he)||isNaN(o)||Ze.setBubbleSize(new At(he,o)),Ze.setBubbleVisible(g),setTimeout(()=>Ze.setBubbleVisible(g),1)}},vy=function(e,t){for(let o=0;o<e.length;o++)t.data=e[o].textContent},by=function(e,t){for(let o=0;o<e.length;o++){const l=e[o],c=l.getAttribute("name");c?Sy(t,c,l):console.warn(`Ignoring unnamed field in block ${t.type}`)}},Ip=function(e){let t=null,o=null;for(let l=0;l<e.childNodes.length;l++){const c=e.childNodes[l];Op(c)&&(c.nodeName.toLowerCase()==="block"?t=c:c.nodeName.toLowerCase()==="shadow"&&(o=c))}return{childBlockElement:t,childShadowElement:o}},yy=function(e,t,o,l){for(let g=0;g<e.length;g++){var c=e[g];const L=c.getAttribute("name"),he=L?o.getInput(L):null;if(!he){console.warn("Ignoring non-existent input "+L+" in block "+l);break}if(c=Ip(c),c.childBlockElement){if(!he.connection)throw TypeError("Input connection does not exist.");Hc(c.childBlockElement,t,he.connection,!1)}if(c.childShadowElement){let xe;(xe=he.connection)==null||xe.setShadowDom(c.childShadowElement)}}},wy=function(e,t,o){for(let l=0;l<e.length;l++){const c=Ip(e[l]);if(c.childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Hc(c.childBlockElement,t,o.nextConnection,!0)}c.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(c.childShadowElement)}},Hc=function(e,t,o,l){var c;const g=e.getAttribute("type");if(!g)throw TypeError("Block type unspecified: "+e.outerHTML);var L=(c=e.getAttribute("id"))!=null?c:void 0;c=t.newBlock(g,L),L=_y(e);const he=Ey(L.mutation,c);if(Ty(L.comment,c),vy(L.data,c),o)if(l)if(c.previousConnection)o.connect(c.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(c.outputConnection)o.connect(c.outputConnection);else if(c.previousConnection)o.connect(c.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(by(L.field,c),yy(L.input,t,c,g),wy(L.next,t,c),he&&c.initSvg(),(t=e.getAttribute("inline"))&&c.setInputsInline(t==="true"),(t=e.getAttribute("disabled"))&&c.setEnabled(t!=="true"&&t!=="disabled"),(t=e.getAttribute("deletable"))&&c.setDeletable(t==="true"),(t=e.getAttribute("movable"))&&c.setMovable(t==="true"),(t=e.getAttribute("editable"))&&c.setEditable(t==="true"),(t=e.getAttribute("collapsed"))&&c.setCollapsed(t==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=c.getChildren(!1),t=0;t<e.length;t++)if(!e[t].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(c.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");c.setShadow(!0)}return c},Sy=function(e,t,o){const l=e.getField(t);l?l.fromXml(o):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},Iy=function(e){for(let t=0;t<e.childNodes.length;t++){const o=e.childNodes[t];if(o.nodeName.toLowerCase()==="next"){e.removeChild(o);break}}},Op=function(e){return e.nodeType===Bi.ELEMENT_NODE},Gc=function(e,t){s(He.SERIALIZER,e,t)},Oy=function(e){u(He.SERIALIZER,e)},ii=function(e,{addCoordinates:t=!1,addInputBlocks:o=!0,addNextBlocks:l=!0,doFullSerialization:c=!0}={}){if(e.isInsertionMarker())return null;const g={type:e.type,id:e.id};return t&&ky(e,g),Ry(e,g),Cy(e,g),Ay(e,g,c),Ly(e,g,c),o&&Ny(e,g,c),l&&xy(e,g,c),g},Ry=function(e,t){e.isCollapsed()&&(t.collapsed=!0),e.isEnabled()||(t.enabled=!1),e.isOwnDeletable()||(t.deletable=!1),e.isOwnMovable()||(t.movable=!1),e.isOwnEditable()||(t.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(t.inline=e.inputsInline),e.data&&(t.data=e.data)},ky=function(e,t){const o=e.workspace;e=e.getRelativeToSurfaceXY(),t.x=Math.round(o.RTL?o.getWidth()-e.x:e.x),t.y=Math.round(e.y)},Cy=function(e,t){e.saveExtraState?(e=e.saveExtraState(),e!==null&&(t.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(t.extraState=ni(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},Ay=function(e,t,o){const l=Object.create(null);for(const c of e.getIcons())j(c)&&(e=c.saveState(o))&&(l[c.getType().toString()]=e);Object.keys(l).length&&(t.icons=l)},Ly=function(e,t,o){const l=Object.create(null);for(let c=0;c<e.inputList.length;c++){const g=e.inputList[c];for(let L=0;L<g.fieldRow.length;L++){const he=g.fieldRow[L];he.isSerializable()&&(l[he.name]=he.saveState(o))}}Object.keys(l).length&&(t.fields=l)},Ny=function(e,t,o){const l=Object.create(null);for(let c=0;c<e.inputList.length;c++){const g=e.inputList[c];if(!g.connection)continue;const L=Rp(g.connection,o);L&&(l[g.name]=L)}Object.keys(l).length&&(t.inputs=l)},xy=function(e,t,o){e.nextConnection&&(e=Rp(e.nextConnection,o))&&(t.next=e)},Rp=function(e,t){const o=e.getShadowState(!0);if(e=e.targetBlock(),!o&&!e)return null;const l=Object.create(null);return o&&(l.shadow=o),e&&!e.isShadow()&&(l.block=ii(e,{doFullSerialization:t})),l},po=function(e,t,{recordUndo:o=!1}={}){return Vc(e,t,{recordUndo:o})},Vc=function(e,t,{parentConnection:o,isShadow:l=!1,recordUndo:c=!1}={}){const g=G();J(c),(c=i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),i.disable$$module$build$src$core$events$utils();const L=kp(e,t,{parentConnection:o,isShadow:l});return i.enable$$module$build$src$core$events$utils(),X(new(K(i.CREATE$$module$build$src$core$events$utils))(L)),i.setGroup$$module$build$src$core$events$utils(c),J(g),t.rendered&&setTimeout(()=>{L.disposed||L.setConnectionTracking(!0)},1),L},kp=function(e,t,{parentConnection:o,isShadow:l=!1}={}){if(!e.type)throw new kS(e);const c=t.newBlock(e.type,e.id);return c.setShadow(l),My(c,e),Dy(c,e),Py(c,e),By(o,c,e),Fy(c,e),Uy(c,e),Hy(c,e),Gy(c,e),Vy(c,t.rendered),c},My=function(e,t){let o=t.x===void 0?0:t.x;t=t.y===void 0?0:t.y;const l=e.workspace;o=l.RTL?l.getWidth()-o:o,e.moveBy(o,t)},Dy=function(e,t){t.collapsed&&e.setCollapsed(!0),t.deletable===!1&&e.setDeletable(!1),t.movable===!1&&e.setMovable(!1),t.editable===!1&&e.setEditable(!1),t.enabled===!1&&e.setEnabled(!1),t.inline!==void 0&&e.setInputsInline(t.inline),t.data!==void 0&&(e.data=t.data)},Py=function(e,t){t.extraState&&(e.loadExtraState?e.loadExtraState(t.extraState):e.domToMutation&&e.domToMutation(i.textToDom$$module$build$src$core$utils$xml(t.extraState)))},By=function(e,t,o){if(e){if(e.getSourceBlock().isShadow()&&!t.isShadow())throw new AS(o);if(e.type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var l=t.outputConnection;if(!l)throw new ou("output",t,o)}else if(l=t.previousConnection,!l)throw new ou("previous",t,o);if(!e.connect(l)){const c=t.workspace.connectionChecker;throw new CS(c.getErrorMessage(c.canConnectWithReason(l,e,!1),l,e),e.type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",t,o)}}},Fy=function(e,t){if(t.icons){var o=Object.keys(t.icons);for(const c of o){o=t.icons[c];var l=e.getIcon(c);if(!l){if(l=p(He.ICON,c,!1),!l)throw new LS(c,e,t);l=new l(e),e.addIcon(l)}j(l)&&l.loadState(o)}}},Uy=function(e,t){if(t.fields){var o=Object.keys(t.fields);for(let l=0;l<o.length;l++){const c=o[l],g=t.fields[c],L=e.getField(c);L?L.loadState(g):console.warn(`Ignoring non-existant field ${c} in block ${e.type}`)}}},Hy=function(e,t){if(t.inputs){var o=Object.keys(t.inputs);for(let l=0;l<o.length;l++){const c=o[l],g=e.getInput(c);if(!g||!g.connection)throw new ou(c,e,t);Cp(g.connection,t.inputs[c])}}},Gy=function(e,t){if(t.next){if(!e.nextConnection)throw new ou("next",e,t);Cp(e.nextConnection,t.next)}},Cp=function(e,t){t.shadow&&e.setShadowState(t.shadow),t.block&&kp(t.block,e.getSourceBlock().workspace,{parentConnection:e})},Vy=function(e,t){if(t){e.setConnectionTracking(!1),e.initSvg(),e.render(!1);for(const o of e.getIcons())o.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},go=function(e){return e.bubbleIsVisible!==void 0&&e.setBubbleVisible!==void 0},Wy=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},jy=function(e,t){let o=null;t=t.outputConnection;const l=t==null?void 0:t.getConnectionChecker();for(let c=0,g;g=e.inputList[c];c++){const L=g.connection;let he;if(L&&((he=l)!=null&&he.canConnect(t,L,!1))){if(o)return null;o=L}}return o},zy=function(e,t){let o;for(;o=jy(e,t);)if(e=o.targetBlock(),!e||e.isShadow())return o;return null},nl=function(e){return e*Math.PI/180},Ap=function(e){return 180*e/Math.PI},il=function(e,t,o){if(o<e){const l=o;o=e,e=l}return Math.max(e,Math.min(t,o))},Lp=function(){vt||(vt=document.createElement("div"),vt.className="blocklyDropDownDiv",(D()||document.body).appendChild(vt),Ol=document.createElement("div"),Ol.className="blocklyDropDownContent",vt.appendChild(Ol),_s=document.createElement("div"),_s.className="blocklyDropDownArrow",vt.appendChild(_s),vt.style.opacity="0",vt.style.transition="transform "+Fh+"s, opacity "+Fh+"s",vt.addEventListener("focusin",function(){F(vt,"blocklyFocused")}),vt.addEventListener("focusout",function(){Ae(vt,"blocklyFocused")}))},Np=function(e){Gm=e},xp=function(){return wo},ol=function(){return Ol},Wc=function(){Ol.textContent="",Ol.style.width=""},jc=function(e,t){vt.style.backgroundColor=e,vt.style.borderColor=t},Xy=function(e,t,o,l){return Pp(Mp(t),e,o,l)},Va=function(e,t,o){return HS=!0,Pp(Dp(e),e,t,o)},Mp=function(e){var t=e.getSvgRoot();const o=e.workspace.scale,l=e.height*o;return e=e.width*o,t=ho(t),new Rt(t.y,t.y+l,t.x,t.x+e)},Dp=function(e){return e=e.getScaledBBox(),new Rt(e.top,e.bottom,e.left,e.right)},Pp=function(e,t,o,l){const c=e.left+(e.right-e.left)/2,g=e.bottom;e=e.top,l&&(e+=l),l=t.getSourceBlock();let L=l.workspace;for(;L.options.parentWorkspace;)L=L.options.parentWorkspace;return Np(L.getParentSvg().parentNode),Bp(t,l.RTL,c,g,c,e,o)},Bp=function(e,t,o,l,c,g,L){return wo=e,$s=L||null,vt.style.direction=t?"rtl":"ltr",e=W(),Sl=e.getRenderer().getClassName(),Il=e.getTheme().getClassName(),Sl&&F(vt,Sl),Il&&F(vt,Il),Gp(o,l,c,g)},Fp=function(e,t,o,l){return e=Wa(e,o.left,o.right,l.width),{initialX:e.divX,initialY:t,finalX:e.divX,finalY:t+Um,arrowX:e.arrowX,arrowY:-(lu/2+Fm),arrowAtTop:!0,arrowVisible:!0}},Up=function(e,t,o,l){return e=Wa(e,o.left,o.right,l.width),{initialX:e.divX,initialY:t-l.height,finalX:e.divX,finalY:t-l.height-Um,arrowX:e.arrowX,arrowY:l.height-2*Fm-lu/2,arrowAtTop:!1,arrowVisible:!0}},Yy=function(e,t,o){return e=Wa(e,t.left,t.right,o.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Wa=function(e,t,o,l){return t=il(t,e-l/2,o-l),e=e-lu/2-t,o=US,e=il(o,e,l-o-lu),{arrowX:e,divX:t}},Hp=function(){return!!wo},sl=function(e,t){return wo===e?(t?Mn():zc(),!0):!1},zc=function(){vt.style.transform="translate(0, 0)",vt.style.opacity="0",Hm=setTimeout(function(){Mn()},1e3*Fh),$s&&($s(),$s=null)},Mn=function(){Hp()&&(Hm&&clearTimeout(Hm),vt.style.transform="",vt.style.left="",vt.style.top="",vt.style.opacity="0",vt.style.display="none",vt.style.backgroundColor="",vt.style.borderColor="",$s&&($s(),$s=null),Wc(),wo=null,Sl&&(Ae(vt,Sl),Sl=""),Il&&(Ae(vt,Il),Il=""),W().markFocused())},Gp=function(e,t,o,l){e=Vm.getPositionMetrics(e,t,o,l),e.arrowVisible?(_s.style.display="",_s.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",_s.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):_s.style.display="none",t=Math.floor(e.initialX),o=Math.floor(e.initialY),l=Math.floor(e.finalX);const c=Math.floor(e.finalY);return vt.style.left=t+"px",vt.style.top=o+"px",vt.style.display="block",vt.style.opacity="1",vt.style.transform="translate("+(l-t)+"px,"+(c-o)+"px)",!!e.arrowAtTop},Vp=function(){if(wo){var e=wo.getSourceBlock();e=HS?Dp(wo):Mp(e);const t=e.left+(e.right-e.left)/2;Gp(t,e.bottom,t,e.top)}else zc()},Ky=function(e,t){return Ne("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),e.startsWith(t)},ja=function(e){return e.length?e.reduce(function(t,o){return t.length<o.length?t:o}).length:0},Wp=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let o=0;t=t||ja(e);let l;for(l=0;l<t;l++){for(var c=e[0][l],g=1;g<e.length;g++)if(c!==e[g][l])return o;c===" "&&(o=l+1)}for(c=1;c<e.length;c++)if((g=e[c][l])&&g!==" ")return o;return t},jp=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let o=0;t=t||ja(e);let l;for(l=0;l<t;l++){for(var c=e[0].substr(-l-1,1),g=1;g<e.length;g++)if(c!==e[g].substr(-l-1,1))return o;c===" "&&(o=l+1)}for(c=1;c<e.length;c++)if((g=e[c].charAt(e[c].length-l-1))&&g!==" ")return o;return t},i.wrap$$module$build$src$core$utils$string=function(e,t){e=e.split(`
`);for(let o=0;o<e.length;o++)e[o]=qy(e[o],t);return e.join(`
`)},qy=function(e,t){if(e.length<=t)return e;const o=e.trim().split(/\s+/);for(var l=0;l<o.length;l++)o[l].length>t&&(t=o[l].length);var c=-1/0;let g,L=1;do{l=c,g=e,e=[],c=o.length/L;let he=1;for(let xe=0;xe<o.length-1;xe++)he<(xe+1.5)/c?(he++,e[xe]=!0):e[xe]=!1;e=zp(o,e,t),c=Xc(o,e,t),e=Zy(o,e),L++}while(c>l);return g},Xc=function(e,t,o){const l=[0],c=[];for(var g=0;g<e.length;g++)l[l.length-1]+=e[g].length,t[g]===!0?(l.push(0),c.push(e[g].charAt(e[g].length-1))):t[g]===!1&&l[l.length-1]++;for(e=Math.max(...l),t=0,g=0;g<l.length;g++)t-=2*Math.pow(Math.abs(o-l[g]),1.5),t-=Math.pow(e-l[g],1.5),".?!".indexOf(c[g])!==-1?t+=o/3:",;)]}".indexOf(c[g])!==-1&&(t+=o/4);return 1<l.length&&l[l.length-1]<=l[l.length-2]&&(t+=.5),t},zp=function(e,t,o){let l=Xc(e,t,o),c;for(let g=0;g<t.length-1;g++){if(t[g]===t[g+1])continue;const L=[].concat(t);L[g]=!L[g],L[g+1]=!L[g+1];const he=Xc(e,L,o);he>l&&(l=he,c=L)}return c?zp(e,c,o):t},Zy=function(e,t){const o=[];for(let l=0;l<e.length;l++)o.push(e[l]),t[l]!==void 0&&o.push(t[l]?`
`:" ");return o.join("")},i.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},Jy=function(e){Uh=e},Qy=function(){return Uh},ew=function(){return uu},tw=function(){return ir},ll=function(e){if(e=Xp(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},Xp=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},Yp=function(){ir||(ir=document.createElement("div"),ir.className="blocklyTooltipDiv",(D()||document.body).appendChild(ir))},za=function(e){e.mouseOverWrapper_=Ht(e,"pointerover",null,rw),e.mouseOutWrapper_=Ht(e,"pointerout",null,nw),e.addEventListener("pointermove",qp,!1)},Kp=function(e){e&&(lt(e.mouseOverWrapper_),lt(e.mouseOutWrapper_),e.removeEventListener("pointermove",qp))},rw=function(e){Rl||(e=Xp(e.currentTarget),Tn!==e&&(Li(),cu=null,Tn=e),clearTimeout(VS))},nw=function(e){Rl||(VS=setTimeout(function(){cu=Tn=null,Li()},1),clearTimeout(Ts),Ts=0)},qp=function(e){if(Tn&&Tn.tooltip&&!Rl)if(uu){const t=Wm-e.pageX;e=jm-e.pageY,Math.sqrt(t*t+e*e)>WS&&Li()}else cu!==Tn&&(clearTimeout(Ts),Wm=e.pageX,jm=e.pageY,Ts=setTimeout(lw,jS))},Zp=function(){cu=Tn=null,Li()},Li=function(){uu&&(uu=!1,ir&&(ir.style.display="none")),Ts&&(clearTimeout(Ts),Ts=0)},Jp=function(){Li(),Rl=!0},Qp=function(){Rl=!1},iw=function(){ir&&Tn&&(typeof Uh=="function"?Uh(ir,Tn):ow())},ow=function(){var e=ll(Tn);e=i.wrap$$module$build$src$core$utils$string(e,GS),e=e.split(`
`);for(let t=0;t<e.length;t++){const o=document.createElement("div");o.appendChild(document.createTextNode(e[t])),ir.appendChild(o)}},sw=function(e){const t=document.documentElement.clientWidth,o=document.documentElement.clientHeight;let l=Wm;l=e?l-(zm+ir.offsetWidth):l+zm;let c=jm+Xm;return c+ir.offsetHeight>o+window.scrollY&&(c-=ir.offsetHeight+2*Xm),e?l=Math.max(Hh-window.scrollX,l):l+ir.offsetWidth>t+window.scrollX-2*Hh&&(l=t-ir.offsetWidth-2*Hh),{x:l,y:c}},lw=function(){if(!Rl&&(cu=Tn,ir)){ir.textContent="",iw();var e=Tn.RTL;ir.style.direction=e?"rtl":"ltr",ir.style.display="block",uu=!0;var{x:t,y:o}=sw(e);ir.style.left=t+"px",ir.style.top=o+"px"}},eg=function(){return Ym},aw=function(e){Ym=e},tg=function(){return Km},uw=function(e){Km=e},mo=function(e){e=`${e}`.toLowerCase().trim();var t=zS[e];if(t||(t=e.substring(0,2)==="0x"?"#"+e.substring(2):e,t=t[0]==="#"?t:"#"+t,/^#[0-9a-f]{6}$/.test(t)))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var o=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(e=Number(o[1]),t=Number(o[2]),o=Number(o[3]),0<=e&&256>e&&0<=t&&256>t&&0<=o&&256>o)?Xa(e,t,o):null},Xa=function(e,t,o){return t=e<<16|t<<8|o,16>e?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},Yc=function(e){return e=mo(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},Kc=function(e,t,o){let l=0,c=0,g=0;if(t===0)g=c=l=o;else{const L=Math.floor(e/60),he=e/60-L;e=o*(1-t);const xe=o*(1-t*he);switch(t=o*(1-t*(1-he)),L){case 1:l=xe,c=o,g=e;break;case 2:l=e,c=o,g=t;break;case 3:l=e,c=xe,g=o;break;case 4:l=t,c=e,g=o;break;case 5:l=o,c=e,g=xe;break;case 6:case 0:l=o,c=t,g=e}}return Xa(Math.floor(l),Math.floor(c),Math.floor(g))},is=function(e,t,o){return e=mo(e),!e||(t=mo(t),!t)?null:(e=Yc(e),t=Yc(t),Xa(Math.round(t[0]+o*(e[0]-t[0])),Math.round(t[1]+o*(e[1]-t[1])),Math.round(t[2]+o*(e[2]-t[2]))))},rg=function(e){return Kc(e,Ym,255*Km)},qc=function(e,t){const o=[];var l=e.split("");l.push("");var c=0;e=[];let g=null;for(let xe=0;xe<l.length;xe++){var L=l[xe];if(c===0)L==="%"?((c=e.join(""))&&o.push(c),e.length=0,c=1):e.push(L);else if(c===1)L==="%"?(e.push(L),c=0):t&&"0"<=L&&"9">=L?(c=2,g=L,(L=e.join(""))&&o.push(L),e.length=0):L==="{"?c=3:(e.push("%",L),c=0);else if(c===2)if("0"<=L&&"9">=L)g+=L;else{var he=void 0;o.push(parseInt((he=g)!=null?he:"",10)),xe--,c=0}else c===3&&(L===""?(e.splice(0,0,"%{"),xe--,c=0):L!=="}"?e.push(L):(c=e.join(""),/[A-Z]\w*/i.test(c)?(L=c.toUpperCase(),(L=L.startsWith("BKY_")?L.substring(4):null)&&L in i.Msg$$module$build$src$core$msg?(c=i.Msg$$module$build$src$core$msg[L],typeof c=="string"?Array.prototype.push.apply(o,qc(c,t)):t?o.push(`${c}`):o.push(c)):o.push("%{"+c+"}")):o.push("%{"+c+"}"),c=e.length=0))}for((t=e.join(""))&&o.push(t),he=[],e.length=0,l=0;l<o.length;l++)typeof o[l]=="string"?e.push(o[l]):((t=e.join(""))&&he.push(t),e.length=0,he.push(o[l]));return(t=e.join(""))&&he.push(t),e.length=0,he},ng=function(e){return qc(e,!0)},zt=function(e){return typeof e!="string"?e:(e=qc(e,!1),e.length?String(e[0]):"")},Zc=function(e){let t=!0;const o=i.Msg$$module$build$src$core$msg,l=e.match(/%{BKY_[A-Z]\w*}/gi);if(l)for(let c=0;c<l.length;c++){const g=l[c].toUpperCase();o[g.slice(6,-1)]===void 0&&(console.warn("No message string for "+l[c]+" in "+e),t=!1)}return t},al=function(e){const t=typeof e=="string"?zt(e):e;var o=Number(t);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:Kc(o,eg(),255*tg())};if(o=mo(t))return{hue:null,hex:o};throw o='Invalid colour: "'+t+'"',e!==t&&(o+=' (from "'+e+'")'),Error(o)},os=function(){return Fn},cw=function(e){Fn=e},ig=function(){Fn||(Fn=document.createElement("div"),Fn.className="blocklyWidgetDiv",(D()||document.body).appendChild(Fn))},Jc=function(e,t,o){_n(),kl=e,Gh=o,(e=Fn)&&(e.style.direction=t?"rtl":"ltr",e.style.display="block",t=W(),Cl=t.getRenderer().getClassName(),Al=t.getTheme().getClassName(),Cl&&F(e,Cl),Al&&F(e,Al))},_n=function(){if(og()){kl=null;var e=Fn;e&&(e.style.display="none",e.style.left="",e.style.top="",Gh&&Gh(),Gh=null,e.textContent="",Cl&&(Ae(e,Cl),Cl=""),Al&&(Ae(e,Al),Al=""),W().markFocused())}},og=function(){return!!kl},Qc=function(e){kl===e&&_n()},sg=function(e,t,o){Fn.style.left=e+"px",Fn.style.top=t+"px",Fn.style.height=o+"px"},lg=function(e,t,o,l){const c=dw(e,t,o);e=hw(e,t,o,l),0>c?sg(e,0,o.height+c):sg(e,c,o.height)},hw=function(e,t,o,l){return l?Math.min(Math.max(t.right-o.width,e.left),e.right-o.width):Math.max(Math.min(t.left,e.right-o.width),e.left)},dw=function(e,t,o){return t.bottom+o.height>=e.bottom?t.top-o.height:t.bottom},fw=function(e){return!(e==null||!e.repositionForWindowResize)},ag=function(){fw(kl)&&kl.repositionForWindowResize()||_n()},nn=function(e,t){s(He.FIELD,e,t)},pw=function(e){u(He.FIELD,e)},i.fromJson$$module$build$src$core$field_registry=function(e){return XS.fromJsonInternal(e)},gw=function(e){const t=T(He.FIELD,e.type);if(t){if(typeof t.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return t.fromJson(e)}return console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},Dn=function(e,t){e.setAttribute(Mx,t)},xt=function(e,t,o){Array.isArray(o)&&(o=o.join(" ")),e.setAttribute(xx+t,`${o}`)},mw=function(e){let t=!1;const o=e.map(([L,he])=>typeof L=="string"?[zt(L),he]:(t=!0,[L.alt!==null?Object.assign({},L,{alt:zt(L.alt)}):Object.assign({},L),he]));if(t||2>e.length)return{options:o};var l=o.map(([L])=>L),c=ja(l);e=Wp(l,c);const g=jp(l,c);return!e&&!g||c<=e+g?{options:o}:(c=e?l[0].substring(0,e-1):void 0,l=g?l[0].substr(1-g):void 0,{options:$w(o,e,g),prefix:c,suffix:l})},$w=function(e,t,o){return e.map(([l,c])=>[l.substring(t,l.length-o),c])},ug=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let o=0;o<e.length;o++){const l=e[o];Array.isArray(l)?typeof l[1]!="string"?(t=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option id must be a string. Found "+l[1]+" in: ",l)):l[0]&&typeof l[0]!="string"&&typeof l[0].src!="string"&&(t=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must have a string label or image description. Found"+l[0]+" in: ",l)):(t=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must be an array. Found: ",l))}if(t)throw TypeError("Found invalid FieldDropdown options.")},Ni=function(e,t){for(const o in t)e[o]=t[o]!==null&&typeof t[o]=="object"?Ni(e[o]||Object.create(null),t[o]):t[o];return e},eh=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=hg(e),e=Tw(e)),_w(e),e):null},_w=function(e){const t=e.kind;if(e=e.contents,t&&t!==KS&&t!==Qm)throw Error("Invalid toolbox kind "+t+". Please supply either "+KS+" or "+Qm);if(!e)throw Error("Toolbox must have a contents attribute.")},Ya=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:nh(e):[]},th=function(e){return qS.hasCategoriesInternal(e)},Ew=function(e){if(!e)return!1;const t=e.kind;return t?t===Qm:!!e.contents.filter(function(o){return o.kind.toUpperCase()==="CATEGORY"}).length},rh=function(e){return e&&e.contents?!!e.contents.filter(function(t){return t.kind.toUpperCase()==="CATEGORY"}).length:!1},Tw=function(e){const t={contents:nh(e)};return e instanceof Node&&cg(e,t),t},nh=function(e){const t=[];let o=e.childNodes;o||(o=e);for(let l=0,c;c=o[l];l++){if(!c.tagName)continue;e={};const g=c.tagName.toUpperCase();e.kind=g,g==="BLOCK"?e.blockxml=c:c.childNodes&&0<c.childNodes.length&&(e.contents=nh(c)),cg(c,e),t.push(e)}return t},cg=function(e,t){for(let o=0;o<e.attributes.length;o++){const l=e.attributes[o];-1<l.nodeName.indexOf("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[l.nodeName.replace("css-","")]=l.value):t[l.nodeName]=l.value}},hg=function(e){let t=null;if(e)if(typeof e=="string"){if(t=i.textToDom$$module$build$src$core$utils$xml(e),t.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(t=e);return t},i.register$$module$build$src$core$extensions=function(e,t){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(Ll[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof t!="function")throw Error('Error: Extension "'+e+'" must be a function');Ll[e]=t},i.registerMixin$$module$build$src$core$extensions=function(e,t){if(!t||typeof t!="object")throw Error('Error: Mixin "'+e+'" must be a object');i.register$$module$build$src$core$extensions(e,function(){this.mixin(t)})},i.registerMutator$$module$build$src$core$extensions=function(e,t,o,l){const c='Error when registering mutator "'+e+'": ';pg(c,t);const g=fg(t,c);if(o&&typeof o!="function")throw Error(c+'Extension "'+e+'" is not a function');i.register$$module$build$src$core$extensions(e,function(){g&&this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(l||[],this)),this.mixin(t),o&&o.apply(this)})},vw=function(e){dg(e)?delete Ll[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},dg=function(e){return!!Ll[e]},ih=function(e,t,o){const l=Ll[e];if(typeof l!="function")throw Error('Error: Extension "'+e+'" not found.');let c;if(o?bw(e,t):c=sh(t),l.apply(t),o)pg('Error after applying mutator "'+e+'": ',t);else if(!Sw(c,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},bw=function(e,t){if(sh(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},yw=function(e,t){return oh(e.mutationToDom,e.domToMutation,t+" mutationToDom/domToMutation")},ww=function(e,t){return oh(e.saveExtraState,e.loadExtraState,t+" saveExtraState/loadExtraState")},fg=function(e,t){return oh(e.compose,e.decompose,t+" compose/decompose")},oh=function(e,t,o){if(e&&t){if(typeof e!="function"||typeof t!="function")throw Error(o+" must be a function");return!0}if(!e&&!t)return!1;throw Error(o+"Must have both or neither functions")},pg=function(e,t){const o=yw(t,e),l=ww(t,e);if(!o&&!l)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");fg(t,e)},sh=function(e){const t=[];return e.domToMutation!==void 0&&t.push(e.domToMutation),e.mutationToDom!==void 0&&t.push(e.mutationToDom),e.saveExtraState!==void 0&&t.push(e.saveExtraState),e.loadExtraState!==void 0&&t.push(e.loadExtraState),e.compose!==void 0&&t.push(e.compose),e.decompose!==void 0&&t.push(e.decompose),t},Sw=function(e,t){if(t=sh(t),t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(e[o]!==t[o])return!1;return!0},lh=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const t=setInterval(function(){document.readyState==="complete"&&(clearInterval(t),e())},10)}},i.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,t){const o=[];return typeof document=="object"&&lh(function(){for(const l in t)Zc(t[l])}),function(){this.type&&o.indexOf(this.type)===-1&&(Iw(this,e,t),o.push(this.type)),this.setTooltip((function(){var l=String(this.getFieldValue(e));let c=t[l];return c===null?o.indexOf(this.type)===-1&&(l="No tooltip mapping for value "+l+" of field "+e,this.type!==null&&(l+=" of block type "+this.type),console.warn(l+".")):c=zt(c),c}).bind(this))}},Iw=function(e,t,o){var l=e.getField(t);if(l instanceof hi&&!l.isOptionListDynamic()){l=l.getOptions();for(let c=0;c<l.length;c++){const g=l[c][1];o[g]===null&&console.warn("No tooltip mapping for value "+g+" of field "+t+" of block type "+e.type)}}},i.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,t){return typeof document=="object"&&lh(function(){Zc(e)}),function(){this.setTooltip((function(){const o=this.getField(t);return zt(e).replace("%1",o?o.getText():"")}).bind(this))}},Ow=function(){const e=this.tooltip;this.setTooltip((function(){const t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||e}).bind(this))},Wr=function(e,t){return t=e.indexOf(t),t===-1?!1:(e.splice(t,1),!0)},rt=function(e,t){return" "+e+","+t+" "},jr=function(e,t){return" "+e+t.join("")},vr=function(e,t){return" M "+e+","+t+" "},Mt=function(e,t){return" m "+e+","+t+" "},oi=function(e,t){return" l "+e+","+t+" "},ul=function(e){return" l"+e.join("")},Ke=function(e,t){return" "+e+" "+t+" "},Zt=function(e,t,o,l){return e+" "+o+" "+o+" "+t+l},gg=function(e,t){s(He.ICON,e.toString(),t)},Rw=function(e){u(He.ICON,e)},mg=function(e){if(!(100<e.getDescendants(!1).length)){var t=e.workspace,o=e.getSvgRoot();t.getAudioManager().play("delete");var l=t.getSvgXY(o);o=o.cloneNode(!0),o.setAttribute("transform","translate("+l.x+","+l.y+")"),t.getParentSvg().appendChild(o),$g(o,{x:l.x,y:l.y,width:e.width,height:e.height},t.RTL,new Date,t.scale)}},$g=function(e,t,o,l,c){const g=(new Date().getTime()-l.getTime())/150;1<g?P(e):(e.setAttribute("transform","translate("+(t.x+(o?-1:1)*t.width*c/2*g)+","+(t.y+t.height*c*g)+") scale("+(1-g)*c+")"),setTimeout($g,10,e,t,o,l,c))},_g=function(e){const t=e.workspace,o=t.scale;if(t.getAudioManager().play("click"),!(1>o)){var l=t.getSvgXY(e.getSvgRoot());e.outputConnection?(l.x+=(e.RTL?3:-3)*o,l.y+=13*o):e.previousConnection&&(l.x+=(e.RTL?-23:23)*o,l.y+=3*o),e=O(ve.CIRCLE,{cx:l.x,cy:l.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg()),Eg(e,new Date,o)}},Eg=function(e,t,o){const l=(new Date().getTime()-t.getTime())/150;1<l?P(e):(e.setAttribute("r",String(25*l*o)),e.style.opacity=String(1-l),pu=setTimeout(Eg,10,e,t,o))},Tg=function(e){if(cl(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),gu=e,vg(e,t,new Date)}},vg=function(e,t,o){const l=(new Date().getTime()-o.getTime())/200;let c="";1>=l&&(c=`skewX(${Math.round(Math.sin(l*Math.PI*3)*(1-l)*t)})`,pu=setTimeout(vg,10,e,t,o)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${c}`)},cl=function(){gu&&(pu&&(clearTimeout(pu),pu=null),gu.getSvgRoot().setAttribute("transform",gu.getTranslation()),gu=null)},hl=function(e,t,o){const l=o.getBoundingRectangle(),c=l.right-l.left,g=il(t.top,l.top,t.top+t.height-(l.bottom-l.top))-l.top;let L=t.left;return t=t.left+t.width-c,e.RTL?L=Math.min(t,L):t=Math.max(L,t),(e=il(L,l.left,t)-l.left)||g?(o.moveBy(e,g,["inbounds"]),!0):!1},bg=function(e){return t=>{var o=e.getMetricsManager();if(o.hasFixedEdges()&&!e.isDragging()){var l;if(yh.indexOf((l=t.type)!=null?l:"")!==-1){l=o.getScrollMetrics(!0);const c=kw(e,t);c&&(o=i.getGroup$$module$build$src$core$events$utils()||!1,i.setGroup$$module$build$src$core$events$utils(t.group),hl(e,l,c)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),i.setGroup$$module$build$src$core$events$utils(o))}else t.type===vo&&t.scale&&t.oldScale&&t.scale>t.oldScale&&ah(e)}}},kw=function(e,t){let o=null;switch(t.type){case i.CREATE$$module$build$src$core$events$utils:case i.MOVE$$module$build$src$core$events$utils:(o=e.getBlockById(t.blockId))&&(o=o.getRootBlock());break;case bo:case li:o=e.getCommentById(t.commentId)}return o},ah=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);var o=e.getTopBoundedElements();for(let l=0,c;c=o[l];l++)hl(e,t,c)}},yg=function(e){return wg(e),xl||(xl=new Promise(t=>{window.requestAnimationFrame(()=>{Cw(),t()})})),xl},uh=function(){return xl||Promise.resolve()},wg=function(e){Kh.add(e);const t=e.getParent();t?wg(t):Yh.add(e)},Cw=function(){const e=new Set([...Yh].map(t=>t.workspace));for(const t of Yh){if(t.isDisposed()||t.getParent())continue;Sg(t);const o=t.getRelativeToSurfaceXY();Ig(t,o),Og(t,o)}for(const t of e)t.resizeContents();Yh.clear(),Kh=new Set,xl=null},Sg=function(e){if(Kh.has(e)){for(const t of e.getChildren(!1))Sg(t);e.renderEfficiently()}},Ig=function(e,t){for(const o of e.getConnections_(!1)){e=o.moveToOffset(t);const l=o.targetBlock();o.isSuperior()&&l&&(e||Kh.has(l))&&Ig(l,je.sum(t,l.relativeCoords))}},Og=function(e,t){if(e.getIcons){for(const o of e.getIcons())o.onLocationChange(t);for(const o of e.getChildren(!1))Og(o,je.sum(t,o.relativeCoords))}},Rg=function(e,t){const o=[];for(const l of e.getIcons())(!go(l)||l.bubbleIsVisible())&&(o.push({location:t,icon:l}),l.onLocationChange(t));for(const l of e.getChildren(!1))o.push(...Rg(l,je.sum(t,l.relativeCoords)));return o},Ka=function(e){l$.copyInternal(e)},Aw=function(e){Xi=e.toCopyData()},kg=function(){if(!Xi)return null;let e=Xi.source;return e.isFlyout&&(e=e.targetWorkspace),Xi.typeCounts&&e.isCapacityAvailable(Xi.typeCounts)?e.paste(Xi.saveInfo):null},ch=function(e){return l$.duplicateInternal(e)},Lw=function(e){const t=Xi;Ka(e);let o,l,c;return e=(c=(o=e.toCopyData())==null||(l=o.source)==null?void 0:l.paste(Xi.saveInfo))!=null?c:null,Xi=t,e},Nw=function(){return qh},Cg=function(e){qh=e},qa=function(e,t,o){if(Jc(o0,o,Ag),t.length){var l=xw(t,o);Zh=l,Mw(l,e,o),setTimeout(function(){l.focus()},1),qh=null}else Za()},xw=function(e,t){const o=new qm;o.setRole(Kr.MENU);for(let l=0;l<e.length;l++){const c=e[l],g=new Zm(c.text);g.setRightToLeft(t),g.setRole(Kr.MENUITEM),o.addChild(g),g.setEnabled(c.enabled),c.enabled&&g.onAction(function(){Za(),requestAnimationFrame(()=>{setTimeout(()=>{c.callback(c.scope)},0)})},{})}return o},Mw=function(e,t,o){const l=vp();t=new Rt(t.clientY+l.top,t.clientY+l.top,t.clientX+l.left,t.clientX+l.left),Dw(e);const c=e.getSize();o&&(t.left+=c.width,t.right+=c.width,l.left+=c.width,l.right+=c.width),lg(l,t,c,o),e.focus()},Dw=function(e){var t=os();if(!t)throw Error("Attempting to create a context menu when widget div is null");t=e.render(t),F(t,"blocklyContextMenu"),Ye(t,"contextmenu",null,Pw),e.focus()},Pw=function(e){e.preventDefault(),e.stopPropagation()},Za=function(){Qc(o0),qh=null},Ag=function(){Zh&&(Zh.dispose(),Zh=null)},i.callbackFactory$$module$build$src$core$contextmenu=function(e,t){return()=>{i.disable$$module$build$src$core$events$utils();let o;try{o=i.domToBlock$$module$build$src$core$xml(t,e.workspace);const l=e.getRelativeToSurfaceXY();l.x=e.RTL?l.x-i.config$$module$build$src$core$config.snapRadius:l.x+i.config$$module$build$src$core$config.snapRadius,l.y+=2*i.config$$module$build$src$core$config.snapRadius,o.moveBy(l.x,l.y)}finally{i.enable$$module$build$src$core$events$utils()}ue()&&!o.isShadow()&&X(new(K(i.CREATE$$module$build$src$core$events$utils))(o)),o.select()}},Lg=function(e){return{text:i.Msg$$module$build$src$core$msg.REMOVE_COMMENT,enabled:!0,callback:function(){i.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),i.setGroup$$module$build$src$core$events$utils(!1)}}},Ng=function(e){return{text:i.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){ch(e)}}},Bw=function(e,t){const o={enabled:!0};return o.text=i.Msg$$module$build$src$core$msg.ADD_COMMENT,o.callback=function(){const l=new Rr(e,i.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT,Rr.DEFAULT_SIZE,Rr.DEFAULT_SIZE);var c=e.getInjectionDiv().getBoundingClientRect();c=new je(t.clientX-c.left,t.clientY-c.top);const g=e.getOriginOffsetInPixels();c=je.difference(c,g),c.scale(1/e.scale),l.moveBy(c.x,c.y),e.rendered&&(l.initSvg(),l.render(),l.select())},o},Ja=function(e){let t=e.outputConnection;return(!t||e.previousConnection&&e.previousConnection.isConnected())&&(t=e.previousConnection),t},xg=function(e){return e.isDynamic},dl=function(e,t){s(He.RENDERER,e,t)},Fw=function(e){u(He.RENDERER,e)},Mg=function(e,t,o){return e=new(p(He.RENDERER,e))(e),e.init(t,o),e},Dg=function(){bt.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:bt.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},Pg=function(){bt.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:bt.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Bg=function(){bt.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:bt.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Fg=function(e,t){function o(g){c--,g.setCollapsed(e),c===0&&i.setGroup$$module$build$src$core$events$utils(!1)}let l=0,c=0;i.setGroup$$module$build$src$core$events$utils(!0);for(let g=0;g<t.length;g++){let L=t[g];for(;L;)c++,setTimeout(o.bind(null,L),l),L=L.getNextBlock(),l+=10}},Ug=function(){bt.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let o=e[t];for(;o;){if(!o.isCollapsed())return"enabled";o=o.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Fg(!0,e.workspace.getTopBlocks(!0))},scopeType:bt.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Hg=function(){bt.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let o=e[t];for(;o;){if(o.isCollapsed())return"enabled";o=o.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Fg(!1,e.workspace.getTopBlocks(!0))},scopeType:bt.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Gg=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(let o=0;o<e.length;o++)Gg(e[o],t)}},hh=function(e){const t=[];e=e.getTopBlocks(!0);for(let o=0;o<e.length;o++)Gg(e[o],t);return t},Qa=function(e,t){t?i.setGroup$$module$build$src$core$events$utils(t):(i.setGroup$$module$build$src$core$events$utils(!0),t=i.getGroup$$module$build$src$core$events$utils());const o=e.shift();o&&(o.isDeadOrDying()?Qa(e,t):(o.dispose(!1,!0),setTimeout(Qa,10,e,t))),i.setGroup$$module$build$src$core$events$utils(!1)},Vg=function(){bt.registry.register({displayText(e){return e.workspace?(e=hh(e.workspace).length,e===1?i.Msg$$module$build$src$core$msg.DELETE_BLOCK:i.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&0<hh(e.workspace).length?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=hh(e.workspace);2>t.length?Qa(t):Xe(i.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(t.length)),function(o){o&&Qa(t)})}},scopeType:bt.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Uw=function(){Dg(),Pg(),Bg(),Ug(),Hg(),Vg()},Wg=function(){bt.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){e.block&&ch(e.block)},scopeType:bt.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},jg=function(){bt.registry.register({displayText(e){return e.block.hasIcon(Mr.TYPE)?i.Msg$$module$build$src$core$msg.REMOVE_COMMENT:i.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden"},callback(e){e=e.block,e.hasIcon(Mr.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:bt.ScopeType.BLOCK,id:"blockComment",weight:2})},zg=function(){bt.registry.register({displayText(e){return e.block.getInputsInline()?i.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:i.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let t=1;t<e.inputList.length;t++)if(!(e.inputList[t-1]instanceof Qh||e.inputList[t]instanceof Qh))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:bt.ScopeType.BLOCK,id:"blockInline",weight:3})},Xg=function(){bt.registry.register({displayText(e){return e.block.isCollapsed()?i.Msg$$module$build$src$core$msg.EXPAND_BLOCK:i.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:bt.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Yg=function(){bt.registry.register({displayText(e){return e.block.isEnabled()?i.Msg$$module$build$src$core$msg.DISABLE_BLOCK:i.Msg$$module$build$src$core$msg.ENABLE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()?e.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(e){e=e.block;const t=i.getGroup$$module$build$src$core$events$utils();t||i.setGroup$$module$build$src$core$events$utils(!0),e.setEnabled(!e.isEnabled()),i.setGroup$$module$build$src$core$events$utils(t)},scopeType:bt.ScopeType.BLOCK,id:"blockDisable",weight:5})},Kg=function(){bt.registry.register({displayText(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),e===1?i.Msg$$module$build$src$core$msg.DELETE_BLOCK:i.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:bt.ScopeType.BLOCK,id:"blockDelete",weight:6})},qg=function(){bt.registry.register({displayText(){return i.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:bt.ScopeType.BLOCK,id:"blockHelp",weight:7})},Hw=function(){Wg(),jg(),zg(),Xg(),Yg(),Kg(),qg()},Zg=function(){Uw(),Hw()},$o=function(e){return e.getProcedureModel!==void 0&&e.doProcedureUpdate!==void 0&&e.isProcedureDef!==void 0},dh=function(e){return e.startPublishing!==void 0&&e.stopPublishing!==void 0},fh=function(e){const t=e.getProcedureMap().getProcedures().filter(l=>!l.getReturnTypes()).map(l=>[l.getName(),l.getParameters().map(c=>c.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(l=>{!$o(l)&&le(l)&&t.push(l.getProcedureDef())});const o=e.getProcedureMap().getProcedures().filter(l=>!!l.getReturnTypes()).map(l=>[l.getName(),l.getParameters().map(c=>c.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(l=>{!$o(l)&&le(l)&&o.push(l.getProcedureDef())}),t.sort(Jg),o.sort(Jg),[t,o]},Jg=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},i.findLegalName$$module$build$src$core$procedures=function(e,t){if(t.isInFlyout)return e;for(e=e||i.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!Gw(e,t.workspace,t);){const o=e.match(/^(.*?)(\d+)$/);e=o?o[1]+(parseInt(o[2])+1):e+"2"}return e},Gw=function(e,t,o){return!Qg(e,t,o)},Qg=function(e,t,o){for(const l of t.getAllBlocks(!1))if(l!==o&&le(l)&&i.Names$$module$build$src$core$names.equals(l.getProcedureDef()[0],e))return!0;o=o&&$o(o)?o==null?void 0:o.getProcedureModel():void 0;for(const l of t.getProcedureMap().getProcedures())if(l!==o&&i.Names$$module$build$src$core$names.equals(l.getName(),e))return!0;return!1},i.rename$$module$build$src$core$procedures=function(e){var t=this.getSourceBlock();if(!t)throw new Qt;e=e.trim();const o=i.findLegalName$$module$build$src$core$procedures(e,t);$o(t)&&!t.isInsertionMarker()&&t.getProcedureModel().setName(o);const l=this.getValue();if(l!==e&&l!==o)for(e=t.workspace.getAllBlocks(!1),t=0;t<e.length;t++){const c=e[t];c.renameProcedure&&c.renameProcedure(l,o)}return o},ph=function(e){function t(g,L){for(let xe=0;xe<g.length;xe++){var he=g[xe][0];const Ze=g[xe][1],Vt=i.createElement$$module$build$src$core$utils$xml("block");Vt.setAttribute("type",L),Vt.setAttribute("gap","16");const kt=i.createElement$$module$build$src$core$utils$xml("mutation");for(kt.setAttribute("name",he),Vt.appendChild(kt),he=0;he<Ze.length;he++){const qr=i.createElement$$module$build$src$core$utils$xml("arg");qr.setAttribute("name",Ze[he]),kt.appendChild(qr)}o.push(Vt)}}const o=[];if(Xr.procedures_defnoreturn){var l=i.createElement$$module$build$src$core$utils$xml("block");l.setAttribute("type","procedures_defnoreturn"),l.setAttribute("gap","16");var c=i.createElement$$module$build$src$core$utils$xml("field");c.setAttribute("name","NAME"),c.appendChild(i.createTextNode$$module$build$src$core$utils$xml(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),l.appendChild(c),o.push(l)}return Xr.procedures_defreturn&&(l=i.createElement$$module$build$src$core$utils$xml("block"),l.setAttribute("type","procedures_defreturn"),l.setAttribute("gap","16"),c=i.createElement$$module$build$src$core$utils$xml("field"),c.setAttribute("name","NAME"),c.appendChild(i.createTextNode$$module$build$src$core$utils$xml(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),l.appendChild(c),o.push(l)),Xr.procedures_ifreturn&&(l=i.createElement$$module$build$src$core$utils$xml("block"),l.setAttribute("type","procedures_ifreturn"),l.setAttribute("gap","16"),o.push(l)),o.length&&o[o.length-1].setAttribute("gap","24"),e=fh(e),t(e[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),o},em=function(e){var t=[],o=e.getBlocksByType("procedures_mutatorarg",!1);for(let g=0,L;L=o[g];g++)t.push(L.getFieldValue("NAME"));o=i.createElement$$module$build$src$core$utils$xml("xml");const l=i.createElement$$module$build$src$core$utils$xml("block");l.setAttribute("type","procedures_mutatorarg");const c=i.createElement$$module$build$src$core$utils$xml("field");c.setAttribute("name","NAME"),t=_(i.DEFAULT_ARG$$module$build$src$core$procedures,t),t=i.createTextNode$$module$build$src$core$utils$xml(t),c.appendChild(t),l.appendChild(c),o.appendChild(l),e.updateToolbox(o)},tm=function(e){if(e.type===si&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=S(e.workspaceId).getBlockById(e.blockId);var t=e.type;(t==="procedures_defnoreturn"||t==="procedures_defreturn")&&(e=e.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),em(e),e.addChangeListener(Vw))}},Vw=function(e){(e.type===i.CREATE$$module$build$src$core$events$utils||e.type===i.DELETE$$module$build$src$core$events$utils||e.type===i.CHANGE$$module$build$src$core$events$utils||e.type===Eo)&&(e=S(e.workspaceId),em(e))},rm=function(e,t){return t.getAllBlocks(!1).filter(o=>Ww(o,e)||Z(o)&&i.Names$$module$build$src$core$names.equals(o.getProcedureCall(),e))},Ww=function(e,t){return $o(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&i.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),t)},i.mutateCallers$$module$build$src$core$procedures=function(e){const t=G();var o=e.getProcedureDef()[0];const l=e.mutationToDom(!0);e=rm(o,e.workspace);for(let g=0,L;L=e[g];g++){o=(o=L.mutationToDom())&&me(o),L.domToMutation&&L.domToMutation(l);var c=L.mutationToDom();c=c&&me(c),o!==c&&(J(!1),X(new(K(i.CHANGE$$module$build$src$core$events$utils))(L,"mutation",null,o,c)),J(t))}},i.getDefinition$$module$build$src$core$procedures=function(e,t){for(const o of t.getAllBlocks(!1))if($o(o)&&o.isProcedureDef()&&i.Names$$module$build$src$core$names.equals(o.getProcedureModel().getName(),e)||le(o)&&i.Names$$module$build$src$core$names.equals(o.getProcedureDef()[0],e))return o;return null},nm=function(e){ke(e.getTargetWorkspace(),void 0,"String")},im=function(e){ke(e.getTargetWorkspace(),void 0,"Number")},om=function(e){ke(e.getTargetWorkspace(),void 0,"Colour")},gh=function(e){let t=[],o=document.createElement("button");return o.setAttribute("text",i.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(o),o=document.createElement("button"),o.setAttribute("text",i.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(o),o=document.createElement("button"),o.setAttribute("text",i.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(o),e.registerButtonCallback("CREATE_VARIABLE_STRING",nm),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",im),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",om),e=sm(e),t=t.concat(e)},sm=function(e){e=e.getAllVariables();const t=[];if(0<e.length){if(Xr.variables_set_dynamic){var o=e[e.length-1];const l=i.createElement$$module$build$src$core$utils$xml("block");l.setAttribute("type","variables_set_dynamic"),l.setAttribute("gap","24"),l.appendChild(i.generateVariableFieldDom$$module$build$src$core$variables(o)),t.push(l)}if(Xr.variables_get_dynamic){e.sort(iu.compareByName);for(let l=0,c;c=e[l];l++)o=i.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","variables_get_dynamic"),o.setAttribute("gap","8"),o.appendChild(i.generateVariableFieldDom$$module$build$src$core$variables(c)),t.push(o)}}return t},mh=function(e,t,o,l,c,g){const L=g.scrollbar&&g.scrollbar.canScrollVertically();return e.horizontal===Fl.LEFT?(o=c.absoluteMetrics.left+o,L&&g.RTL&&(o+=er.scrollbarThickness)):(o=c.absoluteMetrics.left+c.viewMetrics.width-t.width-o,L&&!g.RTL&&(o-=er.scrollbarThickness)),e.vertical===Ki.TOP?e=c.absoluteMetrics.top+l:(e=c.absoluteMetrics.top+c.viewMetrics.height-t.height-l,g.scrollbar&&g.scrollbar.canScrollHorizontally()&&(e-=er.scrollbarThickness)),new Rt(e,e+t.height,o,o+t.width)},$h=function(e,t){return{horizontal:t.toolboxMetrics.position===at.LEFT||e.horizontalLayout&&!e.RTL?Fl.RIGHT:Fl.LEFT,vertical:t.toolboxMetrics.position===at.BOTTOM?Ki.TOP:Ki.BOTTOM}},_h=function(e,t,o,l){const c=e.left,g=e.right-e.left,L=e.bottom-e.top;for(let he=0;he<l.length;he++){const xe=l[he];e.intersects(xe)&&(e=o===Co.UP?xe.top-L-t:xe.bottom+t,e=new Rt(e,e+L,c,c+g),he=-1)}return e},jw=function(e,t){var o=null;o=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;let l;if(!document.contains(o)&&document!==((l=o)==null?void 0:l.ownerDocument))throw Error("Error: container is not in current document");e=new bn(t||{}),t=document.createElement("div"),t.className="injectionDiv",t.tabIndex=0,xt(t,Lt.LABEL,i.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),o.appendChild(t),o=zw(t,e);const c=Xw(o,e);return Yw(c),$(c),U(c),t.addEventListener("focusin",function(){$(c)}),c},zw=function(e,t){e.setAttribute("dir","LTR"),mp(t.hasCss,t.pathToMedia),e=O(ve.SVG,{xmlns:Oh,"xmlns:html":Pi,"xmlns:xlink":En,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const o=O(ve.DEFS,{},e),l=String(Math.random()).substring(2);return t.gridPattern=H$.createDom(l,t.gridOptions,o),e},Xw=function(e,t){t.parentWorkspace=null,t=new Vn(t);const o=t.options;t.scale=o.zoomOptions.startScale,e.appendChild(t.createDom("blocklyMainBackground"));var l=t.getInjectionDiv(),c=t.getRenderer().getClassName();return c&&F(l,c),(c=t.getTheme().getClassName())&&F(l,c),!o.hasCategories&&o.languageTree&&(l=t.addFlyout(ve.SVG),v(l,e)),o.hasTrashcan&&t.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&t.addZoomControls(),t.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),t.translate(0,0),t.addChangeListener(bg(t)),U(t),ig(),Lp(),Yp(),t},Yw=function(e){const t=e.options;var o=e.getParentSvg();if(Ye(o.parentNode,"contextmenu",null,function(l){pr(l)||l.preventDefault()}),o=Ye(window,"resize",null,function(){Li(),e.hideComponents(!0),Vp(),ag(),U(e),ah(e)}),e.setResizeHandlerWrapper(o),qw(),t.languageTree){o=e.getToolbox();const l=e.getFlyout(!0);o?o.init():l&&(l.init(e),l.show(t.languageTree),typeof l.scrollToStart=="function"&&l.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new U$(e,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.horizontal,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&Zw(t.pathToMedia,e)},Kw=function(e){const t=W();t&&!(pr(e)||t.rendered&&!t.isVisible())&&wt.registry.onKeyDown(t,e)},qw=function(){D0||(Ye(document,"scroll",null,function(){const e=x();for(let t=0,o;o=e[t];t++)o instanceof Vn&&o.updateInverseScreenCTM()}),Ye(document,"keydown",null,Kw),Ht(document,"touchend",null,Le),Ht(document,"touchcancel",null,Le),bl&&Ye(window,"orientationchange",document,function(){U(W())})),D0=!0},Zw=function(e,t){function o(){for(;c.length;){const g=c.pop();g&&lt(g)}l.preload()}const l=t.getAudioManager();l.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),l.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),l.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const c=[];c.push(Ye(document,"pointermove",null,o,!0)),c.push(Ye(document,"touchstart",null,o,!0))},Jw=function(e){return e.getType!==void 0&&e.initView!==void 0&&e.dispose!==void 0&&e.getWeight!==void 0&&e.getSize!==void 0&&e.applyColour!==void 0&&e.hideForInsertionMarker!==void 0&&e.updateEditable!==void 0&&e.updateCollapsed!==void 0&&e.isShownWhenCollapsed!==void 0&&e.setOffsetInBlock!==void 0&&e.onLocationChange!==void 0&&e.onClick!==void 0},lm=function(e){const t={id:e.getId(),name:e.getName(),returnTypes:e.getReturnTypes()};return e.getParameters().length&&(t.parameters=e.getParameters().map(o=>am(o))),t},am=function(e){const t={id:e.getId(),name:e.getName()};return e.getTypes().length&&(t.types=e.getTypes()),t},um=function(e,t,o,l){if(e=new e(l,o.name,o.id).setReturnTypes(o.returnTypes),!o.parameters)return e;for(const[c,g]of o.parameters.entries())e.insertParameter(cm(t,g,l),c);return e},cm=function(e,t,o){return e=new e(o,t.name,t.id),t.types&&e.setTypes(t.types),e},Qw=function(e){const t=Object.create(null),o=E(He.SERIALIZER,!0);for(const l in o){let c;const g=(c=o[l])==null?void 0:c.save(e);g&&(t[l]=g)}return t},eS=function(e,t,{recordUndo:o=!1}={}){var l=E(He.SERIALIZER,!0);if(l){l=Object.entries(l).sort((g,L)=>L[1].priority-g[1].priority);var c=G();J(o),(o=i.getGroup$$module$build$src$core$events$utils())||i.setGroup$$module$build$src$core$events$utils(!0),Te(),t instanceof Vn&&t.setResizesEnabled(!1);for(const[,g]of l.reverse()){let L;(L=g)==null||L.clear(t)}for(let[g,L]of l.reverse())if(e[g]){let he;(he=L)==null||he.load(e[g],t)}t instanceof Vn&&t.setResizesEnabled(!0),Me(),X(new(K(us))(t)),i.setGroup$$module$build$src$core$events$utils(o),J(c)}},hm=function(){wt.registry.register({name:mi.ESCAPE,preconditionFn(e){return!e.options.readOnly},callback(e){return e.hideChaff(),!0},keyCodes:[ft.ESC]})},dm=function(){wt.registry.register({name:mi.DELETE,preconditionFn(e){const t=m();return!e.options.readOnly&&t!=null&&t.isDeletable()},callback(e,t){return t.preventDefault(),Yi.inProgress()?!1:(m().checkAndDelete(),!0)},keyCodes:[ft.DELETE,ft.BACKSPACE]})},fm=function(){const e=wt.registry.createSerializedKey(ft.C,[ft.CTRL]),t=wt.registry.createSerializedKey(ft.C,[ft.ALT]),o=wt.registry.createSerializedKey(ft.C,[ft.META]);wt.registry.register({name:mi.COPY,preconditionFn(l){const c=m();return!l.options.readOnly&&!Yi.inProgress()&&c!=null&&c.isDeletable()&&c.isMovable()},callback(l,c){return c.preventDefault(),l.hideChaff(),Ka(m()),!0},keyCodes:[e,t,o]})},pm=function(){const e=wt.registry.createSerializedKey(ft.X,[ft.CTRL]),t=wt.registry.createSerializedKey(ft.X,[ft.ALT]),o=wt.registry.createSerializedKey(ft.X,[ft.META]);wt.registry.register({name:mi.CUT,preconditionFn(l){const c=m();return!l.options.readOnly&&!Yi.inProgress()&&c!=null&&c instanceof an&&c.isDeletable()&&c.isMovable()&&!c.workspace.isFlyout},callback(){const l=m();return l?(Ka(l),l.checkAndDelete(),!0):!1},keyCodes:[e,t,o]})},gm=function(){const e=wt.registry.createSerializedKey(ft.V,[ft.CTRL]),t=wt.registry.createSerializedKey(ft.V,[ft.ALT]),o=wt.registry.createSerializedKey(ft.V,[ft.META]);wt.registry.register({name:mi.PASTE,preconditionFn(l){return!l.options.readOnly&&!Yi.inProgress()},callback(){return!!kg()},keyCodes:[e,t,o]})},mm=function(){const e=wt.registry.createSerializedKey(ft.Z,[ft.CTRL]),t=wt.registry.createSerializedKey(ft.Z,[ft.ALT]),o=wt.registry.createSerializedKey(ft.Z,[ft.META]);wt.registry.register({name:mi.UNDO,preconditionFn(l){return!l.options.readOnly&&!Yi.inProgress()},callback(l){return l.hideChaff(),l.undo(!1),!0},keyCodes:[e,t,o]})},$m=function(){const e=wt.registry.createSerializedKey(ft.Z,[ft.SHIFT,ft.CTRL]),t=wt.registry.createSerializedKey(ft.Z,[ft.SHIFT,ft.ALT]),o=wt.registry.createSerializedKey(ft.Z,[ft.SHIFT,ft.META]),l=wt.registry.createSerializedKey(ft.Y,[ft.CTRL]);wt.registry.register({name:mi.REDO,preconditionFn(c){return!Yi.inProgress()&&!c.options.readOnly},callback(c){return c.hideChaff(),c.undo(!0),!0},keyCodes:[e,t,o,l]})},_m=function(){hm(),dm(),fm(),pm(),gm(),mm(),$m()},tS=function(e){return e.isSelectable()},rS=function(e){W().hideChaff(e)},it=it||{},it.scope={},it.ASSUME_ES5=!1,it.ASSUME_NO_NATIVE_MAP=!1,it.ASSUME_NO_NATIVE_SET=!1,it.SIMPLE_FROUND_POLYFILL=!1,it.ISOLATE_POLYFILLS=!1,it.FORCE_POLYFILL_PROMISE=!1,it.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,it.defineProperty=it.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,o){return e==Array.prototype||e==Object.prototype||(e[t]=o.value),e},it.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof ut=="object"&&ut];for(var t=0;t<e.length;++t){var o=e[t];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")},it.global=it.getGlobal(this),it.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",it.TRUST_ES6_POLYFILLS=!it.ISOLATE_POLYFILLS||it.IS_SYMBOL_NATIVE,it.polyfills={},it.propertyToPolyfillSymbol={},it.POLYFILL_PREFIX="$jscp$",it.polyfill=function(e,t,o,l){t&&(it.ISOLATE_POLYFILLS?it.polyfillIsolated(e,t,o,l):it.polyfillUnisolated(e,t,o,l))},it.polyfillUnisolated=function(e,t,o,l){for(o=it.global,e=e.split("."),l=0;l<e.length-1;l++){var c=e[l];if(!(c in o))return;o=o[c]}e=e[e.length-1],l=o[e],t=t(l),t!=l&&t!=null&&it.defineProperty(o,e,{configurable:!0,writable:!0,value:t})},it.polyfillIsolated=function(e,t,o,l){var c=e.split(".");e=c.length===1,l=c[0],l=!e&&l in it.polyfills?it.polyfills:it.global;for(var g=0;g<c.length-1;g++){var L=c[g];if(!(L in l))return;l=l[L]}c=c[c.length-1],o=it.IS_SYMBOL_NATIVE&&o==="es6"?l[c]:null,t=t(o),t!=null&&(e?it.defineProperty(it.polyfills,c,{configurable:!0,writable:!0,value:t}):t!==o&&(it.propertyToPolyfillSymbol[c]===void 0&&(o=1e9*Math.random()>>>0,it.propertyToPolyfillSymbol[c]=it.IS_SYMBOL_NATIVE?it.global.Symbol(c):it.POLYFILL_PREFIX+o+"$"+c),it.defineProperty(l,it.propertyToPolyfillSymbol[c],{configurable:!0,writable:!0,value:t})))},it.polyfill("globalThis",function(e){return e||it.global},"es_2020","es3"),it.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},it.arrayIterator=function(e){return{next:it.arrayIteratorImpl(e)}},it.initSymbol=function(){},it.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},it.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var o=0,l=!1,c={next:function(){if(!l&&o<e.length){var g=o++;return{value:t(g,e[g]),done:!1}}return l=!0,{done:!0,value:void 0}}};return c[Symbol.iterator]=function(){return c},c},it.polyfill("Array.prototype.values",function(e){return e||function(){return it.iteratorFromArray(this,function(t,o){return o})}},"es8","es3"),it.polyfill("Array.prototype.flat",function(e){return e||function(t){t=t===void 0?1:t;var o=[];return Array.prototype.forEach.call(this,function(l){Array.isArray(l)&&0<t?(l=Array.prototype.flat.call(l,t-1),o.push.apply(o,l)):o.push(l)}),o}},"es9","es5"),it.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},it.polyfill("Object.entries",function(e){return e||function(t){var o=[],l;for(l in t)it.owns(t,l)&&o.push([l,t[l]]);return o}},"es8","es3"),it.polyfill("Object.values",function(e){return e||function(t){var o=[],l;for(l in t)it.owns(t,l)&&o.push(t[l]);return o}},"es8","es3");var zr=zr||{};zr.global=globalThis||root,zr.define=function(e,t){return t},zr.DEBUG=!1,zr.DISALLOW_TEST_ONLY_CODE=!zr.DEBUG,zr.provide=function(e){},zr.module=function(e){},zr.module.get=function(e){},zr.module.declareLegacyNamespace=function(){},zr.setTestOnly=function(e){if(zr.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},zr.require=function(e){},zr.requireType=function(e){};var _o=Object.create(null),Ix={typeMap:_o},Eh=Object.create(null),xi="default",He=class{constructor(e){this.name=e}toString(){return this.name}};He.CONNECTION_CHECKER=new He("connectionChecker"),He.CURSOR=new He("cursor"),He.EVENT=new He("event"),He.FIELD=new He("field"),He.INPUT=new He("input"),He.RENDERER=new He("renderer"),He.TOOLBOX=new He("toolbox"),He.THEME=new He("theme"),He.TOOLBOX_ITEM=new He("toolboxItem"),He.FLYOUTS_VERTICAL_TOOLBOX=new He("flyoutsVerticalToolbox"),He.FLYOUTS_HORIZONTAL_TOOLBOX=new He("flyoutsHorizontalToolbox"),He.METRICS_MANAGER=new He("metricsManager"),He.BLOCK_DRAGGER=new He("blockDragger"),He.SERIALIZER=new He("serializer"),He.ICON=new He("icon");var Pn={};Pn.DEFAULT=xi,Pn.TEST_ONLY=Ix,Pn.Type=He,Pn.getAllItems=E,Pn.getClass=p,Pn.getClassFromOptions=y,Pn.getObject=T,Pn.hasItem=d,Pn.register=s,Pn.unregister=u;var Xr=Object.create(null),eu=Object.create(null),nS,iS=null,oS,fl=[],sS={defineBlocksWithJsonArrayInternal:de},gr={};gr.TEST_ONLY=sS,gr.createBlockDefinitionsFromJsonArray=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,gr.defineBlocks=i.defineBlocks$$module$build$src$core$common,gr.defineBlocksWithJsonArray=ae,gr.draggingConnections=fl,gr.getAllWorkspaces=x,gr.getBlockTypeCounts=V,gr.getMainWorkspace=W,gr.getParentContainer=D,gr.getSelected=m,gr.getWorkspaceById=S,gr.registerWorkspace=B,gr.setMainWorkspace=$,gr.setParentContainer=C,gr.setSelected=I,gr.svgResize=U,gr.unregisterWorkpace=H;var lS="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",aS={genUid:()=>{const e=lS.length,t=[];for(let o=0;20>o;o++)t[o]=lS.charAt(Math.random()*e);return t.join("")}},Ox=0,Th={};Th.TEST_ONLY=aS,Th.genUid=q,Th.getNextUniqueId=we;var Em,pl,vh,Eo,To,ss,gl,bh,ls,Mi,Di,ml,si,$l,_l,El,vo,bo,as,Tl,li,us,yh,cs,wh,ct;Em="",pl=!0,vh=0,i.CREATE$$module$build$src$core$events$utils="create",i.CREATE$$module$build$src$core$events$utils,i.DELETE$$module$build$src$core$events$utils="delete",i.DELETE$$module$build$src$core$events$utils,i.CHANGE$$module$build$src$core$events$utils="change",i.CHANGE$$module$build$src$core$events$utils,Eo="block_field_intermediate_change",i.MOVE$$module$build$src$core$events$utils="move",i.MOVE$$module$build$src$core$events$utils,To="var_create",ss="var_delete",gl="var_rename",bh="ui",ls="drag",Mi="selected",Di="click",ml="marker_move",si="bubble_open",$l="trashcan_open",_l="toolbox_item_select",El="theme_change",vo="viewport_change",bo="comment_create",as="comment_delete",Tl="comment_change",li="comment_move",us="finished_loading",yh=[i.CREATE$$module$build$src$core$events$utils,i.MOVE$$module$build$src$core$events$utils,bo,li],cs=[],wh={FIRE_QUEUE:cs,fireNow:fe,fireInternal:ce,setGroupInternal:ie},ct={},ct.BLOCK_CHANGE=i.CHANGE$$module$build$src$core$events$utils,ct.BLOCK_CREATE=i.CREATE$$module$build$src$core$events$utils,ct.BLOCK_DELETE=i.DELETE$$module$build$src$core$events$utils,ct.BLOCK_DRAG=ls,ct.BLOCK_FIELD_INTERMEDIATE_CHANGE=Eo,ct.BLOCK_MOVE=i.MOVE$$module$build$src$core$events$utils,ct.BUBBLE_OPEN=si,ct.BUMP_EVENTS=yh,ct.CHANGE=i.CHANGE$$module$build$src$core$events$utils,ct.CLICK=Di,ct.COMMENT_CHANGE=Tl,ct.COMMENT_CREATE=bo,ct.COMMENT_DELETE=as,ct.COMMENT_MOVE=li,ct.CREATE=i.CREATE$$module$build$src$core$events$utils,ct.DELETE=i.DELETE$$module$build$src$core$events$utils,ct.FINISHED_LOADING=us,ct.MARKER_MOVE=ml,ct.MOVE=i.MOVE$$module$build$src$core$events$utils,ct.SELECTED=Mi,ct.TEST_ONLY=wh,ct.THEME_CHANGE=El,ct.TOOLBOX_ITEM_SELECT=_l,ct.TRASHCAN_OPEN=$l,ct.UI=bh,ct.VAR_CREATE=To,ct.VAR_DELETE=ss,ct.VAR_RENAME=gl,ct.VIEWPORT_CHANGE=vo,ct.clearPendingUndo=ge,ct.disable=i.disable$$module$build$src$core$events$utils,ct.disableOrphans=pe,ct.enable=i.enable$$module$build$src$core$events$utils,ct.filter=re,ct.fire=X,ct.fromJson=Y,ct.get=K,ct.getDescendantIds=A,ct.getGroup=i.getGroup$$module$build$src$core$events$utils,ct.getRecordUndo=G,ct.isEnabled=ue,ct.setGroup=i.setGroup$$module$build$src$core$events$utils,ct.setRecordUndo=J,function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM"}(i.inputTypes$$module$build$src$core$inputs$input_types||(i.inputTypes$$module$build$src$core$inputs$input_types={})),i.inputTypes$$module$build$src$core$inputs$input_types;var Sh={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Tm={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Ih,DOMParser:tu,XMLSerializer:ru}=globalThis;tu&&(Sh=new tu),ru&&(Tm=new ru);var uS="https://developers.google.com/blockly/xml",Rx=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,hs={};hs.NAME_SPACE=uS,hs.createElement=i.createElement$$module$build$src$core$utils$xml,hs.createTextNode=i.createTextNode$$module$build$src$core$utils$xml,hs.domToText=me,hs.injectDependencies=ee,hs.textToDom=i.textToDom$$module$build$src$core$utils$xml;var Yr=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};Yr.MUTATOR=new Yr("mutator"),Yr.WARNING=new Yr("warning"),Yr.COMMENT=new Yr("comment");var cS={};cS.warn=Ne;var Oh="http://www.w3.org/2000/svg",Pi="http://www.w3.org/1999/xhtml",En="http://www.w3.org/1999/xlink",Bi;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(Bi||(Bi={}));var Bn=null,vm=0,Rh=null,lr={};lr.HTML_NS=Pi,lr.NodeType=Bi,lr.SVG_NS=Oh,lr.XLINK_NS=En,lr.addClass=F,lr.containsNode=w,lr.createSvgElement=O,lr.getFastTextWidth=be,lr.getFastTextWidthWithSizeString=De,lr.getTextWidth=se,lr.hasClass=nt,lr.insertAfter=v,lr.measureFontMetrics=Fe,lr.removeClass=Ae,lr.removeClasses=Oe,lr.removeNode=P,lr.setCssTransform=M,lr.startTextWidthCache=Te,lr.stopTextWidthCache=Me;var At=class{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t?!0:e&&t?e.width===t.width&&e.height===t.height:!1}},hS=function(e,t){window.alert(e),t&&t()},dS=function(e,t){t(window.confirm(e))},fS=function(e,t,o){o(window.prompt(e,t))},pS={confirmInternal:st},yo={};yo.TEST_ONLY=pS,yo.alert=Ge,yo.confirm=Xe,yo.prompt=f,yo.setAlert=ze,yo.setConfirm=oe,yo.setPrompt=R;var bm,kh;i.Msg$$module$build$src$core$msg=Object.create(null),bm=function(e){Object.keys(e).forEach(function(t){i.Msg$$module$build$src$core$msg[t]=e[t]})},kh={},kh.Msg=i.Msg$$module$build$src$core$msg,kh.setLocale=bm;var vl=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=i.getGroup$$module$build$src$core$events$utils(),this.recordUndo=G()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,t,o){return o.isBlank=!1,o.group=e.group||"",o.workspaceId=t.id,o}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=S(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},nu=class extends vl{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new nu),t.varId=e.varId,t}},ym=class extends nu{constructor(e){super(e),this.type=To,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new ym),t.varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)}};s(He.EVENT,To,ym);var iu=class{constructor(e,t,o,l){this.workspace=e,this.name=t,this.type=o||"",this.id_=l||q()}getId(){return this.id_}static compareByName(e,t){return e.name.localeCompare(t.name,void 0,{sensitivity:"base"})}},wm="VARIABLE",Sm="ijkmnopqrstuvwxyzabcdefgh",gS={generateUniqueNameInternal:ot},ar={};ar.CATEGORY_NAME=wm,ar.TEST_ONLY=gS,ar.VAR_LETTER_OPTIONS=Sm,ar.allDeveloperVariables=i.allDeveloperVariables$$module$build$src$core$variables,ar.allUsedVarModels=i.allUsedVarModels$$module$build$src$core$variables,ar.createVariableButtonHandler=ke,ar.flyoutCategory=ye,ar.flyoutCategoryBlocks=N,ar.generateUniqueName=Be,ar.generateUniqueNameFromOptions=_,ar.generateVariableFieldDom=i.generateVariableFieldDom$$module$build$src$core$variables,ar.getAddedVariables=ne,ar.getOrCreateVariablePackage=i.getOrCreateVariablePackage$$module$build$src$core$variables,ar.getVariable=i.getVariable$$module$build$src$core$variables,ar.nameUsedWithAnyType=$e,ar.nameUsedWithConflictingParam=Re,ar.promptName=Ie,ar.renameVariable=i.renameVariable$$module$build$src$core$variables;var je=class{constructor(e,t){this.x=e,this.y=t}clone(){return new je(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,t){return this.x+=e,this.y+=t,this}static equals(e,t){return e===t?!0:e&&t?e.x===t.x&&e.y===t.y:!1}static distance(e,t){const o=e.x-t.x;return e=e.y-t.y,Math.sqrt(o*o+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,t){return new je(e.x-t.x,e.y-t.y)}static sum(e,t){return new je(e.x+t.x,e.y+t.y)}},ai=class{constructor(e,t,o,l,c){this.workspace=e,this.editable=this.movable=this.deletable=!0,this.disposed_=!1,this.isComment=!0,this.id=c&&!e.getCommentById(c)?c:q(),e.addTopComment(this),this.xy_=new je(0,0),this.height_=o,this.width_=l,this.RTL=e.RTL,this.content_=t,ai.fireCreateEvent(this)}dispose(){this.disposed_||(ue()&&X(new(K(as))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(e){this.height_=e}getWidth(){return this.width_}setWidth(e){this.width_=e}getRelativeToSurfaceXY(){return new je(this.xy_.x,this.xy_.y)}moveBy(e,t){const o=new(K(li))(this);this.xy_.translate(e,t),o.recordNew(),X(o)}isDeletable(){return this.deletable&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(e){this.movable=e}isEditable(){return this.editable&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(e){this.editable=e}getContent(){return this.content_}setContent(e){this.content_!==e&&(X(new(K(Tl))(this,this.content_,e)),this.content_=e)}toXmlWithXY(e){return e=this.toXml(e),e.setAttribute("x",String(Math.round(this.xy_.x))),e.setAttribute("y",String(Math.round(this.xy_.y))),e.setAttribute("h",String(this.height_)),e.setAttribute("w",String(this.width_)),e}toXml(e){const t=i.createElement$$module$build$src$core$utils$xml("comment");return e||(t.id=this.id),t.textContent=this.getContent(),t}static fireCreateEvent(e){if(ue()){const t=i.getGroup$$module$build$src$core$events$utils();t||i.setGroup$$module$build$src$core$events$utils(!0);try{X(new(K(bo))(e))}finally{i.setGroup$$module$build$src$core$events$utils(t)}}}static fromXml(e,t){var o=ai.parseAttributes(e);return t=new ai(t,o.content,o.h,o.w,o.id),o=e.getAttribute("x"),e=e.getAttribute("y"),o=o?parseInt(o,10):NaN,e=e?parseInt(e,10):NaN,isNaN(o)||isNaN(e)||t.moveBy(o,e),ai.fireCreateEvent(t),t}static parseAttributes(e){const t=e.getAttribute("h"),o=e.getAttribute("w"),l=e.getAttribute("x"),c=e.getAttribute("y"),g=e.getAttribute("id");if(!g)throw Error("No ID present in XML comment definition.");let L;return{id:g,h:t?parseInt(t):100,w:o?parseInt(o):100,x:l?parseInt(l):NaN,y:c?parseInt(c):NaN,content:(L=e.textContent)!=null?L:""}}},ui=class extends vl{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},Im=class extends ui{constructor(e,t,o){super(o),this.type=Mi,this.oldElementId=e??void 0,this.newElementId=t??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new Im),t.oldElementId=e.oldElementId,t.newElementId=e.newElementId,t}};s(He.EVENT,Mi,Im);var kx=750,mS="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Ch=null,ds={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Ah=0,Fi={};Fi.TOUCH_ENABLED=mS,Fi.TOUCH_MAP=ds,Fi.checkTouchIdentifier=jt,Fi.clearTouchIdentifier=Ue,Fi.getTouchIdentifierFromEvent=gt,Fi.longStart=Ee,Fi.longStop=Le,Fi.shouldHandleEvent=tt;var Om,$S,_S,ES,Lh,Nh,Rm,TS,vS,bS;(function(e){function t(l){return o.indexOf(l.toUpperCase())!==-1}Om=e;const o=Om.toUpperCase();$S=t("JavaFX"),_S=t("WebKit"),ES=t("Gecko")&&!_S,Lh=t("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Nh=t("iPad")||t("Macintosh")&&0<e,Rm=t("iPhone")&&!Nh,TS=t("Macintosh"),vS=Nh||Lh&&!t("Mobile")||t("Silk"),bS=!vS&&(Rm||Lh)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Cx=Om,Ax=$S,km=ES,xh=Lh,bl=Nh,yS=Rm,Cm=TS,Am=bS,Ui={};Ui.ANDROID=xh,Ui.GECKO=km,Ui.IPAD=bl,Ui.IPHONE=yS,Ui.JavaFx=Ax,Ui.MAC=Cm,Ui.MOBILE=Am,Ui.raw=Cx;var wS=40,SS=125,Hi={};Hi.bind=Ht,Hi.conditionalBind=Ye,Hi.getScrollDeltaPixels=Or,Hi.isRightButton=Nt,Hi.isTargetInput=pr,Hi.mouseToSvg=Tr,Hi.unbind=lt;var Lm=!1,Nm=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}
`,xm={};xm.inject=mp,xm.register=xr;var Rt=class{constructor(e,t,o,l){this.top=e,this.bottom=t,this.left=o,this.right=l}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}intersects(e){return!(this.left>e.right||this.right<e.left||this.top>e.bottom||this.bottom<e.top)}},ve=class{constructor(e){this.tagName=e}toString(){return this.tagName}};ve.ANIMATE=new ve("animate"),ve.CIRCLE=new ve("circle"),ve.CLIPPATH=new ve("clipPath"),ve.DEFS=new ve("defs"),ve.FECOMPOSITE=new ve("feComposite"),ve.FECOMPONENTTRANSFER=new ve("feComponentTransfer"),ve.FEFLOOD=new ve("feFlood"),ve.FEFUNCA=new ve("feFuncA"),ve.FEGAUSSIANBLUR=new ve("feGaussianBlur"),ve.FEPOINTLIGHT=new ve("fePointLight"),ve.FESPECULARLIGHTING=new ve("feSpecularLighting"),ve.FILTER=new ve("filter"),ve.FOREIGNOBJECT=new ve("foreignObject"),ve.G=new ve("g"),ve.IMAGE=new ve("image"),ve.LINE=new ve("line"),ve.PATH=new ve("path"),ve.PATTERN=new ve("pattern"),ve.POLYGON=new ve("polygon"),ve.RECT=new ve("rect"),ve.SVG=new ve("svg"),ve.TEXT=new ve("text"),ve.TSPAN=new ve("tspan");var IS={getSizeInternal:cy},Gi={};Gi.TEST_ONLY=IS,Gi.getBorderBox=Ep,Gi.getComputedStyle=ri,Gi.getContainerOffsetToScrollInto=Tp,Gi.getPageOffset=ho,Gi.getSize=Ha,Gi.getViewportPageOffset=_p,Gi.scrollIntoContainerView=Fc;var OS=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,RS=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Lx={XY_REGEX:OS,XY_STYLE_REGEX:RS},fs={};fs.TEST_ONLY=Lx,fs.getDocumentScroll=bp,fs.getInjectionDivXY=Uc,fs.getRelativeXY=ns,fs.getViewportBBox=vp,fs.screenToWsCoordinates=hy;var ur=8,Mh=3,Nx=2,Rr=class extends ai{constructor(e,t,o,l,c){super(e,t,o,l,c),this.onMouseMoveWrapper=this.onMouseUpWrapper=null,this.eventsInit=!1,this.deleteIconBorder=this.deleteGroup=this.resizeGroup=this.foreignObject=this.svgHandleTarget=this.svgRectTarget=this.textarea=null,this.rendered=this.autoLayout=this.focused=!1,this.svgGroup=O(ve.G,{class:"blocklyComment"}),this.workspace=e,this.svgRect_=O(ve.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:Mh,ry:Mh}),this.svgGroup.appendChild(this.svgRect_),this.render()}dispose(){this.disposed_||(m()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),ue()&&X(new(K(as))(this)),P(this.svgGroup),this.disposeInternal(),i.disable$$module$build$src$core$events$utils(),super.dispose(),i.enable$$module$build$src$core$events$utils())}initSvg(e){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit||(Ye(this.svgRectTarget,"pointerdown",this,this.pathMouseDown),Ye(this.svgHandleTarget,"pointerdown",this,this.pathMouseDown)),this.eventsInit=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!e&&this.textarea&&this.textarea.select()}pathMouseDown(e){const t=this.workspace.getGesture(e);t&&t.handleBubbleStart(e,this)}showContextMenu(e){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(m()!==this){var e=null;if(m()){e=m().id,i.disable$$module$build$src$core$events$utils();try{m().unselect()}finally{i.enable$$module$build$src$core$events$utils()}}e=new(K(Mi))(e,this.id,this.workspace.id),X(e),I(this),this.addSelect()}}unselect(){if(m()===this){var e=new(K(Mi))(this.id,null,this.workspace.id);X(e),I(null),this.removeSelect(),this.blurFocus()}}addSelect(){F(this.svgGroup,"blocklySelected"),this.setFocus()}removeSelect(){F(this.svgGroup,"blocklySelected"),this.blurFocus()}addFocus(){F(this.svgGroup,"blocklyFocused")}removeFocus(){Ae(this.svgGroup,"blocklyFocused")}getRelativeToSurfaceXY(){let e=0,t=0,o=this.getSvgRoot();if(o)do{const l=ns(o);e+=l.x,t+=l.y,o=o.parentNode}while(o&&o!==this.workspace.getBubbleCanvas()&&o!==null);return this.xy_=new je(e,t)}moveBy(e,t){const o=new(K(li))(this),l=this.getRelativeToSurfaceXY();this.translate(l.x+e,l.y+t),this.xy_=new je(l.x+e,l.y+t),o.recordNew(),X(o),this.workspace.resizeContents()}translate(e,t){this.xy_=new je(e,t),this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")}moveDuringDrag(e){e=`translate(${e.x}, ${e.y})`,this.getSvgRoot().setAttribute("transform",e)}moveTo(e,t){this.translate(e,t)}clearTransformAttributes(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var e=this.getRelativeToSurfaceXY();const t=this.getHeightWidth(),o=e.y,l=e.y+t.height;let c;return this.RTL?(c=e.x-t.width,e=e.x):(c=e.x,e=e.x+t.width),new Rt(o,l,c,e)}updateMovable(){this.isMovable()?F(this.svgGroup,"blocklyDraggable"):Ae(this.svgGroup,"blocklyDraggable")}setMovable(e){super.setMovable(e),this.updateMovable()}setEditable(e){super.setEditable(e),this.textarea&&(this.textarea.readOnly=!e)}setDragging(e){e?F(this.getSvgRoot(),"blocklyDragging"):Ae(this.getSvgRoot(),"blocklyDragging")}getSvgRoot(){return this.svgGroup}getContent(){return this.textarea?this.textarea.value:this.content_}setContent(e){super.setContent(e),this.textarea&&(this.textarea.value=e)}setDeleteStyle(e){e?F(this.svgGroup,"blocklyDraggingDelete"):Ae(this.svgGroup,"blocklyDraggingDelete")}setAutoLayout(e){}toXmlWithXY(e){let t=0;this.workspace.RTL&&(t=this.workspace.getWidth()),e=this.toXml(e);const o=this.getRelativeToSurfaceXY();return e.setAttribute("x",String(Math.round(this.workspace.RTL?t-o.x:o.x))),e.setAttribute("y",String(Math.round(o.y))),e.setAttribute("h",String(this.getHeight())),e.setAttribute("w",String(this.getWidth())),e}toCopyData(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered){var e=this.getHeightWidth(),t=this.createEditor();this.svgGroup.appendChild(t),this.svgHandleTarget=O(ve.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup.appendChild(this.svgHandleTarget),this.svgRectTarget=O(ve.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:Mh,ry:Mh}),this.svgGroup.appendChild(this.svgRectTarget),this.addResizeDom(),this.isDeletable()&&this.addDeleteDom(),this.setSize(e.width,e.height),this.textarea.value=this.content_,this.rendered=!0,this.resizeGroup&&Ye(this.resizeGroup,"pointerdown",this,this.resizeMouseDown),this.isDeletable()&&(Ye(this.deleteGroup,"pointerdown",this,this.deleteMouseDown),Ye(this.deleteGroup,"pointerout",this,this.deleteMouseOut),Ye(this.deleteGroup,"pointerup",this,this.deleteMouseUp))}}createEditor(){this.foreignObject=O(ve.FOREIGNOBJECT,{x:0,y:Rr.TOP_OFFSET,class:"blocklyCommentForeignObject"});const e=document.createElementNS(Pi,"body");e.setAttribute("xmlns",Pi),e.className="blocklyMinimalBody";const t=document.createElementNS(Pi,"textarea");return t.className="blocklyCommentTextarea",t.setAttribute("dir",this.RTL?"RTL":"LTR"),t.readOnly=!this.isEditable(),e.appendChild(t),this.textarea=t,this.foreignObject.appendChild(e),Ye(t,"wheel",this,function(o){o.stopPropagation()}),Ye(t,"change",this,function(o){this.setContent(t.value)}),this.foreignObject}addResizeDom(){this.resizeGroup=O(ve.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup),O(ve.POLYGON,{points:`0,${ur} ${ur},${ur} ${ur},0`},this.resizeGroup),O(ve.LINE,{class:"blocklyResizeLine",x1:ur/3,y1:ur-1,x2:ur-1,y2:ur/3},this.resizeGroup),O(ve.LINE,{class:"blocklyResizeLine",x1:2*ur/3,y1:ur-1,x2:ur-1,y2:2*ur/3},this.resizeGroup)}addDeleteDom(){this.deleteGroup=O(ve.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup),this.deleteIconBorder=O(ve.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup),O(ve.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup),O(ve.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup)}resizeMouseDown(e){this.unbindDragEvents(),Nt(e)||(this.workspace.startDrag(e,new je(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper=Ye(document,"pointerup",this,this.resizeMouseUp),this.onMouseMoveWrapper=Ye(document,"pointermove",this,this.resizeMouseMove),this.workspace.hideChaff()),e.stopPropagation()}deleteMouseDown(e){this.deleteIconBorder&&F(this.deleteIconBorder,"blocklyDeleteIconHighlighted"),e.stopPropagation()}deleteMouseOut(e){this.deleteIconBorder&&Ae(this.deleteIconBorder,"blocklyDeleteIconHighlighted")}deleteMouseUp(e){this.dispose(),e.stopPropagation()}unbindDragEvents(){this.onMouseUpWrapper&&(lt(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onMouseMoveWrapper&&(lt(this.onMouseMoveWrapper),this.onMouseMoveWrapper=null)}resizeMouseUp(e){Ue(),this.unbindDragEvents()}resizeMouseMove(e){this.autoLayout=!1,e=this.workspace.moveDrag(e),this.setSize(this.RTL?-e.x:e.x,e.y)}resizeComment(){const e=this.getHeightWidth(),t=Rr.TOP_OFFSET,o=2*Nx;let l;(l=this.foreignObject)==null||l.setAttribute("width",String(e.width));let c;if((c=this.foreignObject)==null||c.setAttribute("height",String(e.height-t)),this.RTL){let g;(g=this.foreignObject)==null||g.setAttribute("x",String(-e.width))}this.textarea&&(this.textarea.style.width=e.width-o+"px",this.textarea.style.height=e.height-o-t+"px")}setSize(e,t){e=Math.max(e,45),t=Math.max(t,20+Rr.TOP_OFFSET),this.width_=e,this.height_=t,this.svgRect_.setAttribute("width",`${e}`),this.svgRect_.setAttribute("height",`${t}`);let o;(o=this.svgRectTarget)==null||o.setAttribute("width",`${e}`);let l;(l=this.svgRectTarget)==null||l.setAttribute("height",`${t}`);let c;(c=this.svgHandleTarget)==null||c.setAttribute("width",`${e}`);let g;if((g=this.svgHandleTarget)==null||g.setAttribute("height",String(Rr.TOP_OFFSET)),this.RTL){this.svgRect_.setAttribute("transform","scale(-1 1)");let L;(L=this.svgRectTarget)==null||L.setAttribute("transform","scale(-1 1)")}if(this.resizeGroup)if(this.RTL){this.resizeGroup.setAttribute("transform","translate("+(-e+ur)+","+(t-ur)+") scale(-1 1)");let L;(L=this.deleteGroup)==null||L.setAttribute("transform","translate("+(-e+ur)+","+-ur+") scale(-1 1)")}else{this.resizeGroup.setAttribute("transform","translate("+(e-ur)+","+(t-ur)+")");let L;(L=this.deleteGroup)==null||L.setAttribute("transform","translate("+(e-ur)+","+-ur+")")}this.resizeComment()}disposeInternal(){this.disposed_=!0}setFocus(){this.focused=!0,setTimeout(()=>{this.disposed_||(this.textarea.focus(),this.addFocus(),this.svgRectTarget&&F(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&F(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused=!1,setTimeout(()=>{this.disposed_||(this.textarea.blur(),this.removeFocus(),this.svgRectTarget&&Ae(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&Ae(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(e,t,o){i.disable$$module$build$src$core$events$utils();let l;try{const c=ai.parseAttributes(e);if(l=new Rr(t,c.content,c.h,c.w,c.id),t.rendered&&(l.initSvg(!0),l.render()),!isNaN(c.x)&&!isNaN(c.y))if(t.RTL){const g=o||t.getWidth();l.moveBy(g-c.x,c.y)}else l.moveBy(c.x,c.y)}finally{i.enable$$module$build$src$core$events$utils()}return ai.fireCreateEvent(l),l}};Rr.DEFAULT_SIZE=100,Rr.TOP_OFFSET=10,xr(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`);var on={};on.appendDomToWorkspace=$y,on.blockToDom=fo,on.blockToDomWithXY=Ga,on.clearWorkspaceAndLoadFromXml=my,on.deleteNext=Iy,on.domToBlock=i.domToBlock$$module$build$src$core$xml,on.domToPrettyText=gy,on.domToText=ni,on.domToVariables=Sp,on.domToWorkspace=i.domToWorkspace$$module$build$src$core$xml,on.variablesToDom=yp,on.workspaceToDom=dy;var yl=class extends Error{},kS=class extends yl{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},ou=class extends yl{constructor(e,t,o){super(`The block ${t.toDevString()} is missing a(n) ${e}
connection`),this.block=t,this.state=o}},CS=class extends yl{constructor(e,t,o,l){super(`The block ${o.toDevString()} could not connect its
${t} to its parent, because: ${e}`),this.childBlock=o,this.childState=l}},AS=class extends yl{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},LS=class extends yl{constructor(e,t,o){super(`Cannot add an icon of type '${e}' to the block ${t.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=t,this.state=o}},ps={};ps.BadConnectionCheck=CS,ps.DeserializationError=yl,ps.MissingBlockType=kS,ps.MissingConnection=ou,ps.RealChildOfShadow=AS,ps.UnregisteredIcon=LS;var NS=100,xS=75,MS=50,Dh={};Dh.BLOCKS=MS,Dh.PROCEDURES=xS,Dh.VARIABLES=NS;var Mm={};Mm.register=Gc,Mm.unregister=Oy;var DS=class{constructor(){this.priority=MS}save(e){const t=[];for(const o of e.getTopBlocks(!1))(e=ii(o,{addCoordinates:!0,doFullSerialization:!1}))&&t.push(e);return t.length?{languageVersion:0,blocks:t}:null}load(e,t){e=e.blocks;for(const o of e)po(o,t,{recordUndo:G()})}clear(e){for(const t of e.getTopBlocks(!1))t.dispose(!1)}};Gc("blocks",new DS);var su={};su.BlockSerializer=DS,su.append=po,su.appendInternal=Vc,su.save=ii;var gs=class extends vl{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new gs),t.blockId=e.blockId,t}},Dm=class extends gs{constructor(e){super(e),this.type=i.CREATE$$module$build$src$core$events$utils,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=Ga(e),this.ids=A(e),this.json=ii(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=ni(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new Dm),t.xml=i.textToDom$$module$build$src$core$utils$xml(e.xml),t.ids=e.ids,t.json=e.json,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(e)po(this.json,t);else for(e=0;e<this.ids.length;e++){const o=this.ids[e],l=t.getBlockById(o);l?l.dispose(!1):o===this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}};s(He.EVENT,i.CREATE$$module$build$src$core$events$utils,Dm);var PS=class extends vl{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=us,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};s(He.EVENT,us,PS);var ms=class extends gs{constructor(e,t,o,l,c){super(e),this.type=i.CHANGE$$module$build$src$core$events$utils,e&&(this.element=t,this.name=o||void 0,this.oldValue=l,this.newValue=c)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new ms),t.element=e.element,t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");var o=t.getIcon(Yr.MUTATOR);switch(o&&go(o)&&o.bubbleIsVisible()&&o.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":t.setEnabled(!e);break;case"inline":t.setInputsInline(!!e);break;case"mutation":o=ms.getExtraBlockState_(t),t.loadExtraState?t.loadExtraState(JSON.parse(e||"{}")):t.domToMutation&&t.domToMutation(i.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),X(new ms(t,"mutation",null,o,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState())?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?ni(e):""}};s(He.EVENT,i.CHANGE$$module$build$src$core$events$utils,ms);var Pm=class extends gs{constructor(e){if(super(e),this.type=i.DELETE$$module$build$src$core$events$utils,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=Ga(e),this.ids=A(e),this.wasShadow=e.isShadow(),this.oldJson=ii(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=ni(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new Pm),t.oldXml=i.textToDom$$module$build$src$core$utils$xml(e.oldXml),t.ids=e.ids,t.wasShadow=e.wasShadow||t.oldXml.tagName.toLowerCase()==="shadow",t.oldJson=e.oldJson,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const o=this.ids[e],l=t.getBlockById(o);l?l.dispose(!1):o===this.blockId&&console.warn("Can't delete non-existent block: "+o)}else po(this.oldJson,t)}};s(He.EVENT,i.DELETE$$module$build$src$core$events$utils,Pm);var Je;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Je||(Je={}));var Tt=class{constructor(e,t){this.type=t,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e}connect_(e){const t=Je.INPUT_VALUE,o=this.getSourceBlock();var l=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let c;if(this.isConnected()){const L=this.stashShadowState(),he=this.targetBlock();he.isShadow()?he.dispose(!1):(this.disconnectInternal(),c=he),this.applyShadowState(L)}let g;ue()&&(g=new(K(i.MOVE$$module$build$src$core$events$utils))(l),g.setReason(["connect"])),Wy(this,e),l.setParent(o),g&&(g.recordNew(),X(g)),c&&(e=this.type===t?c.outputConnection:c.previousConnection)&&((l=Tt.getConnectionForOrphanedConnection(l,e))?e.connect(l):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Je.INPUT_VALUE||this.type===Je.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const t=i.getGroup$$module$build$src$core$events$utils();t||i.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),i.setGroup$$module$build$src$core$events$utils(t)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:t,childConnection:o}=this.getParentAndChildConnections();if(!t||!o)throw Error("Source connection not connected.");const l=i.getGroup$$module$build$src$core$events$utils();l||i.setGroup$$module$build$src$core$events$utils(!0);let c;ue()&&(c=new(K(i.MOVE$$module$build$src$core$events$utils))(o.getSourceBlock()),c.setReason(["disconnect"]));const g=this.targetConnection;g&&(g.targetConnection=null),this.targetConnection=null,e&&o.getSourceBlock().setParent(null),c&&(c.recordNew(),X(c)),o.getSourceBlock().isShadow()||t.respawnShadow_(),i.setGroup$$module$build$src$core$events$utils(l)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,t){if(this.getSourceBlock().isDeadOrDying())return!1;var o;return t=(o=e.getInput(t))==null?void 0:o.connection,o=this.targetBlock(),o&&o!==e||!t||t.targetConnection===this?!1:(t.isConnected()&&t.disconnect(),t.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,t;return(t=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?t:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?fo(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?ii(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const t=this.sourceBlock_.inputList;for(let o=0;o<t.length;o++)if(t[o].connection===this){e=t[o];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var t="Output Connection of ";else if(e.previousConnection===this)t="Previous Connection of ";else if(e.nextConnection===this)t="Next Connection of ";else{t=null;for(let o=0,l;l=e.inputList[o];o++)if(l.connection===this){t=l;break}if(t)t='Input "'+t.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return t+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),t=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:t}}applyShadowState({shadowDom:e,shadowState:t}){this.shadowDom=e,this.shadowState=t}setShadowStateInternal({shadowDom:e=null,shadowState:t=null}={}){this.shadowDom=e,this.shadowState=t,(e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.getSourceBlock().isDeadOrDying()||(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))}createShadowBlock(e){var t=this.getSourceBlock();const o=this.getShadowState(),l=this.getShadowDom();if(t.isDeadOrDying()||!o&&!l)return null;if(o)return t=Vc(o,t.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(l){if(t=i.domToBlock$$module$build$src$core$xml(l,t.workspace),e)if(this.type===Je.INPUT_VALUE){if(!t.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(t.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Je.NEXT_STATEMENT){if(!t.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(t.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return t}return null}serializeShadow(e){e&&(this.shadowDom=fo(e),this.shadowState=ii(e))}static getConnectionForOrphanedConnection(e,t){if(t.type===Je.OUTPUT_VALUE)return zy(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);const o=t.getConnectionChecker();return e&&o.canConnect(t,e,!1)?e:null}};Tt.CAN_CONNECT=0,Tt.REASON_SELF_CONNECTION=1,Tt.REASON_WRONG_TYPE=2,Tt.REASON_TARGET_NULL=3,Tt.REASON_CHECKS_FAILED=4,Tt.REASON_DIFFERENT_WORKSPACES=5,Tt.REASON_SHADOW_PARENT=6,Tt.REASON_DRAG_CHECKS_FAILED=7,Tt.REASON_PREVIOUS_AND_OUTPUT=8;var wl="_TEMP_COLLAPSED_INPUT",Ph="_TEMP_COLLAPSED_FIELD",Bm={};Bm.COLLAPSED_FIELD_NAME=Ph,Bm.COLLAPSED_INPUT_NAME=wl;var BS=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},FS={};FS.DuplicateIconType=BS;var Bh={};Bh.clamp=il,Bh.toDegrees=Ap,Bh.toRadians=nl;var lu=16,Fm=1,US=12,Um=16,Fh=.25,Hm=null,$s=null,Sl="",Il="",vt,Ol,_s,Gm=null,wo=null,HS=null,Vm={getBoundsInfo:function(){const e=ho(Gm),t=Ha(Gm);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},getPositionMetrics:function(e,t,o,l){const c=Vm.getBoundsInfo(),g=Ha(vt);return t+g.height<c.bottom?Fp(e,t,c,g):l-g.height>c.top?Up(o,l,c,g):t+g.height<document.documentElement.clientHeight?Fp(e,t,c,g):l-g.height>document.documentElement.clientTop?Up(o,l,c,g):Yy(e,c,g)}},Jt={};Jt.ANIMATION_TIME=Fh,Jt.ARROW_HORIZONTAL_PADDING=US,Jt.ARROW_SIZE=lu,Jt.BORDER_SIZE=Fm,Jt.PADDING_Y=Um,Jt.TEST_ONLY=Vm,Jt.clearContent=Wc,Jt.createDom=Lp,Jt.getContentDiv=ol,Jt.getOwner=xp,Jt.getPositionX=Wa,Jt.hide=zc,Jt.hideIfOwner=sl,Jt.hideWithoutAnimation=Mn,Jt.isVisible=Hp,Jt.repositionForWindowResize=Vp,Jt.setBoundsElement=Np,Jt.setColour=jc,Jt.show=Bp,Jt.showPositionedByBlock=Xy,Jt.showPositionedByField=Va;var au=class{constructor(e){this.workspace=e,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(e,t){this.markers.has(e)&&this.unregisterMarker(e),t.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,t)),this.setMarkerSvg(t.getDrawer().createDom()),this.markers.set(e,t)}unregisterMarker(e){const t=this.markers.get(e);if(t)t.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(e),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let t=0,o;o=e[t];t++)this.unregisterMarker(o);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};au.LOCAL_MARKER="local_marker_1";var Es={};Es.commonWordPrefix=Wp,Es.commonWordSuffix=jp,Es.isNumber=i.isNumber$$module$build$src$core$utils$string,Es.shortestStringLength=ja,Es.startsWith=Ky,Es.wrap=i.wrap$$module$build$src$core$utils$string;var Uh=void 0,uu=!1,Rl=!1,GS=50,VS=0,Ts=0,Wm=0,jm=0,Tn=null,cu=null,zm=0,Xm=10,WS=10,jS=750,Hh=5,ir=null,hr={};hr.HOVER_MS=jS,hr.LIMIT=GS,hr.MARGINS=Hh,hr.OFFSET_X=zm,hr.OFFSET_Y=Xm,hr.RADIUS_OK=WS,hr.bindMouseEvents=za,hr.block=Jp,hr.createDom=Yp,hr.dispose=Zp,hr.getCustomTooltip=Qy,hr.getDiv=tw,hr.getTooltipOfObject=ll,hr.hide=Li,hr.isVisible=ew,hr.setCustomTooltip=Jy,hr.unbindMouseEvents=Kp,hr.unblock=Qp;var Ym=.45,Km=.65,zS={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},vn={};vn.blend=is,vn.getHsvSaturation=eg,vn.getHsvValue=tg,vn.hexToRgb=Yc,vn.hsvToHex=Kc,vn.hueToHex=rg,vn.names=zS,vn.parse=mo,vn.rgbToHex=Xa,vn.setHsvSaturation=aw,vn.setHsvValue=uw;var hu={};hu.checkMessageReferences=Zc,hu.parseBlockColour=al,hu.replaceMessageReferences=zt,hu.tokenizeInterpolation=ng;var kl=null,Gh=null,Cl="",Al="",Fn,ci={};ci.createDom=ig,ci.getDiv=os,ci.hide=_n,ci.hideIfOwner=Qc,ci.isVisible=og,ci.positionWithAnchor=lg,ci.repositionForWindowResize=ag,ci.show=Jc,ci.testOnly_setDiv=cw;var mt=class{constructor(e,t,o){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new At(0,0),e!==mt.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),t&&this.setValidator(t))}configure_(e){e.tooltip&&this.setTooltip(zt(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=O(ve.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}createBorderRect_(){this.borderRect_=O(ve.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=O(ve.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");za(e),this.mouseDownWrapper_=Ye(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(mt),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(mt,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=i.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),me(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,t){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(i.textToDom$$module$build$src$core$utils$xml(t)),!0):!1}dispose(){sl(this),Qc(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||P(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,t=this.getSourceBlock();this.EDITABLE&&e&&t&&(this.enabled_&&t.isEditable()?(F(e,"blocklyEditableText"),Ae(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(F(e,"blocklyNonEditableText"),Ae(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==mt.prototype.showEditor_}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var t=this.fieldGroup_;t&&(t.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const t=this.getConstants();e=e!==void 0?e:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let o=2*e,l=t.FIELD_TEXT_HEIGHT,c=0;this.textElement_&&(c=be(this.textElement_,t.FIELD_TEXT_FONTSIZE,t.FIELD_TEXT_FONTWEIGHT,t.FIELD_TEXT_FONTFAMILY),o+=c),this.borderRect_&&(l=Math.max(l,t.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=l,this.size_.width=o,this.positionTextElement_(e,c),this.positionBorderRect_()}positionTextElement_(e,t){if(this.textElement_){var o=this.getConstants(),l=this.size_.height/2,c;this.textElement_.setAttribute("x",String((c=this.getSourceBlock())!=null&&c.RTL?this.size_.width-t-e:e)),this.textElement_.setAttribute("y",String(o.FIELD_TEXT_BASELINE_CENTER?l:l-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new At(0,0)}getScaledBBox(){let e;var t=this.getSourceBlock();if(!t)throw new Qt;if(this.borderRect_){var o=this.borderRect_.getBoundingClientRect();e=ho(this.borderRect_),t=o.width,o=o.height}else{o=this.sourceBlock_.getHeightWidth();const l=t.workspace.scale;e=this.getAbsoluteXY_(),t=(o.width+1)*l,o=(o.height+1)*l,km?(e.x+=1.5*l,e.y+=1.5*l):(e.x-=.5*l,e.y-=.5*l)}return new Rt(e.y,e.y+o,e.x,e.x+t)}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+""),e=e.replace(/\s/g,mt.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+=""),e):mt.NBSP}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.queueRender(),this.sourceBlock_.bumpNeighbours())}setValue(e,t=!0){if(e!==null){var o=this.doClassValidation_(e);if(e=this.processValidation_(e,o),!(e instanceof Error)){var l;o=(l=this.getValidator())==null?void 0:l.call(this,e),l=this.processValidation_(e,o),l instanceof Error||(e=this.sourceBlock_,e&&e.disposed||(o=this.getValue(),o===l?this.doValueUpdate_(l):(this.doValueUpdate_(l),t&&e&&ue()&&X(new(K(i.CHANGE$$module$build$src$core$events$utils))(e,"field",this.name||null,o,l)),this.isDirty_&&this.forceRerender())))}}}processValidation_(e,t){return t===null?(this.doValueInvalid_(e),this.isDirty_&&this.forceRerender(),Error()):t===void 0?e:t}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const t=this.getClickTarget_();t?t.tooltip=e:this.tooltip_=e}getTooltip(){const e=this.getClickTarget_();return ll(e||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return ho(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const t=this.getSourceBlock();if(!t)throw new Qt;const o=t.inputList;for(let l=0;l<t.inputList.length;l++){const c=o[l],g=c.fieldRow;for(let L=0;L<g.length;L++)if(g[L]===this){e=c;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg_=e}else this.cursorSvg_=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg_=e}else this.markerSvg_=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new Qt;e=e.workspace,e.keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(au.LOCAL_MARKER).draw()}};mt.NBSP="",mt.SKIP_SETUP=Symbol("SKIP_SETUP");var Qt=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},XS={fromJsonInternal:gw},du={};du.TEST_ONLY=XS,du.fromJson=i.fromJson$$module$build$src$core$field_registry,du.register=nn,du.unregister=pw;var xx="aria-",Mx="role",Kr;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"})(Kr||(Kr={}));var Lt;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"})(Lt||(Lt={}));var fu={};fu.Role=Kr,fu.State=Lt,fu.setRole=Dn,fu.setState=xt;var qm=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const t=document.createElement("div");t.className="blocklyMenu goog-menu blocklyNonSelectable",t.tabIndex=0,this.roleName&&Dn(t,this.roleName),this.element=t;for(let o=0,l;l=this.menuItems[o];o++)t.appendChild(l.createDom());return this.mouseOverHandler=Ye(t,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Ye(t,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=Ye(t,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Ye(t,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Ye(t,"keydown",this,this.handleKeyEvent),e.appendChild(t),t}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),F(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),Ae(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.mouseOverHandler&&(lt(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(lt(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(lt(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(lt(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(lt(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,t;t=this.menuItems[e];e++)t.dispose();this.element=null}getMenuItem(e){const t=this.getElement();for(;e&&e!==t;){if(e.classList.contains("blocklyMenuItem")){for(let o=0,l;l=this.menuItems[o];o++)if(l.getElement()===e)return l}e=e.parentElement}return null}setHighlighted(e){var t=this.highlightedItem;t&&(t.setHighlighted(!1),this.highlightedItem=null),e&&(e.setHighlighted(!0),this.highlightedItem=e,t=this.getElement(),Fc(e.getElement(),t),xt(t,Lt.ACTIVEDESCENDANT,e.getId()))}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,t){e+=t;let o;for(;o=this.menuItems[e];){if(o.isEnabled()){this.setHighlighted(o);break}e+=t}}handleMouseOver(e){(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const t=this.openingCoords;if(this.openingCoords=null,t&&typeof e.clientX=="number"){const o=new je(e.clientX,e.clientY);if(1>je.distance(t,o))return}(e=this.getMenuItem(e.target))&&e.performAction()}handleMouseEnter(e){this.focus()}handleMouseLeave(e){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem;switch(e.key){case"Enter":case" ":t&&t.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),t=Ha(e);return t.height=e.scrollHeight,t}},Zm=class{constructor(e,t){this.content=e,this.opt_value=t,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=we(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const t=document.createElement("div");if(t.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",t.appendChild(o)}return o=this.content,typeof this.content=="string"&&(o=document.createTextNode(this.content)),t.appendChild(o),e.appendChild(t),this.roleName&&Dn(e,this.roleName),xt(e,Lt.SELECTED,this.checkable&&this.checked||!1),xt(e,Lt.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const t=this.getElement();t&&this.isEnabled()&&(e?(F(t,"blocklyMenuItemHighlight"),F(t,"goog-menuitem-highlight")):(Ae(t,"blocklyMenuItemHighlight"),Ae(t,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,t){this.actionHandler=e.bind(t)}},hi=class extends mt{constructor(e,t,o){super(mt.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==mt.SKIP_SETUP&&(Array.isArray(e)?(ug(e),e=mw(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],o&&this.configure_(o),this.setValue(this.selectedOption[1]),t&&this.setValidator(t))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(hi,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=O(ve.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&F(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=O(ve.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?hi.ARROW_CHAR+" ":" "+hi.ARROW_CHAR));let t;(t=this.getSourceBlock())!=null&&t.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=O(ve.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(En,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var t=this.getSourceBlock();if(!t)throw new Qt;this.dropdownCreate(),this.menu_.openingCoords=e&&typeof e.clientX=="number"?new je(e.clientX,e.clientY):null,Wc(),e=this.menu_.render(ol()),F(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(e=t.isShadow()?t.getParent().getColour():t.getColour(),t=t.isShadow()?t.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,jc(e,t)),Va(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),Fc(this.selectedMenuItem.getElement(),ol(),!0)),this.applyColour()}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new Qt;const t=new qm;t.setRole(Kr.LISTBOX),this.menu_=t;const o=this.getOptions(!1);this.selectedMenuItem=null;for(let c=0;c<o.length;c++){const[g,L]=o[c];if(typeof g=="object"){var l=new Image(g.width,g.height);l.src=g.src,l.alt=g.alt||""}else l=g;l=new Zm(l,L),l.setRole(Kr.OPTION),l.setRightToLeft(e.RTL),l.setCheckable(!0),t.addChild(l),l.setChecked(L===this.value_),L===this.value_&&(this.selectedMenuItem=l),l.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){sl(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,t){this.setValue(t.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),ug(this.generatedOptions),this.generatedOptions)}doClassValidation_(e){return this.getOptions(!0).some(t=>t[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let t=0,o;o=e[t];t++)o[1]===this.value_&&(this.selectedOption=o)}applyColour(){const e=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",e.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=e.colourSecondary:this.arrow.style.fill=e.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];e&&typeof e=="object"?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const t=this.getSourceBlock();if(!t)throw new Qt;this.imageElement.style.display="",this.imageElement.setAttributeNS(En,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const o=Number(e.height);e=Number(e.width);var l=!!this.borderRect_;const c=Math.max(l?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,o+Px);l=l?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let g;g=this.svgArrow?this.positionSVGArrow(e+l,c/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):be(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+g+2*l,this.size_.height=c;let L=0;t.RTL?this.imageElement.setAttribute("x",`${l+g}`):(L=e+g,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${l}`)),this.imageElement.setAttribute("y",String(c/2-o/2)),this.positionTextElement_(L+l,e+g)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();F(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var t=!!this.borderRect_;e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const o=be(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let l=0;this.svgArrow&&(l=this.positionSVGArrow(o+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+l+2*t,this.size_.height=e,this.positionTextElement_(t,o)}positionSVGArrow(e,t){if(!this.svgArrow)return 0;const o=this.getSourceBlock();if(!o)throw new Qt;const l=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,c=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,g=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(o.RTL?l:e+c)+","+t+")"),g+c}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];return typeof e=="object"?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}};hi.CHECKMARK_OVERHANG=25,hi.MAX_MENU_HEIGHT_VH=.45,hi.ARROW_CHAR="";var Dx=5,Px=2*Dx;nn("field_dropdown",hi);var Vh=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new je(0,0),this.workspaceLocation=new je(0,0),this.svgRoot=null}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var t=this.sourceBlock;this.svgRoot=O(ve.G,{class:"blocklyIconGroup"}),t.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),Ye(this.svgRoot,"pointerdown",this,e)}}dispose(){P(this.svgRoot)}getWeight(){return-1}getSize(){return new At(0,0)}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",go(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=je.sum(e,this.offsetInBlock)}onClick(){}setVisible(e){Ne("setVisible","v10","v11","setBubbleVisible"),go(this)&&this.setBubbleVisible(e)}},er=class{constructor(e,t,o,l,c){this.workspace=e,this.horizontal=t,this.oldHostMetrics=null,this.ratio=1,this.origin=new je(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new je(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=o||!1,this.margin=c!==void 0?c:er.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),l&&(e+=" "+l),this.outerSvg=O(ve.SVG,{class:e}),l=O(ve.G,{},this.outerSvg),this.svgBackground=O(ve.RECT,{class:"blocklyScrollbarBackground"},l),e=Math.floor((er.scrollbarThickness-5)/2),this.svgHandle=O(ve.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},l),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),v(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),t?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Ye(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Ye(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=er.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),lt(this.onMouseDownBarWrapper_),lt(this.onMouseDownHandleWrapper_),P(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,t){this.position.x=e,this.position.y=t,M(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&er.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var t=e.viewWidth-2*this.margin;this.pair&&(t-=er.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),t=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(t+=er.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-er.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollWidth-e.viewWidth;var o=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/t*o,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=o/t}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let t=e.viewHeight-2*this.margin;this.pair&&(t-=er.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-er.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollHeight-e.viewHeight;var o=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/t*o,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=o/t}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay_()}setVisible(e){const t=e!==this.isVisible();if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.isHandleVisible=e,t&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),Ue(),this.cleanUp(),Nt(e))e.stopPropagation();else{var t=Tr(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());t=this.horizontal?t.x:t.y;var o=Uc(this.svgHandle);o=this.horizontal?o.x:o.y;var l=this.handlePosition,c=.95*this.handleLength;t<=o?l-=c:t>=o+this.handleLength&&(l+=c),this.setHandlePosition(this.constrainHandlePosition(l)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),Nt(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=Ye(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Ye(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){Ue(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(lt(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(lt(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,t){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(t||t===void 0)&&this.updateMetrics()}setOrigin(e,t){this.origin=new je(e,t)}static metricsAreEquivalent(e,t){return e.viewWidth===t.viewWidth&&e.viewHeight===t.viewHeight&&e.viewLeft===t.viewLeft&&e.viewTop===t.viewTop&&e.absoluteTop===t.absoluteTop&&e.absoluteLeft===t.absoluteLeft&&e.scrollWidth===t.scrollWidth&&e.scrollHeight===t.scrollHeight&&e.scrollLeft===t.scrollLeft&&e.scrollTop===t.scrollTop}};er.scrollbarThickness=mS?25:15,er.DEFAULT_SCROLLBAR_MARGIN=.5;var Jm,ht=class{constructor(e,t,o){this.workspace=e,this.anchor=t,this.ownerRect=o,this.size=new At(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.svgRoot=O(ve.G,{},e.getBubbleCanvas()),e=O(ve.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=O(ve.PATH,{},e),this.background=O(ve.RECT,{class:"blocklyDraggable",x:0,y:0,rx:ht.BORDER_WIDTH,ry:ht.BORDER_WIDTH},e),this.contentContainer=O(ve.G,{},this.svgRoot),Ye(this.background,"pointerdown",this,this.onMouseDown)}dispose(){P(this.svgRoot),this.disposed=!0}setAnchorLocation(e,t=!1){this.anchor=e,t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,t){this.relativeLeft=e,this.relativeTop=t,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,t=!1){e.width=Math.max(e.width,ht.MIN_SIZE),e.height=Math.max(e.height,ht.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let t;(t=this.workspace.getGesture(e))==null||t.handleBubbleStart(e,this)}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,t){this.svgRoot.setAttribute("transform",`translate(${e}, ${t})`)}positionByRect(e=new Rt(0,0,0,0)){var t=this.workspace.getMetricsManager().getViewMetrics(!0),o=this.getOptimalRelativeLeft(t),l=this.getOptimalRelativeTop(t);const c={x:o,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},g={x:-this.size.width-30,y:l};l={x:e.getWidth(),y:l};var L={x:o,y:e.getHeight()};o=e.getWidth()<e.getHeight()?l:L,e=e.getWidth()<e.getHeight()?L:l,l=this.getOverlap(c,t),L=this.getOverlap(g,t);const he=this.getOverlap(o,t);t=this.getOverlap(e,t),t=Math.max(l,L,he,t),l===t?(this.relativeLeft=c.x,this.relativeTop=c.y):L===t?(this.relativeLeft=g.x,this.relativeTop=g.y):he===t?(this.relativeLeft=o.x,this.relativeTop=o.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,t){var o=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(o+this.size.width,t.left+t.width)-Math.max(o,t.left))*(Math.min(e+this.size.height,t.top+t.height)-Math.max(e,t.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let t=-this.size.width/4;if(this.size.width>e.width)return t;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var o=this.anchor.x-t;o-this.size.width<e.left?t=-(e.left-this.anchor.x+this.size.width):o>e.right&&(t=-(e.right-this.anchor.x))}else{o=t+this.anchor.x;const l=o+this.size.width;o<e.left?t=e.left-this.anchor.x:l>e.right&&(t=e.right-this.anchor.x-this.size.width)}return t}getOptimalRelativeTop(e){let t=-this.size.height/4;if(this.size.height>e.height)return t;const o=this.anchor.y+t,l=o+this.size.height;return e=this.getWorkspaceViewRect(e),o<e.top?t=e.top-this.anchor.y:l>e.bottom&&(t=e.bottom-this.anchor.y-this.size.height),t}getWorkspaceViewRect(e){const t=e.top;let o=e.top+e.height,l=e.left;return e=e.left+e.width,o-=this.getScrollbarThickness(),this.workspace.RTL?l-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new Rt(t,o,l,e)}getScrollbarThickness(){return er.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var t=this.size.width/2,o=this.size.height/2,l=-this.relativeLeft,c=-this.relativeTop;if(t===l&&o===c)e.push("M "+t+","+o);else{c-=o,l-=t,this.workspace.RTL&&(l*=-1);var g=Math.sqrt(c*c+l*l),L=Math.acos(l/g);0>c&&(L=2*Math.PI-L);var he=L+Math.PI/2;he>2*Math.PI&&(he-=2*Math.PI);var xe=Math.sin(he);const Vt=Math.cos(he);let kt=(this.size.width+this.size.height)/ht.TAIL_THICKNESS;kt=Math.min(kt,this.size.width,this.size.height)/4,he=1-ht.ANCHOR_RADIUS/g,l=t+he*l,c=o+he*c,he=t+kt*Vt;const qr=o+kt*xe;t-=kt*Vt,o-=kt*xe,xe=nl(this.workspace.RTL?-ht.TAIL_ANGLE:ht.TAIL_ANGLE),xe=L+xe,xe>2*Math.PI&&(xe-=2*Math.PI),L=Math.sin(xe)*g/ht.TAIL_BEND,g=Math.cos(xe)*g/ht.TAIL_BEND,e.push("M"+he+","+qr),e.push("C"+(he+g)+","+(qr+L)+" "+l+","+c+" "+l+","+c),e.push("C"+l+","+c+" "+(t+g)+","+(o+L)+" "+t+","+o)}e.push("z");let Ze;(Ze=this.tail)==null||Ze.setAttribute("d",e.join(" "))}bringToFront(){let e;const t=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&(t==null?void 0:t.lastChild)!==this.svgRoot?(t==null||t.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new je(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}};Jm=ht,ht.BORDER_WIDTH=6,ht.DOUBLE_BORDER=2*Jm.BORDER_WIDTH,ht.MIN_SIZE=Jm.DOUBLE_BORDER,ht.TAIL_THICKNESS=1,ht.TAIL_ANGLE=20,ht.TAIL_BEND=4,ht.ANCHOR_RADIUS=8;var YS={};YS.deepMerge=Ni;var vs=class{constructor(e,t,o,l){this.name=e,this.startHats=!1,this.blockStyles=t||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=l||Object.create(null),this.fontStyle=Object.create(null),s(He.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,t){this.blockStyles[e]=t}setCategoryStyle(e,t){this.categoryStyles[e]=t}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const t=this.getComponentStyle(e);if(t)return t}return`${e}`}setComponentStyle(e,t){this.componentStyles[e]=t}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,t){e=e.toLowerCase();const o=new vs(e);let l=t.base;if(l){if(typeof l=="string"){let c;l=(c=T(He.THEME,l))!=null?c:void 0}l instanceof vs&&(Ni(o,l),o.name=e)}return Ni(o.blockStyles,t.blockStyles),Ni(o.categoryStyles,t.categoryStyles),Ni(o.componentStyles,t.componentStyles),Ni(o.fontStyle,t.fontStyle),t.startHats!==null&&(o.startHats=t.startHats),o}},Bx={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},Fx={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},Wh=new vs("classic",Bx,Fx),Qm="categoryToolbox",KS="flyoutToolbox",at;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(at||(at={}));var qS={hasCategoriesInternal:Ew},So={};So.Position=at,So.TEST_ONLY=qS,So.convertFlyoutDefToJsonArray=Ya,So.convertToolboxDefToJson=eh,So.hasCategories=th,So.isCategoryCollapsible=rh,So.parseToolboxTree=hg;var bn=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let t=null,o=!1;var l=!1,c=!1,g=!1,L=!1,he=!1;const xe=!!e.readOnly;if(!xe){var Ze;t=eh((Ze=e.toolbox)!=null?Ze:null),o=th(t),l=e.trashcan,l=l===void 0?o:l,c=e.collapse,c=c===void 0?o:c,g=e.comments,g=g===void 0?o:g,L=e.disable,L=L===void 0?o:L,he=e.sounds,he=he===void 0?!0:he}Ze=e.maxTrashcanContents,l?Ze===void 0&&(Ze=32):Ze=0;const Vt=!!e.rtl;let kt=e.horizontalLayout;kt===void 0&&(kt=!1);var qr=e.toolboxPosition!=="end";qr=kt?qr?at.TOP:at.BOTTOM:qr===Vt?at.RIGHT:at.LEFT;let jl=e.css;jl===void 0&&(jl=!0);let zl="https://blockly-demo.appspot.com/static/media/";e.media?zl=e.media.endsWith("/")?e.media:e.media+"/":"path"in e&&(Ne("path","Nov 2014","Jul 2023","media"),zl=e.path+"media/");const oI=e.oneBasedIndex,EM=e.renderer||"geras",TM=e.plugins||{};let Z$=e.modalInputs;Z$===void 0&&(Z$=!0),this.RTL=Vt,this.oneBasedIndex=oI===void 0?!0:oI,this.collapse=c,this.comments=g,this.disable=L,this.readOnly=xe,this.maxBlocks=e.maxBlocks||1/0;let sI;this.maxInstances=(sI=e.maxInstances)!=null?sI:null,this.modalInputs=Z$,this.pathToMedia=zl,this.hasCategories=o,this.moveOptions=bn.parseMoveOptions_(e,o),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=l,this.maxTrashcanContents=Ze,this.hasSounds=he,this.hasCss=jl,this.horizontalLayout=kt,this.languageTree=t,this.gridOptions=bn.parseGridOptions_(e),this.zoomOptions=bn.parseZoomOptions_(e),this.toolboxPosition=qr,this.theme=bn.parseThemeOptions_(e),this.renderer=EM;let lI;this.rendererOverrides=(lI=e.rendererOverrides)!=null?lI:null;let aI;this.parentWorkspace=(aI=e.parentWorkspace)!=null?aI:null,this.plugins=TM}static parseMoveOptions_(e,t){const o=e.move||{},l={};return o.scrollbars===void 0&&e.scrollbars===void 0?l.scrollbars=t:typeof o.scrollbars=="object"?(l.scrollbars={horizontal:!!o.scrollbars.horizontal,vertical:!!o.scrollbars.vertical},l.scrollbars.horizontal&&l.scrollbars.vertical?l.scrollbars=!0:l.scrollbars.horizontal||l.scrollbars.vertical||(l.scrollbars=!1)):l.scrollbars=!!o.scrollbars||!!e.scrollbars,l.wheel=l.scrollbars&&o.wheel!==void 0?!!o.wheel:typeof l.scrollbars=="object",l.drag=l.scrollbars?o.drag===void 0?!0:!!o.drag:!1,l}static parseZoomOptions_(e){e=e.zoom||{};const t={};return t.controls=e.controls===void 0?!1:!!e.controls,t.wheel=e.wheel===void 0?!1:!!e.wheel,t.startScale=e.startScale===void 0?1:Number(e.startScale),t.maxScale=e.maxScale===void 0?3:Number(e.maxScale),t.minScale=e.minScale===void 0?.3:Number(e.minScale),t.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),t.pinch=e.pinch===void 0?t.wheel||t.controls:!!e.pinch,t}static parseGridOptions_(e){e=e.grid||{};const t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=e.length===void 0?1:Number(e.length),t.snap=0<t.spacing&&!!e.snap,t}static parseThemeOptions_(e){return e=e.theme||Wh,typeof e=="string"?T(He.THEME,e):e instanceof vs?e:vs.defineTheme(e.name||"builtin"+we(),e)}},Vi=class extends ht{constructor(e,t,o,l){super(t,o,l),this.workspace=t,this.anchor=o,this.ownerRect=l,this.autoLayout=!0,t=new bn(e),this.validateWorkspaceOptions(t),this.svgDialog=O(ve.SVG,{x:ht.BORDER_WIDTH,y:ht.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new bn(e)),e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),t.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(ve.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e==null||e.init(this.miniWorkspace),e==null||e.show(t.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let c,g;(c=this.miniWorkspace.getFlyout())==null||(g=c.getWorkspace())==null||g.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const e of this.miniWorkspace.getTopBlocks(!1)){const t=e.getRelativeToSurfaceXY();if(20>t.y&&e.moveBy(0,20-t.y),e.RTL){let o=-20;const l=this.miniWorkspace.getFlyout();l&&(o-=l.getWidth()),t.x>o&&e.moveBy(o-t.x,0)}else 20>t.x&&e.moveBy(20-t.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var e=this.getSize(),t=this.calculateWorkspaceSize();Math.abs(e.width-t.width)<Vi.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-t.height)<Vi.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${t.width}px`),this.svgDialog.setAttribute("height",`${t.height}px`),this.miniWorkspace.setCachedParentSvgSize(t.width,t.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${t.width}, 0)`),this.setSize(new At(t.width+ht.DOUBLE_BORDER,t.height+ht.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){const e=this.miniWorkspace.getCanvas().getBBox();let t=e.width+e.x,o=e.height+Vi.MARGIN;const l=this.miniWorkspace.getFlyout();if(l){const c=l.getWorkspace().getMetricsManager().getScrollMetrics();o=Math.max(o,c.height+20),t+=l.getWidth()}return this.miniWorkspace.RTL&&(t=-e.x),t+=Vi.MARGIN,new At(t,o)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let t;if(e=(t=this.miniWorkspace.getFlyout())==null?void 0:t.getWorkspace())for(const o of e.getAllBlocks(!1))o.setStyle(o.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,t){super.moveTo(e,t),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Vi.MINIMUM_VIEW_CHANGE=10,Vi.MARGIN=3*ht.DOUBLE_BORDER;var jh,zh;jh=17,zh=16,i.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends Vh{constructor(e,t){super(t),this.flyoutBlockTypes=e,this.sourceBlock=t,this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),O(ve.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),O(ve.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),O(ve.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return i.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new At(jh,jh)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.style.colourPrimary);let t;(t=this.miniWorkspaceBubble)==null||t.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let t;(t=this.miniWorkspaceBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){if(this.bubbleIsVisible()!==e){if(e){this.miniWorkspaceBubble=new Vi(this.getMiniWorkspaceConfig(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour(),this.createRootBlock(),this.addSaveConnectionsListener();let t;(t=this.miniWorkspaceBubble)==null||t.addWorkspaceChangeListener(this.createMiniWorkspaceChangeListener())}else{let t;(t=this.miniWorkspaceBubble)==null||t.dispose(),this.miniWorkspaceBubble=null}X(new(K(si))(this.sourceBlock,e,"mutator"))}}getMiniWorkspaceConfig(){let e;const t={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(t.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(o=>({kind:"block",type:o}))}),t}getAnchorLocation(){const e=jh/2;return je.sum(this.workspaceLocation,new je(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new Rt(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let t,o,l,c;e=(c=(t=this.miniWorkspaceBubble)==null||(o=t.getWorkspace())==null||(l=o.getFlyout())==null?void 0:l.getWidth())!=null?c:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+zh):zh,zh)}addSaveConnectionsListener(){if(this.sourceBlock.saveConnections&&this.rootBlock){var e=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)};e(),this.sourceBlock.workspace.addChangeListener(e)}}createMiniWorkspaceChangeListener(){return e=>{i.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||e.type===i.CREATE$$module$build$src$core$events$utils||e.type===i.CHANGE$$module$build$src$core$events$utils&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){var e=i.getGroup$$module$build$src$core$events$utils();e||i.setGroup$$module$build$src$core$events$utils(!0);var t=ms.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var o=ms.getExtraBlockState_(this.sourceBlock);t!==o&&X(new(K(i.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"mutation",null,t,o)),i.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}static reconnect(e,t,o){return Ne("MutatorIcon.reconnect","v10","v11","connection.reconnect"),e?e.reconnect(t,o):!1}static findParentWs(e){return Ne("MutatorIcon.findParentWs","v10","v11","workspace.getRootWorkspace"),e.getRootWorkspace()}},i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=Yr.MUTATOR,i.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,i.MutatorIcon$$module$build$src$core$icons$mutator_icon;var Ll=Object.create(null),Ux={allExtensions:Ll};i.register$$module$build$src$core$extensions("parent_tooltip_when_inline",Ow);var yn={};yn.TEST_ONLY=Ux,yn.apply=ih,yn.buildTooltipForDropdown=i.buildTooltipForDropdown$$module$build$src$core$extensions,yn.buildTooltipWithFieldText=i.buildTooltipWithFieldText$$module$build$src$core$extensions,yn.isRegistered=dg,yn.register=i.register$$module$build$src$core$extensions,yn.registerMixin=i.registerMixin$$module$build$src$core$extensions,yn.registerMutator=i.registerMutator$$module$build$src$core$extensions,yn.runAfterPageLoad=lh,yn.unregister=vw,function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"}(i.Align$$module$build$src$core$inputs$align||(i.Align$$module$build$src$core$inputs$align={})),i.Align$$module$build$src$core$inputs$align;var ZS={};ZS.removeElem=Wr;var ft;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(ft||(ft={}));var Wi={};Wi.arc=Zt,Wi.curve=jr,Wi.line=ul,Wi.lineOnAxis=Ke,Wi.lineTo=oi,Wi.moveBy=Mt,Wi.moveTo=vr,Wi.point=rt;var Gt={};Gt.Coordinate=je,Gt.KeyCodes=ft,Gt.Rect=Rt,Gt.Size=At,Gt.Svg=ve,Gt.aria=fu,Gt.array=ZS,Gt.browserEvents=Hi,Gt.colour=vn,Gt.deprecation=cS,Gt.dom=lr,Gt.extensions=yn,Gt.idGenerator=Th,Gt.math=Bh,Gt.object=YS,Gt.parsing=hu,Gt.string=Es,Gt.style=Gi,Gt.svgMath=fs,Gt.svgPaths=Wi,Gt.toolbox=So,Gt.userAgent=Ui,Gt.xml=hs;var e$={};e$.register=gg,e$.unregister=Rw;var t$=class extends ht{constructor(e,t,o,l){super(t,o,l),this.text=e,this.workspace=t,this.anchor=o,this.ownerRect=l,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(e){this.text=e,P(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,t){return t=this.createParagraph(t),e=this.createSpans(t,e),this.workspace.RTL&&this.rightAlignSpans(t.getBBox().width,e),t}createParagraph(e){return O(ve.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:ht.BORDER_WIDTH},e)}createSpans(e,t){return t.split(`
`).map(o=>{const l=O(ve.TSPAN,{dy:"1em",x:ht.BORDER_WIDTH},e);return o=document.createTextNode(o),l.appendChild(o),l})}rightAlignSpans(e,t){for(const o of t)o.setAttribute("text-anchor","end"),o.setAttribute("x",`${e+ht.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new At(e.width+2*ht.BORDER_WIDTH,e.height+2*ht.BORDER_WIDTH),!0)}},JS=class extends ht{constructor(e,t,o){super(e,t,o),this.workspace=e,this.anchor=t,this.ownerRect=o,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new At(160+ht.DOUBLE_BORDER,80+ht.DOUBLE_BORDER),this.MIN_SIZE=new At(45+ht.DOUBLE_BORDER,20+ht.DOUBLE_BORDER),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(e){this.text=e,this.textArea.value=e,this.onTextChange()}addTextChangeListener(e){this.textChangeListeners.push(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}createEditor(e){e=O(ve.FOREIGNOBJECT,{x:ht.BORDER_WIDTH,y:ht.BORDER_WIDTH},e);const t=document.createElementNS(Pi,"body");t.setAttribute("xmlns",Pi),t.className="blocklyMinimalBody";const o=document.createElementNS(Pi,"textarea");return o.className="blocklyCommentTextarea",o.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),t.appendChild(o),e.appendChild(t),this.bindTextAreaEvents(o),setTimeout(()=>{o.focus()},0),{inputRoot:e,textArea:o}}bindTextAreaEvents(e){Ye(e,"wheel",this,t=>{t.stopPropagation()}),Ye(e,"focus",this,this.onStartEdit,!0),Ye(e,"change",this,this.onTextChange)}createResizeHandle(e){e=O(ve.G,{class:this.workspace.RTL?"blocklyResizeSW":"blocklyResizeSE"},e);const t=2*ht.BORDER_WIDTH;return O(ve.POLYGON,{points:`0,${t} ${t},${t} ${t},0`},e),O(ve.LINE,{class:"blocklyResizeLine",x1:t/3,y1:t-1,x2:t-1,y2:t/3},e),O(ve.LINE,{class:"blocklyResizeLine",x1:2*t/3,y1:t-1,x2:t-1,y2:2*t/3},e),Ye(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,t=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const o=e.width-ht.DOUBLE_BORDER,l=e.height-ht.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${o}`),this.inputRoot.setAttribute("height",`${l}`),this.textArea.style.width=`${o-4}px`,this.textArea.style.height=`${l-4}px`,this.workspace.RTL?this.resizeGroup.setAttribute("transform",`translate(${ht.DOUBLE_BORDER}, ${l}) scale(-1 1)`):this.resizeGroup.setAttribute("transform",`translate(${o}, ${l})`),super.setSize(e,t),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(e){this.bringToFront(),Nt(e)||(this.workspace.startDrag(e,new je(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Ye(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Ye(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){Ue(),this.resizePointerUpListener&&(lt(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(lt(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=this.workspace.moveDrag(e),this.setSize(new At(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const e of this.textChangeListeners)e()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}};xr(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var r$=17,QS=160,e0=80,Mr=class extends Vh{constructor(e){super(e),this.sourceBlock=e,this.textBubble=this.textInputBubble=null,this.text="",this.bubbleSize=new At(QS,e0),this.bubbleVisiblity=!1}getType(){return Mr.TYPE}initView(e){this.svgRoot||(super.initView(e),O(ve.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),O(ve.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),O(ve.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose();let t;(t=this.textBubble)==null||t.dispose()}getWeight(){return Mr.WEIGHT}getSize(){return new At(r$,r$)}applyColour(){super.applyColour();const e=this.sourceBlock.style.colourPrimary;let t;(t=this.textInputBubble)==null||t.setColour(e);let o;(o=this.textBubble)==null||o.setColour(e)}updateEditable(){super.updateEditable(),this.bubbleIsVisible()&&(this.setBubbleVisible(!1),this.setBubbleVisible(!0))}onLocationChange(e){super.onLocationChange(e),e=this.getAnchorLocation();let t;(t=this.textInputBubble)==null||t.setAnchorLocation(e);let o;(o=this.textBubble)==null||o.setAnchorLocation(e)}setText(e){this.text=e;let t;(t=this.textInputBubble)==null||t.setText(this.text);let o;(o=this.textBubble)==null||o.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let t;(t=this.textInputBubble)==null||t.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(e){let t;this.text=(t=e.text)!=null?t:"";let o,l;this.bubbleSize=new At((o=e.width)!=null?o:QS,(l=e.height)!=null?l:e0);let c;this.bubbleVisiblity=(c=e.pinned)!=null?c:!1,setTimeout(()=>this.setBubbleVisible(this.bubbleVisiblity),1)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}onTextChange(){this.textInputBubble&&(this.text=this.textInputBubble.getText())}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){(!e||!this.textBubble&&!this.textInputBubble)&&(e||this.textBubble||this.textInputBubble)&&(this.bubbleVisiblity=e,this.sourceBlock.rendered&&!this.sourceBlock.isInFlyout&&(e?(this.sourceBlock.isEditable()?this.showEditableBubble():this.showNonEditableBubble(),this.applyColour()):this.hideBubble(),X(new(K(si))(this.sourceBlock,e,"comment"))))}showEditableBubble(){this.textInputBubble=new JS(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.textBubble=new t$(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect())}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null;let t;(t=this.textBubble)==null||t.dispose(),this.textBubble=null}getAnchorLocation(){const e=r$/2;return je.sum(this.workspaceLocation,new je(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new Rt(e.y,e.y+e.height,e.x,e.x+e.width)}};Mr.TYPE=Yr.COMMENT,Mr.WEIGHT=3,gg(Mr.TYPE,Mr);var bs=class extends mt{constructor(e,t,o){super(mt.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==mt.SKIP_SETUP&&(o?this.configure_(o):this.class=t||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&F(this.getTextElement(),this.class)}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&Ae(this.textElement_,this.class),e&&F(this.textElement_,e)),this.class=e}static fromJson(e){return new this(zt(e.text),void 0,e)}};nn("field_label",bs),bs.prototype.DEFAULT_VALUE="";var ji=class{constructor(e,t){this.name=e,this.sourceBlock=t,this.fieldRow=[],this.align=i.Align$$module$build$src$core$inputs$input.LEFT,this.visible=!0,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this}insertFieldAt(e,t,o){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(t||t===""&&o)&&(typeof t=="string"&&(t=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(t.init(),t.applyColour()),t.name=o,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),e++,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours())),e}removeField(e,t){for(let o=0,l;l=this.fieldRow[o];o++)if(l.name===e)return l.dispose(),this.fieldRow.splice(o,1),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours()),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let t=[];if(this.visible===e)return t;this.visible=e;for(let l=0,c;c=this.fieldRow[l];l++)c.setVisible(e);if(this.connection){var o=this.connection;e?t=o.startTrackingAll():o.stopTrackingAll(),(o=o.targetBlock())&&(o.getSvgRoot().style.display=e?"block":"none")}return t}markDirty(){for(let e=0,t;t=this.fieldRow[e];e++)t.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init()}dispose(){for(let e=0,t;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},n$;(function(e){e=e.Align||(e.Align={}),e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(ji||(ji={})),i.Align$$module$build$src$core$inputs$input=ji.Align,n$={},n$.Align=i.Align$$module$build$src$core$inputs$input,n$.Input=ji;var di=class extends ji{constructor(e,t){super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},t0;i.ValueInput$$module$build$src$core$inputs$value_input=class extends ji{constructor(e,t){if(!e)throw Error("Value inputs must have a non-empty name");super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Je.INPUT_VALUE)}},t0={},t0.ValueInput=i.ValueInput$$module$build$src$core$inputs$value_input;var sn=class extends ji{constructor(e,t){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,t),this.name=e,this.type=i.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Je.NEXT_STATEMENT)}},Nl=class{constructor(e,t,o){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.isInsertionMarker_=this.disposing=!1,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=e,this.id=o&&!e.getBlockById(o)?o:q(),e.setBlockById(this.id,this),this.xy_=new je(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,t){if(this.type=t,o=Xr[t],!o||typeof o!="object")throw TypeError("Invalid block definition for type: "+t);Object.assign(this,o)}e.addTopBlock(this),e.addTypedBlock(this),new.target===Nl&&this.doInit_()}doInit_(){const e=i.getGroup$$module$build$src$core$events$utils();e||i.setGroup$$module$build$src$core$events$utils(!0);const t=G();try{typeof this.init=="function"&&(J(!1),this.init(),J(t)),ue()&&X(new(K(i.CREATE$$module$build$src$core$events$utils))(this))}finally{i.setGroup$$module$build$src$core$events$utils(e),J(t)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),ue()&&X(new(K(i.DELETE$$module$build$src$core$events$utils))(this)),this.workspace.removeTopBlock(this),this.disposeInternal())}disposeInternal(){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0,typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0)}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(let e=0,t;t=this.inputList[e];e++)for(let o=0,l;l=t.fieldRow[o];o++)l.initModel&&l.initModel()}unplug(e){this.outputConnection&&this.unplugFromRow_(e),this.previousConnection&&this.unplugFromStack_(e)}unplugFromRow_(e){let t=null,o;(o=this.outputConnection)!=null&&o.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e==null||e.disconnect(),this.workspace.connectionChecker.canConnect(e,t,!1)?t.connect(e):e==null||e.onFailedConnect(t))}getOnlyValueConnection_(){let e=null;for(let t=0;t<this.inputList.length;t++){const o=this.inputList[t].connection;if(o&&o.type===Je.INPUT_VALUE&&o.targetConnection){if(e)return null;e=o}}return e}unplugFromStack_(e){let t=null;var o;if((o=this.previousConnection)!=null&&o.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect()),o=this.getNextBlock(),e&&o&&!o.isShadow()){let l,c;e=(c=(l=this.nextConnection)==null?void 0:l.targetConnection)!=null?c:null,e==null||e.disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e)}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let t=0,o;o=this.inputList[t];t++)o.connection&&e.push(o.connection);return e}lastConnectionInStack(e){let t=this.nextConnection;for(;t;){const o=t.targetBlock();if(!o||e&&o.isShadow())return t;t=o.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let t=0,o;o=this.inputList[t];t++)if(o.connection&&o.connection.targetBlock()===e)return o;return null}getSurroundParent(){let e=this,t;do if(t=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===t);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getFirstStatementConnection(){for(let e=0,t;t=this.inputList[e];e++)if(t.connection&&t.connection.type===Je.NEXT_STATEMENT)return t.connection;return null}getRootBlock(){let e,t=this;do e=t,t=e.parentBlock_;while(t);return e}getTopStackBlock(){let e=this,t;do t=e.getPreviousBlock();while(t&&t.getNextBlock()===e&&(e=t));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let o=0,l;l=this.inputList[o];o++)if(l.connection){var t=l.connection.targetBlock();t&&e.push(t)}return(t=this.getNextBlock())&&e.push(t),e}setParent(e){if(e!==this.parentBlock_){var t=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),o=!!t;if(o&&e&&t!==e)throw Error("Block connected to superior one that is not new parent.");if(!o&&e)throw Error("Block not connected to new parent.");if(o&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Wr(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const t=[this],o=this.getChildren(e);for(let l,c=0;l=o[c];c++)t.push(...l.getDescendants(e));return t}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable_}setDeletable(e){this.deletable_=e}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable_}setMovable(e){this.movable_=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(V(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(e){this.isShadow_=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable_}setEditable(e){this.editable_=e;for(let t=0,o;o=this.inputList[t];t++)for(let l=0,c;c=o.fieldRow[l];l++)c.updateEditable()}isDisposed(){return this.disposed}getMatchingConnection(e,t){const o=this.getConnections_(!0);if(e=e.getConnections_(!0),o.length!==e.length)throw Error("Connection lists did not match in length.");for(let l=0;l<e.length;l++)if(e[l]===t)return o[l];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return ll(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(e){e=al(e),this.hue_=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=e,this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(let t=0,o;o=this.inputList[t];t++)for(let l=0,c;c=o.fieldRow[l];l++)if(c.name===e)return c;return null}getVars(){const e=[];for(let t=0,o;o=this.inputList[t];t++)for(let l=0,c;c=o.fieldRow[l];l++)c.referencesVariables()&&e.push(c.getValue());return e}getVarModels(){const e=[];for(let t=0,o;o=this.inputList[t];t++)for(let l=0,c;c=o.fieldRow[l];l++)if(c.referencesVariables()){const g=this.workspace.getVariableById(c.getValue());g&&e.push(g)}return e}updateVarName(e){for(let t=0,o;o=this.inputList[t];t++)for(let l=0,c;c=o.fieldRow[l];l++)c.referencesVariables()&&e.getId()===c.getValue()&&c.refreshVariableName()}renameVarById(e,t){for(let o=0,l;l=this.inputList[o];o++)for(let c=0,g;g=l.fieldRow[c];c++)g.referencesVariables()&&e===g.getValue()&&g.setValue(t)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,t){const o=this.getField(t);if(!o)throw Error('Field "'+t+'" not found.');o.setValue(e)}setPreviousStatement(e,t){if(e)t===void 0&&(t=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Je.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,t){if(e)t===void 0&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Je.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,t){if(e)t===void 0&&(t=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Je.OUTPUT_VALUE)),this.outputConnection.setCheck(t);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(X(new(K(i.CHANGE$$module$build$src$core$events$utils))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof di&&this.inputList[e]instanceof di)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof i.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof di)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(e){if(this.isEnabled()!==e){const t=this.disabled;this.disabled=!e,X(new(K(i.CHANGE$$module$build$src$core$events$utils))(this,"disabled",null,t,!e))}}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(X(new(K(i.CHANGE$$module$build$src$core$events$utils))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,t){t=this.toTokens(t);for(let l=2;l<t.length;l++)t[l-2]==="("&&t[l]===")"&&(t[l-2]=t[l-1],t.splice(l-1,2));let o="";return t=t.reduce((l,c)=>(l=l+(o==="("||c===")"?"":" ")+c,o=c[c.length-1],l),""),t=t.trim()||"???",e&&t.length>e&&(t=t.substring(0,e-3)+"..."),t}toTokens(e="?"){const t=[];for(const l of this.inputList)if(l.name!=wl){for(const c of l.fieldRow)t.push(c.getText());if(l.connection){const c=l.connection.targetBlock();if(c){var o=l.connection;let g=o.getCheck();!g&&o.targetConnection&&(g=o.targetConnection.getCheck()),(o=!!g&&(g.indexOf("Boolean")!==-1||g.indexOf("Number")!==-1))&&t.push("("),t.push(...c.toTokens(e)),o&&t.push(")")}else t.push(e)}}return t}appendValueInput(e){return this.appendInput(new i.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new sn(e,this))}appendDummyInput(e=""){return this.appendInput(new di(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,t){return(e=p(He.INPUT,e,!1))?this.appendInput(new e(t,this)):null}jsonInit(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,t):this.jsonInitColour_(e,t);for(var o=0;e["message"+o]!==void 0;)this.interpolate_(e["message"+o],e["args"+o]||[],e["lastDummyAlign"+o],t),o++;if(e.inputsInline!==void 0&&this.setInputsInline(e.inputsInline),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(o=zt(e.tooltip),this.setTooltip(o)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(o=zt(e.helpUrl),this.setHelpUrl(o)),typeof e.extensions=="string"&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&ih(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(t=0;t<e.length;t++)ih(e[t],this,!1)}jsonInitColour_(e,t){if("colour"in e)if(e.colour===void 0)console.warn(t+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(t+"Illegal colour value: ",e)}}}jsonInitStyle_(e,t){e=e.style;try{this.setStyle(e)}catch{console.warn(t+"Style does not exist: ",e)}}mixin(e,t){if(t!==void 0&&typeof t!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(const o in e)this[o]!==void 0&&t.push(o);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Object.assign(this,e)}interpolate_(e,t,o,l){e=ng(e),this.validateTokens_(e,t.length),t=this.interpolateArguments_(e,t,o),o=[];for(let c=0,g;g=t[c];c++)if(this.isInputKeyword_(g.type)){if(e=this.inputFromJson_(g,l)){for(let L=0,he;he=o[L];L++)e.appendField(he[0],he[1]);o.length=0}}else(e=this.fieldFromJson_(g))&&o.push([e,g.name])}validateTokens_(e,t){const o=[];let l=0;for(let c=0;c<e.length;c++){const g=e[c];if(typeof g=="number"){if(1>g||g>t)throw Error('Block "'+this.type+'": Message index %'+g+" out of range.");if(o[g])throw Error('Block "'+this.type+'": Message index %'+g+" duplicated.");o[g]=!0,l++}}if(l!==t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")}interpolateArguments_(e,t,o){const l=[];for(let c=0;c<e.length;c++){let g=e[c];typeof g=="number"&&(g=t[g-1]),!(typeof g=="string"&&(g=this.stringToFieldJson_(g),!g))&&l.push(g)}return(e=l.length)&&!this.isInputKeyword_(l[e-1].type)&&(e={type:"input_dummy"},o&&(e.align=o),l.push(e)),l}fieldFromJson_(e){const t=i.fromJson$$module$build$src$core$field_registry(e);return!t&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson_(e.alt))?this.fieldFromJson_(e):null:this.fieldFromJson_(e.alt):t}inputFromJson_(e,t){var o={LEFT:i.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:i.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:i.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:i.Align$$module$build$src$core$inputs$align.CENTRE};let l;switch(e.type){case"input_value":l=this.appendValueInput(e.name);break;case"input_statement":l=this.appendStatementInput(e.name);break;case"input_dummy":l=this.appendDummyInput(e.name);break;default:l=this.appendInputFromRegistry(e.type,e.name)}return l?(e.check&&l.setCheck(e.check),e.align&&(o=o[e.align.toUpperCase()],o===void 0?console.warn(t+"Illegal align value: ",e.align):l.setAlign(o)),l):null}isInputKeyword_(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||d(He.INPUT,e)}stringToFieldJson_(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,t){if(e!==t){var o=-1,l=t?-1:this.inputList.length;for(let c=0,g;g=this.inputList[c];c++)if(g.name===e){if(o=c,l!==-1)break}else if(t&&g.name===t&&(l=c,o!==-1))break;if(o===-1)throw Error('Named input "'+e+'" not found.');if(l===-1)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(o,l)}}moveNumberedInputBefore(e,t){if(e===t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");const o=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,o)}removeInput(e,t){for(let o=0,l;l=this.inputList[o];o++)if(l.name===e)return l instanceof sn&&this.statementInputCount--,l.dispose(),this.inputList.splice(o,1),!0;if(t)return!1;throw Error("Input not found: "+e)}getInput(e){for(let t=0,o;o=this.inputList[t];t++)if(o.name===e)return o;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,t;return(t=(e=this.getIcon(Mr.TYPE))==null?void 0:e.getText())!=null?t:null}setCommentText(e){var t;let o;const l=(o=(t=this.getIcon(Mr.TYPE))==null?void 0:t.getText())!=null?o:null;l!==e&&(X(new(K(i.CHANGE$$module$build$src$core$events$utils))(this,"comment",null,l,e)),e!==null?((t=this.getIcon(Mr.TYPE))||(t=this.addIcon(new Mr(this))),t.setText(e)):this.removeIcon(Mr.TYPE))}setWarningText(e,t){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new BS(e);return this.icons.push(e),this.icons.sort((t,o)=>t.getWeight()-o.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let t;return(t=this.getIcon(e))==null||t.dispose(),this.icons=this.icons.filter(o=>!o.getType().equals(e)),!0}hasIcon(e){return this.icons.some(t=>t.getType().equals(e))}getIcon(e){return e instanceof Yr?this.icons.find(t=>t.getType().equals(e)):this.icons.find(t=>t.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy_}moveBy(e,t,o){if(this.parentBlock_)throw Error("Block has parent");const l=new(K(i.MOVE$$module$build$src$core$events$utils))(this);o&&l.setReason(o),this.xy_.translate(e,t),l.recordNew(),X(l)}makeConnection_(e){return new Tt(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let o=0,l;l=this.inputList[o];o++)if(l.connection){var t=l.connection.targetBlock();if(!t||!t.allInputsFilled(e))return!1}return(t=this.getNextBlock())?t.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};Nl.COLLAPSED_INPUT_NAME=wl,Nl.COLLAPSED_FIELD_NAME=Ph;var pu=null,gu=null,mu={};mu.connectionUiEffect=_g,mu.disconnectUiEffect=Tg,mu.disconnectUiStop=cl,mu.disposeUiEffect=mg;var i$=class extends ui{constructor(e,t,o){super(e?e.workspace.id:void 0),this.type=ls,e&&(this.blockId=e.id,this.isStart=t,this.blocks=o)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new i$),t.isStart=e.isStart,t.blockId=e.blockId,t.blocks=e.blocks,t}};s(He.EVENT,ls,i$);var Xh={};Xh.bumpIntoBounds=hl,Xh.bumpIntoBoundsHandler=bg,Xh.bumpTopObjectsIntoBounds=ah;var Yh=new Set,Kh=new WeakSet,xl=null,o$={};o$.finishQueuedRenders=uh,o$.queueRender=yg;var zi=class{constructor(e){this.name_=e}toString(){return this.name_}};zi.POSITIONABLE=new zi("positionable"),zi.DRAG_TARGET=new zi("drag_target"),zi.DELETE_AREA=new zi("delete_area"),zi.AUTOHIDEABLE=new zi("autohideable");var mr=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,t){const o=e.component.id;if(!t&&this.componentData.has(o)){var l;throw Error('Plugin "'+o+'" with capabilities "'+((l=this.componentData.get(o))==null?void 0:l.capabilities)+'" already added.')}for(this.componentData.set(o,e),t=[],l=0;l<e.capabilities.length;l++){const c=String(e.capabilities[l]).toLowerCase();if(t.push(c),this.capabilityToComponentIds.has(c)){let g;(g=this.capabilityToComponentIds.get(c))==null||g.push(o)}else this.capabilityToComponentIds.set(c,[o])}this.componentData.get(o).capabilities=t}removeComponent(e){const t=this.componentData.get(e);if(t){for(let o=0;o<t.capabilities.length;o++){const l=String(t.capabilities[o]).toLowerCase();Wr(this.capabilityToComponentIds.get(l),e)}this.componentData.delete(e)}}addCapability(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,t))console.warn('Plugin "'+e+'already has capability "'+t+'"');else{t=`${t}`.toLowerCase();var o;(o=this.componentData.get(e))==null||o.capabilities.push(t);var l;(l=this.capabilityToComponentIds.get(t))==null||l.push(e)}}removeCapability(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=`${t}`.toLowerCase(),Wr(this.componentData.get(e).capabilities,t),Wr(this.capabilityToComponentIds.get(t),e)):console.warn('Plugin "'+e+`doesn't have capability "`+t+'" to remove')}hasCapability(e,t){return t=`${t}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.indexOf(t)!==-1}getComponent(e){let t;return(t=this.componentData.get(e))==null?void 0:t.component}getComponents(e,t){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const o=[];if(t){const l=[];e.forEach(c=>{l.push(this.componentData.get(c))}),l.sort(function(c,g){return c.weight-g.weight}),l.forEach(function(c){o.push(c.component)})}else e.forEach(l=>{o.push(this.componentData.get(l).component)});return o}};mr.Capability=zi;var s$,r0;s$=28,i.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:s$,connectingSnapRadius:s$,currentConnectionPreference:8,bumpDelay:250},r0={},r0.config=i.config$$module$build$src$core$config;var n0="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",ln=class{constructor(e){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,I(e),this.topBlock=e,this.workspace=e.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){i.disable$$module$build$src$core$events$utils(),this.hidePreview(),i.enable$$module$build$src$core$events$utils();var{local:e,closest:t}=this.activeCandidate;if(e.connect(t),this.topBlock.rendered){const o=e.isSuperior()?t:e,l=this.topBlock.getRootBlock();uh().then(()=>{_g(o.getSourceBlock()),setTimeout(()=>{l.bringToFront()},0)})}}}update(e,t){const o=this.getCandidate(e);((this.wouldDeleteBlock=this.shouldDelete(!!o,t))||this.shouldUpdatePreviews(o,e))&&(i.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(o),this.maybeShowPreview(o),i.enable$$module$build$src$core$events$utils())}createMarkerBlock(e){var t=e.type;i.disable$$module$build$src$core$events$utils();let o;try{if(o=this.workspace.newBlock(t),o.setInsertionMarker(!0),e.saveExtraState){var l=e.saveExtraState();l&&o.loadExtraState&&o.loadExtraState(l)}else if(e.mutationToDom){const c=e.mutationToDom();c&&o.domToMutation&&o.domToMutation(c)}for(t=0;t<e.inputList.length;t++){const c=e.inputList[t];if(c.name===wl)continue;const g=o.inputList[t];if(!g)throw Error(n0.replace("%1","an input"));for(l=0;l<c.fieldRow.length;l++){const L=c.fieldRow[l],he=g.fieldRow[l];if(!he)throw Error(n0.replace("%1","a field"));he.setValue(L.getValue())}}o.setCollapsed(e.isCollapsed()),o.setInputsInline(e.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{i.enable$$module$build$src$core$events$utils()}return o}initAvailableConnections(){const e=this.topBlock.getConnections_(!1),t=this.topBlock.lastConnectionInStack(!0);return t&&t!==this.topBlock.nextConnection&&(e.push(t),this.lastOnStack=t),e}shouldUpdatePreviews(e,t){if(!e)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:o,closest:l}=this.activeCandidate;if(l===e.closest&&o===e.local)return!1;const c=o.x+t.x-l.x;return t=o.y+t.y-l.y,e.radius<Math.sqrt(c*c+t*t)-i.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(e){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let t=this.getStartRadius(),o=null;for(let l=0;l<this.availableConnections.length;l++){const c=this.availableConnections[l],g=c.closest(t,e);g.connection&&(o={closest:g.connection,local:c,radius:g.radius},t=g.radius)}return o}getStartRadius(){return this.activeCandidate?i.config$$module$build$src$core$config.connectingSnapRadius:i.config$$module$build$src$core$config.snapRadius}shouldDelete(e,t){return t&&this.workspace.getComponentManager().hasCapability(t.id,mr.Capability.DELETE_AREA)?t.wouldDelete(this.topBlock,e):!1}maybeShowPreview(e){if(!this.wouldDeleteBlock&&e){var t=e.closest,o;t===((o=this.activeCandidate)==null?void 0:o.closest)||t.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=e,this.showPreview(this.activeCandidate))}}showPreview(e){const t=this.workspace.getRenderer();switch(t.getConnectionPreviewMethod(e.closest,e.local,this.topBlock)){case ln.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(e);break;case ln.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(e);break;case ln.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(e)}t.shouldHighlightConnection(e.closest)&&e.closest.highlight()}maybeHidePreview(e){if(!e)this.hidePreview();else if(this.activeCandidate){const t=this.activeCandidate.local!==e.local;(this.activeCandidate.closest!==e.closest||t||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let e;const t=(e=this.activeCandidate)==null?void 0:e.closest;t&&t.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(t)&&t.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(e){const{local:t,closest:o}=e;let l=(e=this.lastOnStack&&t===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!l)throw Error("Cannot show the insertion marker because there is no insertion marker block");let c;try{c=l.getMatchingConnection(t.getSourceBlock(),t)}catch{if(e&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),l=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),l=this.firstMarker=this.createMarkerBlock(this.topBlock)),!l)throw Error("Cannot show the insertion marker because there is no insertion marker block");c=l.getMatchingConnection(t.getSourceBlock(),t)}if(!c)throw Error("Cannot show the insertion marker because there is no associated connection");if(c===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");l.render(),l.rendered=!0,l.getSvgRoot().setAttribute("visibility","visible"),c&&o&&l.positionNearConnection(c,o),o&&c.connect(o),this.markerConnection=c}hideInsertionMarker(){if(this.markerConnection){var e=this.markerConnection,t=e.getSourceBlock(),o=t.outputConnection,l;if((l=t.previousConnection)!=null&&l.targetConnection||o!=null&&o.targetConnection)t.unplug(!0);else{let c;(c=e.targetBlock())==null||c.unplug(!1)}if(e.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(e=t.getSvgRoot())&&e.setAttribute("visibility","hidden")}}showInsertionInputOutline(e){e=e.closest,this.highlightedBlock=e.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(e,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(e){if(this.fadedBlock=e.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const e=[];return this.firstMarker&&e.push(this.firstMarker),this.lastMarker&&e.push(this.lastMarker),e}disposeInsertionMarker(e){if(e){i.disable$$module$build$src$core$events$utils();try{e.dispose()}finally{i.enable$$module$build$src$core$events$utils()}}}};(function(e){e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}),e[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(ln||(ln={})),ln.PREVIEW_TYPE;var i0=class{constructor(e,t){this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.draggingBlock_=e,this.draggedConnectionManager_=new ln(this.draggingBlock_),this.workspace_=t,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=Rg(e,this.startXY_)}dispose(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()}startDrag(e,t){i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),Te(),this.workspace_.setResizesEnabled(!1),cl(),this.shouldDisconnect_(t)&&this.disconnectBlock_(t,e),this.draggingBlock_.setDragging(!0)}shouldDisconnect_(e){return!!(this.draggingBlock_.getParent()||e&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(e,t){this.draggingBlock_.unplug(e),e=this.pixelsToWorkspaceUnits_(t),e=je.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),Tg(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()}fireDragStartEvent_(){const e=new(K(ls))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));X(e)}drag(e,t){t=this.pixelsToWorkspaceUnits_(t);var o=je.sum(this.startXY_,t);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(t),o=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(e),this.draggedConnectionManager_.update(t,this.dragTarget_),e=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock,e!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==o&&(o&&o.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)}endDrag(e,t){this.drag(e,t),this.dragIconData_=[],this.fireDragEndEvent_(),Me(),cl(),e=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)||(e=this.getNewLocationAfterDrag_(t).delta),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),e?this.updateBlockAfterMove_():hl(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),i.setGroup$$module$build$src$core$events$utils(!1)}getNewLocationAfterDrag_(e){e=this.pixelsToWorkspaceUnits_(e);const t=je.sum(this.startXY_,e);return{delta:e,newLocation:t}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),fl.length=0,!0):!1}updateBlockAfterMove_(){this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.queueRender(),this.draggingBlock_.scheduleSnapAndBump()}fireDragEndEvent_(){const e=new(K(ls))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));X(e)}updateToolboxStyle_(e){const t=this.workspace_.getToolbox();if(t){const o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e&&typeof t.removeStyle=="function"?t.removeStyle(o):e||typeof t.addStyle!="function"||t.addStyle(o)}}fireMoveEvent_(){if(!this.draggingBlock_.isDeadOrDying()){var e=new(K(i.MOVE$$module$build$src$core$events$utils))(this.draggingBlock_);e.setReason(["drag"]),e.oldCoordinate=this.startXY_,e.recordNew(),X(e)}}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(e){return e=new je(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e}dragIcons_(e){for(const t of this.dragIconData_)t.icon.onLocationChange(je.sum(t.location,e))}getInsertionMarkers(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]}};s(He.BLOCK_DRAGGER,xi,i0);var Xi=null,l$={duplicateInternal:Lw,copyInternal:Aw},$u={};$u.TEST_ONLY=l$,$u.copy=Ka,$u.duplicate=ch,$u.paste=kg;var qh=null,o0={},Zh=null,fi={};fi.callbackFactory=i.callbackFactory$$module$build$src$core$contextmenu,fi.commentDeleteOption=Lg,fi.commentDuplicateOption=Ng,fi.dispose=Ag,fi.getCurrentBlock=Nw,fi.hide=Za,fi.setCurrentBlock=Cg,fi.show=qa,fi.workspaceCommentOption=Bw;var bt=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(e){if(this.registry_.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registry_.set(e.id,e)}unregister(e){if(!this.registry_.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registry_.delete(e)}getItem(e){let t;return(t=this.registry_.get(e))!=null?t:null}getContextMenuOptions(e,t){const o=[];for(const c of this.registry_.values())if(e===c.scopeType){var l=c.preconditionFn(t);l!=="hidden"&&(l={text:typeof c.displayText=="function"?c.displayText(t):c.displayText,enabled:l==="enabled",callback:c.callback,scope:t,weight:c.weight},o.push(l))}return o.sort(function(c,g){return c.weight-g.weight}),o}};(function(e){var t=e.ScopeType||(e.ScopeType={});t.BLOCK="block",t.WORKSPACE="workspace",e.registry=new e})(bt||(bt={})),bt.ScopeType;var s0=30,l0=!0,ys=[];ys[Je.INPUT_VALUE]=Je.OUTPUT_VALUE,ys[Je.OUTPUT_VALUE]=Je.INPUT_VALUE,ys[Je.NEXT_STATEMENT]=Je.PREVIOUS_STATEMENT,ys[Je.PREVIOUS_STATEMENT]=Je.NEXT_STATEMENT;var a$="RENAME_VARIABLE_ID",u$="DELETE_VARIABLE_ID",Pe=class{constructor(e,t,o){if(this.wsCoordinate=null,!t)throw Error("Cannot create a node without a location.");this.type=e,this.isConnectionLocation=Pe.isConnectionType(e),this.location=t,this.processParams(o||null)}processParams(e){e&&e.wsCoordinate&&(this.wsCoordinate=e.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var e=this.location.getParentInput();const t=e.getSourceBlock();for(e=t.inputList.indexOf(e),e+=1;e<t.inputList.length;e++){const o=t.inputList[e],l=o.fieldRow;for(let c=0;c<l.length;c++){const g=l[c];if(g.isClickable()||Pe.NAVIGATE_ALL_FIELDS)return Pe.createFieldNode(g)}if(o.connection)return Pe.createInputNode(o)}return null}findNextForField(){var e=this.location,t=e.getParentInput();const o=e.getSourceBlock();if(!o)throw Error("The current AST location is not associated with a block");var l=o.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)+1;l<o.inputList.length;l++){t=o.inputList[l];const c=t.fieldRow;for(;e<c.length;){if(c[e].isClickable()||Pe.NAVIGATE_ALL_FIELDS)return Pe.createFieldNode(c[e]);e++}if(e=0,t.connection)return Pe.createInputNode(t)}return null}findPrevForInput(){const e=this.location.getParentInput(),t=e.getSourceBlock();for(var o=t.inputList.indexOf(e);0<=o;o--){var l=t.inputList[o];if(l.connection&&l!==e)return Pe.createInputNode(l);l=l.fieldRow;for(let c=l.length-1;0<=c;c--){const g=l[c];if(g.isClickable()||Pe.NAVIGATE_ALL_FIELDS)return Pe.createFieldNode(g)}}return null}findPrevForField(){var e=this.location;const t=e.getParentInput(),o=e.getSourceBlock();if(!o)throw Error("The current AST location is not associated with a block");var l=o.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)-1;0<=l;l--){var c=o.inputList[l];if(c.connection&&c!==t)return Pe.createInputNode(c);for(c=c.fieldRow;-1<e;){if(c[e].isClickable()||Pe.NAVIGATE_ALL_FIELDS)return Pe.createFieldNode(c[e]);e--}0<=l-1&&(e=o.inputList[l-1].fieldRow.length-1)}return null}navigateBetweenStacks(e){var t=this.getLocation();if(t.getSourceBlock){var o=t.getSourceBlock();o&&(t=o)}if(!t||t.isDeadOrDying())return null;o=t.getRootBlock(),t=o.workspace.getTopBlocks(!0);for(let l=0;l<t.length;l++)if(o.id===t[l].id)return e=l+(e?1:-1),e===-1||e===t.length?null:Pe.createStackNode(t[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}findTopASTNodeForBlock(e){const t=Ja(e);return t?Pe.createConnectionNode(t):Pe.createBlockNode(e)}getOutAstNodeForBlock(e){if(!e)return null;e=e.getTopStackBlock();const t=Ja(e);return t&&t.targetConnection&&t.targetConnection.getParentInput()?Pe.createInputNode(t.targetConnection.getParentInput()):Pe.createStackNode(e)}findFirstFieldOrInput(e){e=e.inputList;for(let t=0;t<e.length;t++){const o=e[t],l=o.fieldRow;for(let c=0;c<l.length;c++){const g=l[c];if(g.isClickable()||Pe.NAVIGATE_ALL_FIELDS)return Pe.createFieldNode(g)}if(o.connection)return Pe.createInputNode(o)}return null}getSourceBlock(){return this.getType()===Pe.types.BLOCK?this.getLocation():this.getType()===Pe.types.STACK?this.getLocation():this.getType()===Pe.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case Pe.types.STACK:return this.navigateBetweenStacks(!0);case Pe.types.OUTPUT:return Pe.createBlockNode(this.location.getSourceBlock());case Pe.types.FIELD:return this.findNextForField();case Pe.types.INPUT:return this.findNextForInput();case Pe.types.BLOCK:const e=this.location.nextConnection;if(!e)break;return Pe.createConnectionNode(e);case Pe.types.PREVIOUS:return Pe.createBlockNode(this.location.getSourceBlock());case Pe.types.NEXT:return Pe.createConnectionNode(this.location.targetConnection)}return null}in(){switch(this.type){case Pe.types.WORKSPACE:const e=this.location.getTopBlocks(!0);if(0<e.length)return Pe.createStackNode(e[0]);break;case Pe.types.STACK:return this.findTopASTNodeForBlock(this.location);case Pe.types.BLOCK:return this.findFirstFieldOrInput(this.location);case Pe.types.INPUT:return Pe.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case Pe.types.STACK:return this.navigateBetweenStacks(!1);case Pe.types.FIELD:return this.findPrevForField();case Pe.types.INPUT:return this.findPrevForInput();case Pe.types.BLOCK:var e=Ja(this.location);if(!e)break;return Pe.createConnectionNode(e);case Pe.types.PREVIOUS:if((e=this.location.targetConnection)&&!e.getParentInput())return Pe.createConnectionNode(e);break;case Pe.types.NEXT:return Pe.createBlockNode(this.location.getSourceBlock())}return null}out(){switch(this.type){case Pe.types.STACK:var e=this.location,t=e.getRelativeToSurfaceXY();return t=new je(t.x,t.y+Pe.DEFAULT_OFFSET_Y),Pe.createWorkspaceNode(e.workspace,t);case Pe.types.OUTPUT:return e=this.location,(t=e.targetConnection)?Pe.createConnectionNode(t):Pe.createStackNode(e.getSourceBlock());case Pe.types.FIELD:if(e=this.location.getSourceBlock(),!e)throw Error("The current AST location is not associated with a block");return Pe.createBlockNode(e);case Pe.types.INPUT:return Pe.createBlockNode(this.location.getSourceBlock());case Pe.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case Pe.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case Pe.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(e){switch(e){case Pe.types.PREVIOUS:case Pe.types.NEXT:case Pe.types.INPUT:case Pe.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new Pe(Pe.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const t=e.type;return t===Je.INPUT_VALUE||t===Je.NEXT_STATEMENT&&e.getParentInput()?Pe.createInputNode(e.getParentInput()):t===Je.NEXT_STATEMENT?new Pe(Pe.types.NEXT,e):t===Je.OUTPUT_VALUE?new Pe(Pe.types.OUTPUT,e):t===Je.PREVIOUS_STATEMENT?new Pe(Pe.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new Pe(Pe.types.INPUT,e.connection):null}static createBlockNode(e){return e?new Pe(Pe.types.BLOCK,e):null}static createStackNode(e){return e?new Pe(Pe.types.STACK,e):null}static createWorkspaceNode(e,t){return t&&e?new Pe(Pe.types.WORKSPACE,e,{wsCoordinate:t}):null}static createTopNode(e){const t=Ja(e);return t?Pe.createConnectionNode(t):Pe.createBlockNode(e)}};Pe.NAVIGATE_ALL_FIELDS=!1,Pe.DEFAULT_OFFSET_Y=-20,function(e){e=e.types||(e.types={}),e.FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace"}(Pe||(Pe={}));var a0=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(e){this.drawer=e}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(e){const t=this.curNode;this.curNode=e,this.drawer&&this.drawer.draw(t,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},c$=class extends a0{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===Pe.types.NEXT||e.getType()===Pe.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;(e.getType()===Pe.types.PREVIOUS||e.getType()===Pe.types.OUTPUT)&&(e=e.next());let t,o;return(e=(o=(t=e)==null?void 0:t.in())!=null?o:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===Pe.types.NEXT||e.getType()===Pe.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===Pe.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};s(He.CURSOR,xi,c$);var _u=class extends c${constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,t){if(!e)return null;const o=e.in()||e.next();return t(o)?o:o?this.getNextNode_(o,t):(e=this.findSiblingOrParent(e.out()),t(e)?e:e?this.getNextNode_(e,t):null)}getPreviousNode_(e,t){if(!e)return null;let o=e.prev();return o=o?this.getRightMostChild(o):e.out(),t(o)?o:o?this.getPreviousNode_(o,t):null}validNode_(e){let t=!1;return e=e&&e.getType(),(e===Pe.types.OUTPUT||e===Pe.types.INPUT||e===Pe.types.FIELD||e===Pe.types.NEXT||e===Pe.types.PREVIOUS||e===Pe.types.WORKSPACE)&&(t=!0),t}findSiblingOrParent(e){if(!e)return null;const t=e.next();return t||this.findSiblingOrParent(e.out())}getRightMostChild(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild(e)}};_u.registrationName="basicCursor",s(He.CURSOR,_u.registrationName,_u);var u0=class extends _u{validNode_(e){let t=!1;const o=e&&e.getType();return e&&(e=e.getLocation(),o===Pe.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(t=!0)),t}},h$=10,Dr=class extends Tt{constructor(e,t){super(e,t),this.targetConnection=this.highlightPath=null,this.db=e.workspace.connectionDBList[t],this.dbOpposite=e.workspace.connectionDBList[ys[t]],this.offsetInBlock=new je(0,0),this.trackedState=Dr.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Dr.TrackedState.TRACKED&&this.db.removeConnection(this,this.y)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)}bumpAwayFrom(e){if(!this.sourceBlock_.workspace.isDragging()){var t=this.sourceBlock_.getRootBlock();if(!t.isInFlyout){var o=!1;if(!t.isMovable()){if(t=e.getSourceBlock().getRootBlock(),!t.isMovable())return;e=this,o=!0}var l=m()==t;l||t.addSelect();var c=e.x+i.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*h$)-this.x,g=e.y+i.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*h$)-this.y;o&&(g=-g),t.RTL&&(c=e.x-i.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*h$)-this.x),t.moveBy(c,g,["bump"]),l||t.removeSelect()}}}moveTo(e,t){let o=!1;return this.trackedState===Dr.TrackedState.WILL_TRACK?(this.db.addConnection(this,t),this.trackedState=Dr.TrackedState.TRACKED,o=!0):this.trackedState===Dr.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,t),o=!0),this.x=e,this.y=t,o}moveBy(e,t){return this.moveTo(this.x+e,this.y+t)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,t){this.offsetInBlock.x=e,this.offsetInBlock.y=t}getOffsetInBlock(){return this.offsetInBlock}tighten(){const e=this.targetConnection.x-this.x,t=this.targetConnection.y-this.y;if(e!==0||t!==0){const l=this.targetBlock();var o=l.getSvgRoot();if(!o)throw Error("block is not rendered.");o=ns(o),l.translate(o.x-e,o.y-t),l.moveConnections(-e,-t)}}tightenEfficiently(){var e=this.targetConnection;const t=this.targetBlock();e&&t&&(e=je.difference(this.offsetInBlock,e.offsetInBlock),t.translate(e.x,e.y))}closest(e,t){return this.dbOpposite.searchForClosest(this,e,t)}highlight(){if(!this.highlightPath){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),t=e.shapeFor(this);this.type===Je.INPUT_VALUE||this.type===Je.OUTPUT_VALUE?(e=e.TAB_OFFSET_FROM_TOP,t=Mt(0,-e)+Ke("v",e)+t.pathDown+Ke("v",e)):(e=e.NOTCH_OFFSET_LEFT-e.CORNER_RADIUS,t=Mt(-e,0)+Ke("h",e)+t.pathLeft+Ke("h",e)),e=this.offsetInBlock,this.highlightPath=O(ve.PATH,{class:"blocklyHighlightedConnectionPath",d:t,transform:`translate(${e.x}, ${e.y})`+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())}}unhighlight(){this.highlightPath&&(P(this.highlightPath),this.highlightPath=null)}setTracking(e){e&&this.trackedState===Dr.TrackedState.TRACKED||!e&&this.trackedState===Dr.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=Dr.TrackedState.TRACKED):(this.trackedState===Dr.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Dr.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let t=0;t<e.length;t++){const o=e[t],l=o.getConnections_(!0);for(let c=0;c<l.length;c++)l[c].setTracking(!1);for(const c of o.getIcons())go(c)&&c.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==Je.INPUT_VALUE&&this.type!==Je.NEXT_STATEMENT)return e;const t=this.targetBlock();if(t){let o;t.isCollapsed()?(o=[],t.outputConnection&&o.push(t.outputConnection),t.nextConnection&&o.push(t.nextConnection),t.previousConnection&&o.push(t.previousConnection)):o=t.getConnections_(!0);for(let l=0;l<o.length;l++)e.push(...o[l].startTrackingAll());e.length||(e=[t])}return e}onFailedConnect(e){const t=this.getSourceBlock();if(G()){const o=i.getGroup$$module$build$src$core$events$utils();setTimeout((function(){t.isDisposed()||t.getParent()||(i.setGroup$$module$build$src$core$events$utils(o),this.bumpAwayFrom(e),i.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),i.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:t,childConnection:o}=this.getParentAndChildConnections();if(t&&o){var l=t.getSourceBlock(),c=o.getSourceBlock();super.disconnectInternal(e),l.rendered&&l.queueRender(),c.rendered&&(c.updateDisabled(),c.queueRender(),c.getSvgRoot().style.display="block")}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var t=this.getSourceBlock();e=e.getSourceBlock();const o=t.rendered,l=e.rendered;o&&t.updateDisabled(),l&&e.updateDisabled(),o&&l&&(this.type===Je.NEXT_STATEMENT||this.type===Je.PREVIOUS_STATEMENT?e.queueRender():t.queueRender()),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(Dr||(Dr={})),Dr.TrackedState;var d$=17,Un=class extends Vh{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return Un.TYPE}initView(e){this.svgRoot||(super.initView(e),O(ve.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),O(ve.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),O(ve.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return Un.WEIGHT}getSize(){return new At(d$,d$)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let t;(t=this.textBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}addMessage(e,t){if(this.textMap.get(t)===e)return this;e?this.textMap.set(t,e):this.textMap.delete(t);let o;return(o=this.textBubble)==null||o.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){if(this.bubbleIsVisible()!==e){if(e)this.textBubble=new t$(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour();else{let t;(t=this.textBubble)==null||t.dispose(),this.textBubble=null}X(new(K(si))(this.sourceBlock,e,"warning"))}}getAnchorLocation(){const e=d$/2;return je.sum(this.workspaceLocation,new je(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new Rt(e.y,e.y+e.height,e.x,e.x+e.width)}};Un.TYPE=Yr.WARNING,Un.WEIGHT=2;var an=class extends Nl{constructor(e,t,o){super(e,t,o),this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.visuallyDisabled=this.rendered=!1,this.translation="",this.bumpNeighboursPid=0,this.relativeCoords=new je(0,0),this.workspace=e,this.svgGroup_=O(ve.G,{}),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),e=this.pathObject.svgPath,e.tooltip=this,za(e),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let t=0,o;o=this.inputList[t];t++)o.init();for(var e of this.getIcons())e.initView(this.createIconPointerDownListener(e)),e.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),e=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!e||Ye(e,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,e.parentNode||this.workspace.getCanvas().appendChild(e)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(m()!==this){var e=null;if(m()){e=m().id,i.disable$$module$build$src$core$events$utils();try{m().unselect()}finally{i.enable$$module$build$src$core$events$utils()}}e=new(K(Mi))(e,this.id,this.workspace.id),X(e),I(this),this.addSelect()}}unselect(){if(m()===this){var e=new(K(Mi))(this.id,null,this.workspace.id);e.workspaceId=this.workspace.id,X(e),I(null),this.removeSelect()}}setParent(e){const t=this.parentBlock_;if(e!==t){Te(),super.setParent(e),Me();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var l=this.getRelativeToSurfaceXY();e?e.getSvgRoot().appendChild(o):t&&(this.workspace.getCanvas().appendChild(o),this.translate(l.x,l.y)),this.applyColour()}}}getRelativeToSurfaceXY(){let e=0,t=0,o=this.getSvgRoot();if(o)do{const l=ns(o);e+=l.x,t+=l.y,o=o.parentNode}while(o&&o!==this.workspace.getCanvas());return new je(e,t)}moveBy(e,t,o){if(this.parentBlock_)throw Error("Block has parent");const l=ue();let c=null;l&&(c=new(K(i.MOVE$$module$build$src$core$events$utils))(this),o&&c.setReason(o)),o=this.getRelativeToSurfaceXY(),this.translate(o.x+e,o.y+t),this.moveConnections(e,t),l&&c&&(c.recordNew(),X(c)),this.workspace.resizeContents()}translate(e,t){this.translation=`translate(${e}, ${t})`,this.relativeCoords=new je(e,t),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,t){const o=this.getRelativeToSurfaceXY();this.moveBy(e.x-o.x,e.y-o.y,t)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation())}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var e=this.workspace.getGrid();if(e&&e.shouldSnap()){var t=e.getSpacing(),o=t/2,l=this.getRelativeToSurfaceXY();e=Math.round(Math.round((l.x-o)/t)*t+o-l.x),t=Math.round(Math.round((l.y-o)/t)*t+o-l.y),(e||t)&&this.moveBy(e,t,["snap"])}}}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY(),t=this.getHeightWidth();let o,l;return this.RTL?(o=e.x-t.width,l=e.x):(o=e.x,l=e.x+t.width),new Rt(e.y,e.y+t.height,o,l)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,t;t=this.inputList[e];e++)t.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed_())}updateCollapsed_(){var e=this.isCollapsed();const t=wl,o=Ph;for(let c=0,g;g=this.inputList[c];c++)g.name!==t&&g.setVisible(!e);for(var l of this.getIcons())l.updateCollapsed();e?(e=this.toString(s0),(l=this.getField(o))?l.setValue(e):(this.getInput(t)||this.appendDummyInput(t)).appendField(new bs(e),o)):(this.updateDisabled(),this.removeInput(t))}tab(e,t){const o=new u0;o.setCurNode(Pe.createFieldNode(e)),e=o.getCurNode(),t?o.next():o.prev(),(t=o.getCurNode())&&t!==e&&(t.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(t))}onMouseDown_(e){const t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=bt.registry.getContextMenuOptions(bt.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const t=this.generateContextMenu();t&&t.length&&(qa(e,t,this.RTL),Cg(this))}moveConnections(e,t){if(this.rendered){for(var o=this.getConnections_(!1),l=0;l<o.length;l++)o[l].moveBy(e,t);o=this.getIcons(),l=this.getRelativeToSurfaceXY();for(var c of o)c.onLocationChange(l);for(c=0;c<this.childBlocks_.length;c++)this.childBlocks_[c].moveConnections(e,t)}}setDragging(e){e?(this.translation="",fl.push(...this.getConnections_(!0)),F(this.svgGroup_,"blocklyDragging")):(fl.length=0,Ae(this.svgGroup_,"blocklyDragging"));for(let t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let t=0;t<e.length;t++)e[t].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(e,t){this.isDeadOrDying()||(Zp(),Za(),t&&this.rendered&&(this.unplug(e),mg(this)),super.dispose(!!e),P(this.svgGroup_))}disposeInternal(){this.isDeadOrDying()||(super.disposeInternal(),this.rendered=!1,m()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose()))}checkAndDelete(){this.workspace.isFlyout||(i.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),i.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{saveInfo:ii(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:V(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let t=0;t<e.length;t++)e[t].applyColour();for(let t=0,o;o=this.inputList[t];t++)for(let l=0,c;c=o.fieldRow[l];l++)c.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let t;(t=this.getNextBlock())==null||t.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const t of this.getChildren(!1))t.updateDisabled()}}getCommentIcon(){Ne("getCommentIcon","v10","v11","getIcon");let e;return(e=this.getIcon(Mr.TYPE))!=null?e:null}setWarningText(e,t){const o=t||"";if(o)this.warningTextDb.has(o)&&(clearTimeout(this.warningTextDb.get(o)),this.warningTextDb.delete(o));else{for(var l of this.warningTextDb.values())clearTimeout(l);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(o,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(o),this.setWarningText(e,o))},100));else if(this.isInFlyout&&(e=null),t=this.getIcon(Un.TYPE),typeof e=="string"){l=this.getSurroundParent();let c=null;for(;l;)l.isCollapsed()&&(c=l),l=l.getSurroundParent();c&&c.setWarningText(i.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,an.COLLAPSED_WARNING_ID),t?t.addMessage(e,o):this.addIcon(new Un(this).addMessage(e,o))}else t&&(o?t.getText()||this.removeIcon(Un.TYPE):this.removeIcon(Un.TYPE))}setMutator(e){this.removeIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof Un&&(this.warning=e),e instanceof i.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),this.rendered&&(e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.render(),this.bumpNeighbours()),e}createIconPointerDownListener(e){return t=>{this.isDeadOrDying()||(t=this.workspace.getGesture(t))&&t.setStartIcon(e)}}removeIcon(e){const t=super.removeIcon(e);return e.equals(Un.TYPE)&&(this.warning=null),e.equals(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.rendered&&(this.render(),this.bumpNeighbours()),t}setEnabled(e){this.isEnabled()!==e&&(super.setEnabled(e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(e){this.rendered&&this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,t)this.hat=t.hat,this.pathObject.setStyle(t),this.colour_=t.colourPrimary,this.style=t,this.applyColour();else throw Error("Invalid style name: "+e)}bringToFront(){let e=this;do{const t=e.getSvgRoot(),o=t.parentNode,l=o.childNodes;l[l.length-1]!==t&&o.appendChild(t),e=e.getParent()}while(e)}setPreviousStatement(e,t){super.setPreviousStatement(e,t),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setNextStatement(e,t){super.setNextStatement(e,t),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setOutput(e,t){super.setOutput(e,t),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setInputsInline(e){super.setInputsInline(e),this.rendered&&(this.queueRender(),this.bumpNeighbours())}removeInput(e,t){return e=super.removeInput(e,t),this.rendered&&(this.queueRender(),this.bumpNeighbours()),e}moveNumberedInputBefore(e,t){super.moveNumberedInputBefore(e,t),this.rendered&&(this.queueRender(),this.bumpNeighbours())}appendInput(e){return super.appendInput(e),this.rendered&&(this.queueRender(),this.bumpNeighbours()),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var o=this.inputList[t].connection;o&&(o.setTracking(e),(o=o.targetBlock())&&o.setConnectionTracking(e))}}getConnections_(e){const t=[];if((e||this.rendered)&&(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_))for(let o=0,l;l=this.inputList[o];o++)l.connection&&t.push(l.connection);return t}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,t){return super.getMatchingConnection(e,t)}makeConnection_(e){return new Dr(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){if(!this.bumpNeighboursPid){var e=i.getGroup$$module$build$src$core$events$utils();this.bumpNeighboursPid=setTimeout(()=>{const t=i.getGroup$$module$build$src$core$events$utils();i.setGroup$$module$build$src$core$events$utils(e),this.getRootBlock().bumpNeighboursInternal(),i.setGroup$$module$build$src$core$events$utils(t),this.bumpNeighboursPid=0},i.config$$module$build$src$core$config.bumpDelay)}}bumpNeighboursInternal(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const t of this.getConnections_(!1)){if(t.isSuperior()){let o;(o=t.targetBlock())==null||o.bumpNeighboursInternal()}for(const o of t.neighbours(i.config$$module$build$src$core$config.snapRadius))o.getSourceBlock().getRootBlock()!==e&&(t.isConnected()&&o.isConnected()||(t.isSuperior()?o.bumpAwayFrom(t):t.bumpAwayFrom(o)))}}scheduleSnapAndBump(){const e=i.getGroup$$module$build$src$core$events$utils();setTimeout(()=>{i.setGroup$$module$build$src$core$events$utils(e),this.snapToGrid(),i.setGroup$$module$build$src$core$events$utils(!1)},i.config$$module$build$src$core$config.bumpDelay/2),this.bumpNeighbours()}positionNearConnection(e,t){e.type!==Je.NEXT_STATEMENT&&e.type!==Je.INPUT_VALUE||this.moveBy(t.x-e.x,t.y-e.y)}getFirstStatementConnection(){return super.getFirstStatementConnection()}getChildren(e){return super.getChildren(e)}queueRender(){return yg(this)}render(e){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,Te(),this.isEnabled()||this.updateDisabled(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionAndIconLocations(),e!==!1){const t=this.getParent();t?t.render(!0):this.workspace.resizeContents()}Me(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}}renderEfficiently(){this.rendered=!0,Te(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),Me(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const e of this.inputList){const t=e.connection;t&&t.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(au.LOCAL_MARKER).draw();for(const e of this.inputList)for(const t of e.fieldRow)t.updateMarkers_()}updateConnectionAndIconLocations(){const e=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(e),this.outputConnection&&this.outputConnection.moveToOffset(e);for(let t=0;t<this.inputList.length;t++){const o=this.inputList[t].connection;o&&(o.moveToOffset(e),o.isConnected()&&o.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(e),this.nextConnection.isConnected()&&this.nextConnection.tighten());for(const t of this.getIcons())t.onLocationChange(e)}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,t=this.width;var o=this.getNextBlock();if(o){o=o.getHeightWidth();const l=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=o.height-l,t=Math.max(t,o.width)}return{height:e,width:t}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,t){this.pathObject.updateShapeForInputHighlight(e,t)}};an.INLINE=-1,an.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Eu={};Eu.Bubble=ht,Eu.MiniWorkspaceBubble=Vi,Eu.TextBubble=t$,Eu.TextInputBubble=JS;var c0=class{constructor(e,t){this.bubble=e,this.workspace=t,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY()}startBubbleDrag(){i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout&&this.bubble.setAutoLayout(!1),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(e,t){t=this.pixelsToWorkspaceUnits_(t),t=je.sum(this.startXY_,t),this.bubble.moveDuringDrag(t),t=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(e),e=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),e!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==t&&(t&&t.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(e){return e&&this.workspace.getComponentManager().hasCapability(e.id,mr.Capability.DELETE_AREA)?e.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(e,t){this.dragBubble(e,t),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?e=this.startXY_:(e=this.pixelsToWorkspaceUnits_(t),e=je.sum(this.startXY_,e)),this.bubble.moveTo(e.x,e.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.bubble.dispose()):(this.bubble.setDragging&&this.bubble.setDragging(!1),this.fireMoveEvent_()),this.workspace.setResizesEnabled(!0),i.setGroup$$module$build$src$core$events$utils(!1)}fireMoveEvent_(){if(this.bubble instanceof Rr){const e=new(K(li))(this.bubble);e.setOldCoordinate(this.startXY_),e.recordNew(),X(e)}}pixelsToWorkspaceUnits_(e){return e=new je(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}},h0=class{canConnect(e,t,o,l){return this.canConnectWithReason(e,t,o,l)===Tt.CAN_CONNECT}canConnectWithReason(e,t,o,l){const c=this.doSafetyChecks(e,t);return c!==Tt.CAN_CONNECT?c:this.doTypeChecks(e,t)?o&&!this.doDragChecks(e,t,l||0)?Tt.REASON_DRAG_CHECKS_FAILED:Tt.CAN_CONNECT:Tt.REASON_CHECKS_FAILED}getErrorMessage(e,t,o){switch(e){case Tt.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Tt.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Tt.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Tt.REASON_TARGET_NULL:return"Target connection is null.";case Tt.REASON_CHECKS_FAILED:return"Connection checks failed. "+(t+" expected "+t.getCheck()+", found "+o.getCheck());case Tt.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Tt.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Tt.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,t){if(!e||!t)return Tt.REASON_TARGET_NULL;let o,l,c;return e.isSuperior()?(o=e.getSourceBlock(),l=t.getSourceBlock(),c=t):(l=e.getSourceBlock(),o=t.getSourceBlock(),c=e,e=t),o===l?Tt.REASON_SELF_CONNECTION:c.type!==ys[e.type]?Tt.REASON_WRONG_TYPE:o.workspace!==l.workspace?Tt.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!l.isShadow()?Tt.REASON_SHADOW_PARENT:c.type===Je.OUTPUT_VALUE&&l.previousConnection&&l.previousConnection.isConnected()||c.type===Je.PREVIOUS_STATEMENT&&l.outputConnection&&l.outputConnection.isConnected()?Tt.REASON_PREVIOUS_AND_OUTPUT:Tt.CAN_CONNECT}doTypeChecks(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(let o=0;o<e.length;o++)if(t.indexOf(e[o])!==-1)return!0;return!1}doDragChecks(e,t,o){if(e.distanceFrom(t)>o||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case Je.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case Je.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case Je.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case Je.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection||t.targetBlock()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;default:return!1}return fl.indexOf(t)===-1}canConnectToPrevious_(e,t){return e.targetConnection||fl.indexOf(t)!==-1?!1:t.targetConnection?(e=t.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};s(He.CONNECTION_CHECKER,xi,h0);var Ml=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,t){t=this.calculateIndexForYPos(t),this.connections.splice(t,0,e)}findIndexOfConnection(e,t){if(!this.connections.length)return-1;const o=this.calculateIndexForYPos(t);if(o>=this.connections.length)return-1;t=e.y;let l=o;for(;0<=l&&this.connections[l].y===t;){if(this.connections[l]===e)return l;l--}for(l=o;l<this.connections.length&&this.connections[l].y===t;){if(this.connections[l]===e)return l;l++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let t=0,o=this.connections.length;for(;t<o;){const l=Math.floor((t+o)/2);if(this.connections[l].y<e)t=l+1;else if(this.connections[l].y>e)o=l;else{t=l;break}}return t}removeConnection(e,t){if(e=this.findIndexOfConnection(e,t),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,t){function o(Ze){const Vt=c-l[Ze].x,kt=g-l[Ze].y;return Math.sqrt(Vt*Vt+kt*kt)<=t&&xe.push(l[Ze]),kt<t}const l=this.connections,c=e.x,g=e.y;e=0;let L=l.length-2,he=L;for(;e<he;)l[he].y<g?e=he:L=he,he=Math.floor((e+L)/2);const xe=[];if(L=e=he,l.length){for(;0<=e&&o(e);)e--;do L++;while(L<l.length&&o(L))}return xe}isInYRange(e,t,o){return Math.abs(this.connections[e].y-t)<=o}searchForClosest(e,t,o){if(!this.connections.length)return{connection:null,radius:t};const l=e.y,c=e.x;e.x=c+o.x,e.y=l+o.y;var g=this.calculateIndexForYPos(e.y);o=null;let L=t,he,xe=g-1;for(;0<=xe&&this.isInYRange(xe,e.y,t);)he=this.connections[xe],this.connectionChecker.canConnect(e,he,!0,L)&&(o=he,L=he.distanceFrom(e)),xe--;for(;g<this.connections.length&&this.isInYRange(g,e.y,t);)he=this.connections[g],this.connectionChecker.canConnect(e,he,!0,L)&&(o=he,L=he.distanceFrom(e)),g++;return e.x=c,e.y=l,{connection:o,radius:L}}static init(e){const t=[];return t[Je.INPUT_VALUE]=new Ml(e),t[Je.OUTPUT_VALUE]=new Ml(e),t[Je.NEXT_STATEMENT]=new Ml(e),t[Je.PREVIOUS_STATEMENT]=new Ml(e),t}},f$=class extends gs{constructor(e,t,o,l){super(e),this.type=Eo,this.recordUndo=!1,e&&(this.name=t,this.oldValue=o,this.newValue=l)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new f$),t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}};s(He.EVENT,Eo,f$);var p$=class extends gs{constructor(e){super(e),this.type=i.MOVE$$module$build$src$core$events$utils,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new p$),t.oldParentId=e.oldParentId,t.oldInputName=e.oldInputName,e.oldCoordinate&&(o=e.oldCoordinate.split(","),t.oldCoordinate=new je(Number(o[0]),Number(o[1]))),t.newParentId=e.newParentId,t.newInputName=e.newInputName,e.newCoordinate&&(o=e.newCoordinate.split(","),t.newCoordinate=new je(Number(o[0]),Number(o[1]))),e.reason!==void 0&&(t.reason=e.reason),e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}recordNew(){const e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation_(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var t=e.getBlockById(this.blockId);if(!t)throw Error("The block associated with the block move event could not be found");e={};const o=t.getParent();return o?(e.parentId=o.id,(t=o.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&je.equals(this.oldCoordinate,this.newCoordinate)}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var o=t.getBlockById(this.blockId);if(o){var l=e?this.newParentId:this.oldParentId,c=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,l){var g=t.getBlockById(l);if(!g){console.warn("Can't connect to non-existent block: "+l);return}}if(o.getParent()&&o.unplug(),e)c=o.getRelativeToSurfaceXY(),o.moveBy(e.x-c.x,e.y-c.y,this.reason);else{t=o.outputConnection,(!t||o.previousConnection&&o.previousConnection.isConnected())&&(t=o.previousConnection);let L,he;o=(he=t)==null?void 0:he.type,c?(o=g.getInput(c))&&(L=o.connection):o===Je.PREVIOUS_STATEMENT&&(L=g.nextConnection),L&&t?t.connect(L):console.warn("Can't connect to non-existent input: "+c)}}else console.warn("Can't move non-existent block: "+this.blockId)}};s(He.EVENT,i.MOVE$$module$build$src$core$events$utils,p$);var g$=class extends ui{constructor(e,t,o){super(e?e.workspace.id:void 0),this.type=si,e&&(this.blockId=e.id,this.isOpen=t,this.bubbleType=o)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new g$),t.isOpen=e.isOpen,t.bubbleType=e.bubbleType,t.blockId=e.blockId,t}},m$;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(m$||(m$={})),s(He.EVENT,si,g$);var $$=class extends ui{constructor(e,t,o){t=e?e.workspace.id:t,t===null&&(t=void 0),super(t),this.type=Di,this.blockId=e?e.id:void 0,this.targetType=o}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new $$),t.targetType=e.targetType,t.blockId=e.blockId,t}},_$;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(_$||(_$={})),s(He.EVENT,Di,$$);var Io=class extends vl{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=i.getGroup$$module$build$src$core$events$utils(),this.recordUndo=G())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new Io),t.commentId=e.commentId,t}static CommentCreateDeleteHelper(e,t){var o=e.getEventWorkspace_();if(t){if(t=i.createElement$$module$build$src$core$utils$xml("xml"),!e.xml)throw Error("Ecountered a comment event without proper xml");t.appendChild(e.xml),i.domToWorkspace$$module$build$src$core$xml(t,o)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(o=o.getCommentById(e.commentId))?o.dispose():console.warn("Can't uncreate non-existent comment: "+e.commentId)}}},E$=class extends Io{constructor(e,t,o){super(e),this.type=Tl,e&&(this.oldContents_=typeof t>"u"?"":t,this.newContents_=typeof o>"u"?"":o)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new E$),t.oldContents_=e.oldContents,t.newContents_=e.newContents,t}isNull(){return this.oldContents_===this.newContents_}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){var o=e?this.newContents_:this.oldContents_;if(!o)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");t.setContent(o)}else console.warn("Can't change non-existent comment: "+this.commentId)}};s(He.EVENT,Tl,E$);var T$=class extends Io{constructor(e){super(e),this.type=bo,e&&(this.xml=e.toXmlWithXY())}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return e.xml=ni(this.xml),e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new T$),t.xml=i.textToDom$$module$build$src$core$utils$xml(e.xml),t}run(e){Io.CommentCreateDeleteHelper(this,e)}};s(He.EVENT,bo,T$);var v$=class extends Io{constructor(e){super(e),this.type=as,e&&(this.xml=e.toXmlWithXY())}run(e){Io.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return e.xml=ni(this.xml),e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new v$),t.xml=i.textToDom$$module$build$src$core$utils$xml(e.xml),t}};s(He.EVENT,as,v$);var b$=class extends Io{constructor(e){super(e),this.type=li,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new b$),o=e.oldCoordinate.split(","),t.oldCoordinate_=new je(Number(o[0]),Number(o[1])),o=e.newCoordinate.split(","),t.newCoordinate_=new je(Number(o[0]),Number(o[1])),t}isNull(){return je.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var o=t.getRelativeToSurfaceXY();t.moveBy(e.x-o.x,e.y-o.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};s(He.EVENT,li,b$);var y$=class extends ui{constructor(e,t,o,l){let c=e?e.workspace.id:void 0;l&&l.getType()===Pe.types.WORKSPACE&&(c=l.getLocation().id),super(c),this.type=ml,this.blockId=e==null?void 0:e.id,this.oldNode=o||void 0,this.newNode=l,this.isCursor=t}toJson(){const e=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new y$),t.isCursor=e.isCursor,t.blockId=e.blockId,t.oldNode=e.oldNode,t.newNode=e.newNode,t}};s(He.EVENT,ml,y$);var w$=class extends ui{constructor(e,t){super(t),this.type=El,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new w$),t.themeName=e.themeName,t}};s(He.EVENT,El,w$);var S$=class extends ui{constructor(e,t,o){super(o),this.type=_l,this.oldItem=e??void 0,this.newItem=t??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new S$),t.oldItem=e.oldItem,t.newItem=e.newItem,t}};s(He.EVENT,_l,S$);var I$=class extends ui{constructor(e,t){super(t),this.type=$l,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new I$),t.isOpen=e.isOpen,t}};s(He.EVENT,$l,I$);var O$=class extends nu{constructor(e){super(e),this.type=ss,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new O$),t.varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)}};s(He.EVENT,ss,O$);var R$=class extends nu{constructor(e,t){super(e),this.type=gl,e&&(this.oldName=e.name,this.newName=typeof t>"u"?"":t)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new R$),t.oldName=e.oldName,t.newName=e.newName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)}};s(He.EVENT,gl,R$);var k$=class extends ui{constructor(e,t,o,l,c){super(l),this.type=vo,this.viewTop=e,this.viewLeft=t,this.scale=o,this.oldScale=c}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,t,o){return t=super.fromJson(e,t,o??new k$),t.viewTop=e.viewTop,t.viewLeft=e.viewLeft,t.scale=e.scale,t.oldScale=e.oldScale,t}};s(He.EVENT,vo,k$),i.CHANGE$$module$build$src$core$events$utils,i.CREATE$$module$build$src$core$events$utils,i.DELETE$$module$build$src$core$events$utils,i.MOVE$$module$build$src$core$events$utils,i.CHANGE$$module$build$src$core$events$utils,i.CREATE$$module$build$src$core$events$utils,i.DELETE$$module$build$src$core$events$utils,i.MOVE$$module$build$src$core$events$utils,i.disable$$module$build$src$core$events$utils,i.enable$$module$build$src$core$events$utils,i.getGroup$$module$build$src$core$events$utils,i.setGroup$$module$build$src$core$events$utils;var qe={};qe.Abstract=vl,qe.BLOCK_CHANGE=i.CHANGE$$module$build$src$core$events$utils,qe.BLOCK_CREATE=i.CREATE$$module$build$src$core$events$utils,qe.BLOCK_DELETE=i.DELETE$$module$build$src$core$events$utils,qe.BLOCK_DRAG=ls,qe.BLOCK_FIELD_INTERMEDIATE_CHANGE=Eo,qe.BLOCK_MOVE=i.MOVE$$module$build$src$core$events$utils,qe.BUBBLE_OPEN=si,qe.BUMP_EVENTS=yh,qe.BlockBase=gs,qe.BlockChange=ms,qe.BlockCreate=Dm,qe.BlockDelete=Pm,qe.BlockDrag=i$,qe.BlockFieldIntermediateChange=f$,qe.BlockMove=p$,qe.BubbleOpen=g$,qe.BubbleType=m$,qe.CHANGE=i.CHANGE$$module$build$src$core$events$utils,qe.CLICK=Di,qe.COMMENT_CHANGE=Tl,qe.COMMENT_CREATE=bo,qe.COMMENT_DELETE=as,qe.COMMENT_MOVE=li,qe.CREATE=i.CREATE$$module$build$src$core$events$utils,qe.Click=$$,qe.ClickTarget=_$,qe.CommentBase=Io,qe.CommentChange=E$,qe.CommentCreate=T$,qe.CommentDelete=v$,qe.CommentMove=b$,qe.DELETE=i.DELETE$$module$build$src$core$events$utils,qe.FINISHED_LOADING=us,qe.FinishedLoading=PS,qe.MARKER_MOVE=ml,qe.MOVE=i.MOVE$$module$build$src$core$events$utils,qe.MarkerMove=y$,qe.SELECTED=Mi,qe.Selected=Im,qe.THEME_CHANGE=El,qe.TOOLBOX_ITEM_SELECT=_l,qe.TRASHCAN_OPEN=$l,qe.ThemeChange=w$,qe.ToolboxItemSelect=S$,qe.TrashcanOpen=I$,qe.UI=bh,qe.UiBase=ui,qe.VAR_CREATE=To,qe.VAR_DELETE=ss,qe.VAR_RENAME=gl,qe.VIEWPORT_CHANGE=vo,qe.VarBase=nu,qe.VarCreate=ym,qe.VarDelete=O$,qe.VarRename=R$,qe.ViewportChange=k$,qe.clearPendingUndo=ge,qe.disable=i.disable$$module$build$src$core$events$utils,qe.disableOrphans=pe,qe.enable=i.enable$$module$build$src$core$events$utils,qe.filter=re,qe.fire=X,qe.fromJson=Y,qe.get=K,qe.getDescendantIds=A,qe.getGroup=i.getGroup$$module$build$src$core$events$utils,qe.getRecordUndo=G,qe.isEnabled=ue,qe.setGroup=i.setGroup$$module$build$src$core$events$utils,qe.setRecordUndo=J;var Tu=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Mt(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const t=e.blockStyles;for(const o in t)this.blockStyles[o]=this.validatedBlockStyle_(t[o]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=Fe("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.indexOf("auto_")===0?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const t={};return e&&Object.assign(t,e),e=al(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?al(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?al(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t}generateSecondaryColour_(e){return is("#fff",e,.6)||e}generateTertiaryColour_(e){return is("#fff",e,.3)||e}dispose(){this.embossFilter&&P(this.embossFilter),this.disabledPattern&&P(this.disabledPattern),this.debugFilter&&P(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH,o=ul([rt(t,e/4),rt(2*-t,e/2),rt(t,e/4)]);return{height:e,width:t,path:o}}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,o=jr("c",[rt(30,-e),rt(70,-e),rt(t,0)]);return{height:e,width:t,path:o}}makePuzzleTab(){function e(g){g=g?-1:1;const L=-g;var he=o/2;const xe=he+2.5,Ze=he+.5,Vt=rt(-t,g*he);return he=rt(t,g*he),jr("c",[rt(0,g*xe),rt(-t,L*Ze),Vt])+jr("s",[rt(t,2.5*L),he])}const t=this.TAB_WIDTH,o=this.TAB_HEIGHT,l=e(!0),c=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:o,pathDown:c,pathUp:l}}makeNotch(){function e(L){return ul([rt(L*l,o),rt(3*L,0),rt(L*l,-o)])}const t=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,l=(t-3)/2,c=e(1),g=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:o,pathLeft:c,pathRight:g}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Zt("a","0 0,0",e,rt(-e,e)),o=Zt("a","0 0,0",e,rt(e,e));return{width:e,height:e,pathTop:t,pathBottom:o}}makeOutsideCorners(){const e=this.CORNER_RADIUS,t=Mt(0,e)+Zt("a","0 0,1",e,rt(e,-e)),o=Zt("a","0 0,1",e,rt(e,e)),l=Zt("a","0 0,1",e,rt(-e,-e)),c=Zt("a","0 0,1",e,rt(-e,e));return{topLeft:t,topRight:o,bottomRight:c,bottomLeft:l,rightHeight:e}}shapeFor(e){switch(e.type){case Je.INPUT_VALUE:case Je.OUTPUT_VALUE:return this.PUZZLE_TAB;case Je.PREVIOUS_STATEMENT:case Je.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,t,o){this.injectCSS_(t,o),this.defs=O(ve.DEFS,{},e),e=O(ve.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),O(ve.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),t=O(ve.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),O(ve.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},t),O(ve.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),O(ve.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=O(ve.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),O(ve.RECT,{width:10,height:10,fill:"#aaa"},e),O(ve.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const e=O(ve.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),t=O(ve.FECOMPONENTTRANSFER,{result:"outBlur"},e);O(ve.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),O(ve.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),O(ve.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const o=t.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=o:(t=document.createElement("style"),t.id=e,e=document.createTextNode(o),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode=t)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},d0=class extends Tu{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&P(this.selectedGlowFilter),this.replacementGlowFilter&&P(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,o=jr("c",[rt(25,-e),rt(71,-e),rt(t,0)]);return{height:e,width:t,path:o}}makeHexagonal(){function e(o,l,c){var g=o/2;return g=g>t?t:g,c=c?-1:1,o=(l?-1:1)*o/2,oi(-c*g,o)+oi(c*g,o)}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(o){return o/=2,o>t?t:o},height(o){return o},connectionOffsetY(o){return o/2},connectionOffsetX(o){return-o},pathDown(o){return e(o,!1,!1)},pathUp(o){return e(o,!0,!1)},pathRightDown(o){return e(o,!1,!0)},pathRightUp(o){return e(o,!1,!0)}}}makeRounded(){function e(l,c,g){const L=l>o?l-o:0;return l=(l>o?o:l)/2,Zt("a","0 0,1",l,rt((c?-1:1)*l,(c?-1:1)*l))+Ke("v",(g?1:-1)*L)+Zt("a","0 0,1",l,rt((c?1:-1)*l,(c?-1:1)*l))}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*t;return{type:this.SHAPES.ROUND,isDynamic:!0,width(l){return l/=2,l>t?t:l},height(l){return l},connectionOffsetY(l){return l/2},connectionOffsetX(l){return-l},pathDown(l){return e(l,!1,!1)},pathUp(l){return e(l,!0,!1)},pathRightDown(l){return e(l,!1,!0)},pathRightUp(l){return e(l,!1,!0)}}}makeSquared(){function e(o,l,c){return o-=2*t,Zt("a","0 0,1",t,rt((l?-1:1)*t,(l?-1:1)*t))+Ke("v",(c?1:-1)*o)+Zt("a","0 0,1",t,rt((l?1:-1)*t,(l?-1:1)*t))}const t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(o){return t},height(o){return o},connectionOffsetY(o){return o/2},connectionOffsetX(o){return-o},pathDown(o){return e(o,!1,!1)},pathUp(o){return e(o,!0,!1)},pathRightDown(o){return e(o,!1,!0)},pathRightUp(o){return e(o,!1,!0)}}}shapeFor(e){let t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case Je.INPUT_VALUE:case Je.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&t.indexOf("Boolean")!==-1?this.HEXAGONAL:t&&t.indexOf("Number")!==-1?this.ROUNDED:(t&&t.indexOf("String"),this.ROUNDED);case Je.PREVIOUS_STATEMENT:case Je.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(Ze){return jr("c",[rt(Ze*c/2,0),rt(Ze*c*3/4,L/2),rt(Ze*c,L)])+ul([rt(Ze*c,g)])+jr("c",[rt(Ze*c/4,L/2),rt(Ze*c/2,L),rt(Ze*c,L)])+Ke("h",Ze*l)+jr("c",[rt(Ze*c/2,0),rt(Ze*c*3/4,-(L/2)),rt(Ze*c,-L)])+ul([rt(Ze*c,-g)])+jr("c",[rt(Ze*c/4,-(L/2)),rt(Ze*c/2,-L),rt(Ze*c,-L)])}const t=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,l=t/3,c=l/3,g=o/2,L=g/2,he=e(1),xe=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:o,pathLeft:he,pathRight:xe}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Zt("a","0 0,0",e,rt(-e,e)),o=Zt("a","0 0,1",e,rt(-e,e)),l=Zt("a","0 0,0",e,rt(e,e)),c=Zt("a","0 0,1",e,rt(e,e));return{width:e,height:e,pathTop:t,pathBottom:l,rightWidth:e,rightHeight:e,pathTopRight:o,pathBottomRight:c}}generateSecondaryColour_(e){return is("#000",e,.15)||e}generateTertiaryColour_(e){return is("#000",e,.25)||e}createDom(e,t,o){super.createDom(e,t,o),e=O(ve.DEFS,{},e),t=O(ve.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),O(ve.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),o=O(ve.FECOMPONENTTRANSFER,{result:"outBlur"},t),O(ve.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),O(ve.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),O(ve.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter=t,e=O(ve.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),O(ve.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=O(ve.FECOMPONENTTRANSFER,{result:"outBlur"},e),O(ve.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),O(ve.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),O(ve.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),O(ve.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .goog-menuitem,`,`${e}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Hx=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},_e=new Hx,pi=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=_e.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},ws=class extends pi{constructor(e,t){super(e),this.connectionModel=t,this.shape=this.constants_.shapeFor(t),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.type|=_e.CONNECTION}},vu=class{constructor(e,t){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=t.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}hideHiddenIcons_(){Ne("hideHiddenIcons_","v10","v11")}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=Mt(e.xPos,this.info_.startY);for(let o=0,l;l=t[o];o++)_e.isLeftRoundedCorner(l)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:_e.isRightRoundedCorner(l)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:_e.isPreviousConnection(l)&&l instanceof ws?this.outlinePath_+=l.shape.pathLeft:_e.isHat(l)?this.outlinePath_+=this.constants_.START_HAT.path:_e.isSpacer(l)&&(this.outlinePath_+=Ke("h",l.width));this.outlinePath_+=Ke("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+Ke("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const t=e.getLastInput();this.positionExternalValueConnection_(e);const o=xg(t.shape)?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=Ke("H",t.xPos+t.width)+o+Ke("v",e.height-t.connectionHeight)}drawStatementInput_(e){var t=e.getLastInput();if(t){var o=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+Ke("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var l=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=Ke("H",o)+t+Ke("v",l)+this.constants_.INSIDE_CORNERS.pathBottom+Ke("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=Ke("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();let o=0,l="";for(let c=t.length-1,g;g=t[c];c--)_e.isNextConnection(g)&&g instanceof ws?l+=g.shape.pathRight:_e.isLeftSquareCorner(g)?l+=Ke("H",e.xPos):_e.isLeftRoundedCorner(g)?l+=this.constants_.OUTSIDE_CORNERS.bottomLeft:_e.isRightRoundedCorner(g)?(l+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):_e.isSpacer(g)&&(l+=Ke("h",-1*g.width));this.outlinePath_+=Ke("V",e.baseline-o),this.outlinePath_+=l}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const t=e.connectionOffsetY+e.height;e=xg(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=Ke("V",t)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,t;t=this.info_.rows[e];e++)for(let o=0,l;l=t.elements[o];o++)_e.isInlineInput(l)?this.drawInlineInput_(l):(_e.isIcon(l)||_e.isField(l))&&this.layoutField_(l)}layoutField_(e){const t=e.centerline-e.height/2;let o=e.xPos;var l="";this.info_.RTL&&(o=-(o+e.width),e.flipRtl&&(o+=e.width,l="scale(-1 1)")),_e.isIcon(e)?(l=e.icon,l.setOffsetInBlock(new je(o,t)),this.info_.isInsertionMarker&&l.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+o+","+t+")"+l),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const t=e.width,o=e.height,l=e.connectionOffsetY,c=e.connectionHeight+l;this.inlinePath_+=vr(e.xPos+e.connectionWidth,e.centerline-o/2)+Ke("v",l)+e.shape.pathDown+Ke("v",o-c)+Ke("h",t-e.connectionWidth)+Ke("v",-o)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let o=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,t+e.connectionOffsetY)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let o=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,e.yPos)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let o=e.xPos+e.width;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,o=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}},f0=class extends vu{constructor(e,t){super(e,t)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height)){if(_e.isSpacer(e)){const l=e.precedesStatement;var t=e.followsStatement;if(l||t){const c=this.constants_.INSIDE_CORNERS;var o=c.rightHeight;o=e.height-(l?o:0),t=t?c.pathBottomRight:"",e=0<o?Ke("V",e.yPos+o):"",this.outlinePath_+=t+e+(l?c.pathTopRight:"");return}}this.outlinePath_+=Ke("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Mt(e.xPos,this.info_.startY),this.outlinePath_+=Ke("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=Ke("V",e.baseline),this.outlinePath_+=Ke("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const t=e.input.name;if(!e.connectedBlock&&!this.info_.isInsertionMarker){var o=e.width-2*e.connectionWidth;e=vr(e.xPos+e.connectionWidth,e.centerline-e.height/2)+Ke("h",o)+e.shape.pathRightDown(e.height)+Ke("h",-o)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(t,e)}}drawStatementInput_(e){var t=e.getLastInput();const o=t.xPos+t.notchOffset+t.shape.width,l=this.constants_.INSIDE_CORNERS,c=t.shape.pathRight+Ke("h",-(t.notchOffset-l.width))+l.pathTop,g=e.height-2*l.height;t=l.pathBottom+Ke("h",t.notchOffset-l.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=Ke("H",o)+c+Ke("v",g)+t+Ke("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}},Ss=class extends mt{constructor(e,t,o,l,c,g,L){if(super(mt.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",o=Number(zt(o)),t=Number(zt(t)),isNaN(o)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=t)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new At(t,o+Ss.Y_PADDING),this.imageHeight=o,typeof c=="function"&&(this.clickHandler=c),e!==mt.SKIP_SETUP&&(L?this.configure_(L):(this.flipRtl=!!g,this.altText=zt(l)||""),this.setValue(zt(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=zt(e.alt))}initView(){this.imageElement=O(ve.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(En,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(En,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};Ss.Y_PADDING=1,nn("field_image",Ss),Ss.prototype.DEFAULT_VALUE="";var bu=class extends mt{constructor(e,t,o){super(mt.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==mt.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){const e=this.getSourceBlock();if(!e)throw new Qt;if(this.getConstants().FULL_BLOCK_FIELDS){let t=0,o=0;for(let l=0,c;c=e.inputList[l];l++){for(let g=0;c.fieldRow[g];g++)t++;c.connection&&o++}this.fullBlockClickTarget_=1>=t&&e.outputConnection&&!o}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()}doValueInvalid_(e){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&ue()&&X(new(K(i.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){if(this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS){var e=this.sourceBlock_;this.borderRect_?this.borderRect_.setAttribute("stroke",e.style.colourTertiary):e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)}}render_(){if(super.render_(),this.isBeingEdited_){this.resizeEditor_();const e=this.htmlInput_;this.isTextValid_?(Ae(e,"blocklyInvalidInput"),xt(e,Lt.INVALID,!1)):(F(e,"blocklyInvalidInput"),xt(e,Lt.INVALID,!0))}}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,t=!1){this.workspace_=this.sourceBlock_.workspace,!t&&this.workspace_.options.modalInputs&&(Am||xh||bl)?this.showPromptEditor_():this.showInlineEditor_(t)}showPromptEditor_(){f(i.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e))})}showInlineEditor_(e){const t=this.getSourceBlock();if(!t)throw new Qt;Jc(this,t.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new Qt;i.setGroup$$module$build$src$core$events$utils(!0);const t=os();var o=this.getClickTarget_();if(!o)throw Error("A click target has not been set.");F(o,"editing"),o=document.createElement("input"),o.className="blocklyHtmlInput",o.setAttribute("spellcheck",this.spellcheck_);const l=this.workspace_.getScale();var c=this.getConstants().FIELD_TEXT_FONTSIZE*l+"pt";return t.style.fontSize=c,o.style.fontSize=c,c=bu.BORDERRADIUS*l+"px",this.fullBlockClickTarget_&&(c=this.getScaledBBox(),c=(c.bottom-c.top)/2+"px",e=e.getParent()?e.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,o.style.border=1*l+"px solid "+e,t.style.borderRadius=c,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*l+"px")),o.style.borderRadius=c,t.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(o),o}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&ue()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(X(new(K(i.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),i.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=os().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");Ae(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper_=Ye(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Ye(e,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(lt(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(lt(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(e){e.key==="Enter"?(_n(),Mn()):e.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value")),_n(),Mn()):e.key==="Tab"&&(_n(),Mn(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange_(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&ue()&&this.value_!==e&&X(new(K(Eo))(this.sourceBlock_,this.name||null,e,this.value_)),uh().then(()=>{this.resizeEditor_()})}setEditorValue_(e,t=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,t)}resizeEditor_(){var e=this.getSourceBlock();if(!e)throw new Qt;const t=os(),o=this.getScaledBBox();t.style.width=o.right-o.left+"px",t.style.height=o.bottom-o.top+"px",e=new je(e.RTL?o.right-t.offsetWidth:o.left,o.top),t.style.left=e.x+"px",t.style.top=e.y+"px"}repositionForWindowResize(){const e=this.getSourceBlock();return e instanceof an?(hl(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),e),this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};bu.BORDERRADIUS=4;var Dl=class extends bu{constructor(e,t,o){super(e,t,o)}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(zt(e.text),void 0,e)}};nn("field_input",Dl),Dl.prototype.DEFAULT_VALUE="";var yu=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=_e.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(_e.isInput(t))return t}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e];if(_e.isSpacer(t))return t}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(_e.isSpacer(t))return t}return null}},C$=class extends yu{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=_e.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,o=0;for(let l=0;l<this.elements.length;l++){const c=this.elements[l];t+=c.width,_e.isSpacer(c)||(_e.isNextConnection(c)?o=Math.max(o,c.height):e=Math.max(e,c.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Oo=class extends ws{constructor(e,t){super(e,t.connection),this.input=t,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=_e.INPUT,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Jh=class extends Oo{constructor(e,t){super(e,t),this.height=0,this.type|=_e.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},Pl=class extends pi{constructor(e,t,o){super(e),this.field=t,this.parentInput=o,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=_e.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},A$=class extends pi{constructor(e){super(e),this.type|=_e.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},p0=class extends pi{constructor(e,t){super(e),this.icon=t,this.flipRtl=!1,this.isVisible=go(t)&&t.bubbleIsVisible(),this.type|=_e.ICON,e=t.getSize(),this.height=e.height,this.width=e.width}},un=class extends pi{constructor(e,t){super(e),this.type=this.type|_e.SPACER|_e.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},L$=class extends Oo{constructor(e,t){super(e,t),this.type|=_e.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},wu=class extends Oo{constructor(e,t){super(e,t),this.type|=_e.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},N$=class extends yu{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=_e.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let t=0;t<this.elements.length;t++){const o=this.elements[t];this.width+=o.width,_e.isInput(o)&&o instanceof Oo&&(_e.isStatementInput(o)&&o instanceof wu?e+=o.connectedBlockWidth:_e.isExternalInput(o)&&o instanceof Jh&&o.connectedBlockWidth!==0&&(e+=o.connectedBlockWidth-o.connectionWidth)),_e.isSpacer(o)||(this.height=Math.max(this.height,o.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},g0=class extends pi{constructor(e){super(e),this.type|=_e.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},m0=class extends ws{constructor(e,t){super(e,t),this.type|=_e.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},$0=class extends ws{constructor(e,t){super(e,t),this.connectionOffsetX=0,this.type|=_e.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},_0=class extends ws{constructor(e,t){super(e,t),this.type|=_e.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Su=class extends pi{constructor(e,t){super(e),this.type=(t&&t!=="left"?_e.RIGHT_ROUND_CORNER:_e.LEFT_ROUND_CORNER)|_e.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},x$=class extends yu{constructor(e,t,o){super(e),this.height=t,this.width=o,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|_e.SPACER|_e.BETWEEN_ROW_SPACER,this.elements=[new un(this.constants_,o)]}measure(){}},Iu=class extends pi{constructor(e,t){super(e),this.type=(t&&t!=="left"?_e.RIGHT_SQUARE_CORNER:_e.LEFT_SQUARE_CORNER)|_e.CORNER,this.width=this.height=this.constants_.NO_PADDING}},M$=class extends yu{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=_e.TOP_ROW}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,o=e.getPreviousBlock();return!!e.outputConnection||t||(o?o.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,o=0;for(let l=0;l<this.elements.length;l++){const c=this.elements[l];t+=c.width,_e.isSpacer(c)||(_e.isHat(c)&&c instanceof A$?o=Math.max(o,c.ascenderHeight):e=Math.max(e,c.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Bl=class{constructor(e,t){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new $0(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.topRow=new M$(this.constants_),this.bottomRow=new C$(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new N$(this.constants_);this.inputRows.push(e);var t=this.block_.getIcons();for(let o=0,l;l=t[o];o++){const c=new p0(this.constants_,l);this.isCollapsed&&!l.isShownWhenCollapsed()||e.elements.push(c)}t=void 0;for(let o=0,l;l=this.block_.inputList[o];o++)if(l.isVisible()){this.shouldStartNewRow_(l,t)&&(this.rows.push(e),e=new N$(this.constants_),this.inputRows.push(e));for(let c=0,g;g=l.fieldRow[c];c++)e.elements.push(new Pl(this.constants_,g,l));this.addInput_(l,e),t=l}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new g0(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const t=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let o=this.topRow.hasLeftSquareCorner(this.block_)?Iu:Su;this.topRow.elements.push(new o(this.constants_)),t?(e=new A$(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new _0(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof sn&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,o=this.topRow.hasRightSquareCorner(this.block_)?Iu:Su,this.topRow.elements.push(new o(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof sn?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Iu(this.constants_)):this.bottomRow.elements.push(new Su(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new m0(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Iu(this.constants_,"right")):this.bottomRow.elements.push(new Su(this.constants_,"right"))}addInput_(e,t){this.isInline&&e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new L$(this.constants_,e)),t.hasInlineInput=!0):e instanceof sn?(t.elements.push(new wu(this.constants_,e)),t.hasStatement=!0):e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new Jh(this.constants_,e)),t.hasExternalInput=!0):e instanceof di&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),t.align===null&&(t.align=e.align)}shouldStartNewRow_(e,t){return t?e instanceof sn||t instanceof sn?!0:e instanceof i.ValueInput$$module$build$src$core$inputs$value_input||e instanceof di?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,t;t=this.rows[e];e++){const o=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new un(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(let l=0;l<o.length-1;l++){t.elements.push(o[l]);const c=this.getInRowSpacing_(o[l],o[l+1]);t.elements.push(new un(this.constants_,c))}t.elements.push(o[o.length-1]),t.endsWithElemSpacer()&&t.elements.push(new un(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}}getInRowSpacing_(e,t){if(!e&&t&&_e.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&_e.isInput(e)&&!t){if(_e.isExternalInput(e))return this.constants_.NO_PADDING;if(_e.isInlineInput(e))return this.constants_.LARGE_PADDING;if(_e.isStatementInput(e))return this.constants_.NO_PADDING}return e&&_e.isLeftSquareCorner(e)&&t&&(_e.isPreviousConnection(t)||_e.isNextConnection(t))?t.notchOffset:e&&_e.isLeftRoundedCorner(e)&&t&&(_e.isPreviousConnection(t)||_e.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,t=0,o=0;for(let c=0,g;g=this.rows[c];c++){if(g.measure(),t=Math.max(t,g.width),g.hasStatement){var l=g.getLastInput();let L,he;l=g.width-((he=(L=l)==null?void 0:L.width)!=null?he:0),e=Math.max(e,l)}o=Math.max(o,g.widthWithConnectedBlocks)}this.statementEdge=e,this.width=t;for(let c=0,g;g=this.rows[c];c++)g.hasStatement&&(g.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(t,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let t=0,o;o=this.rows[t];t++)if(o.hasStatement)this.alignStatementRow_(o);else{var e=o.width;e=this.getDesiredRowWidth_(o)-e,0<e&&this.addAlignmentPadding_(o,e),_e.isTopOrBottomRow(o)&&(o.widthWithConnectedBlocks=o.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,t){const o=e.getFirstSpacer(),l=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align===i.Align$$module$build$src$core$inputs$align.LEFT&&l)l.width+=t;else if(e.align===i.Align$$module$build$src$core$inputs$align.CENTRE&&o&&l)o.width+=t/2,l.width+=t/2;else if(e.align===i.Align$$module$build$src$core$inputs$align.RIGHT&&o)o.width+=t;else if(l)l.width+=t;else return;e.width+=t}alignStatementRow_(e){const t=e.getLastInput();if(t){var o=e.width-t.width,l=this.statementEdge;o=l-o,0<o&&this.addAlignmentPadding_(e,o),o=e.width,l=this.getDesiredRowWidth_(e),t.width+=l-o,t.height=Math.max(t.height,e.height),e.width+=l-o,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push(e[t]),t!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))}makeSpacerRow_(e,t){var o=this.getSpacerRowHeight_(e,t);const l=this.getSpacerRowWidth_(e,t);return o=new x$(this.constants_,o,l),e.hasStatement&&(o.followsStatement=!0),t.hasStatement&&(o.precedesStatement=!0),o}getSpacerRowWidth_(e,t){return this.width-this.startX}getSpacerRowHeight_(e,t){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){return _e.isSpacer(t)?e.yPos+t.height/2:_e.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,_e.isNextConnection(t)?e+t.height/2:e-t.height/2):_e.isTopRow(e)?_e.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2}recordElemPositions_(e){let t=e.xPos;for(let o=0,l;l=e.elements[o];o++)_e.isSpacer(l)&&(l.height=e.height),l.xPos=t,l.centerline=this.getElemCenterline_(e,l),t+=l.width}finalize_(){let e=0,t=0;for(let o=0,l;l=this.rows[o];o++)l.yPos=t,l.xPos=this.startX,t+=l.height,e=Math.max(e,l.widthWithConnectedBlocks),this.recordElemPositions_(l);if(this.outputConnection&&this.block_.nextConnection){const o=this.block_.nextConnection.targetBlock();o&&(e=Math.max(e,o.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline,this.bottomRow.baseline=t-this.bottomRow.descenderHeight}},E0=class extends C${constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Qh=class extends wu{constructor(e,t){if(super(e,t),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;t=e.getNextBlock();)e=t;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},T0=class extends pi{constructor(e){super(e),this.width=this.height=0,this.type|=_e.getType("RIGHT_CONNECTION")}},v0=class extends M${constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},b0=class extends Bl{constructor(e,t){super(e,t),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new v0(this.constants_),this.bottomRow=new E0(this.constants_),this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=0<t.statementInputCount,this.rightSide=this.outputConnection?new T0(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,t){return t?e instanceof sn||t instanceof sn?!0:e instanceof i.ValueInput$$module$build$src$core$inputs$value_input||e instanceof di?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&_e.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&_e.isLeftRoundedCorner(e)&&t&&(_e.isPreviousConnection(t)||_e.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&_e.isLeftSquareCorner(e)&&t&&_e.isHat(t)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,t){if(_e.isTopRow(e)&&_e.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const o=_e.isInputRow(e)&&e.hasStatement,l=_e.isInputRow(t)&&t.hasStatement;return l||o?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),l&&o?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):_e.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):_e.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,t){const o=this.width-this.startX;return _e.isInputRow(e)&&e.hasStatement||_e.isInputRow(t)&&t.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o}getElemCenterline_(e,t){if(e.hasStatement&&!_e.isSpacer(t)&&!_e.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(_e.isInlineInput(t)&&t instanceof Oo){const o=t.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return e.yPos+o.height/2}return super.getElemCenterline_(e,t)}addInput_(e,t){if(e instanceof di&&t.hasDummyInput&&t.align===i.Align$$module$build$src$core$inputs$align.LEFT&&e.align===i.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(t,e);else if(e instanceof sn){t.elements.push(new Qh(this.constants_,e)),t.hasStatement=!0,t.align===null&&(t.align=e.align);return}super.addInput_(e,t)}addAlignmentPadding_(e,t){if(this.rightAlignedDummyInputs.get(e)){let o;for(let l=0;l<e.elements.length;l++){const c=e.elements[l];if(_e.isSpacer(c)&&(o=c),_e.isField(c)&&c instanceof Pl&&c.parentInput===this.rightAlignedDummyInputs.get(e))break}if(o){o.width+=t,e.width+=t;return}}super.addAlignmentPadding_(e,t)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let t=e;for(let c=2;c<this.rows.length-1;c+=2){var o=this.rows[c-1];const g=this.rows[c];var l=this.rows[c+1];if(o=c===2?!!this.topRow.hasPreviousConnection:!!o.followsStatement,l=c+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!l.precedesStatement,_e.isInputRow(g)&&g.hasStatement){g.measure();let L,he;t=g.width-((he=(L=g.getLastInput())==null?void 0:L.width)!=null?he:0)+e}else if(o&&(c===2||l)&&_e.isInputRow(g)&&!g.hasStatement){l=g.xPos,o=null;for(let L=0;L<g.elements.length;L++){const he=g.elements[L];_e.isSpacer(he)&&(o=he),o&&(_e.isField(he)||_e.isInput(he))&&l<t&&!(_e.isField(he)&&he instanceof Pl&&(he.field instanceof bs||he.field instanceof Ss))&&(o.width+=t-l),l+=he.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var t=0,o=0;o<this.rows.length;o++){const l=this.rows[o];l.yPos=t,t+=l.height}this.height=t,o=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=e.height(o),o=e.width(o),this.outputConnection.height=t,this.outputConnection.width=o,this.outputConnection.startX=o,this.outputConnection.connectionOffsetY=e.connectionOffsetY(t),this.outputConnection.connectionOffsetX=e.connectionOffsetX(o),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=o,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=o,this.width+=o+e,this.widthWithChildren+=o+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,t=0;t<this.rows.length;t++){var o=this.rows[t];if(!_e.isInputRow(o))continue;e=o.elements[o.elements.length-2];let l=this.getNegativeSpacing_(o.elements[1]),c=this.getNegativeSpacing_(e);e=l+c;const g=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<g&&(e=this.width-g,l=e/2,c=e/2),o.elements.unshift(new un(this.constants_,-l)),o.elements.push(new un(this.constants_,-c))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,t=0;t<this.rows.length;t++)o=this.rows[t],_e.isTopOrBottomRow(o)&&(o.elements[1].width-=e),o.width-=e,o.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const t=this.outputConnection.width;var o=this.outputConnection.shape.type;const l=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(o){case l.SHAPES.ROUND:return o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=this.height/2>o?o:this.height/2,t-o*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o)));default:return 0}if(_e.isInlineInput(e)&&e instanceof Oo){const c=e.connectedBlock;return e=c?c.pathObject.outputShapeType:e.shape.type,e==null||c&&c.outputConnection&&(c.statementInputCount||c.nextConnection)||o===l.SHAPES.HEXAGONAL&&o!==e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[o][e]}return _e.isField(e)&&e instanceof Pl?o===l.SHAPES.ROUND&&e.field instanceof Dl?t-2.75*l.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:_e.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let l=2;l<this.rows.length-1;l+=2){const c=this.rows[l-1],g=this.rows[l],L=this.rows[l+1];var e=l===2,t=l+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!L.precedesStatement;if(e?this.topRow.hasPreviousConnection:c.followsStatement){var o=g.elements[1];if(o=g.elements.length===3&&o instanceof Pl&&(o.field instanceof bs||o.field instanceof Ss),!e&&o)c.height-=this.constants_.SMALL_PADDING,L.height-=this.constants_.SMALL_PADDING,g.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!t)c.height+=this.constants_.SMALL_PADDING;else if(t){for(e=!1,t=0;t<g.elements.length;t++)if(o=g.elements[t],o instanceof Oo&&_e.isInlineInput(o)&&o.connectedBlock&&!o.connectedBlock.isShadow()&&40<=o.connectedBlock.getHeightWidth().height){e=!0;break}e&&(c.height-=this.constants_.SMALL_PADDING,L.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},Gx="blocklyCursor",Vx="blocklyMarker",Wx=.75,D$=class{constructor(e,t,o){this.workspace=e,this.marker=o,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=t,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=o.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const e=this.isCursor()?Gx:Vx;return this.svgGroup_=O(ve.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent=e}draw(e,t){if(t){this.constants_=this.workspace.getRenderer().getConstants();var o=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||o,this.applyColour_(t),this.showAtLocation_(t),this.fireMarkerEvent(e,t),e=this.currentMarkerSvg.childNodes[0],e!==void 0&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const t=e.getLocation().type;e.getType()===Pe.types.BLOCK?this.showWithBlock_(e):e.getType()===Pe.types.OUTPUT?this.showWithOutput_(e):t===Je.INPUT_VALUE?this.showWithInput_(e):t===Je.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===Pe.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===Pe.types.FIELD?this.showWithField_(e):e.getType()===Pe.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===Pe.types.STACK&&this.showWithStack_(e)}showWithBlockPrevOutput(e){e=e.getSourceBlock();const t=e.width;var o=e.height,l=o*Wx;const c=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(o=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(t,c,l,o)):e.outputConnection?(l=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(t,o,l)):this.positionBlock_(t,c,l),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput(e)}showWithPrevious_(e){this.showWithBlockPrevOutput(e)}showWithOutput_(e){this.showWithBlockPrevOutput(e)}showWithCoordinates_(e){var t=e.getWsCoordinate();e=t.x,t=t.y,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,t,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){e=e.getLocation();const t=e.getSize().width,o=e.getSize().height;this.positionRect_(0,0,t,o),this.setParent_(e),this.showCurrent_()}showWithInput_(e){e=e.getLocation();const t=e.getSourceBlock();this.positionInput_(e),this.setParent_(t),this.showCurrent_()}showWithNext_(e){var t=e.getLocation();e=t.getSourceBlock();let o=0;t=t.getOffsetInBlock().y;const l=e.getHeightWidth().width;this.workspace.RTL&&(o=-l),this.positionLine_(o,t,l),this.setParent_(e),this.showCurrent_()}showWithStack_(e){e=e.getLocation();var t=e.getHeightWidth();const o=t.width+this.constants_.CURSOR_STACK_PADDING;t=t.height+this.constants_.CURSOR_STACK_PADDING;const l=-this.constants_.CURSOR_STACK_PADDING/2,c=-this.constants_.CURSOR_STACK_PADDING/2;let g=l;this.workspace.RTL&&(g=-(o+l)),this.positionRect_(g,c,o,t),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,t,o){if(e=Mt(-t,o)+Ke("V",-t)+Ke("H",e+2*t)+Ke("V",o),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const t=e.getOffsetInBlock().x,o=e.getOffsetInBlock().y;e=vr(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+t+","+o+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,t,o){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${t}`),this.markerSvgLine_.setAttribute("width",`${o}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,t,o){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=Mt(e,0)+Ke("h",-(e-o.width))+Ke("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+Ke("V",t)+Ke("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,t,o,l){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=Mt(-t,o)+Ke("V",-t)+Ke("H",this.constants_.NOTCH_OFFSET_LEFT)+l.pathLeft+Ke("H",e+2*t)+Ke("V",o),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,t,o,l){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${t}`),this.markerSvgRect_.setAttribute("width",`${o}`),this.markerSvgRect_.setAttribute("height",`${l}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(e,t){const o=t.getSourceBlock();e=new(K(ml))(o,this.isCursor(),e,t),X(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=O(ve.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=O(ve.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=O(ve.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=O(ve.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=O(ve.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const e=this.getBlinkProperties_();O(ve.ANIMATE,e,this.markerSvgLine_),O(ve.ANIMATE,e,this.markerInput_),O(ve.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",e),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&P(this.svgGroup_)}},y0=class extends D${constructor(e,t,o){super(e,t,o),this.markerCircle=null}showWithInputOutput(e){const t=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle(e.x,e.y),this.setParent_(t),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput(e)}showWithInput_(e){this.showWithInputOutput(e)}showWithBlock_(e){e=e.getLocation();const t=e.getHeightWidth();this.positionRect_(0,0,t.width,t.height),this.setParent_(e),this.showCurrent_()}positionCircle(e,t){let o;(o=this.markerCircle)==null||o.setAttribute("cx",`${e}`);let l;(l=this.markerCircle)==null||l.setAttribute("cy",`${t}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=O(ve.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const e=this.getBlinkProperties_();O(ve.ANIMATE,e,this.markerCircle)}return this.markerSvg_}applyColour_(e){super.applyColour_(e);let t;(t=this.markerCircle)==null||t.setAttribute("fill",this.colour_);let o;if((o=this.markerCircle)==null||o.setAttribute("stroke",this.colour_),this.isCursor()){e=this.colour_+";transparent;transparent;";let l;(l=this.markerCircle)==null||l.firstElementChild.setAttribute("values",e)}}},ed=class{constructor(e,t,o){this.markerSvg=this.cursorSvg=null,this.constants=o,this.style=t,this.svgRoot=e,this.svgPath=O(ve.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,t){e&&(t?F(this.svgRoot,e):Ae(this.svgRoot,e))}updateHighlighted(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){}},w0=class extends ed{constructor(e,t,o){super(e,t,o),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=o}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const t=e.getParent();e.isShadow()&&t&&this.svgPath.setAttribute("stroke",t.style.colourTertiary);for(const o of this.outlines.values())o.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,t){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,t){e=this.getOutlinePath(e),e.setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,O(ve.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let t,o;(t=this.outlines.get(e))==null||(o=t.parentNode)==null||o.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},Ou=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Object.assign(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,t){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName())}refreshDom(e,t){const o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new Tu}makeRenderInfo_(e){return new Bl(this,e)}makeDrawer_(e,t){return new vu(e,t)}makeMarkerDrawer(e,t){return new D$(e,this.getConstants(),t)}makePathObject(e,t){return new ed(e,t,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,t,o){return!!Tt.getConnectionForOrphanedConnection(e,o===Je.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}getConnectionPreviewMethod(e,t,o){return t.type===Je.OUTPUT_VALUE||t.type===Je.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(o,e.targetBlock(),t.type)?ln.PREVIEW_TYPE.INSERTION_MARKER:ln.PREVIEW_TYPE.REPLACEMENT_FADE:ln.PREVIEW_TYPE.INSERTION_MARKER}render(e){const t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()}},It={};It.BottomRow=C$,It.Connection=ws,It.ConstantProvider=Tu,It.Drawer=vu,It.ExternalValueInput=Jh,It.Field=Pl,It.Hat=A$,It.Icon=p0,It.InRowSpacer=un,It.InlineInput=L$,It.InputConnection=Oo,It.InputRow=N$,It.JaggedEdge=g0,It.MarkerSvg=D$,It.Measurable=pi,It.NextConnection=m0,It.OutputConnection=$0,It.PathObject=ed,It.PreviousConnection=_0,It.RenderInfo=Bl,It.Renderer=Ou,It.RoundCorner=Su,It.Row=yu,It.SpacerRow=x$,It.SquareCorner=Iu,It.StatementInput=wu,It.TopRow=M$,It.Types=_e,It.init=Mg,It.register=dl,It.unregister=Fw;var S0=class extends Ou{constructor(e){super(e)}makeConstants_(){return new d0}makeRenderInfo_(e){return new b0(this,e)}makeDrawer_(e,t){return new f0(e,t)}makeMarkerDrawer(e,t){return new y0(e,this.getConstants(),t)}makePathObject(e,t){return new w0(e,t,this.getConstants())}getConstants(){return this.constants_}shouldHighlightConnection(e){return e.type!==Je.INPUT_VALUE&&e.type!==Je.OUTPUT_VALUE}getConnectionPreviewMethod(e,t,o){return t.type===Je.OUTPUT_VALUE?e.isConnected()?ln.PREVIEW_TYPE.REPLACEMENT_FADE:ln.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,t,o)}};dl("zelos",S0);var Hn={};Hn.BottomRow=E0,Hn.ConstantProvider=d0,Hn.Drawer=f0,Hn.MarkerSvg=y0,Hn.PathObject=w0,Hn.RenderInfo=b0,Hn.Renderer=S0,Hn.RightConnectionShape=T0,Hn.StatementInput=Qh,Hn.TopRow=v0,Zg();var Pr={};Pr.registerCleanup=Bg,Pr.registerCollapse=Ug,Pr.registerCollapseExpandBlock=Xg,Pr.registerComment=jg,Pr.registerDefaultOptions=Zg,Pr.registerDelete=Kg,Pr.registerDeleteAll=Vg,Pr.registerDisable=Yg,Pr.registerDuplicate=Wg,Pr.registerExpand=Hg,Pr.registerHelp=qg,Pr.registerInline=zg,Pr.registerRedo=Pg,Pr.registerUndo=Dg;var I0=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},td=class extends I0{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e,t){return e instanceof an?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e&&!t)):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},pt=class extends bu{constructor(e,t,o){super(mt.SKIP_SETUP),this.clockwise=pt.CLOCKWISE,this.offset=pt.OFFSET,this.wrap=pt.WRAP,this.round=pt.ROUND,this.boundEvents=[],this.symbol_=this.gauge=this.line=null,e!==mt.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),t&&this.setValidator(t))}configure_(e){switch(super.configure_(e),e.mode){case rd.COMPASS:this.clockwise=!0,this.offset=90;break;case rd.PROTRACTOR:this.clockwise=!1,this.offset=0}e.clockwise&&(this.clockwise=e.clockwise),e.offset&&(this.offset=e.offset),e.wrap&&(this.wrap=e.wrap),e.round&&(this.round=e.round)}initView(){super.initView(),this.symbol_=O(ve.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph()}showEditor_(e){super.showEditor_(e,Am||xh||bl),e=this.dropdownCreate(),ol().appendChild(e),this.sourceBlock_ instanceof an&&jc(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),Va(this,this.dropdownDispose.bind(this)),this.updateGraph()}dropdownCreate(){const e=O(ve.SVG,{xmlns:Oh,"xmlns:html":Pi,"xmlns:xlink":En,version:"1.1",height:2*pt.HALF+"px",width:2*pt.HALF+"px",style:"touch-action: none"}),t=O(ve.CIRCLE,{cx:pt.HALF,cy:pt.HALF,r:pt.RADIUS,class:"blocklyAngleCircle"},e);this.gauge=O(ve.PATH,{class:"blocklyAngleGauge"},e),this.line=O(ve.LINE,{x1:pt.HALF,y1:pt.HALF,class:"blocklyAngleLine"},e);for(let o=0;360>o;o+=15)O(ve.LINE,{x1:pt.HALF+pt.RADIUS,y1:pt.HALF,x2:pt.HALF+pt.RADIUS-(o%45===0?10:5),y2:pt.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+pt.HALF+","+pt.HALF+")"},e);return this.boundEvents.push(Ye(e,"click",this,this.hide)),this.boundEvents.push(Ye(t,"pointerdown",this,this.onMouseMove_,!0)),this.boundEvents.push(Ye(t,"pointermove",this,this.onMouseMove_,!0)),e}dropdownDispose(){for(const e of this.boundEvents)lt(e);this.boundEvents.length=0,this.line=this.gauge=null}hide(){sl(this),_n()}onMouseMove_(e){var t=this.gauge.ownerSVGElement.getBoundingClientRect();const o=e.clientX-t.left-pt.HALF;e=e.clientY-t.top-pt.HALF,t=Math.atan(-e/o),isNaN(t)||(t=Ap(t),0>o?t+=180:0<e&&(t+=360),t=this.clockwise?this.offset+360-t:360-(this.offset-t),this.displayMouseOrKeyboardValue(t))}displayMouseOrKeyboardValue(e){if(this.round&&(e=Math.round(e/this.round)*this.round),e=this.wrapValue(e),e!==this.value_){const t=this.value_;this.setEditorValue_(e,!1),this.sourceBlock_&&ue()&&this.value_!==t&&X(new(K(Eo))(this.sourceBlock_,this.name||null,t,this.value_))}}updateGraph(){if(this.gauge&&this.line){var e=Number(this.getText())+this.offset,t=nl(e%360);e=["M ",pt.HALF,",",pt.HALF];var o=pt.HALF,l=pt.HALF;if(!isNaN(t)){const c=Number(this.clockwise),g=nl(this.offset),L=Math.cos(g)*pt.RADIUS,he=Math.sin(g)*-pt.RADIUS;c&&(t=2*g-t),o+=Math.cos(t)*pt.RADIUS,l-=Math.sin(t)*pt.RADIUS,t=Math.abs(Math.floor((t-g)/Math.PI)%2),c&&(t=1-t),e.push(" l ",L,",",he," A ",pt.RADIUS,",",pt.RADIUS," 0 ",t," ",c," ",o,",",l," z")}this.gauge.setAttribute("d",e.join("")),this.line.setAttribute("x2",`${o}`),this.line.setAttribute("y2",`${l}`)}}onHtmlInputKeyDown_(e){super.onHtmlInputKeyDown_(e);var t=this.getSourceBlock();if(!t)throw new Qt;let o=0;switch(e.key){case"ArrowLeft":o=t.RTL?1:-1;break;case"ArrowRight":o=t.RTL?-1:1;break;case"ArrowDown":o=-1;break;case"ArrowUp":o=1}o&&(t=this.getValue(),this.displayMouseOrKeyboardValue(t+o*this.round),e.preventDefault(),e.stopPropagation())}doClassValidation_(e){return e=Number(e),isNaN(e)||!isFinite(e)?null:this.wrapValue(e)}wrapValue(e){return e%=360,0>e&&(e+=360),e>this.wrap&&(e-=360),e}static fromJson(e){return new this(e.angle,void 0,e)}};pt.HALF=50,pt.RADIUS=pt.HALF-1,pt.CLOCKWISE=!1,pt.OFFSET=0,pt.WRAP=360,pt.ROUND=15,nn("field_angle",pt),pt.prototype.DEFAULT_VALUE=0,xr(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: 0.8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: 0.8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`);var rd;(function(e){e.COMPASS="compass",e.PROTRACTOR="protractor"})(rd||(rd={}));var Is=class extends mt{constructor(e,t,o){super(mt.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=Is.CHECK_CHAR,e!==mt.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(Is);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();F(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||Is.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool_(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};Is.CHECK_CHAR="",nn("field_checkbox",Is),Is.prototype.DEFAULT_VALUE=!1;var cn=class extends mt{constructor(e,t,o){super(mt.SKIP_SETUP),this.highlightedIndex=this.picker=null,this.boundEvents=[],this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles=this.colours=null,this.columns=0,e!==mt.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.colourOptions&&(this.colours=e.colourOptions),e.colourTitles&&(this.titles=e.colourTitles),e.columns&&(this.columns=e.columns)}initView(){this.size_=new At(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof an&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()):(this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1")}applyColour(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof an&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())}doClassValidation_(e){return typeof e!="string"?null:mo(e)}doValueUpdate_(e){this.value_=e,this.borderRect_?this.borderRect_.style.fill=e:this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_ instanceof an&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",e),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))}getText(){let e=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(e)&&(e="#"+e[1]+e[3]+e[5]),e}setColours(e,t){return this.colours=e,t&&(this.titles=t),this}setColumns(e){return this.columns=e,this}showEditor_(){this.dropdownCreate(),ol().appendChild(this.picker),Va(this,this.dropdownDispose.bind(this)),this.picker.focus({preventScroll:!0})}onClick(e){e=(e=e.target)&&e.getAttribute("data-colour"),e!==null&&(this.setValue(e),sl(this))}onKeyDown(e){let t=!0;var o;switch(e.key){case"ArrowUp":this.moveHighlightBy(0,-1);break;case"ArrowDown":this.moveHighlightBy(0,1);break;case"ArrowLeft":this.moveHighlightBy(-1,0);break;case"ArrowRight":this.moveHighlightBy(1,0);break;case"Enter":(o=this.getHighlighted())&&(o=o.getAttribute("data-colour"),o!==null&&this.setValue(o)),Mn();break;default:t=!1}t&&e.stopPropagation()}moveHighlightBy(e,t){if(this.highlightedIndex){var o=this.colours||cn.COLOURS,l=this.columns||cn.COLUMNS,c=this.highlightedIndex%l,g=Math.floor(this.highlightedIndex/l);c+=e,g+=t,0>e?0>c&&0<g?(c=l-1,g--):0>c&&(c=0):0<e?c>l-1&&g<Math.floor(o.length/l)-1?(c=0,g++):c>l-1&&c--:0>t?0>g&&(g=0):0<t&&g>Math.floor(o.length/l)-1&&(g=Math.floor(o.length/l)-1),this.setHighlightedCell(this.picker.childNodes[g].childNodes[c],g*l+c)}}onMouseMove(e){const t=(e=e.target)&&Number(e.getAttribute("data-index"));t!==null&&t!==this.highlightedIndex&&this.setHighlightedCell(e,t)}onMouseEnter(){let e;(e=this.picker)==null||e.focus({preventScroll:!0})}onMouseLeave(){var e;(e=this.picker)==null||e.blur(),(e=this.getHighlighted())&&Ae(e,"blocklyColourHighlighted")}getHighlighted(){if(!this.highlightedIndex)return null;const e=this.columns||cn.COLUMNS,t=this.picker.childNodes[Math.floor(this.highlightedIndex/e)];return t?t.childNodes[this.highlightedIndex%e]:null}setHighlightedCell(e,t){const o=this.getHighlighted();o&&Ae(o,"blocklyColourHighlighted"),F(e,"blocklyColourHighlighted"),this.highlightedIndex=t,(e=e.getAttribute("id"))&&this.picker&&xt(this.picker,Lt.ACTIVEDESCENDANT,e)}dropdownCreate(){const e=this.columns||cn.COLUMNS,t=this.colours||cn.COLOURS,o=this.titles||cn.TITLES,l=this.getValue(),c=document.createElement("table");c.className="blocklyColourTable",c.tabIndex=0,c.dir="ltr",Dn(c,Kr.GRID),xt(c,Lt.EXPANDED,!0),xt(c,Lt.ROWCOUNT,Math.floor(t.length/e)),xt(c,Lt.COLCOUNT,e);let g;for(let L=0;L<t.length;L++){L%e===0&&(g=document.createElement("tr"),Dn(g,Kr.ROW),c.appendChild(g));const he=document.createElement("td");g.appendChild(he),he.setAttribute("data-colour",t[L]),he.title=o[L]||t[L],he.id=we(),he.setAttribute("data-index",`${L}`),Dn(he,Kr.GRIDCELL),xt(he,Lt.LABEL,t[L]),xt(he,Lt.SELECTED,t[L]===l),he.style.backgroundColor=t[L],t[L]===l&&(he.className="blocklyColourSelected",this.highlightedIndex=L)}this.boundEvents.push(Ye(c,"pointerdown",this,this.onClick,!0)),this.boundEvents.push(Ye(c,"pointermove",this,this.onMouseMove,!0)),this.boundEvents.push(Ye(c,"pointerenter",this,this.onMouseEnter,!0)),this.boundEvents.push(Ye(c,"pointerleave",this,this.onMouseLeave,!0)),this.boundEvents.push(Ye(c,"keydown",this,this.onKeyDown,!1)),this.picker=c}dropdownDispose(){for(const e of this.boundEvents)lt(e);this.boundEvents.length=0,this.highlightedIndex=this.picker=null}static fromJson(e){return new this(e.colour,void 0,e)}};cn.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),cn.TITLES=[],cn.COLUMNS=7,cn.prototype.DEFAULT_VALUE=cn.COLOURS[0],nn("field_colour",cn),xr(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: 0.5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`);var O0=class extends bs{constructor(e,t,o){super(String(e??""),t,o),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(zt(e.text),void 0,e)}};nn("field_label_serializable",O0);var P$=class extends Dl{constructor(e,t,o){super(mt.SKIP_SETUP),this.textGroup=null,this.maxLines_=1/0,this.isOverflowedY_=!1,e!==mt.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.maxLines&&this.setMaxLines(e.maxLines)}toXml(e){return e.textContent=this.getValue().replace(/\n/g,"&#10;"),e}fromXml(e){this.setValue(e.textContent.replace(/&#10;/g,`
`))}saveState(){const e=this.saveLegacyState(P$);return e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(mt,e)||this.setValue(e)}initView(){this.createBorderRect_(),this.textGroup=O(ve.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const e=this.getSourceBlock();if(!e)throw new Qt;let t=this.getText();if(!t)return mt.NBSP;const o=t.split(`
`);t="";const l=this.isOverflowedY_?this.maxLines_:o.length;for(let c=0;c<l;c++){let g=o[c];g.length>this.maxDisplayLength?g=g.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&c===l-1&&(g=g.substring(0,g.length-3)+"..."),g=g.replace(/\s/g,mt.NBSP),t+=g,c!==l-1&&(t+=`
`)}return e.RTL&&(t+=""),t}doValueUpdate_(e){super.doValueUpdate_(e),this.value_!==null&&(this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_)}render_(){var e=this.getSourceBlock();if(!e)throw new Qt;for(var t,o=this.textGroup;t=o.firstChild;)o.removeChild(t);t=this.getDisplayText_().split(`
`);let l=0;for(let c=0;c<t.length;c++){const g=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;O(ve.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:l+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},o).appendChild(document.createTextNode(t[c])),l+=g}this.isBeingEdited_&&(o=this.htmlInput_,this.isOverflowedY_?F(o,"blocklyHtmlTextAreaInputOverflowedY"):Ae(o,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(e.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(Ae(e,"blocklyInvalidInput"),xt(e,Lt.INVALID,!1)):(F(e,"blocklyInvalidInput"),xt(e,Lt.INVALID,!0)))}updateSize_(){var e=this.textGroup.childNodes;const t=this.getConstants().FIELD_TEXT_FONTSIZE,o=this.getConstants().FIELD_TEXT_FONTWEIGHT,l=this.getConstants().FIELD_TEXT_FONTFAMILY;let c=0,g=0;for(var L=0;L<e.length;L++){var he=be(e[L],t,o,l);he>c&&(c=he),g+=this.getConstants().FIELD_TEXT_HEIGHT+(0<L?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(e=String(this.value_).split(`
`),L=O(ve.TEXT,{class:"blocklyText blocklyMultilineText"}),he=0;he<e.length;he++){e[he].length>this.maxDisplayLength&&(e[he]=e[he].substring(0,this.maxDisplayLength)),L.textContent=e[he];const xe=be(L,t,o,l);xe>c&&(c=xe)}c+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(g+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,c+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",`${c}`),this.borderRect_.setAttribute("height",`${g}`)),this.size_.width=c,this.size_.height=g,this.positionBorderRect_()}showEditor_(e,t){super.showEditor_(e,t),this.forceRerender()}widgetCreate_(){const e=os(),t=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",String(this.spellcheck_));var l=this.getConstants().FIELD_TEXT_FONTSIZE*t+"pt";e.style.fontSize=l,o.style.fontSize=l,o.style.borderRadius=Dl.BORDERRADIUS*t+"px",l=this.getConstants().FIELD_BORDER_RECT_X_PADDING*t;const c=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*t/2;return o.style.padding=c+"px "+l+"px "+c+"px "+l+"px",l=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=l*t+"px",e.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.setAttribute("data-untyped-default-value",String(this.value_)),o.setAttribute("data-old-value",""),km?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o}setMaxLines(e){typeof e=="number"&&0<e&&e!==this.maxLines_&&(this.maxLines_=e,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(e){e.key!=="Enter"&&super.onHtmlInputKeyDown_(e)}static fromJson(e){return new this(zt(e.text),void 0,e)}};nn("field_multilinetext",P$),xr(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`);var B$=class extends bu{constructor(e,t,o,l,c,g){super(mt.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==mt.SKIP_SETUP&&(g?this.configure_(g):this.setConstraints(t,o,l),this.setValue(e),c&&this.setValidator(c))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,t,o){this.setMinInternal(e),this.setMaxInternal(t),this.setPrecisionInternal(o),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let t=String(this.precision_);t.indexOf("e")!==-1&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const o=t.indexOf(".");this.decimalPlaces=o===-1?e?0:null:t.length-o-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&(e.min=`${this.min_}`,xt(e,Lt.VALUEMIN,this.min_)),1/0>this.max_&&(e.max=`${this.max_}`,xt(e,Lt.VALUEMAX,this.max_)),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};nn("field_number",B$),B$.prototype.DEFAULT_VALUE=0;var Ru=class extends hi{constructor(e,t,o,l,c){super(mt.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=Ru.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new At(0,0),e!==mt.SKIP_SETUP&&(c?this.configure_(c):this.setTypes(o,l),t&&this.setValidator(t))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new Qt;this.variable||(e=i.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new Qt;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var t=this.getSourceBlock();if(!t)throw new Qt;const o=e.getAttribute("id"),l=e.textContent,c=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=i.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,o,l,c),c!==null&&c!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+ni(e)+".");this.setValue(t.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.name,this.variable.type&&e.setAttribute("variabletype",this.variable.type),e}saveState(e){var t=this.saveLegacyState(Ru);return t!==null||(this.initModel(),t={id:this.variable.getId()},e&&(t.name=this.variable.name,t.type=this.variable.type)),t}loadState(e){const t=this.getSourceBlock();if(!t)throw new Qt;this.loadLegacyState(Ru,e)||(e=i.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var t=this.getSourceBlock();if(!t)throw new Qt;return t=i.getVariable$$module$build$src$core$variables(t.workspace,e),t?(t=t.type,this.typeIsAllowed(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const t=this.getSourceBlock();if(!t)throw new Qt;this.variable=i.getVariable$$module$build$src$core$variables(t.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const t=this.getVariableTypes();if(!t)return!0;for(let o=0;o<t.length;o++)if(e===t[o])return!0;return!1}getVariableTypes(){var e=this.variableTypes;if(e===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(e=e||[""],e.length===0)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes(e=null,t=""){if(Array.isArray(e)){let o=!1;for(let l=0;l<e.length;l++)e[l]===t&&(o=!0);if(!o)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}else if(e!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=t,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,t){if(e=t.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===a$){i.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===u$){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(zt(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var o=this.getVariableTypes(),l=0;l<o.length;l++){const c=this.sourceBlock_.workspace.getVariablesOfType(o[l]);t=t.concat(c)}for(t.sort(iu.compareByName),o=[],l=0;l<t.length;l++)o[l]=[t[l].name,t[l].getId()];return o.push([i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,a$]),i.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&o.push([i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),u$]),o}};nn("field_variable",Ru);var Gn=class{constructor(e,t,o,l){this.workspace=e,this.targetWorkspace=t,this.isLabel_=l,this.onMouseUpWrapper=null,this.height=this.width=0,this.svgText=this.svgGroup=null,this.text=o.text,this.position=new je(0,0),this.callbackKey=o.callbackKey||o.callbackkey,this.cssClass=o["web-class"]||null,this.info=o}createDom(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(e+=" "+this.cssClass),this.svgGroup=O(ve.G,{class:e},this.workspace.getCanvas());let t;this.isLabel_||(t=O(ve.RECT,{class:"blocklyFlyoutButtonShadow",rx:Gn.BORDER_RADIUS,ry:Gn.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=O(ve.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Gn.BORDER_RADIUS,ry:Gn.BORDER_RADIUS},this.svgGroup);const o=O(ve.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var l=zt(this.text);this.workspace.RTL&&(l+=""),o.textContent=l,this.isLabel_&&(this.svgText=o,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const c=ri(o,"fontSize"),g=ri(o,"fontWeight"),L=ri(o,"fontFamily");if(this.width=De(o,c,g,L),l=Fe(l,c,g,L),this.height=l.height,!this.isLabel_){this.width+=2*Gn.TEXT_MARGIN_X,this.height+=2*Gn.TEXT_MARGIN_Y;let he;(he=t)==null||he.setAttribute("width",String(this.width));let xe;(xe=t)==null||xe.setAttribute("height",String(this.height))}return e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),o.setAttribute("x",String(this.width/2)),o.setAttribute("y",String(this.height/2-l.height/2+l.baseline)),this.updateTransform(),this.onMouseUpWrapper=Ye(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,t){this.position.x=e,this.position.y=t,this.updateTransform()}isLabel(){return this.isLabel_}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper&&lt(this.onMouseUpWrapper),this.svgGroup&&P(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isLabel_&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isLabel_||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isLabel_||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};Gn.TEXT_MARGIN_X=5,Gn.TEXT_MARGIN_Y=2,Gn.BORDER_RADIUS=4,xr(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var F$=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let t=0,o=0;return e&&(t=e.getWidth(),o=e.getHeight()),new At(t,o)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0;const t=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),l=!!this.workspace_.getToolbox(),c=!!this.workspace_.getFlyout(!0);var g=l?t.position:o.position,L=g===at.LEFT;return g=g===at.TOP,l&&L?e=t.width:c&&L&&(e=o.width),L=0,l&&g?L=t.height:c&&g&&(L=o.height),{top:L,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const t=this.getSvgMetrics(),o=this.getToolboxMetrics(),l=this.getFlyoutMetrics(!0),c=this.workspace_.getToolbox()?o.position:l.position;return this.workspace_.getToolbox()?c===at.TOP||c===at.BOTTOM?t.height-=o.height:(c===at.LEFT||c===at.RIGHT)&&(t.width-=o.width):this.workspace_.getFlyout(!0)&&(c===at.TOP||c===at.BOTTOM?t.height-=l.height:(c===at.LEFT||c===at.RIGHT)&&(t.width-=l.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const t=this.workspace_.isMovableHorizontally(),o=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const l={};return o||(l.top=e.top,l.bottom=e.top+e.height),t||(l.left=e.left,l.right=e.left+e.width),l}getPaddedContent_(e,t){const o=t.top+t.height,l=t.left+t.width,c=e.width;e=e.height;const g=c/2,L=e/2;return{top:Math.min(t.top-L,o-e),bottom:Math.max(o+L,t.top+e),left:Math.min(t.left-g,l-c),right:Math.max(l+g,t.left+c)}}getScrollMetrics(e,t,o){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var l=o||this.getContentMetrics();o=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,l),l=o.top!==void 0?o.top:t.top;const c=o.left!==void 0?o.left:t.left;return{top:l/e,left:c/e,width:((o.right!==void 0?o.right:t.right)-c)/e,height:((o.bottom!==void 0?o.bottom:t.bottom)-l)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),o=this.getSvgMetrics(),l=this.getAbsoluteMetrics(),c=this.getViewMetrics(),g=this.getContentMetrics(),L=this.getScrollMetrics(!1,c,g);return{contentHeight:g.height,contentWidth:g.width,contentTop:g.top,contentLeft:g.left,scrollHeight:L.height,scrollWidth:L.width,scrollTop:L.top,scrollLeft:L.left,viewHeight:c.height,viewWidth:c.width,viewTop:c.top,viewLeft:c.left,absoluteTop:l.top,absoluteLeft:l.left,svgHeight:o.height,svgWidth:o.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}}};s(He.METRICS_MANAGER,xi,F$);var R0=class extends F${constructor(e,t){super(e),this.flyout_=t}getBoundingBox_(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const t=this.getBoundingBox_();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}}getScrollMetrics(e,t,o){return t=o||this.getContentMetrics(),o=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*o)/e,width:(t.width+t.left+o)/e,top:0,left:0}}},U$=class{constructor(e,t,o,l,c){this.workspace=e,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,t=t===void 0?!0:t,o=o===void 0?!0:o;const g=t&&o;t&&(this.hScroll=new er(e,!0,g,l,c)),o&&(this.vScroll=new er(e,!1,g,l,c)),g&&(this.corner_=O(ve.RECT,{height:er.scrollbarThickness,width:er.scrollbarThickness,class:"blocklyScrollbarBackground"}),v(this.corner_,e.getBubbleCanvas()))}dispose(){P(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var t=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===e.viewWidth&&this.oldHostMetrics_.viewHeight===e.viewHeight&&this.oldHostMetrics_.absoluteTop===e.absoluteTop&&this.oldHostMetrics_.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===e.scrollWidth&&this.oldHostMetrics_.viewLeft===e.viewLeft&&this.oldHostMetrics_.scrollLeft===e.scrollLeft||(t=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===e.scrollHeight&&this.oldHostMetrics_.viewTop===e.viewTop&&this.oldHostMetrics_.scrollTop===e.scrollTop||(o=!0)):o=t=!0,t||o){try{i.disable$$module$build$src$core$events$utils(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&o&&this.vScroll.resize(e)}finally{i.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==e.viewWidth||this.oldHostMetrics_.absoluteLeft!==e.absoluteLeft){let l;(l=this.corner_)==null||l.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==e.viewHeight||this.oldHostMetrics_.absoluteTop!==e.absoluteTop){let l;(l=this.corner_)==null||l.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)}set(e,t,o){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(o||o===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},k0=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new je(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){m()&&m().unselect()}endDrag(e){this.drag(e)}drag(e){if(e=je.sum(this.startScrollXY_,e),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},jx=5,zx=6,Yi=class{constructor(e,t){this.creatorWorkspace=t,this.mouseDownXY=new je(0,0),this.startWorkspace_=this.targetBlock=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.flyout=this.workspaceDragger=this.blockDragger=this.bubbleDragger=null,this.isMultiTouch_=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new je(0,0),this.healStack=!l0}dispose(){Ue(),Qp(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)lt(e);this.boundEvents.length=0,this.blockDragger&&this.blockDragger.dispose(),this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const t=new je(e.clientX,e.clientY);this.updateDragDelta(t)&&(this.updateIsDragging(),Le()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=je.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=je.magnitude(this.currentDragDeltaXY)>(this.flyout?i.config$$module$build$src$core$config.flyoutDragRadius:i.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),this.targetBlock.select(),!0):!1}updateIsDraggingBubble(){return this.startBubble?(this.startDraggingBubble(),!0):!1}updateIsDraggingBlock(){if(!this.targetBlock)return!1;if(this.flyout){if(this.updateIsDraggingFromFlyout())return this.startDraggingBlock(),!0}else if(this.targetBlock.isMovable())return this.startDraggingBlock(),!0;return!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger=new k0(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(){if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.updateIsDraggingBubble()||this.updateIsDraggingBlock()||this.updateIsDraggingWorkspace()}startDraggingBlock(){this.blockDragger=new(y(He.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock,this.startWorkspace_),this.blockDragger.startDrag(this.currentDragDeltaXY,this.healStack),this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY)}startDraggingBubble(){if(!this.startBubble)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger=new c0(this.startBubble,this.startWorkspace_),this.bubbleDragger.startBubbleDrag(),this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,pr(e)?this.cancel():(this.gestureHasStarted=!0,cl(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=xp(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,Jp(),this.targetBlock&&this.targetBlock.select(),Nt(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&Ee(e,this),this.mouseDownXY=new je(e.clientX,e.clientY),this.healStack=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(Ye(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(Ye(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(Ye(document,"pointerup",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&Le())}handleMove(e){this.isDragging()&&tt(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.blockDragger?this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY):this.bubbleDragger&&this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),Le())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!tt(e))return;if(this.updateFromEvent(e),Le(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger?this.bubbleDragger.endBubbleDrag(e,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(e,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()?this.doBubbleClick():this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e)}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var t=gt(e);this.cachedPoints.set(t,this.getTouchPoint(e));var o=Array.from(this.cachedPoints.keys());o.length===2&&(t=this.cachedPoints.get(o[0]),o=this.cachedPoints.get(o[1]),this.startDistance=je.distance(t,o),this.isMultiTouch_=!0,e.preventDefault())}handleTouchMove(e){const t=gt(e);this.cachedPoints.set(t,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):this.handleMove(e)}handlePinch(e){var t=Array.from(this.cachedPoints.keys()),o=this.cachedPoints.get(t[0]);if(t=this.cachedPoints.get(t[1]),o=je.distance(o,t)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(t=o-this.previousScale,t=0<t?t*jx:t*zx,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const l=this.startWorkspace_,c=Tr(e,l.getParentSvg(),l.getInverseScreenCTM());l.zoom(c.x,c.y,t)}this.previousScale=o,e.preventDefault()}handleTouchEnd(e){e=gt(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new je(e.pageX,e.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(Le(),this.bubbleDragger?this.bubbleDragger.endBubbleDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(t),this.mostRecentEvent=e,this.doStart(e)}fireWorkspaceClick(e){X(new(K(Di))(null,e.id,"workspace"))}handleFlyoutStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(t),this.handleWsStart(e,t.getWorkspace())}handleBlockStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent=e}handleBubbleStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent=e}doBubbleClick(){this.startBubble instanceof Rr&&(this.startBubble.setFocus(),this.startBubble.select())}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock.isEnabled()&&(i.getGroup$$module$build$src$core$events$utils()||i.setGroup$$module$build$src$core$events$utils(!0),this.flyout.createBlock(this.targetBlock).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const e=new(K(Di))(this.startBlock,this.startWorkspace_.id,"block");X(e)}this.bringBlockToFront(),i.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){e=this.creatorWorkspace,m()&&m().unselect(),this.fireWorkspaceClick(this.startWorkspace_||e)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):this.targetBlock=e}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return(this.startField?this.startField.isClickable():!1)&&!this.hasExceededDragRadius&&(!this.flyout||!this.flyout.autoClose)}isIconClick(){return!!this.startIcon&&!this.hasExceededDragRadius}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}isDragging(){return!!this.workspaceDragger||!!this.blockDragger||!!this.bubbleDragger}hasStarted(){return this.gestureHasStarted}getInsertionMarkers(){return this.blockDragger?this.blockDragger.getInsertionMarkers():[]}getCurrentDragger(){let e,t;return(t=(e=this.blockDragger)!=null?e:this.workspaceDragger)!=null?t:this.bubbleDragger}static inProgress(){const e=x();for(let t=0,o;o=e[t];t++)if(o.currentGesture_)return!0;return!1}},H$=class{constructor(e,t){this.pattern=e;let o;this.spacing=(o=t.spacing)!=null?o:0;let l;this.length=(l=t.length)!=null?l:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let c;this.snapToGrid=(c=t.snap)!=null?c:!1}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(e){var t=this.spacing*e;this.pattern.setAttribute("width",`${t}`),this.pattern.setAttribute("height",`${t}`),t=Math.floor(this.spacing/2)+.5;let o=t-this.length/2,l=t+this.length/2;t*=e,o*=e,l*=e,this.setLineAttributes(this.line1,e,o,l,t,t),this.setLineAttributes(this.line2,e,t,t,o,l)}setLineAttributes(e,t,o,l,c,g){e&&(e.setAttribute("stroke-width",`${t}`),e.setAttribute("x1",`${o}`),e.setAttribute("y1",`${c}`),e.setAttribute("x2",`${l}`),e.setAttribute("y2",`${g}`))}moveTo(e,t){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${t}`)}static createDom(e,t,o){e=O(ve.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},o);let l,c;if(0<((l=t.length)!=null?l:1)&&0<((c=t.spacing)!=null?c:0)){O(ve.LINE,{stroke:t.colour},e);let g;(g=t.length)!=null&&g&&O(ve.LINE,{stroke:t.colour},e)}else O(ve.LINE,{},e);return e}};i.Names$$module$build$src$core$names=class{constructor(e,t){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=t||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=i.allUsedVarModels$$module$build$src$core$variables(e);for(let t=0;t<e.length;t++)this.getName(e[t].getId(),i.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,t){let o=e;t===i.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(o=e),e=o.toLowerCase();const l=t===i.NameType$$module$build$src$core$names.VARIABLE||t===i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(t)||this.db.set(t,new Map);const c=this.db.get(t);return c.has(e)?l+c.get(e):(t=this.getDistinctName(o,t),c.set(e,t.substr(l.length)),t)}getUserNames(e){let t;return(e=(t=this.db.get(e))==null?void 0:t.keys())?Array.from(e):[]}getDistinctName(e,t){e=this.safeName(e);let o=null,l,c;for(;this.dbReverse.has(e+((l=o)!=null?l:""))||this.reservedWords.has(e+((c=o)!=null?c:""));)o=o?o+1:2;let g;return e+=(g=o)!=null?g:"",this.dbReverse.add(e),(t===i.NameType$$module$build$src$core$names.VARIABLE||t===i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(e[0])!==-1&&(e="my_"+e)):e=i.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,t){return e.toLowerCase()===t.toLowerCase()}},function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"}(i.Names$$module$build$src$core$names||(i.Names$$module$build$src$core$names={})),i.NameType$$module$build$src$core$names=i.Names$$module$build$src$core$names.NameType,i.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,i.NameType$$module$build$src$core$names,i.Names$$module$build$src$core$names;var C0=class extends Map{constructor(){super()}set(e,t){return this.get(e)===t?this:(super.set(e,t),dh(t)&&t.startPublishing(),this)}delete(e){const t=this.get(e);return e=super.delete(e),e&&(dh(t)&&t.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},Ro={};Ro.CommentIcon=Mr,Ro.Icon=Vh,Ro.IconType=Yr,Ro.MutatorIcon=i.MutatorIcon$$module$build$src$core$icons$mutator_icon,Ro.WarningIcon=Un,Ro.exceptions=FS,Ro.registry=e$;var nd,br;nd="PROCEDURE",i.DEFAULT_ARG$$module$build$src$core$procedures="x",br={},br.CATEGORY_NAME=nd,br.DEFAULT_ARG=i.DEFAULT_ARG$$module$build$src$core$procedures,br.ObservableProcedureMap=C0,br.allProcedures=fh,br.findLegalName=i.findLegalName$$module$build$src$core$procedures,br.flyoutCategory=ph,br.getCallers=rm,br.getDefinition=i.getDefinition$$module$build$src$core$procedures,br.isNameUsed=Qg,br.isProcedureBlock=$o,br.mutateCallers=i.mutateCallers$$module$build$src$core$procedures,br.mutatorOpenListener=tm,br.rename=i.rename$$module$build$src$core$procedures;var A0=class{constructor(e,t){this.workspace=e,this.theme=t,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var t=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(t&&(t=t.getClassName())&&Ae(e,t),(t=this.theme.getClassName())&&F(e,t));for(let o=0,l;l=this.subscribedWorkspaces_[o];o++)l.refreshTheme();for(const[o,l]of this.componentDB)for(const c of l){e=c.element,t=c.propertyName;const g=this.theme&&this.theme.getComponentStyle(o);e.style.setProperty(t,g||"")}for(const o of this.subscribedWorkspaces_)o.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces_.push(e)}unsubscribeWorkspace(e){if(!Wr(this.subscribedWorkspaces_,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,t,o){this.componentDB.has(t)||this.componentDB.set(t,[]),this.componentDB.get(t).push({element:e,propertyName:o}),t=this.theme&&this.theme.getComponentStyle(t),e.style.setProperty(o,t||"")}unsubscribe(e){if(e)for(const[t,o]of this.componentDB){for(let l=o.length-1;0<=l;l--)o[l].element===e&&o.splice(l,1);o.length||this.componentDB.delete(t)}}dispose(){this.subscribedWorkspaces_.length=0,this.componentDB.clear()}},G$="VARIABLE_DYNAMIC",ko={};ko.CATEGORY_NAME=G$,ko.flyoutCategory=gh,ko.flyoutCategoryBlocks=sm,ko.onCreateVariableButtonClick_Colour=om,ko.onCreateVariableButtonClick_Number=im,ko.onCreateVariableButtonClick_String=nm;var V$=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(;0<e.length;)this.deleteVariable(e[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,t){if(e.name!==t){var o=this.getVariable(t,e.type),l=this.workspace.getAllBlocks(!1),c=i.getGroup$$module$build$src$core$events$utils();c||i.setGroup$$module$build$src$core$events$utils(!0);try{o&&o.getId()!==e.getId()?this.renameVariableWithConflict_(e,t,o,l):this.renameVariableAndUses_(e,t,l)}finally{i.setGroup$$module$build$src$core$events$utils(c)}}}renameVariableById(e,t){const o=this.getVariableById(e);if(!o)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(o,t)}renameVariableAndUses_(e,t,o){for(X(new(K(gl))(e,t)),e.name=t,t=0;t<o.length;t++)o[t].updateVarName(e)}renameVariableWithConflict_(e,t,o,l){const c=e.type;for(t!==o.name&&this.renameVariableAndUses_(o,t,l),t=0;t<l.length;t++)l[t].renameVarById(e.getId(),o.getId());X(new(K(ss))(e)),Wr(this.variableMap.get(c),e)}createVariable(e,t,o){var l=this.getVariable(e,t);if(l){if(o&&l.getId()!==o)throw Error('Variable "'+e+'" is already in use and its id is "'+l.getId()+'" which conflicts with the passed in id, "'+o+'".');return l}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return l=o||q(),t=t||"",l=new iu(this.workspace,e,t,l),e=this.variableMap.get(t)||[],e.push(l),this.variableMap.delete(t),this.variableMap.set(t,e),X(new(K(To))(l)),l}deleteVariable(e){const t=e.getId(),o=this.variableMap.get(e.type);if(o){for(let l=0;l<o.length;l++)if(o[l].getId()===t){o.splice(l,1),X(new(K(ss))(e)),o.length===0&&this.variableMap.delete(e.type);break}}}deleteVariableById(e){const t=this.getVariableById(e);if(t){var o=t.name;const l=this.getVariableUsesById(e);for(let c=0,g;g=l[c];c++)if(g.type==="procedures_defnoreturn"||g.type==="procedures_defreturn"){e=String(g.getFieldValue("NAME")),o=i.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",e),Ge(o);return}1<l.length?(o=i.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(l.length)).replace("%2",o),Xe(o,c=>{c&&t&&this.deleteVariableInternal(t,l)})):this.deleteVariableInternal(t,l)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,t){const o=i.getGroup$$module$build$src$core$events$utils();o||i.setGroup$$module$build$src$core$events$utils(!0);try{for(let l=0;l<t.length;l++)t[l].dispose(!0);this.deleteVariable(e)}finally{i.setGroup$$module$build$src$core$events$utils(o)}}getVariable(e,t){if(t=this.variableMap.get(t||"")){for(let o=0,l;l=t[o];o++)if(i.Names$$module$build$src$core$names.equals(l.name,e))return l}return null}getVariableById(e){for(const t of this.variableMap.values())for(const o of t)if(o.getId()===e)return o;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const t=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const o of e.getPotentialVariableMap().variableMap.keys())t.add(o);return t.has("")||t.add(""),Array.from(t.values())}getAllVariables(){let e=[];for(const t of this.variableMap.values())e=e.concat(t);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(e=>e.name)}getVariableUsesById(e){const t=[],o=this.workspace.getAllBlocks(!1);for(let l=0;l<o.length;l++){const c=o[l].getVarModels();if(c)for(let g=0;g<c.length;g++)c[g].getId()===e&&t.push(o[l])}return t}},ku=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new C0,this.potentialVariableMap=null,this.id=q(),B(this),this.options=e||new bn({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(y(He.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new V$(this)}dispose(){this.listeners.length=0,this.clear(),H(this)}sortObjects_(e,t){const o=Math.sin(nl(ku.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getRelativeToSurfaceXY(),t=t.getRelativeToSurfaceXY(),e.y+o*e.x-(t.y+o*t.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!Wr(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e){const t=[].concat(this.topBlocks);return e&&1<t.length&&t.sort(this.sortObjects_.bind(this)),t}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){Wr(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,t){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),t&&e&&1<e.length&&e.sort(this.sortObjects_.bind(this)),e.filter(function(o){return!o.isInsertionMarker()})):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!Wr(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e){const t=[].concat(this.topComments);return e&&1<t.length&&t.sort(this.sortObjects_.bind(this)),t}getAllBlocks(e){if(e){var t=this.getTopBlocks(!0);e=[];for(let o=0;o<t.length;o++)e.push(...t[o].getDescendants(!0))}else for(e=this.getTopBlocks(!1),t=0;t<e.length;t++)e.push(...e[t].getChildren(!1));return e.filter(function(o){return!o.isInsertionMarker()})}clear(){this.isClearing=!0;try{const e=i.getGroup$$module$build$src$core$events$utils();for(e||i.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();i.setGroup$$module$build$src$core$events$utils(e),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,t){this.variableMap.renameVariableById(e,t)}createVariable(e,t,o){return this.variableMap.createVariable(e,t,o)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,t){return this.variableMap.getVariable(e,t)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let t=0;for(const o in e){if(e[o]>this.remainingCapacityOfType(o))return!1;t+=e[o]}return!(t>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var t=e?this.redoStack_:this.undoStack_,o=e?this.undoStack_:this.redoStack_;const l=t.pop();if(l){for(var c=[l];t.length&&l.group&&l.group===t[t.length-1].group;){const g=t.pop();g&&c.push(g)}for(t=0;t<c.length;t++)o.push(c[t]);c=re(c,e),J(!1);try{for(o=0;o<c.length;o++)c[o].run(e)}finally{J(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,ge()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){Wr(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let t=0;t<this.listeners.length;t++)(0,this.listeners[t])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,t){this.blockDB.set(e,t)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let t;return(t=this.commentDB.get(e))!=null?t:null}allInputsFilled(e){const t=this.getTopBlocks(!1);for(let o=0;o<t.length;o++)if(!t[o].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new V$(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const t=this.options.parentWorkspace;return this.isFlyout?t&&t.options&&(e=t.options.parentWorkspace):t&&(e=t),e}static getById(e){return S(e)}static getAll(){return x()}};ku.SCAN_ANGLE=3;var Xx=100,L0=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound_=null}dispose(){this.sounds.clear()}load(e,t){if(e.length){try{var o=new globalThis.Audio}catch{return}for(let c=0;c<e.length;c++){const g=e[c],L=g.match(/\.(\w+)$/);if(L&&o.canPlayType("audio/"+L[1])){var l=new globalThis.Audio(g);break}}l&&this.sounds.set(t,l)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const t=e.play();if(t!==void 0?t.then(e.pause).catch(function(){}):e.pause(),bl||yS)break}}play(e,t){var o=this.sounds.get(e);o?(e=new Date,this.lastSound_!==null&&e.getTime()-this.lastSound_.getTime()<Xx||(this.lastSound_=e,o=bl||xh?o:o.cloneNode(),o.volume=t===void 0?1:t,o.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,t)}},Ki;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(Ki||(Ki={}));var Fl;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(Fl||(Fl={}));var Co;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(Co||(Co={}));var Os={};Os.bumpDirection=Co,Os.bumpPositionRect=_h,Os.getCornerOppositeToolbox=$h,Os.getStartPositionRect=mh,Os.horizontalPosition=Fl,Os.verticalPosition=Ki;var Br={width:96,height:124,url:"sprites.png"},N0=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=O(ve.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[mr.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&P(this.svgGroup);for(const e of this.boundEvents)lt(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new Rt(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,t){if(this.initialized){var o=$h(this.workspace,e),l=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(l+=this.LARGE_SPACING+this.HEIGHT),e=mh(o,new At(this.WIDTH,l),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),o=o.vertical,t=_h(e,this.MARGIN_VERTICAL,o===Ki.TOP?Co.DOWN:Co.UP,t),o===Ki.TOP){var c=this.SMALL_SPACING+this.HEIGHT,g;(g=this.zoomInGroup)==null||g.setAttribute("transform","translate(0, "+c+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(c+this.LARGE_SPACING+this.HEIGHT)+")")}else{g=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let he;(he=this.zoomInGroup)==null||he.setAttribute("transform","translate(0, "+g+")"),g=g+this.SMALL_SPACING+this.HEIGHT,(c=this.zoomOutGroup)==null||c.setAttribute("transform","translate(0, "+g+")")}this.top=t.top,this.left=t.left;var L;(L=this.svgGroup)==null||L.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=O(ve.G,{class:"blocklyZoom"},this.svgGroup);const t=O(ve.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);O(ve.RECT,{width:32,height:32},t),O(ve.IMAGE,{width:Br.width,height:Br.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(En,"xlink:href",this.workspace.options.pathToMedia+Br.url),this.boundEvents.push(Ye(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=O(ve.G,{class:"blocklyZoom"},this.svgGroup);const t=O(ve.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);O(ve.RECT,{width:32,height:32},t),O(ve.IMAGE,{width:Br.width,height:Br.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(En,"xlink:href",this.workspace.options.pathToMedia+Br.url),this.boundEvents.push(Ye(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,t){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),Ue(),t.stopPropagation(),t.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=O(ve.G,{class:"blocklyZoom"},this.svgGroup);const t=O(ve.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);O(ve.RECT,{width:32,height:32},t),O(ve.IMAGE,{width:Br.width,height:Br.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(En,"xlink:href",this.workspace.options.pathToMedia+Br.url),this.boundEvents.push(Ye(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const t=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(t),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),Ue(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(K(Di))(null,this.workspace.id,"zoom_controls");X(e)}};xr(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var Yx=20,Vn=class extends ku{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=null,this.metricsManager=new(y(He.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||Vn.setTopLevelWorkspaceMetrics_,this.componentManager=new mr,this.connectionDBList=Ml.init(this.connectionChecker),this.audioManager=new L0(e.parentWorkspace),this.grid=this.options.gridPattern?new H$(this.options.gridPattern,e.gridOptions):null,this.markerManager=new au(this),ar&&ye&&this.registerToolboxCategoryCallback(wm,ye),ko&&gh&&this.registerToolboxCategoryCallback(G$,gh),br&&ph&&(this.registerToolboxCategoryCallback(nd,ph),this.addChangeListener(tm)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new A0(this,this.options.theme||Wh),this.themeManager_.subscribeWorkspace(this);let t;this.renderer=Mg(this.options.renderer||"geras",this.getTheme(),(t=this.options.rendererOverrides)!=null?t:void 0),this.cachedParentSvgSize=new At(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=Wh),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(t){return!!t.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new(K(El))(this.getTheme().name,this.id);X(e)}updateBlockStyles_(e){for(let t=0,o;o=e[t];t++){const l=o.getStyleName();l&&o.setStyle(l)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(e){let t=0,o=0,l=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(l=this.scale);do{const c=ns(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(l=1),t+=c.x*l,o+=c.y*l,e=e.parentNode}while(e&&e!==this.getParentSvg());return new je(t,o)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new At(e.width,e.height)}getOriginOffsetInPixels(){return Uc(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getBlockCanvas(){return this.svgBlockCanvas_}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e){return this.svgGroup_=O(ve.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=O(ve.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=O(ve.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=O(ve.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(Ye(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),document.body.addEventListener("wheel",function(){}),Ye(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(y(He.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=y(He.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&P(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&P(e.parentNode)}this.resizeHandlerWrapper&&(lt(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null)}addTrashcan(){this.trashcan=Vn.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_)}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new N0(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const t=new bn({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(y(He.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(y(He.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(mr.Capability.POSITIONABLE,!0),t=this.getMetricsManager().getUiMetrics(),o=[];for(let l=0,c;c=e[l];l++){c.position(t,o);const g=c.getBoundingRectangle();g&&o.push(g)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const e=bp();je.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations_())}getCanvas(){return this.svgBlockCanvas_}setCachedParentSvgSize(e,t){const o=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,o.setAttribute("data-cached-width",`${e}`)),t!=null&&(this.cachedParentSvgSize.height=t,o.setAttribute("data-cached-height",`${t}`))}getBubbleCanvas(){return this.svgBubbleCanvas_}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(ue()){var e=this.scale,t=-this.scrollY,o=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(t-this.oldTop)&&1>Math.abs(o-this.oldLeft))){var l=new(K(vo))(t,o,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=t,this.oldLeft=o,X(l)}}}translate(e,t){const o="translate("+e+","+t+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",o),this.svgBubbleCanvas_.setAttribute("transform",o),this.grid&&this.grid.moveTo(e,t),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){if(this.isVisible_=e,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e){e=this.getAllBlocks(!1);for(let t=e.length-1;0<=t;t--)e[t].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)}render(){for(var e=this.getAllBlocks(!1),t=e.length-1;0<=t;t--)e[t].queueRender();if(this.currentGesture_)for(e=this.currentGesture_.getInsertionMarkers(),t=0;t<e.length;t++)e[t].render(!1);this.markerManager.updateMarkers()}highlightBlock(e,t){if(t===void 0){for(let o=0,l;l=this.highlightedBlocks[o];o++)l.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((t=t===void 0||t)?this.highlightedBlocks.indexOf(e)===-1&&this.highlightedBlocks.push(e):Wr(this.highlightedBlocks,e),e.setHighlighted(t))}paste(e){if(!this.rendered||!e.type&&!e.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const t=i.getGroup$$module$build$src$core$events$utils();t||i.setGroup$$module$build$src$core$events$utils(!0);let o;try{o=e.type?this.pasteBlock_(null,e):e.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(e):this.pasteBlock_(e,null)}finally{i.setGroup$$module$build$src$core$events$utils(t)}return o}pasteBlock_(e,t){i.disable$$module$build$src$core$events$utils();let o;try{let l=0,c=0;if(e){o=i.domToBlock$$module$build$src$core$xml(e,this);let g;l=parseInt((g=e.getAttribute("x"))!=null?g:"0"),this.RTL&&(l=-l);let L;c=parseInt((L=e.getAttribute("y"))!=null?L:"0")}else t&&(o=po(t,this),l=t.x||10,this.RTL&&(l=this.getWidth()-l),c=t.y||10);if(!isNaN(l)&&!isNaN(c)){let g;do{g=!1;const L=this.getAllBlocks(!1);for(let he=0,xe;xe=L[he];he++){const Ze=xe.getRelativeToSurfaceXY();if(1>=Math.abs(l-Ze.x)&&1>=Math.abs(c-Ze.y)){g=!0;break}}if(!g){const he=o.getConnections_(!1);for(let xe=0,Ze;Ze=he[xe];xe++)if(Ze.closest(i.config$$module$build$src$core$config.snapRadius,new je(l,c)).connection){g=!0;break}}g&&(l=this.RTL?l-i.config$$module$build$src$core$config.snapRadius:l+i.config$$module$build$src$core$config.snapRadius,c+=2*i.config$$module$build$src$core$config.snapRadius)}while(g);o.moveTo(new je(l,c))}}finally{i.enable$$module$build$src$core$events$utils()}return ue()&&!o.isShadow()&&X(new(K(i.CREATE$$module$build$src$core$events$utils))(o)),o.select(),o}pasteWorkspaceComment_(e){i.disable$$module$build$src$core$events$utils();let t;try{t=Rr.fromXmlRendered(e,this);let o,l=parseInt((o=e.getAttribute("x"))!=null?o:"0"),c,g=parseInt((c=e.getAttribute("y"))!=null?c:"0");isNaN(l)||isNaN(g)||(this.RTL&&(l=-l),t.moveBy(l+50,g+50))}finally{i.enable$$module$build$src$core$events$utils()}return ue()&&ai.fireCreateEvent(t),t.select(),t}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.getFlyout()&&e.toolbox_.refreshSelection()}renameVariableById(e,t){super.renameVariableById(e,t),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,t,o){return e=super.createVariable(e,t,o),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents(mr.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let t=0,o;o=e[t];t++){const l=o.getClientRect();l&&this.dragTargetAreas.push({component:o,clientRect:l})}}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let t=0,o;o=this.dragTargetAreas[t];t++)if(o.clientRect.contains(e.clientX,e.clientY))return o.component;return null}onMouseDown_(e){const t=this.getGesture(e);t&&t.handleWsStart(e,this)}startDrag(e,t){e=Tr(e,this.getParentSvg(),this.getInverseScreenCTM()),e.x/=this.scale,e.y/=this.scale,this.dragDeltaXY=je.difference(t,e)}moveDrag(e){return e=Tr(e,this.getParentSvg(),this.getInverseScreenCTM()),e.x/=this.scale,e.y/=this.scale,je.sum(this.dragDeltaXY,e)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel_(e){if(Yi.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||o){var l=Or(e);if(Cm)var c=e.metaKey;t&&(e.ctrlKey||c||!o)?(l=-l.y/50,t=Tr(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,l)):(t=this.scrollX-l.x,o=this.scrollY-l.y,e.shiftKey&&!l.x&&(t=this.scrollX-l.y,o=this.scrollY),this.scroll(t,o)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new Rt(0,0,0,0);const t=e[0].getBoundingRectangle();for(let l=1;l<e.length;l++){var o=e[l];o.isInsertionMarker&&o.isInsertionMarker()||(o=o.getBoundingRectangle(),o.top<t.top&&(t.top=o.top),o.bottom>t.bottom&&(t.bottom=o.bottom),o.left<t.left&&(t.left=o.left),o.right>t.right&&(t.right=o.right))}return t}cleanUp(){this.setResizesEnabled(!1),i.setGroup$$module$build$src$core$events$utils(!0);const e=this.getTopBlocks(!0);let t=0;for(let o=0,l;l=e[o];o++){if(!l.isMovable())continue;const c=l.getRelativeToSurfaceXY();l.moveBy(-c.x,t-c.y,["cleanup"]),l.snapToGrid(),t=l.getRelativeToSurfaceXY().y+l.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}i.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var t=bt.registry.getContextMenuOptions(bt.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(t,e),qa(e,t,this.RTL)}}updateToolbox(e){if(e=eh(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(th(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():($(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,t,o){o=Math.pow(this.options.zoomOptions.scaleSpeed,o);const l=this.scale*o;if(this.scale!==l){l>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:l<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale);var c=this.getCanvas().getCTM(),g=this.getParentSvg().createSVGPoint();g.x=e,g.y=t,g=g.matrixTransform(c.inverse()),e=g.x,t=g.y,c=c.translate(e*(1-o),t*(1-o)).scale(o),this.scrollX=c.e,this.scrollY=c.f,this.setScale(l)}}zoomCenter(e){var t=this.getMetrics();let o;this.flyout?(o=t.svgWidth?t.svgWidth/2:0,t=t.svgHeight?t.svgHeight/2:0):(o=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop),this.zoom(o,t,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var o=this.getBlocksBoundingBox(),l=2*Yx,c=o.right-o.left+l;if(o=o.bottom-o.top+l,c){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),o+=this.flyout.getHeight()/this.scale):(t+=this.flyout.getWidth(),c+=this.flyout.getWidth()/this.scale)),t/=c,e/=o,i.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{i.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){F(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),F(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}endCanvasTransition(){Ae(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),Ae(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,o=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,o=-o-e.scrollTop,this.scroll(t,o)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,t){if(this.isMovable()){var o=e?this.getBlockById(e):null;if(o){e=o.getRelativeToSurfaceXY(),o=t?{height:o.height,width:o.width}:o.getHeightWidth();var l=this.scale;t=(e.x+(this.RTL?-1:1)*o.width/2)*l,e=(e.y+o.height/2)*l,o=this.getMetrics(),this.scroll(-(t-o.viewWidth/2),-(e-o.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,t){this.hideChaff(!0);const o=this.getMetrics();e=Math.min(e,-o.scrollLeft),t=Math.min(t,-o.scrollTop);const l=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);e=Math.max(e,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),t=Math.max(t,-l),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+o.scrollLeft),-(t+o.scrollTop),!1),e+=o.absoluteLeft,t+=o.absoluteTop,this.translate(e,t)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e){return super.getAllBlocks(e)}getTopBlocks(e){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){Wr(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const t=!this.resizesEnabled&&e;this.resizesEnabled=e,t&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,t){if(typeof t!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,t)}getButtonCallback(e){let t;return(t=this.flyoutButtonCallbacks.get(e))!=null?t:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,t){if(typeof t!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,t)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const t=e.type==="pointerdown",o=this.currentGesture_;return o?t&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:t?this.currentGesture_=new Yi(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){Li(),_n(),Mn(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(mr.Capability.AUTOHIDEABLE,!0).forEach(t=>t.autoHide(e))}static setTopLevelWorkspaceMetrics_(e){const t=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)}},Ul;(function(e){e.BLOCK="block",e.BUTTON="button"})(Ul||(Ul={}));var id=class extends td{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Vn(e),this.workspace_.setMetricsManager(new R0(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=q(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=O(e,{class:"blocklyFlyout",style:"display: none"}),this.svgBackground_=O(ve.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new U$(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(Ye(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper)),this.boundEvents.push(Ye(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:1,capabilities:[mr.Capability.DELETE_AREA,mr.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)lt(e);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&P(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}isVisible(){return this.isVisible_}setVisible(e){const t=e!==this.isVisible();this.isVisible_=e,t&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay()}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let t;(t=this.workspace_.scrollbar)==null||t.setContainerVisible(e)}positionAt_(e,t,o,l){let c;(c=this.svgGroup_)==null||c.setAttribute("width",`${e}`);let g;(g=this.svgGroup_)==null||g.setAttribute("height",`${t}`),this.workspace_.setCachedParentSvgSize(e,t),this.svgGroup_&&M(this.svgGroup_,"translate("+o+"px,"+l+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(o,l),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const e of this.listeners)lt(e);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=Ya(e),e=this.createFlyoutInfo(e),this.layout_(e.contents,e.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(e){const t=[],o=[];this.permanentlyDisabled.length=0;const l=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const c of e){if("custom"in c){e=this.getDynamicCategoryContents(c.custom),e=Ya(e);const{contents:g,gaps:L}=this.createFlyoutInfo(e);t.push(...g),o.push(...L)}switch(c.kind.toUpperCase()){case"BLOCK":e=c;const g=this.createFlyoutBlock(e);t.push({type:Ul.BLOCK,block:g}),this.addBlockGap(e,o,l);break;case"SEP":this.addSeparatorGap(c,o,l);break;case"LABEL":e=this.createButton(c,!0),t.push({type:Ul.BUTTON,button:e}),o.push(l);break;case"BUTTON":e=this.createButton(c,!1),t.push({type:Ul.BUTTON,button:e}),o.push(l)}}return{contents:t,gaps:o}}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton(e,t){return new Gn(this.workspace_,this.targetWorkspace,e,t)}createFlyoutBlock(e){let t;return e.blockxml?(e=typeof e.blockxml=="string"?i.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,(t=this.getRecycledBlock(e.getAttribute("type")))||(t=i.domToBlock$$module$build$src$core$xml(e,this.workspace_))):(t=this.getRecycledBlock(e.type),t||(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),t=po(e,this.workspace_))),t.isEnabled()||this.permanentlyDisabled.push(t),t}getRecycledBlock(e){let t=-1;for(let o=0;o<this.recycledBlocks.length;o++)if(this.recycledBlocks[o].type===e){t=o;break}return t===-1?void 0:this.recycledBlocks.splice(t,1)[0]}addBlockGap(e,t,o){let l;e.gap?l=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?i.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,l=parseInt(e.getAttribute("gap"))),t.push(!l||isNaN(l)?o:l)}addSeparatorGap(e,t,o){e=parseInt(String(e.gap)),!isNaN(e)&&0<t.length?t[t.length-1]=e:t.push(o)}clearOldBlocks(){var e=this.workspace_.getTopBlocks(!1);for(let o=0,l;l=e[o];o++)this.blockIsRecyclable_(l)?this.recycleBlock(l):l.dispose(!1,!1);for(e=0;e<this.mats.length;e++){const o=this.mats[e];o&&(Kp(o),P(o))}this.mats.length=0;for(let o=0,l;l=this.buttons_[o];o++)l.dispose();this.buttons_.length=0;let t;(t=this.workspace_.getPotentialVariableMap())==null||t.clear()}emptyRecycledBlocks(){for(let e=0;e<this.recycledBlocks.length;e++)this.recycledBlocks[e].dispose();this.recycledBlocks=[]}blockIsRecyclable_(e){return!1}recycleBlock(e){const t=e.getRelativeToSurfaceXY();e.moveBy(-t.x,-t.y),this.recycledBlocks.push(e)}addBlockListeners_(e,t,o){this.listeners.push(Ye(e,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(Ye(o,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(Ht(e,"pointerenter",t,t.addSelect)),this.listeners.push(Ht(e,"pointerleave",t,t.removeSelect)),this.listeners.push(Ht(o,"pointerenter",t,t.addSelect)),this.listeners.push(Ht(o,"pointerleave",t,t.removeSelect))}blockMouseDown(e){return t=>{const o=this.targetWorkspace.getGesture(t);o&&(o.setStartBlock(e),o.handleFlyoutStart(t,this))}}onMouseDown(e){const t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let t=null;i.disable$$module$build$src$core$events$utils();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock(e)}finally{i.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=ne(this.targetWorkspace,o),ue()){for(i.setGroup$$module$build$src$core$events$utils(!0),o=0;o<e.length;o++){const l=e[o];X(new(K(To))(l))}X(new(K(i.CREATE$$module$build$src$core$events$utils))(t))}return this.autoClose?this.hide():this.filterForCapacity(),t}initFlyoutButton_(e,t,o){const l=e.createDom();e.moveTo(t,o),e.show(),this.listeners.push(Ye(l,"pointerdown",this,this.onMouseDown)),this.buttons_.push(e)}createRect_(e,t,o,l,c){return t=O(ve.RECT,{"fill-opacity":0,x:t,y:o,height:l.height,width:l.width}),t.tooltip=e,za(t),this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot()),this.rectMap_.set(e,t),this.mats[c]=t}moveRectToBlock_(e,t){const o=t.getHeightWidth();e.setAttribute("width",String(o.width)),e.setAttribute("height",String(o.height)),t=t.getRelativeToSurfaceXY(),e.setAttribute("y",String(t.y)),e.setAttribute("x",String(this.RTL?t.x-o.width:t.x))}filterForCapacity(){const e=this.workspace_.getTopBlocks(!1);for(let t=0,o;o=e[t];t++)if(this.permanentlyDisabled.indexOf(o)===-1){const l=this.targetWorkspace.isCapacityAvailable(V(o));for(;o;)o.setEnabled(l),o=o.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const o=ii(e);return t.setResizesEnabled(!1),t=po(o,t),this.positionNewBlock(e,t),t}positionNewBlock(e,t){const o=this.targetWorkspace;var l=o.getOriginOffsetInPixels(),c=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),c=je.sum(c,e),l=je.difference(c,l),l.scale(1/o.scale),t.moveTo(new je(l.x,l.y))}};id.FlyoutItemType=Ul;var x0=class extends id{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),o=t.getScrollMetrics(),l=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(o.left+(o.width-l.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),o=e.getViewMetrics();e=e.getToolboxMetrics();const l=this.toolboxPosition_===at.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?l?e.height:o.height-this.height_:l?0:o.height:l?0:o.height+t.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const o=this.toolboxPosition_===at.TOP,l=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(l.push("h",e+2*this.CORNER_RADIUS),l.push("v",t),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),l.push("h",-e),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),l.push("h",e),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),l.push("v",t),l.push("h",-e-2*this.CORNER_RADIUS)),l.push("z"),this.svgBackground_.setAttribute("d",l.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var t=Or(e);if(t=t.x||t.y){const o=this.workspace_.getMetricsManager(),l=o.getScrollMetrics();t=o.getViewMetrics().left-l.left+t;let c;(c=this.workspace_.scrollbar)==null||c.setX(t),_n(),Mn()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;const o=this.MARGIN;let l=o+this.tabWidth_;this.RTL&&(e=e.reverse());for(let he=0,xe;xe=e[he];he++)if(xe.type==="block"){var c=xe.block,g=c.getDescendants(!1);for(let Vt=0,kt;kt=g[Vt];Vt++)kt.isInFlyout=!0;g=c.getSvgRoot();const Ze=c.getHeightWidth();var L=c.outputConnection?this.tabWidth_:0;L=this.RTL?l+Ze.width:l-L,c.moveBy(L,o),L=this.createRect_(c,L,o,Ze,he),l+=Ze.width+t[he],this.addBlockListeners_(g,c,L)}else xe.type==="button"&&(c=xe.button,this.initFlyoutButton_(c,l,o),l+=c.width+t[he])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_===at.TOP?new Rt(-1e9,t+e.height,-1e9,1e9):new Rt(t,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const t=this.workspace_.getTopBlocks(!1);for(let l=0,c;c=t[l];l++)e=Math.max(e,c.getHeightWidth().height);const o=this.buttons_;for(let l=0,c;c=o[l];l++)e=Math.max(e,c.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=er.scrollbarThickness,this.height_!==e){for(let l=0,c;c=t[l];l++)this.rectMap_.has(c)&&this.moveRectToBlock_(this.rectMap_.get(c),c);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==at.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.recordDragTargets()}}};s(He.FLYOUTS_HORIZONTAL_TOOLBOX,xi,x0);var W$=class extends id{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),o=t.getScrollMetrics(),l=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(o.top+(o.height-l.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),o=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===at.LEFT?e.width:o.width-this.width_:this.toolboxPosition_===at.LEFT?0:o.width:this.toolboxPosition_===at.LEFT?0:o.width+t.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const o=this.toolboxPosition_===at.RIGHT;var l=e+this.CORNER_RADIUS;l=["M "+(o?l:0)+",0"],l.push("h",o?-e:e),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),l.push("v",Math.max(0,t)),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),l.push("h",o?e:-e),l.push("z"),this.svgBackground_.setAttribute("d",l.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var t=Or(e);if(t.y){const o=this.workspace_.getMetricsManager(),l=o.getScrollMetrics();t=o.getViewMetrics().top-l.top+t.y;let c;(c=this.workspace_.scrollbar)==null||c.setY(t),_n(),Mn()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;var o=this.MARGIN;const l=this.RTL?o:o+this.tabWidth_;for(let he=0,xe;xe=e[he];he++)if(xe.type==="block"){var c=xe.block,g=c.getDescendants(!1);for(let Vt=0,kt;kt=g[Vt];Vt++)kt.isInFlyout=!0;g=c.getSvgRoot();const Ze=c.getHeightWidth();var L=c.outputConnection?l-this.tabWidth_:l;c.moveBy(L,o),L=this.createRect_(c,this.RTL?L-Ze.width:L,o,Ze,he),this.addBlockListeners_(g,c,L),o+=Ze.height+t[he]}else xe.type==="button"&&(c=xe.button,this.initFlyoutButton_(c,l,o),o+=c.height+t[he])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_===at.LEFT?new Rt(-1e9,1e9,-1e9,t+e.width):new Rt(-1e9,1e9,t,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var t=this.workspace_.getTopBlocks(!1);for(let l=0,c;c=t[l];l++){var o=c.getHeightWidth().width;c.outputConnection&&(o-=this.tabWidth_),e=Math.max(e,o)}for(let l=0,c;c=this.buttons_[l];l++)e=Math.max(e,c.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=er.scrollbarThickness,this.width_!==e){for(let l=0,c;c=t[l];l++){if(this.RTL){o=c.getRelativeToSurfaceXY().x;let g=e/this.workspace_.scale-this.MARGIN;c.outputConnection||(g-=this.tabWidth_),c.moveBy(g-o,0)}this.rectMap_.has(c)&&this.moveRectToBlock_(this.rectMap_.get(c),c)}if(this.RTL)for(let l=0,c;c=this.buttons_[l];l++)t=c.getPosition().y,c.moveTo(e/this.workspace_.scale-c.width-this.MARGIN-this.tabWidth_,t);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==at.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.recordDragTargets()}}};W$.registryName="verticalFlyout",s(He.FLYOUTS_VERTICAL_TOOLBOX,xi,W$);var M0;i.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=W());var t=[];this.init(e),e=e.getTopBlocks(!0);for(let o=0,l;l=e[o];o++){let c=this.blockToCode(l);Array.isArray(c)&&(c=c[0]),c&&(l.outputConnection&&(c=this.scrubNakedValue(c),this.STATEMENT_PREFIX&&!l.suppressPrefixSuffix&&(c=this.injectId(this.STATEMENT_PREFIX,l)+c),this.STATEMENT_SUFFIX&&!l.suppressPrefixSuffix&&(c+=this.injectId(this.STATEMENT_SUFFIX,l))),t.push(c))}return t=t.join(`
`),t=this.finish(t),t=t.replace(/^\s+\n/,""),t=t.replace(/\n\s+$/,`
`),t=t.replace(/[ \t]+\n/g,`
`)}prefixLines(e,t){return t+e.replace(/(?!\n$)\n/g,`
`+t)}allNestedComments(e){const t=[];e=e.getDescendants(!0);for(let o=0;o<e.length;o++){const l=e[o].getCommentText();l&&t.push(l)}return t.length&&t.push(""),t.join(`
`)}blockToCode(e,t){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var o=this.forBlock[e.type];if(!o&&this[e.type]&&(Ne("block generator functions on CodeGenerator objects","10.0","11.0","the .forBlock[blockType] dictionary"),o=this[e.type]),typeof o!="function")throw Error(`${this.name_} generator does not know how to generate codefor block type "${e.type}".`);if(o=o.call(e,e,this),Array.isArray(o)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,o[0],t),o[1]]}if(typeof o=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(o=this.injectId(this.STATEMENT_PREFIX,e)+o),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(o+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,o,t);if(o===null)return"";throw SyntaxError("Invalid code generated: "+o)}valueToCode(e,t,o){if(isNaN(o))throw TypeError("Expecting valid order from block: "+e.type);var l=e.getInputTargetBlock(t);if(!l||(t=this.blockToCode(l),t===""))return"";if(!Array.isArray(t))throw TypeError(`Expecting tuple from value block: ${l.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+l.type);if(!e)return"";l=!1;var c=Math.floor(o);const g=Math.floor(t);if(c<=g&&(c!==g||c!==0&&c!==99)){for(l=!0,c=0;c<this.ORDER_OVERRIDES.length;c++)if(this.ORDER_OVERRIDES[c][0]===o&&this.ORDER_OVERRIDES[c][1]===t){l=!1;break}}return l&&(e="("+e+")"),e}statementToCode(e,t){if(e=e.getInputTargetBlock(t),t=this.blockToCode(e),typeof t!="string")throw TypeError("Expecting code from statement block: "+(e&&e.type));return t&&(t=this.prefixLines(t,this.INDENT)),t}addLoopTrap(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e}injectId(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,t){if(!this.definitions_[e]){const o=this.nameDB_.getDistinctName(e,i.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=o,Array.isArray(t)&&(t=t.join(`
`)),t=t.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);let l;for(;l!==t;)l=t,t=t.replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,t,o){return t}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},M0={},M0.CodeGenerator=i.CodeGenerator$$module$build$src$core$generator;var wt=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,t){if(this.shortcuts.get(e.name)&&!t)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),(t=e.keyCodes)&&0<t.length)for(let o=0;o<t.length;o++)this.addKeyMapping(t[o],e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,t,o){e=`${e}`;const l=this.keyMap.get(e);if(l&&!o)throw Error(`Shortcut named "${t}" collides with shortcuts "${l}"`);l&&o?l.unshift(t):this.keyMap.set(e,[t])}removeKeyMapping(e,t,o){const l=this.keyMap.get(e);if(!l)return o||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1;const c=l.indexOf(t);return-1<c?(l.splice(c,1),l.length===0&&this.keyMap.delete(e),!0):(o||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const t of this.keyMap.keys())this.removeKeyMapping(t,e,!0)}setKeyMap(e){this.keyMap.clear();for(const t in e)this.keyMap.set(t,e[t])}getKeyMap(){const e=Object.create(null);for(const[t,o]of this.keyMap)e[t]=o;return e}getRegistry(){const e=Object.create(null);for(const[t,o]of this.shortcuts)e[t]=o;return Ni(Object.create(null),e)}onKeyDown(e,t){var o=this.serializeKeyEvent_(t);if(o=this.getShortcutNamesByKeyCode(o),!o)return!1;for(let l=0,c;c=o[l];l++){const g=this.shortcuts.get(c);let L,he;if((L=g)==null||!L.preconditionFn||(he=g)!=null&&he.preconditionFn(e)){let xe,Ze;if((xe=g)!=null&&xe.callback&&((Ze=g)!=null&&Ze.callback(e,t,g)))return!0}}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const t=[];for(const[o,l]of this.keyMap)-1<l.indexOf(e)&&t.push(o);return t}serializeKeyEvent_(e){let t="";for(const o in wt.modifierKeys)e.getModifierState(o)&&(t!==""&&(t+="+"),t+=o);return t!==""&&e.keyCode?t=t+"+"+e.keyCode:e.keyCode&&(t=String(e.keyCode)),t}checkModifiers_(e){for(let t=0,o;o=e[t];t++)if(!(o in wt.modifierKeys))throw Error(o+" is not a valid modifier key.")}createSerializedKey(e,t){let o="";if(t){this.checkModifiers_(t);for(const l in wt.modifierKeys)-1<t.indexOf(wt.modifierKeys[l])&&(o!==""&&(o+="+"),o+=l)}return o!==""&&e?o=o+"+"+e:e&&(o=`${e}`),o}};wt.registry=new wt,function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(wt||(wt={}));var D0=!1,Rs={};Rs.Align=i.Align$$module$build$src$core$inputs$align,Rs.DummyInput=di,Rs.Input=ji,Rs.StatementInput=sn,Rs.ValueInput=i.ValueInput$$module$build$src$core$inputs$value_input,Rs.inputTypes=i.inputTypes$$module$build$src$core$inputs$input_types;var P0=class extends Tu{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},B0=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=Mt(e.xPos,this.info_.startY);for(let t=0,o;o=e.elements[t];t++)_e.isLeftSquareCorner(o)?this.steps_+=this.highlightConstants_.START_POINT:_e.isLeftRoundedCorner(o)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):_e.isPreviousConnection(o)?this.steps_+=this.notchPaths_.pathLeft:_e.isHat(o)?this.steps_+=this.startPaths_.path(this.RTL_):_e.isSpacer(o)&&o.width!==0&&(this.steps_+=Ke("H",o.xPos+o.width-this.highlightOffset));this.steps_+=Ke("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+Ke("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const t=e.getLastInput();if(this.RTL_){const o=e.height-t.connectionHeight;this.steps_+=vr(t.xPos+t.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+Ke("v",o)}else this.steps_+=vr(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const t=e.getLastInput();if(t)if(this.RTL_){const o=e.height-2*this.insideCornerPaths_.height;this.steps_+=vr(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+Ke("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+oi(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=vr(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+oi(e.width-t.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const t=e.xPos+e.width-this.highlightOffset;e instanceof x$&&e.followsStatement&&(this.steps_+=Ke("H",t)),this.RTL_&&(this.steps_+=Ke("H",t),e.height>this.highlightOffset&&(this.steps_+=Ke("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=Ke("V",e.baseline-this.highlightOffset);else{const t=this.info_.bottomRow.elements[0];_e.isLeftSquareCorner(t)?this.steps_+=vr(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):_e.isLeftRoundedCorner(t)&&(this.steps_+=vr(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=vr(this.info_.startX,e):(this.steps_+=vr(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=Ke("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,_e.isLeftRoundedCorner(e.elements[0])?this.steps_+=Ke("V",this.outsideCornerPaths_.height):this.steps_+=Ke("V",e.capline+this.highlightOffset))}drawInlineInput(e){const t=this.highlightOffset,o=e.xPos+e.connectionWidth;var l=e.centerline-e.height/2;const c=e.width-e.connectionWidth,g=l+t;this.RTL_?(l=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=vr(o-t,g)+Ke("v",l)+this.puzzleTabPaths_.pathDown(this.RTL_)+Ke("v",e)+Ke("h",c)):this.inlineSteps_+=vr(e.xPos+e.width+t,g)+Ke("v",e.height)+Ke("h",-c)+vr(o,l+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},F0=class extends vu{constructor(e,t){super(e,t),this.highlighter_=new B0(t)}draw(){this.drawOutline_(),this.drawInternals_();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=Ke("H",e.xPos+e.width)+Ke("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let o=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let o=e.xPos+e.statementEdge+t.notchOffset;o=this.info_.RTL?-1*o:o+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(o,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let o=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,o=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},U0=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=Mt(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,o=(1-Math.SQRT1_2)*(e+t)-t,l=Mt(o,o)+Zt("a","0 0,0",e,rt(-o-t,e-o)),c=Zt("a","0 0,0",e+t,rt(e+t,e+t)),g=Mt(o,-o)+Zt("a","0 0,0",e+t,rt(e-o,o+t));return{width:e+t,height:e,pathTop(L){return L?l:""},pathBottom(L){return L?c:g}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,o=(1-Math.SQRT1_2)*(e-t)+t,l=Mt(o,o)+Zt("a","0 0,1",e-t,rt(e-o,-o+t)),c=Mt(t,e)+Zt("a","0 0,1",e-t,rt(e,-e+t)),g=-o,L=Mt(o,g)+Zt("a","0 0,1",e-t,rt(-o+t,-g-e));return{height:e,topLeft(he){return he?l:c},bottomLeft(){return L}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,o=Mt(-2,-t+3.4)+oi(-.45*e,-2.1),l=Ke("v",2.5)+Mt(.97*-e,2.5)+jr("q",[rt(.05*-e,10),rt(.3*e,9.5)])+Mt(.67*e,-1.9)+Ke("v",2.5),c=Ke("v",-1.5)+Mt(-.92*e,-.5)+jr("q",[rt(-.19*e,-5.5),rt(0,-11)])+Mt(.92*e,1),g=Mt(-5,t-.7)+oi(.46*e,-2.1);return{width:e,height:t,pathUp(L){return L?o:c},pathDown(L){return L?l:g}}}makeNotch(){return{pathLeft:Ke("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:oi(5.1,2.6)+Mt(-10.2,6.8)+oi(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,t=Mt(25,-8.7)+jr("c",[rt(29.7,-6.2),rt(57.2,-.5),rt(75,8.7)]),o=jr("c",[rt(17.8,-9.2),rt(45.3,-14.9),rt(75,-8.7)])+vr(100.5,e+.5);return{path(l){return l?t:o}}}},H0=class extends L${constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},G0=class extends wu{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},V0=class extends Bl{constructor(e,t){super(e,t),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof sn||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,t){this.isInline&&e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new H0(this.constants_,e)),t.hasInlineInput=!0):e instanceof sn?(t.elements.push(new G0(this.constants_,e)),t.hasStatement=!0):e instanceof i.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new Jh(this.constants_,e)),t.hasExternalInput=!0):e instanceof di&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||t.align!==null||(t.align=e.align)}addElemSpacing_(){let e=!1;for(let o=0,l;l=this.rows[o];o++)l.hasExternalInput&&(e=!0);for(let o=0,l;l=this.rows[o];o++){var t=l.elements;if(l.elements=[],l.startsWithElemSpacer()&&l.elements.push(new un(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let c=0;c<t.length-1;c++){l.elements.push(t[c]);const g=this.getInRowSpacing_(t[c],t[c+1]);l.elements.push(new un(this.constants_,g))}l.elements.push(t[t.length-1]),l.endsWithElemSpacer()&&(t=this.getInRowSpacing_(t[t.length-1],null),e&&l.hasDummyInput&&(t+=this.constants_.TAB_WIDTH),l.elements.push(new un(this.constants_,t)))}}}getInRowSpacing_(e,t){if(!e)return t&&_e.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&_e.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&_e.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!_e.isInput(e)&&(!t||_e.isStatementInput(t)))return _e.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:_e.isIcon(e)?2*this.constants_.LARGE_PADDING+1:_e.isHat(e)?this.constants_.NO_PADDING:_e.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:_e.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:_e.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(_e.isInput(e)&&!t){if(_e.isExternalInput(e))return this.constants_.NO_PADDING;if(_e.isInlineInput(e))return this.constants_.LARGE_PADDING;if(_e.isStatementInput(e))return this.constants_.NO_PADDING}if(!_e.isInput(e)&&t&&_e.isInput(t)){if(_e.isField(e)&&e.isEditable){if(_e.isInlineInput(t)||_e.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(_e.isInlineInput(t)||_e.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(_e.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(_e.isIcon(e)&&t&&!_e.isInput(t))return this.constants_.LARGE_PADDING;if(_e.isInlineInput(e)&&t&&_e.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(_e.isLeftSquareCorner(e)&&t){if(_e.isHat(t))return this.constants_.NO_PADDING;if(_e.isPreviousConnection(t))return t.notchOffset;if(_e.isNextConnection(t))return t.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(_e.isLeftRoundedCorner(e)&&t){if(_e.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(_e.isNextConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return _e.isField(e)&&t&&_e.isField(t)&&e.isEditable===t.isEditable||t&&_e.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return _e.isTopRow(e)&&_e.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:_e.isTopRow(e)||_e.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(_e.isSpacer(t))return e.yPos+t.height/2;if(_e.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,_e.isNextConnection(t)?e+t.height/2:e-t.height/2;if(_e.isTopRow(e))return _e.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let o=e.yPos;return _e.isField(t)||_e.isIcon(t)?(o+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=_e.isInlineInput(t)?o+t.height/2:o+e.height/2,o}alignRowElements_(){if(this.isInline){var e=0,t=new WeakMap,o=null;for(let l=this.rows.length-1,c;c=this.rows[l];l--)t.set(c,e),_e.isInputRow(c)&&(c.hasStatement&&this.alignStatementRow_(c),o&&o.hasStatement&&c.width<o.width?t.set(c,o.width):e=c.width,o=c);e=0;for(let l=0,c;c=this.rows[l];l++)c.hasStatement?e=this.getDesiredRowWidth_(c):_e.isSpacer(c)?c.width=Math.max(e,t.get(c)):(o=c.width,e=Math.max(e,t.get(c))-o,0<e&&this.addAlignmentPadding_(c,e),e=c.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,t=0;for(let l=0,c;c=this.rows[l];l++){c.yPos=t,c.xPos=this.startX,t+=c.height,e=Math.max(e,c.widthWithConnectedBlocks);var o=t-this.topRow.ascenderHeight;c===this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,t+=o),this.recordElemPositions_(c)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,o.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=t+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},W0=class extends ed{constructor(e,t,o){super(e,t,o),this.constants=o,this.colourDark="#000000",this.svgPathDark=O(ve.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=O(ve.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=is("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},j0=class extends Ou{constructor(e){super(e),this.highlightConstants=null}init(e,t){super.init(e,t),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,t){super.refreshDom(e,t),this.getHighlightConstants().init()}makeConstants_(){return new P0}makeRenderInfo_(e){return new V0(this,e)}makeDrawer_(e,t){return new F0(e,t)}makePathObject(e,t){return new W0(e,t,this.getConstants())}makeHighlightConstants_(){return new U0(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};dl("geras",j0);var gi={};gi.ConstantProvider=P0,gi.Drawer=F0,gi.HighlightConstantProvider=U0,gi.Highlighter=B0,gi.InlineInput=H0,gi.PathObject=W0,gi.RenderInfo=V0,gi.Renderer=j0,gi.StatementInput=G0;var z0=class extends Tu{constructor(){super(),Ne("Blockly.minimalist.ConstantProvider","v10","v11","Blockly.blockRendering.ConstantProvider")}},X0=class extends vu{constructor(e,t){super(e,t),Ne("Blockly.minimalist.Drawer","v10","v11","Blockly.blockRendering.Drawer")}},Y0=class extends Bl{constructor(e,t){super(e,t),Ne("Blockly.minimalist.RenderInfo","v10","v11","Blockly.blockRendering.RenderInfo")}getRenderer(){return this.renderer_}},K0=class extends Ou{constructor(e){super(e),Ne("Blockly.minimalist.Renderer","v10","v11","Blockly.blockRendering.Renderer")}makeConstants_(){return new z0}makeRenderInfo_(e){return new Y0(this,e)}makeDrawer_(e,t){return new X0(e,t)}};dl("minimalist",K0);var Cu={};Cu.ConstantProvider=z0,Cu.Drawer=X0,Cu.RenderInfo=Y0,Cu.Renderer=K0;var q0=class extends Bl{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var t=0;t<this.rows.length;t++)if(this.rows[t].hasExternalInput){e=!0;break}for(t=0;t<this.rows.length;t++){const l=this.rows[t];var o=l.elements;if(l.elements=[],l.startsWithElemSpacer()&&l.elements.push(new un(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(let c=0;c<o.length-1;c++){l.elements.push(o[c]);const g=this.getInRowSpacing_(o[c],o[c+1]);l.elements.push(new un(this.constants_,g))}l.elements.push(o[o.length-1]),l.endsWithElemSpacer()&&(o=this.getInRowSpacing_(o[o.length-1],null),e&&l.hasDummyInput&&(o+=this.constants_.TAB_WIDTH),l.elements.push(new un(this.constants_,o)))}}}getInRowSpacing_(e,t){if(!e)return t&&_e.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&_e.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&_e.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!_e.isInput(e)&&!t)return _e.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:_e.isIcon(e)?2*this.constants_.LARGE_PADDING+1:_e.isHat(e)?this.constants_.NO_PADDING:_e.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:_e.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:_e.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(_e.isInput(e)&&!t){if(_e.isExternalInput(e))return this.constants_.NO_PADDING;if(_e.isInlineInput(e))return this.constants_.LARGE_PADDING;if(_e.isStatementInput(e))return this.constants_.NO_PADDING}if(!_e.isInput(e)&&t&&_e.isInput(t)){if(_e.isField(e)&&e.isEditable){if(_e.isInlineInput(t)||_e.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(_e.isInlineInput(t)||_e.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(_e.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(_e.isIcon(e)&&t&&!_e.isInput(t))return this.constants_.LARGE_PADDING;if(_e.isInlineInput(e)&&t&&_e.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(_e.isLeftSquareCorner(e)&&t){if(_e.isHat(t))return this.constants_.NO_PADDING;if(_e.isPreviousConnection(t)||_e.isNextConnection(t))return t.notchOffset}return _e.isLeftRoundedCorner(e)&&t?t.notchOffset-this.constants_.CORNER_RADIUS:_e.isField(e)&&t&&_e.isField(t)&&e.isEditable===t.isEditable||t&&_e.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return _e.isTopRow(e)&&_e.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:_e.isTopRow(e)||_e.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(_e.isSpacer(t))return e.yPos+t.height/2;if(_e.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,_e.isNextConnection(t)?e+t.height/2:e-t.height/2;if(_e.isTopRow(e))return _e.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let o=e.yPos;return o=_e.isField(t)&&e.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+t.height/2):o+e.height/2}finalize_(){let e=0,t=0;for(var o=0;o<this.rows.length;o++){const c=this.rows[o];c.yPos=t,c.xPos=this.startX,t+=c.height,e=Math.max(e,c.widthWithConnectedBlocks);var l=t-this.topRow.ascenderHeight;c===this.bottomRow&&l<this.constants_.MIN_BLOCK_HEIGHT&&(l=this.constants_.MIN_BLOCK_HEIGHT-l,this.bottomRow.height+=l,t+=l),this.recordElemPositions_(c)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,o.getHeightWidth().width)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline}},Z0=class extends Ou{constructor(e){super(e)}makeRenderInfo_(e){return new q0(this,e)}};dl("thrasos",Z0);var j$={};j$.RenderInfo=q0,j$.Renderer=Z0;var Kx=class{constructor(e,t){this.procedureModelClass=e,this.parameterModelClass=t,this.priority=xS}save(e){return e=e.getProcedureMap().getProcedures().map(t=>lm(t)),e.length?e:null}load(e,t){const o=t.getProcedureMap();for(const l of e)o.add(um(this.procedureModelClass,this.parameterModelClass,l,t))}clear(e){e.getProcedureMap().clear()}},Hl={};Hl.ProcedureSerializer=Kx,Hl.loadParameter=cm,Hl.loadProcedure=um,Hl.saveParameter=am,Hl.saveProcedure=lm;var J0=class{constructor(){this.priority=NS}save(e){const t=[];for(const o of e.getAllVariables())e={name:o.name,id:o.getId()},o.type&&(e.type=o.type),t.push(e);return t.length?t:null}load(e,t){for(const o of e)t.createVariable(o.name,o.type,o.id)}clear(e){e.getVariableMap().clear()}};Gc("variables",new J0);var Q0={};Q0.VariableSerializer=J0;var z$={};z$.load=eS,z$.save=Qw;var qx={blocks:su,exceptions:ps,priorities:Dh,procedures:Hl,registry:Mm,variables:Q0,workspaces:z$},mi;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(mi||(mi={})),_m();var $i={};$i.names=mi,$i.registerCopy=fm,$i.registerCut=pm,$i.registerDefaultShortcuts=_m,$i.registerDelete=dm,$i.registerEscape=hm,$i.registerPaste=gm,$i.registerRedo=$m,$i.registerUndo=mm;var Zx={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},Jx={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},Qx=new vs("zelos",Zx,Jx),X$={};X$.Classic=Wh,X$.Zelos=Qx;var Y$=class{constructor(e,t,o){this.id_=e.toolboxitemid||we(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},Wn=class extends Y${constructor(e,t,o){super(e,t,o),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let t=0;t<e.length;t++){const o=e[t];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(o)}}parseCategoryDef_(e){this.name_="name"in e?zt(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Dn(this.htmlDiv_,Kr.TREEITEM),xt(this.htmlDiv_,Lt.SELECTED,!1),xt(this.htmlDiv_,Lt.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Dn(this.iconDom_,Kr.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&xt(this.htmlDiv_,Lt.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&F(e,t),e}createRowContainer_(){const e=document.createElement("div");var t=this.cssConfig_.row;return t&&F(e,t),t=`${Wn.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e}createRowContentsContainer_(){const e=document.createElement("div"),t=this.cssConfig_.rowcontentcontainer;return t&&F(e,t),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&F(e,t)}return e.style.display="inline-block",e}createLabelDom_(e){const t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,(e=this.cssConfig_.label)&&F(t,e),t}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=Wn.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const t=e.categorystyle||e.categoryStyle;if((e=e.colour)&&t)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(t)return this.getColourfromStyle_(t);if(e)return this.parseColour_(e)}return""}getColourfromStyle_(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour_(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(e){if(e=zt(e),e==null||e==="")return"";var t=Number(e);return isNaN(t)?(t=mo(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):rg(t)}openIcon_(e){if(e){var t=this.cssConfig_.closedicon;t&&Oe(e,t),(t=this.cssConfig_.openicon)&&F(e,t)}}closeIcon_(e){if(e){var t=this.cssConfig_.openicon;t&&Oe(e,t),(t=this.cssConfig_.closedicon)&&F(e,t)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var t=this.cssConfig_.selected;if(e){const o=this.parseColour_(Wn.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||o,t&&F(this.rowDiv_,t)}else this.rowDiv_.style.backgroundColor="",t&&Ae(this.rowDiv_,t);xt(this.htmlDiv_,Lt.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Ya(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){P(this.htmlDiv_)}};Wn.registrationName="category",Wn.nestedPadding=19,Wn.borderWidth=8,Wn.defaultBackgroundColour="#57e",xr(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),s(He.TOOLBOX_ITEM,Wn.registrationName,Wn);var Au=class extends Y${constructor(e,t){super(e,t),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&F(e,t),this.htmlDiv_=e}getDiv(){return this.htmlDiv_}dispose(){P(this.htmlDiv_)}};Au.registrationName="sep",xr(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),s(He.TOOLBOX_ITEM,Au.registrationName,Au);var Gl=class extends Wn{constructor(e,t,o){super(e,t,o),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const t=e.contents;if(t){this.flyoutItems_=[],e=!0;for(let o=0;o<t.length;o++){const l=t[o];!d(He.TOOLBOX_ITEM,l.kind)||l.kind.toLowerCase()===Au.registrationName&&e?(this.flyoutItems_.push(l),e=!0):(this.createToolboxItem_(l),e=!1)}}}}createToolboxItem_(e){let t=e.kind;t.toUpperCase()==="CATEGORY"&&rh(e)&&(t=Gl.registrationName),e=new(p(He.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),Dn(this.subcategoriesDiv_,Kr.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),xt(this.htmlDiv_,Lt.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&F(e,t),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const t=document.createElement("div");t.style.display="none";var o=this.cssConfig_.contents;for(o&&F(t,o),o=0;o<e.length;o++){const l=e[o];l.init();const c=l.getDiv();if(t.appendChild(c),l.getClickTarget){let g;(g=l.getClickTarget())==null||g.setAttribute("id",l.getId())}}return t}setExpanded(e){this.expanded_!==e&&((this.expanded_=e)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),xt(this.htmlDiv_,Lt.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize())}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const t=this.getChildToolboxItems();for(let o=0;o<t.length;o++)t[o].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Gl.registrationName="collapsibleCategory",s(He.TOOLBOX_ITEM,Gl.registrationName,Gl);var eI=class extends td{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout_=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const t=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),v(this.flyout_.createDom("svg"),t),this.setVisible(!0),this.flyout_.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[mr.Capability.AUTOHIDEABLE,mr.Capability.DELETE_AREA,mr.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const t=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Dn(this.contentsDiv_,Kr.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),F(e,"blocklyToolboxDiv"),F(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return F(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,t){e=Ye(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),t=Ye(t,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(t)}onClick_(e){if(Nt(e)||e.target===this.HtmlDiv)W().hideChaff(!1);else{var t=e.target.getAttribute("id");t&&(t=this.getToolboxItemById(t),t.isSelectable()&&(this.setSelectedItem(t),t.onClick(e))),W().hideChaff(!0)}Ue()}onKeyDown_(e){let t=!1;switch(e.key){case"ArrowDown":t=this.selectNext_();break;case"ArrowUp":t=this.selectPrevious_();break;case"ArrowLeft":t=this.selectParent_();break;case"ArrowRight":t=this.selectChild_();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}!t&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(t=this.selectedItem_.onKeyDown(e)),t&&e.preventDefault()}createFlyout_(){const e=this.workspace_,t=new bn({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?y(He.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):y(He.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)}render(e){this.toolboxDef_=e;for(let t=0;t<this.contents_.length;t++){const o=this.contents_[t];o&&o.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const t=document.createDocumentFragment();for(let o=0;o<e.length;o++)this.createToolboxItem_(e[o],t);this.contentsDiv_.appendChild(t)}createToolboxItem_(e,t){var o=e.kind;o.toUpperCase()==="CATEGORY"&&rh(e)&&(o=Gl.registrationName),(o=p(He.TOOLBOX_ITEM,o.toLowerCase()))&&(e=new o(e,this),e.init(),this.addToolboxItem_(e),(o=e.getDiv())&&t.appendChild(o),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let t=0;t<e.length;t++)this.addToolboxItem_(e[t])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&F(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&Ae(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const t=e.top,o=t+e.height,l=e.left;return e=l+e.width,this.toolboxPosition===at.TOP?new Rt(-1e7,o,-1e7,1e7):this.toolboxPosition===at.BOTTOM?new Rt(t,1e7,-1e7,1e7):this.toolboxPosition===at.LEFT?new Rt(-1e7,1e7,-1e7,e):new Rt(-1e7,1e7,l,1e7)}wouldDelete(e,t){return e instanceof an?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout_?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===at.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition===at.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const e=this.workspace_,t=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===at.LEFT?e.scrollX+t.width:e.scrollX,this.toolboxPosition===at.TOP?e.scrollY+t.height:e.scrollY),U(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const t=this.contents_[e];t.refreshTheme&&t.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(e){const t=this.selectedItem_;!e&&!t||e&&!tS(e)||(this.shouldDeselectItem_(t,e)&&t!==null&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&e!==null&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent_(t,e))}shouldDeselectItem_(e,t){return e!==null&&(!e.isCollapsible()||e!==t)}shouldSelectItem_(e,t){return t!==null&&t!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),xt(this.contentsDiv_,Lt.ACTIVEDESCENDANT,"")}selectItem_(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),xt(this.contentsDiv_,Lt.ACTIVEDESCENDANT,t.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e],e.isSelectable()&&this.setSelectedItem(e))}updateFlyout_(e,t){t&&(e!==t||t.isCollapsible())&&t.getContents().length?(this.flyout_.show(t.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(e,t){const o=e&&e.getName();let l=t&&t.getName();e===t&&(l=null),e=new(K(_l))(o,l,this.workspace_.id),X(e)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext_():e.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[++e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[--e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)lt(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),P(this.HtmlDiv))}};xr(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),s(He.TOOLBOX,xi,eI);var tI=class extends td{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(e=new bn({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===at.TOP?at.BOTTOM:at.TOP,this.flyout=new(y(He.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===at.RIGHT?at.LEFT:at.RIGHT,this.flyout=new(y(He.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=O(ve.G,{class:"blocklyTrash"});let e;const t=String(Math.random()).substring(2);e=O(ve.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup),O(ve.RECT,{width:Vl,height:od,y:Wl},e);const o=O(ve.IMAGE,{width:Br.width,x:-K$,height:Br.height,y:-q$,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup);return o.setAttributeNS(En,"xlink:href",this.workspace.options.pathToMedia+Br.url),e=O(ve.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup),O(ve.RECT,{width:Vl,height:Wl},e),this.svgLid=O(ve.IMAGE,{width:Br.width,x:-K$,height:Br.height,y:-q$,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup),this.svgLid.setAttributeNS(En,"xlink:href",this.workspace.options.pathToMedia+Br.url),Ht(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),Ht(this.svgGroup,"pointerup",this,this.click),Ht(o,"pointerover",this,this.mouseOver),Ht(o,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(v(this.flyout.createDom(ve.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[mr.Capability.AUTOHIDEABLE,mr.Capability.DELETE_AREA,mr.Capability.DRAG_TARGET,mr.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&P(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(o){return JSON.parse(o)}),t=this.workspace.getParentSvg().style;t.cursor="wait",setTimeout(()=>{let o;(o=this.flyout)==null||o.show(e),t.cursor=""},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide(),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,t){if(this.initialized){var o=$h(this.workspace,e);e=mh(o,new At(Vl,od+Wl),eM,rI,e,this.workspace),t=_h(e,rI,o.vertical===Ki.TOP?Co.DOWN:Co.UP,t),this.top=t.top,this.left=t.left;var l;(l=this.svgGroup)==null||l.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new Rt(this.top,this.top+od+Wl,this.left,this.left+Vl)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const t=e.top+q$-sd;return e=e.left+K$-sd,new Rt(t,t+Wl+od+2*sd,e,e+Vl+2*sd)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=nM;var t=1/(e+1);this.lidOpen+=this.isLidOpen?t:-t,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*iI),t=nI+this.lidOpen*(iM-nI),this.svgGroup&&(this.svgGroup.style.opacity=`${t}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),rM/e))}setLidAngle(e){const t=this.workspace.toolboxPosition===at.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let o;(o=this.svgLid)==null||o.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:Vl-4)+","+(Wl-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*iI)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&this.openFlyout()}fireUiEvent(e){e=new(K($l))(e,this.workspace.id),X(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(0>=this.workspace.options.maxTrashcanContents||e.type!==i.DELETE$$module$build$src$core$events$utils||e.type!==i.DELETE$$module$build$src$core$events$utils||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),this.contents.indexOf(e)===-1){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(tM)}}}cleanBlockJson(e){function t(o){if(o){if(delete o.id,delete o.x,delete o.y,delete o.enabled,o.icons&&o.icons.comment){var l=o.icons.comment;delete l.height,delete l.width,delete l.pinned}l=o.inputs;for(var c in l){var g=l[c];const L=g.block;g=g.shadow,L&&t(L),g&&t(g)}o.next&&(c=o.next,o=c.block,c=c.shadow,o&&t(o),c&&t(c))}}return e=JSON.parse(JSON.stringify(e)),t(e),Object.assign({},{kind:"BLOCK"},e)}},Vl=47,od=44,Wl=16,rI=20,eM=20,sd=10,K$=0,q$=32,tM=.1,rM=80,nM=4,nI=.4,iM=.8,iI=45,oM="10.0.0",sM=i.Align$$module$build$src$core$inputs$align.LEFT,lM=i.Align$$module$build$src$core$inputs$align.CENTRE,aM=i.Align$$module$build$src$core$inputs$align.RIGHT,uM=Je.INPUT_VALUE,cM=Je.OUTPUT_VALUE,hM=Je.NEXT_STATEMENT,dM=Je.PREVIOUS_STATEMENT,fM=i.inputTypes$$module$build$src$core$inputs$input_types.DUMMY,pM=at.TOP,gM=at.BOTTOM,mM=at.LEFT,$M=at.RIGHT;ku.prototype.newBlock=function(e,t){return new Nl(this,e,t)},Vn.prototype.newBlock=function(e,t){return new an(this,e,t)},Vn.newTrashcan=function(e){return new tI(e)},Rr.prototype.showContextMenu=function(e){if(!this.workspace.options.readOnly){var t=[];this.isDeletable()&&this.isMovable()&&(t.push(Ng(this)),t.push(Lg(this))),qa(e,t,this.RTL)}},Vi.prototype.newWorkspaceSvg=function(e){return new Vn(e)},i.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=fh(e),e=e[0].concat(e[1]);for(let t=0;t<e.length;t++)this.getName(e[t][0],i.Names$$module$build$src$core$names.NameType.PROCEDURE)};var _M=Je,Ce={};return Ce.ALIGN_CENTRE=lM,Ce.ALIGN_LEFT=sM,Ce.ALIGN_RIGHT=aM,Ce.ASTNode=Pe,Ce.BasicCursor=_u,Ce.Block=Nl,Ce.BlockDragger=i0,Ce.BlockSvg=an,Ce.Blocks=Xr,Ce.Bubble=ht,Ce.BubbleDragger=c0,Ce.COLLAPSED_FIELD_NAME=Ph,Ce.COLLAPSED_INPUT_NAME=wl,Ce.COLLAPSE_CHARS=s0,Ce.CodeGenerator=i.CodeGenerator$$module$build$src$core$generator,Ce.CollapsibleToolboxCategory=Gl,Ce.ComponentManager=mr,Ce.Connection=Tt,Ce.ConnectionChecker=h0,Ce.ConnectionDB=Ml,Ce.ConnectionType=Je,Ce.ContextMenu=fi,Ce.ContextMenuItems=Pr,Ce.ContextMenuRegistry=bt,Ce.Css=xm,Ce.Cursor=c$,Ce.DELETE_VARIABLE_ID=u$,Ce.DRAG_STACK=l0,Ce.DUMMY_INPUT=fM,Ce.DeleteArea=td,Ce.DragTarget=I0,Ce.DropDownDiv=Jt,Ce.Events=qe,Ce.Extensions=yn,Ce.Field=mt,Ce.FieldAngle=pt,Ce.FieldCheckbox=Is,Ce.FieldColour=cn,Ce.FieldDropdown=hi,Ce.FieldImage=Ss,Ce.FieldLabel=bs,Ce.FieldLabelSerializable=O0,Ce.FieldMultilineInput=P$,Ce.FieldNumber=B$,Ce.FieldTextInput=Dl,Ce.FieldVariable=Ru,Ce.Flyout=id,Ce.FlyoutButton=Gn,Ce.FlyoutMetricsManager=R0,Ce.Generator=i.CodeGenerator$$module$build$src$core$generator,Ce.Gesture=Yi,Ce.Grid=H$,Ce.HorizontalFlyout=x0,Ce.INPUT_VALUE=uM,Ce.Input=ji,Ce.InsertionMarkerManager=ln,Ce.Marker=a0,Ce.MarkerManager=au,Ce.Menu=qm,Ce.MenuItem=Zm,Ce.MetricsManager=F$,Ce.Msg=i.Msg$$module$build$src$core$msg,Ce.NEXT_STATEMENT=hM,Ce.Names=i.Names$$module$build$src$core$names,Ce.OPPOSITE_TYPE=ys,Ce.OUTPUT_VALUE=cM,Ce.Options=bn,Ce.PREVIOUS_STATEMENT=dM,Ce.PROCEDURE_CATEGORY_NAME=nd,Ce.Procedures=br,Ce.RENAME_VARIABLE_ID=a$,Ce.RenderedConnection=Dr,Ce.Scrollbar=er,Ce.ScrollbarPair=U$,Ce.ShortcutItems=$i,Ce.ShortcutRegistry=wt,Ce.TOOLBOX_AT_BOTTOM=gM,Ce.TOOLBOX_AT_LEFT=mM,Ce.TOOLBOX_AT_RIGHT=$M,Ce.TOOLBOX_AT_TOP=pM,Ce.TabNavigateCursor=u0,Ce.Theme=vs,Ce.ThemeManager=A0,Ce.Themes=X$,Ce.Toolbox=eI,Ce.ToolboxCategory=Wn,Ce.ToolboxItem=Y$,Ce.ToolboxSeparator=Au,Ce.Tooltip=hr,Ce.Touch=Fi,Ce.Trashcan=tI,Ce.UnattachedFieldError=Qt,Ce.VARIABLE_CATEGORY_NAME=wm,Ce.VARIABLE_DYNAMIC_CATEGORY_NAME=G$,Ce.VERSION=oM,Ce.VariableMap=V$,Ce.VariableModel=iu,Ce.Variables=ar,Ce.VariablesDynamic=ko,Ce.VerticalFlyout=W$,Ce.WidgetDiv=ci,Ce.Workspace=ku,Ce.WorkspaceAudio=L0,Ce.WorkspaceComment=ai,Ce.WorkspaceCommentSvg=Rr,Ce.WorkspaceDragger=k0,Ce.WorkspaceSvg=Vn,Ce.Xml=on,Ce.ZoomControls=N0,Ce.blockAnimations=mu,Ce.blockRendering=It,Ce.browserEvents=Hi,Ce.bubbles=Eu,Ce.bumpObjects=Xh,Ce.clipboard=$u,Ce.common=gr,Ce.config=i.config$$module$build$src$core$config,Ce.connectionTypes=_M,Ce.constants=Bm,Ce.defineBlocksWithJsonArray=ae,Ce.dialog=yo,Ce.fieldRegistry=du,Ce.geras=gi,Ce.getMainWorkspace=W,Ce.getSelected=m,Ce.hasBubble=go,Ce.hideChaff=rS,Ce.icons=Ro,Ce.inject=jw,Ce.inputTypes=i.inputTypes$$module$build$src$core$inputs$input_types,Ce.inputs=Rs,Ce.isIcon=Jw,Ce.isObservable=dh,Ce.isSerializable=j,Ce.isVariableBackedParameterModel=Q,Ce.minimalist=Cu,Ce.procedures=br,Ce.registry=Pn,Ce.renderManagement=o$,Ce.serialization=qx,Ce.setLocale=bm,Ce.setParentContainer=C,Ce.svgResize=U,Ce.thrasos=j$,Ce.uiPosition=Os,Ce.utils=Gt,Ce.zelos=Hn,"Blockly"in globalThis||(globalThis.Blockly={Msg:kh}),Ce.__namespace__=i,Ce})}(O_)),O_.exports}var EO;function YD(){return EO||(EO=1,function(r,n){(function(i,s){r.exports=s(Lb())})(ut,function(i){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})}(I_)),I_.exports}var TO;function rL(){return TO||(TO=1,function(r,n){(function(i,s){r.exports=s(YD())})(ut,function(i){return i})}(S_)),S_.exports}var R_={exports:{}},vO;function KD(){return vO||(vO=1,function(r,n){(function(i,s){r.exports=s()})(ut,function(){var i=i||{Msg:Object.create(null)};return i.Msg.ADD_COMMENT="Add Comment",i.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",i.Msg.CHANGE_VALUE_TITLE="Change value:",i.Msg.CLEAN_UP="Clean up Blocks",i.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",i.Msg.COLLAPSE_ALL="Collapse Blocks",i.Msg.COLLAPSE_BLOCK="Collapse Block",i.Msg.COLOUR_BLEND_COLOUR1="colour 1",i.Msg.COLOUR_BLEND_COLOUR2="colour 2",i.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",i.Msg.COLOUR_BLEND_RATIO="ratio",i.Msg.COLOUR_BLEND_TITLE="blend",i.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",i.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",i.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",i.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",i.Msg.COLOUR_RANDOM_TITLE="random colour",i.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",i.Msg.COLOUR_RGB_BLUE="blue",i.Msg.COLOUR_RGB_GREEN="green",i.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",i.Msg.COLOUR_RGB_RED="red",i.Msg.COLOUR_RGB_TITLE="colour with",i.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",i.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",i.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",i.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",i.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",i.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",i.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",i.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",i.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",i.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",i.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",i.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",i.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",i.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",i.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",i.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",i.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",i.Msg.CONTROLS_IF_MSG_ELSE="else",i.Msg.CONTROLS_IF_MSG_ELSEIF="else if",i.Msg.CONTROLS_IF_MSG_IF="if",i.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",i.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",i.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",i.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",i.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",i.Msg.CONTROLS_REPEAT_INPUT_DO="do",i.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",i.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",i.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",i.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",i.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",i.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",i.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",i.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",i.Msg.DELETE_BLOCK="Delete Block",i.Msg.DELETE_VARIABLE="Delete the '%1' variable",i.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",i.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",i.Msg.DIALOG_CANCEL="Cancel",i.Msg.DIALOG_OK="OK",i.Msg.DISABLE_BLOCK="Disable Block",i.Msg.DUPLICATE_BLOCK="Duplicate",i.Msg.DUPLICATE_COMMENT="Duplicate Comment",i.Msg.ENABLE_BLOCK="Enable Block",i.Msg.EXPAND_ALL="Expand Blocks",i.Msg.EXPAND_BLOCK="Expand Block",i.Msg.EXTERNAL_INPUTS="External Inputs",i.Msg.HELP="Help",i.Msg.INLINE_INPUTS="Inline Inputs",i.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",i.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",i.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",i.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",i.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",i.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",i.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",i.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",i.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",i.Msg.LISTS_GET_INDEX_FIRST="first",i.Msg.LISTS_GET_INDEX_FROM_END="# from end",i.Msg.LISTS_GET_INDEX_FROM_START="#",i.Msg.LISTS_GET_INDEX_GET="get",i.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",i.Msg.LISTS_GET_INDEX_LAST="last",i.Msg.LISTS_GET_INDEX_RANDOM="random",i.Msg.LISTS_GET_INDEX_REMOVE="remove",i.Msg.LISTS_GET_INDEX_TAIL="",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",i.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",i.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",i.Msg.LISTS_GET_SUBLIST_END_LAST="to last",i.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",i.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",i.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",i.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",i.Msg.LISTS_GET_SUBLIST_TAIL="",i.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",i.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",i.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",i.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",i.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",i.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",i.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",i.Msg.LISTS_INLIST="in list",i.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",i.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",i.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",i.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",i.Msg.LISTS_LENGTH_TITLE="length of %1",i.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",i.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",i.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",i.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",i.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",i.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",i.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",i.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",i.Msg.LISTS_SET_INDEX_INPUT_TO="as",i.Msg.LISTS_SET_INDEX_INSERT="insert at",i.Msg.LISTS_SET_INDEX_SET="set",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",i.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",i.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",i.Msg.LISTS_SORT_ORDER_DESCENDING="descending",i.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",i.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",i.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",i.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",i.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",i.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",i.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",i.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",i.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",i.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",i.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",i.Msg.LOGIC_BOOLEAN_FALSE="false",i.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",i.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",i.Msg.LOGIC_BOOLEAN_TRUE="true",i.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",i.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",i.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",i.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",i.Msg.LOGIC_NEGATE_TITLE="not %1",i.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",i.Msg.LOGIC_NULL="null",i.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",i.Msg.LOGIC_NULL_TOOLTIP="Returns null.",i.Msg.LOGIC_OPERATION_AND="and",i.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",i.Msg.LOGIC_OPERATION_OR="or",i.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",i.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",i.Msg.LOGIC_TERNARY_CONDITION="test",i.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",i.Msg.LOGIC_TERNARY_IF_FALSE="if false",i.Msg.LOGIC_TERNARY_IF_TRUE="if true",i.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",i.Msg.MATH_ADDITION_SYMBOL="+",i.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",i.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",i.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",i.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",i.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",i.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",i.Msg.MATH_CHANGE_TITLE="change %1 by %2",i.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",i.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",i.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",i.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",i.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",i.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",i.Msg.MATH_DIVISION_SYMBOL="",i.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",i.Msg.MATH_IS_EVEN="is even",i.Msg.MATH_IS_NEGATIVE="is negative",i.Msg.MATH_IS_ODD="is odd",i.Msg.MATH_IS_POSITIVE="is positive",i.Msg.MATH_IS_PRIME="is prime",i.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",i.Msg.MATH_IS_WHOLE="is whole",i.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",i.Msg.MATH_MODULO_TITLE="remainder of %1  %2",i.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",i.Msg.MATH_MULTIPLICATION_SYMBOL="",i.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",i.Msg.MATH_NUMBER_TOOLTIP="A number.",i.Msg.MATH_ONLIST_HELPURL="",i.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",i.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",i.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",i.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",i.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",i.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",i.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",i.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",i.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",i.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",i.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",i.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",i.Msg.MATH_POWER_SYMBOL="^",i.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",i.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",i.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",i.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",i.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",i.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",i.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",i.Msg.MATH_ROUND_OPERATOR_ROUND="round",i.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",i.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",i.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",i.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",i.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",i.Msg.MATH_SINGLE_OP_ROOT="square root",i.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",i.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",i.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",i.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",i.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",i.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",i.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",i.Msg.MATH_SUBTRACTION_SYMBOL="-",i.Msg.MATH_TRIG_ACOS="acos",i.Msg.MATH_TRIG_ASIN="asin",i.Msg.MATH_TRIG_ATAN="atan",i.Msg.MATH_TRIG_COS="cos",i.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",i.Msg.MATH_TRIG_SIN="sin",i.Msg.MATH_TRIG_TAN="tan",i.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",i.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",i.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",i.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",i.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",i.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",i.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",i.Msg.NEW_NUMBER_VARIABLE="Create number variable...",i.Msg.NEW_STRING_VARIABLE="Create string variable...",i.Msg.NEW_VARIABLE="Create variable...",i.Msg.NEW_VARIABLE_TITLE="New variable name:",i.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",i.Msg.ORDINAL_NUMBER_SUFFIX="",i.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",i.Msg.PROCEDURES_BEFORE_PARAMS="with:",i.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",i.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",i.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",i.Msg.PROCEDURES_CREATE_DO="Create '%1'",i.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",i.Msg.PROCEDURES_DEFNORETURN_DO="",i.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",i.Msg.PROCEDURES_DEFNORETURN_TITLE="to",i.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",i.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_DEFRETURN_RETURN="return",i.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",i.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",i.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",i.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",i.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",i.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",i.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",i.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",i.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",i.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",i.Msg.REDO="Redo",i.Msg.REMOVE_COMMENT="Remove Comment",i.Msg.RENAME_VARIABLE="Rename variable...",i.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",i.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",i.Msg.TEXT_APPEND_TITLE="to %1 append text %2",i.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",i.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",i.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",i.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",i.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",i.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",i.Msg.TEXT_CHARAT_FIRST="get first letter",i.Msg.TEXT_CHARAT_FROM_END="get letter # from end",i.Msg.TEXT_CHARAT_FROM_START="get letter #",i.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",i.Msg.TEXT_CHARAT_LAST="get last letter",i.Msg.TEXT_CHARAT_RANDOM="get random letter",i.Msg.TEXT_CHARAT_TAIL="",i.Msg.TEXT_CHARAT_TITLE="in text %1 %2",i.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",i.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",i.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",i.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",i.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",i.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",i.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",i.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",i.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",i.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",i.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",i.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",i.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",i.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",i.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",i.Msg.TEXT_GET_SUBSTRING_TAIL="",i.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",i.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",i.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",i.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",i.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",i.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",i.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",i.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",i.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",i.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",i.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",i.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",i.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",i.Msg.TEXT_LENGTH_TITLE="length of %1",i.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",i.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",i.Msg.TEXT_PRINT_TITLE="print %1",i.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",i.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",i.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",i.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",i.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",i.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",i.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",i.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",i.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",i.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",i.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",i.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",i.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",i.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",i.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",i.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",i.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",i.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",i.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",i.Msg.TODAY="Today",i.Msg.UNDO="Undo",i.Msg.UNNAMED_KEY="unnamed",i.Msg.VARIABLES_DEFAULT_NAME="item",i.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",i.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",i.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",i.Msg.VARIABLES_SET="set %1 to %2",i.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",i.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",i.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",i.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",i.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",i.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",i.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",i.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",i.Msg.CONTROLS_FOREACH_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_FOR_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=i.Msg.CONTROLS_IF_MSG_ELSEIF,i.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=i.Msg.CONTROLS_IF_MSG_ELSE,i.Msg.CONTROLS_IF_IF_TITLE_IF=i.Msg.CONTROLS_IF_MSG_IF,i.Msg.CONTROLS_IF_MSG_THEN=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.LISTS_CREATE_WITH_ITEM_TITLE=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.LISTS_GET_INDEX_HELPURL=i.Msg.LISTS_INDEX_OF_HELPURL,i.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.MATH_CHANGE_TITLE_ITEM=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.PROCEDURES_DEFRETURN_COMMENT=i.Msg.PROCEDURES_DEFNORETURN_COMMENT,i.Msg.PROCEDURES_DEFRETURN_DO=i.Msg.PROCEDURES_DEFNORETURN_DO,i.Msg.PROCEDURES_DEFRETURN_PROCEDURE=i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,i.Msg.PROCEDURES_DEFRETURN_TITLE=i.Msg.PROCEDURES_DEFNORETURN_TITLE,i.Msg.TEXT_APPEND_VARIABLE=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.LOGIC_HUE="210",i.Msg.LOOPS_HUE="120",i.Msg.MATH_HUE="230",i.Msg.TEXTS_HUE="160",i.Msg.LISTS_HUE="260",i.Msg.COLOUR_HUE="20",i.Msg.VARIABLES_HUE="330",i.Msg.VARIABLES_DYNAMIC_HUE="310",i.Msg.PROCEDURES_HUE="290",i.Msg})}(R_)),R_.exports}var k_={exports:{}},C_={exports:{}},bO;function qD(){return bO||(bO=1,function(r,n){(function(i,s){r.exports=s(Lb())})(ut,function(i){var s=i.__namespace__,a=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]);s.defineBlocks$$module$build$src$core$common(a);var u={};u.blocks=a;var h=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),d={init:function(){this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("items",String(this.itemCount_)),f},domToMutation:function(f){if(f=f.getAttribute("items"),!f)throw new TypeError("element did not have items");this.itemCount_=parseInt(f,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(f){this.itemCount_=f.itemCount,this.updateShape_()},decompose:function(f){const R=f.newBlock("lists_create_with_container");R.initSvg();let Q=R.getInput("STACK").connection;for(let le=0;le<this.itemCount_;le++){const Z=f.newBlock("lists_create_with_item");if(Z.initSvg(),!Z.previousConnection)throw Error("itemBlock has no previousConnection");Q.connect(Z.previousConnection),Q=Z.nextConnection}return R},compose:function(f){var R=f.getInputTargetBlock("STACK");for(f=[];R;)R.isInsertionMarker()||f.push(R.valueConnection_),R=R.getNextBlock();for(R=0;R<this.itemCount_;R++){const Q=this.getInput("ADD"+R).connection.targetConnection;Q&&f.indexOf(Q)===-1&&Q.disconnect()}for(this.itemCount_=f.length,this.updateShape_(),R=0;R<this.itemCount_;R++){let Q;(Q=f[R])==null||Q.reconnect(this,"ADD"+R)}},saveConnections:function(f){f=f.getInputTargetBlock("STACK");let R=0;for(;f;){if(f.isInsertionMarker()){f=f.getNextBlock();continue}const Q=this.getInput("ADD"+R);let le;f.valueConnection_=(le=Q)==null?void 0:le.connection.targetConnection,f=f.getNextBlock(),R++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(s.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var f=0;f<this.itemCount_;f++)if(!this.getInput("ADD"+f)){const R=this.appendValueInput("ADD"+f).setAlign(s.Align$$module$build$src$core$inputs$align.RIGHT);f===0&&R.appendField(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(f=this.itemCount_;this.getInput("ADD"+f);f++)this.removeInput("ADD"+f)}};h.lists_create_with=d;var p={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};h.lists_create_with_container=p;var T={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};h.lists_create_with_item=T;var E={init:function(){var f=[[s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),f=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),!f)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(f,"END"),this.setInputsInline(!0),this.setTooltip(()=>s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};h.lists_indexOf=E;var y={init:function(){var f=[[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),f=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),f.setValidator(function(R){R=R==="REMOVE",this.getSourceBlock().updateStatement_(R)}),this.appendValueInput("VALUE").setCheck("Array").appendField(s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(f,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const R=this.getFieldValue("MODE"),Q=this.getFieldValue("WHERE");let le="";switch(R+" "+Q){case"GET FROM_START":case"GET FROM_END":le=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":le=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":le=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":le=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":le=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":le=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":le=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":le=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":le=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":le=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":le=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":le=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(Q==="FROM_START"||Q==="FROM_END")&&(le+="  "+(Q==="FROM_START"?s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),le})},mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation");f.setAttribute("statement",String(!this.outputConnection));const R=this.getInput("AT")instanceof s.ValueInput$$module$build$src$core$inputs$value_input;return f.setAttribute("at",String(R)),f},domToMutation:function(f){const R=f.getAttribute("statement")==="true";this.updateStatement_(R),f=f.getAttribute("at")!=="false",this.updateAt_(f)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(f){f.isStatement?this.updateStatement_(!0):typeof f=="string"&&this.domToMutation(s.textToDom$$module$build$src$core$utils$xml(f))},updateStatement_:function(f){f!==!this.outputConnection&&(this.unplug(!0,!0),f?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(f){this.removeInput("AT"),this.removeInput("ORDINAL",!0),f?(this.appendValueInput("AT").setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const R=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});R.setValidator(function(Q){const le=Q==="FROM_START"||Q==="FROM_END";if(le!==f){const Z=this.getSourceBlock();return Z.updateAt_(le),Z.setFieldValue(Q,"WHERE"),null}}),this.getInput("AT").appendField(R,"WHERE"),s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};h.lists_getIndex=y;var S={init:function(){var f=[[s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),f=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),this.appendDummyInput().appendField(f,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const R=this.getFieldValue("MODE"),Q=this.getFieldValue("WHERE");let le="";switch(R+" "+Q){case"SET FROM_START":case"SET FROM_END":le=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":le=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":le=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":le=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":le=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":le=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":le=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":le=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(Q==="FROM_START"||Q==="FROM_END")&&(le+="  "+s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),le})},mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation"),R=this.getInput("AT")instanceof s.ValueInput$$module$build$src$core$inputs$value_input;return f.setAttribute("at",String(R)),f},domToMutation:function(f){f=f.getAttribute("at")!=="false",this.updateAt_(f)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(f){this.removeInput("AT"),this.removeInput("ORDINAL",!0),f?(this.appendValueInput("AT").setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const R=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});R.setValidator(function(Q){const le=Q==="FROM_START"||Q==="FROM_END";if(le!==f){const Z=this.getSourceBlock();return Z.updateAt_(le),Z.setFieldValue(Q,"WHERE"),null}}),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(R,"WHERE")}};h.lists_setIndex=S;var x={init:function(){this.WHERE_OPTIONS_1=[[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation");var R=this.getInput("AT1")instanceof s.ValueInput$$module$build$src$core$inputs$value_input;return f.setAttribute("at1",String(R)),R=this.getInput("AT2")instanceof s.ValueInput$$module$build$src$core$inputs$value_input,f.setAttribute("at2",String(R)),f},domToMutation:function(f){const R=f.getAttribute("at1")==="true";f=f.getAttribute("at2")==="true",this.updateAt_(1,R),this.updateAt_(2,f)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(f,R){this.removeInput("AT"+f),this.removeInput("ORDINAL"+f,!0),R?(this.appendValueInput("AT"+f).setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+f).appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+f);const Q=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+f]});Q.setValidator(function(le){const Z=le==="FROM_START"||le==="FROM_END";if(Z!==R){const ye=this.getSourceBlock();return ye.updateAt_(f,Z),ye.setFieldValue(le,"WHERE"+f),null}}),this.getInput("AT"+f).appendField(Q,"WHERE"+f),f===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};h.lists_getSublist=x,h.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},h.lists_split={init:function(){const f=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[s.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[s.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!f)throw Error("field_dropdown not found");f.setValidator(R=>{this.updateType_(R)}),this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(f,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(s.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const R=this.getFieldValue("MODE");if(R==="SPLIT")return s.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(R==="JOIN")return s.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+R)})},updateType_:function(f){if(this.getFieldValue("MODE")!==f){const R=this.getInput("INPUT").connection;R.setShadowDom(null);const Q=R.targetBlock();Q&&(R.disconnect(),Q.isShadow()?Q.dispose(!1):this.bumpNeighbours())}f==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("mode",this.getFieldValue("MODE")),f},domToMutation:function(f){this.updateType_(f.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},s.defineBlocks$$module$build$src$core$common(h);var B={};B.blocks=h;var H=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),W={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};s.register$$module$build$src$core$extensions("logic_op_tooltip",s.buildTooltipForDropdown$$module$build$src$core$extensions("OP",W));var $={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const f=s.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&f.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&f.setAttribute("else","1"),f},domToMutation:function(f){this.elseifCount_=parseInt(f.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(f.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const f=Object.create(null);return this.elseifCount_&&(f.elseIfCount=this.elseifCount_),this.elseCount_&&(f.hasElse=!0),f},loadExtraState:function(f){this.elseifCount_=f.elseIfCount||0,this.elseCount_=f.hasElse?1:0,this.updateShape_()},decompose:function(f){const R=f.newBlock("controls_if_if");R.initSvg();let Q=R.nextConnection;for(let le=1;le<=this.elseifCount_;le++){const Z=f.newBlock("controls_if_elseif");Z.initSvg(),Q.connect(Z.previousConnection),Q=Z.nextConnection}return this.elseCount_&&(f=f.newBlock("controls_if_else"),f.initSvg(),Q.connect(f.previousConnection)),R},compose:function(f){f=f.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const R=[null],Q=[null];let le=null;for(;f;){if(!f.isInsertionMarker())switch(f.type){case"controls_if_elseif":this.elseifCount_++,R.push(f.valueConnection_),Q.push(f.statementConnection_);break;case"controls_if_else":this.elseCount_++,le=f.statementConnection_;break;default:throw TypeError("Unknown block type: "+f.type)}f=f.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(R,Q,le)},saveConnections:function(f){f=f.nextConnection.targetBlock();let R=1;for(;f;){if(!f.isInsertionMarker())switch(f.type){case"controls_if_elseif":var Q=this.getInput("IF"+R);const le=this.getInput("DO"+R);f.valueConnection_=Q&&Q.connection.targetConnection,f.statementConnection_=le&&le.connection.targetConnection,R++;break;case"controls_if_else":Q=this.getInput("ELSE"),f.statementConnection_=Q&&Q.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+f.type)}f=f.getNextBlock()}},rebuildShape_:function(){const f=[null],R=[null];let Q=null;this.getInput("ELSE")&&(Q=this.getInput("ELSE").connection.targetConnection);for(let le=1;this.getInput("IF"+le);le++){const Z=this.getInput("IF"+le),ye=this.getInput("DO"+le);f.push(Z.connection.targetConnection),R.push(ye.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(f,R,Q)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var f=1;this.getInput("IF"+f);f++)this.removeInput("IF"+f),this.removeInput("DO"+f);for(f=1;f<=this.elseifCount_;f++)this.appendValueInput("IF"+f).setCheck("Boolean").appendField(s.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+f).appendField(s.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(s.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(f,R,Q){for(let le=1;le<=this.elseifCount_;le++){let Z;(Z=f[le])==null||Z.reconnect(this,"IF"+le);let ye;(ye=R[le])==null||ye.reconnect(this,"DO"+le)}Q==null||Q.reconnect(this,"ELSE")}};s.registerMutator$$module$build$src$core$extensions("controls_if_mutator",$,null,["controls_if_elseif","controls_if_else"]);var m=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return s.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return s.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return s.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return s.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};s.register$$module$build$src$core$extensions("controls_if_tooltip",m);var I={onchange:function(f){this.prevBlocks_||(this.prevBlocks_=[null,null]);var R=this.getInputTargetBlock("A");const Q=this.getInputTargetBlock("B");R&&Q&&!this.workspace.connectionChecker.doTypeChecks(R.outputConnection,Q.outputConnection)&&(s.setGroup$$module$build$src$core$events$utils(f.group),f=this.prevBlocks_[0],f!==R&&(R.unplug(),!f||f.isDisposed()||f.isShadow()||this.getInput("A").connection.connect(f.outputConnection)),R=this.prevBlocks_[1],R!==Q&&(Q.unplug(),!R||R.isDisposed()||R.isShadow()||this.getInput("B").connection.connect(R.outputConnection)),this.bumpNeighbours(),s.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},D=function(){this.mixin(I)};s.register$$module$build$src$core$extensions("logic_compare",D);var C={prevParentConnection_:null,onchange:function(f){const R=this.getInputTargetBlock("THEN"),Q=this.getInputTargetBlock("ELSE"),le=this.outputConnection.targetConnection;if((R||Q)&&le)for(let Z=0;2>Z;Z++){const ye=Z===1?R:Q;ye&&!ye.workspace.connectionChecker.doTypeChecks(ye.outputConnection,le)&&(s.setGroup$$module$build$src$core$events$utils(f.group),le===this.prevParentConnection_?(this.unplug(),le.getSourceBlock().bumpNeighbours()):(ye.unplug(),ye.bumpNeighbours()),s.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=le}};s.registerMixin$$module$build$src$core$extensions("logic_ternary",C),s.defineBlocks$$module$build$src$core$common(H);var U=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),V={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};s.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",s.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",V));var te={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};s.register$$module$build$src$core$extensions("controls_flow_tooltip",s.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",te));var ae={customContextMenu:function(f){if(!this.isInFlyout){var R=this.getField("VAR").getVariable(),Q=R.name;if(!this.isCollapsed()&&Q!==null){R=s.generateVariableFieldDom$$module$build$src$core$variables(R);const le=s.createElement$$module$build$src$core$utils$xml("block");le.setAttribute("type","variables_get"),le.appendChild(R),f.push({enabled:!0,text:s.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",Q),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,le)})}}}};s.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",ae),s.register$$module$build$src$core$extensions("controls_for_tooltip",s.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),s.register$$module$build$src$core$extensions("controls_forEach_tooltip",s.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var de=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),we={getSurroundLoop:function(){let f=this;do{if(de.has(f.type))return f;f=f.getSurroundParent()}while(f);return null},onchange:function(f){var R=this.workspace;if(R.isDragging&&!R.isDragging()&&f.type===s.MOVE$$module$build$src$core$events$utils&&(R=!!this.getSurroundLoop(),this.setWarningText(R?null:s.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout)){const Q=s.getGroup$$module$build$src$core$events$utils();s.setGroup$$module$build$src$core$events$utils(f.group),this.setEnabled(R),s.setGroup$$module$build$src$core$events$utils(Q)}}};s.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",we),s.defineBlocks$$module$build$src$core$common(U);var q={};q.blocks=U,q.loopTypes=de;var J=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),G={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};s.register$$module$build$src$core$extensions("math_op_tooltip",s.buildTooltipForDropdown$$module$build$src$core$extensions("OP",G));var X={mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation"),R=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return f.setAttribute("divisor_input",String(R)),f},domToMutation:function(f){f=f.getAttribute("divisor_input")==="true",this.updateShape_(f)},updateShape_:function(f){const R=this.getInput("DIVISOR");f?R||this.appendValueInput("DIVISOR").setCheck("Number"):R&&this.removeInput("DIVISOR")}},ce=function(){this.getField("PROPERTY").setValidator(function(f){f=f==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(f)})};s.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",X,ce),s.register$$module$build$src$core$extensions("math_change_tooltip",s.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var fe={updateType_:function(f){f==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("op",this.getFieldValue("OP")),f},domToMutation:function(f){if(f=f.getAttribute("op"),f===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(f)}},re=function(){this.getField("OP").setValidator((function(f){this.updateType_(f)}).bind(this))};s.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",fe,re),s.defineBlocks$$module$build$src$core$common(J);var ge={};ge.blocks=J;var ue={},ie={setStatements_:function(f){this.hasStatements_!==f&&(f?(this.appendStatementInput("STACK").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=f)},updateParams_:function(){let f="";this.arguments_.length&&(f=s.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),s.disable$$module$build$src$core$events$utils();try{this.setFieldValue(f,"PARAMS")}finally{s.enable$$module$build$src$core$events$utils()}},mutationToDom:function(f){const R=s.createElement$$module$build$src$core$utils$xml("mutation");f&&R.setAttribute("name",this.getFieldValue("NAME"));for(let Q=0;Q<this.argumentVarModels_.length;Q++){const le=s.createElement$$module$build$src$core$utils$xml("arg"),Z=this.argumentVarModels_[Q];le.setAttribute("name",Z.name),le.setAttribute("varid",Z.getId()),f&&this.paramIds_&&le.setAttribute("paramId",this.paramIds_[Q]),R.appendChild(le)}return this.hasStatements_||R.setAttribute("statements","false"),R},domToMutation:function(f){this.arguments_=[],this.argumentVarModels_=[];for(let Q=0,le;le=f.childNodes[Q];Q++)if(le.nodeName.toLowerCase()==="arg"){var R=le;const Z=R.getAttribute("name");R=R.getAttribute("varid")||R.getAttribute("varId"),this.arguments_.push(Z),R=s.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,R,Z,""),R!==null?this.argumentVarModels_.push(R):console.log(`Failed to create a variable named "${Z}", ignoring.`)}this.updateParams_(),s.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(f.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const f=Object.create(null);if(this.argumentVarModels_.length){f.params=[];for(let R=0;R<this.argumentVarModels_.length;R++)f.params.push({name:this.argumentVarModels_[R].name,id:this.argumentVarModels_[R].getId()})}return this.hasStatements_||(f.hasStatements=!1),f},loadExtraState:function(f){if(this.arguments_=[],this.argumentVarModels_=[],f.params)for(let Q=0;Q<f.params.length;Q++){var R=f.params[Q];R=s.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,R.id,R.name,""),this.arguments_.push(R.name),this.argumentVarModels_.push(R)}this.updateParams_(),s.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(f.hasStatements!==!1)},decompose:function(f){const R=s.createElement$$module$build$src$core$utils$xml("block");R.setAttribute("type","procedures_mutatorcontainer");var Q=s.createElement$$module$build$src$core$utils$xml("statement");Q.setAttribute("name","STACK"),R.appendChild(Q);for(let Z=0;Z<this.arguments_.length;Z++){const ye=s.createElement$$module$build$src$core$utils$xml("block");ye.setAttribute("type","procedures_mutatorarg");var le=s.createElement$$module$build$src$core$utils$xml("field");le.setAttribute("name","NAME");const N=s.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Z]);le.appendChild(N),ye.appendChild(le),le=s.createElement$$module$build$src$core$utils$xml("next"),ye.appendChild(le),Q.appendChild(ye),Q=le}return f=s.domToBlock$$module$build$src$core$xml(R,f),this.type==="procedures_defreturn"?f.setFieldValue(this.hasStatements_,"STATEMENTS"):f.removeInput("STATEMENT_INPUT"),s.mutateCallers$$module$build$src$core$procedures(this),f},compose:function(f){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let R=f.getInputTargetBlock("STACK");for(;R&&!R.isInsertionMarker();){var Q=R.getFieldValue("NAME");this.arguments_.push(Q),Q=this.workspace.getVariable(Q,""),this.argumentVarModels_.push(Q),this.paramIds_.push(R.id),R=R.nextConnection&&R.nextConnection.targetBlock()}if(this.updateParams_(),s.mutateCallers$$module$build$src$core$procedures(this),f=f.getFieldValue("STATEMENTS"),f!==null&&(f=f==="TRUE",this.hasStatements_!==f))if(f){this.setStatements_(!0);var le;(le=this.statementConnection_)==null||le.reconnect(this,"STACK"),this.statementConnection_=null}else le=this.getInput("STACK").connection,(this.statementConnection_=le.targetConnection)&&(le=le.targetBlock(),le.unplug(),le.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(f,R){var Q=this.workspace.getVariableById(f);if(Q.type===""){Q=Q.name,R=this.workspace.getVariableById(R);var le=!1;for(let Z=0;Z<this.argumentVarModels_.length;Z++)this.argumentVarModels_[Z].getId()===f&&(this.arguments_[Z]=R.name,this.argumentVarModels_[Z]=R,le=!0);le&&(this.displayRenamedVar_(Q,R.name),s.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(f){const R=f.name;let Q=!1,le;for(let Z=0;Z<this.argumentVarModels_.length;Z++)this.argumentVarModels_[Z].getId()===f.getId()&&(le=this.arguments_[Z],this.arguments_[Z]=R,Q=!0);Q&&(this.displayRenamedVar_(le,R),s.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(f,R){this.updateParams_();var Q=this.getIcon(s.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(Q&&Q.bubbleIsVisible()){Q=Q.getWorkspace().getAllBlocks(!1);for(let le=0,Z;Z=Q[le];le++)Z.type==="procedures_mutatorarg"&&s.Names$$module$build$src$core$names.equals(f,Z.getFieldValue("NAME"))&&Z.setFieldValue(R,"NAME")}},customContextMenu:function(f){if(!this.isInFlyout){var R=this.getFieldValue("NAME"),Q=s.createElement$$module$build$src$core$utils$xml("mutation");Q.setAttribute("name",R);for(var le=0;le<this.arguments_.length;le++){var Z=s.createElement$$module$build$src$core$utils$xml("arg");Z.setAttribute("name",this.arguments_[le]),Q.appendChild(Z)}if(le=s.createElement$$module$build$src$core$utils$xml("block"),le.setAttribute("type",this.callType_),le.appendChild(Q),f.push({enabled:!0,text:s.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",R),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,le)}),!this.isCollapsed())for(R=0;R<this.argumentVarModels_.length;R++)Q=this.argumentVarModels_[R],le=s.generateVariableFieldDom$$module$build$src$core$variables(Q),Z=s.createElement$$module$build$src$core$utils$xml("block"),Z.setAttribute("type","variables_get"),Z.appendChild(le),f.push({enabled:!0,text:s.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",Q.name),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,Z)})}}};ue.procedures_defnoreturn=Object.assign({},ie,{init:function(){var f=s.findLegalName$$module$build$src$core$procedures("",this);f=s.fromJson$$module$build$src$core$field_registry({type:"field_input",text:f}),f.setValidator(s.rename$$module$build$src$core$procedures),f.setSpellcheck(!1),this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(f,"NAME").appendField("","PARAMS"),this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),ue.procedures_defreturn=Object.assign({},ie,{init:function(){var f=s.findLegalName$$module$build$src$core$procedures("",this);f=s.fromJson$$module$build$src$core$field_registry({type:"field_input",text:f}),f.setValidator(s.rename$$module$build$src$core$procedures),f.setSpellcheck(!1),this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(f,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(s.Align$$module$build$src$core$inputs$input.RIGHT).appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var A={init:function(){this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(s.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};ue.procedures_mutatorcontainer=A;var Y={init:function(){const f=s.fromJson$$module$build$src$core$field_registry({type:"field_input",text:s.DEFAULT_ARG$$module$build$src$core$procedures});f.setValidator(this.validator_),f.oldShowEditorFn_=f.showEditor_,f.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(f,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,f.onFinishEditing_=this.deleteIntermediateVars_,f.createdVariables_=[],f.onFinishEditing_("x")},validator_:function(f){var R=this.getSourceBlock();const Q=R.workspace.getRootWorkspace();if(f=f.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!f)return null;const le=(R.workspace.targetWorkspace||R.workspace).getAllBlocks(!1),Z=f.toLowerCase();for(let ye=0;ye<le.length;ye++){if(le[ye].id===this.getSourceBlock().id)continue;const N=le[ye].getFieldValue("NAME");if(N&&N.toLowerCase()===Z)return null}return R.isInFlyout||((R=Q.getVariable(f,""))&&R.name!==f&&Q.renameVariableById(R.getId(),f),R||(R=Q.createVariable(f,""))&&this.createdVariables_&&this.createdVariables_.push(R)),f},deleteIntermediateVars_:function(f){const R=this.getSourceBlock().workspace.getRootWorkspace();if(R)for(let Q=0;Q<this.createdVariables_.length;Q++){const le=this.createdVariables_[Q];le.name!==f&&R.deleteVariableById(le.getId())}}};ue.procedures_mutatorarg=Y;var K={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(f,R){s.Names$$module$build$src$core$names.equals(f,this.getProcedureCall())&&(this.setFieldValue(R,"NAME"),this.setTooltip((this.outputConnection?s.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:s.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",R)))},setProcedureParameters_:function(f,R){var Q=s.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((Q=(Q=Q&&Q.getIcon(s.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&Q.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),f.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=R;else{if(R.length!==f.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Z=0;Z<this.arguments_.length;Z++){var le=this.getInput("ARG"+Z);le&&(le=le.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Z]]=le,Q&&le&&R.indexOf(this.quarkIds_[Z])===-1&&(le.disconnect(),le.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(f),this.argumentVarModels_=[],f=0;f<this.arguments_.length;f++)Q=s.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[f],""),this.argumentVarModels_.push(Q);if(this.updateShape_(),this.quarkIds_=R){for(R=0;R<this.arguments_.length;R++)if(f=this.quarkIds_[R],f in this.quarkConnections_){let Z;(Z=this.quarkConnections_[f])!=null&&Z.reconnect(this,"ARG"+R)||delete this.quarkConnections_[f]}}}},updateShape_:function(){for(var f=0;f<this.arguments_.length;f++){var R=this.getField("ARGNAME"+f);if(R){s.disable$$module$build$src$core$events$utils();try{R.setValue(this.arguments_[f])}finally{s.enable$$module$build$src$core$events$utils()}}else R=s.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[f]}),this.appendValueInput("ARG"+f).setAlign(s.Align$$module$build$src$core$inputs$input.RIGHT).appendField(R,"ARGNAME"+f).init()}for(f=this.arguments_.length;this.getInput("ARG"+f);f++)this.removeInput("ARG"+f);(f=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(f.appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),f.init()):this.getField("WITH")&&f.removeField("WITH"))},mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation");f.setAttribute("name",this.getProcedureCall());for(let R=0;R<this.arguments_.length;R++){const Q=s.createElement$$module$build$src$core$utils$xml("arg");Q.setAttribute("name",this.arguments_[R]),f.appendChild(Q)}return f},domToMutation:function(f){var R=f.getAttribute("name");this.renameProcedure(this.getProcedureCall(),R),R=[];const Q=[];for(let le=0,Z;Z=f.childNodes[le];le++)Z.nodeName.toLowerCase()==="arg"&&(R.push(Z.getAttribute("name")),Q.push(Z.getAttribute("paramId")));this.setProcedureParameters_(R,Q)},saveExtraState:function(){const f=Object.create(null);return f.name=this.getProcedureCall(),this.arguments_.length&&(f.params=this.arguments_),f},loadExtraState:function(f){if(this.renameProcedure(this.getProcedureCall(),f.name),f=f.params){const R=[];R.length=f.length,R.fill(null),this.setProcedureParameters_(f,R)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(f){if(this.workspace&&!this.workspace.isFlyout&&f.recordUndo)if(f.type===s.CREATE$$module$build$src$core$events$utils&&f.ids.indexOf(this.id)!==-1){var R=this.getProcedureCall();if(R=s.getDefinition$$module$build$src$core$procedures(R,this.workspace),!R||R.type===this.defType_&&JSON.stringify(R.getVars())===JSON.stringify(this.arguments_)||(R=null),!R){s.setGroup$$module$build$src$core$events$utils(f.group),f=s.createElement$$module$build$src$core$utils$xml("xml"),R=s.createElement$$module$build$src$core$utils$xml("block"),R.setAttribute("type",this.defType_);var Q=this.getRelativeToSurfaceXY(),le=Q.y+2*s.config$$module$build$src$core$config.snapRadius;R.setAttribute("x",`${Q.x+s.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),R.setAttribute("y",`${le}`),Q=this.mutationToDom(),R.appendChild(Q),Q=s.createElement$$module$build$src$core$utils$xml("field"),Q.setAttribute("name","NAME"),le=this.getProcedureCall();const Z=s.findLegalName$$module$build$src$core$procedures(le,this);le!==Z&&this.renameProcedure(le,Z),Q.appendChild(s.createTextNode$$module$build$src$core$utils$xml(le)),R.appendChild(Q),f.appendChild(R),s.domToWorkspace$$module$build$src$core$xml(f,this.workspace),s.setGroup$$module$build$src$core$events$utils(!1)}}else f.type===s.DELETE$$module$build$src$core$events$utils?(R=this.getProcedureCall(),s.getDefinition$$module$build$src$core$procedures(R,this.workspace)||(s.setGroup$$module$build$src$core$events$utils(f.group),this.dispose(!0),s.setGroup$$module$build$src$core$events$utils(!1))):f.type===s.CHANGE$$module$build$src$core$events$utils&&f.element==="disabled"&&(R=this.getProcedureCall(),(R=s.getDefinition$$module$build$src$core$procedures(R,this.workspace))&&R.id===f.blockId&&((R=s.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),s.setGroup$$module$build$src$core$events$utils(f.group),f.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),s.setGroup$$module$build$src$core$events$utils(R)))},customContextMenu:function(f){if(this.workspace.isMovable()){var R=this.getProcedureCall(),Q=this.workspace;f.push({enabled:!0,text:s.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const le=s.getDefinition$$module$build$src$core$procedures(R,Q);le&&(Q.centerOnBlock(le.id),le.select())}})}}};ue.procedures_callnoreturn=Object.assign({},K,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),ue.procedures_callreturn=Object.assign({},K,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"});var pe={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(s.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("value",String(Number(this.hasReturnValue_))),f},domToMutation:function(f){this.hasReturnValue_=f.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(f){if(!(this.workspace.isDragging&&this.workspace.isDragging()||f.type!==s.MOVE$$module$build$src$core$events$utils)){var R=!1,Q=this;do{if(this.FUNCTION_TYPES.indexOf(Q.type)!==-1){R=!0;break}Q=Q.getSurroundParent()}while(Q);R?(Q.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):Q.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(s.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(Q=s.getGroup$$module$build$src$core$events$utils(),s.setGroup$$module$build$src$core$events$utils(f.group),this.setEnabled(R),s.setGroup$$module$build$src$core$events$utils(Q))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};ue.procedures_ifreturn=pe,s.defineBlocks$$module$build$src$core$common(ue);var j={};j.blocks=ue;var ee=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:""},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),me={init:function(){this.WHERE_OPTIONS_1=[[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation");var R=this.getInput("AT1")instanceof s.ValueInput$$module$build$src$core$inputs$value_input;return f.setAttribute("at1",`${R}`),R=this.getInput("AT2")instanceof s.ValueInput$$module$build$src$core$inputs$value_input,f.setAttribute("at2",`${R}`),f},domToMutation:function(f){const R=f.getAttribute("at1")==="true";f=f.getAttribute("at2")==="true",this.updateAt_(1,R),this.updateAt_(2,f)},updateAt_:function(f,R){this.removeInput("AT"+f),this.removeInput("ORDINAL"+f,!0),R?(this.appendValueInput("AT"+f).setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+f).appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+f),f===2&&s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));const Q=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+f]});Q.setValidator(function(le){const Z=le==="FROM_START"||le==="FROM_END";if(Z!==R){const ye=this.getSourceBlock();return ye.updateAt_(f,Z),ye.setFieldValue(le,"WHERE"+f),null}}),this.getInput("AT"+f).appendField(Q,"WHERE"+f),f===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}};ee.text_getSubstring=me,ee.text_changeCase={init:function(){const f=[[s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},ee.text_trim={init:function(){const f=[[s.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[s.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[s.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(s.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},ee.text_print={init:function(){this.jsonInit({message0:s.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:s.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:s.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var Se={updateType_:function(f){this.outputConnection.setCheck(f==="NUMBER"?"Number":"String")},mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("type",this.getFieldValue("TYPE")),f},domToMutation:function(f){this.updateType_(f.getAttribute("type"))}};ee.text_prompt_ext=Object.assign({},Se,{init:function(){var f=[[s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),f=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),f.setValidator(R=>{this.updateType_(R)}),this.appendValueInput("TEXT").appendField(f,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});var Ne=Object.assign({},Se,{init:function(){this.mixin(O);var f=[[s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),f=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:f}),f.setValidator(R=>{this.updateType_(R)}),this.appendDummyInput().appendField(f,"TYPE").appendField(this.newQuote_(!0)).appendField(s.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});ee.text_prompt=Ne,ee.text_count={init:function(){this.jsonInit({message0:s.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:s.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:s.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},ee.text_replace={init:function(){this.jsonInit({message0:s.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:s.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:s.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},ee.text_reverse={init:function(){this.jsonInit({message0:s.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:s.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:s.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var O={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(f){for(let R=0,Q;Q=this.inputList[R];R++)for(let le=0,Z;Z=Q.fieldRow[le];le++)if(f===Z.name){Q.insertFieldAt(le,this.newQuote_(!0)),Q.insertFieldAt(le+2,this.newQuote_(!1));return}console.warn('field named "'+f+'" not found in '+this.toDevString())},newQuote_:function(f){return f=this.RTL?!f:f,s.fromJson$$module$build$src$core$field_registry({type:"field_image",src:f?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:f?"":""})}},F=function(){this.mixin(O),this.quoteField_("TEXT")},Oe={itemCount_:0,mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("items",`${this.itemCount_}`),f},domToMutation:function(f){this.itemCount_=parseInt(f.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(f){this.itemCount_=f.itemCount,this.updateShape_()},decompose:function(f){const R=f.newBlock("text_create_join_container");R.initSvg();let Q=R.getInput("STACK").connection;for(let le=0;le<this.itemCount_;le++){const Z=f.newBlock("text_create_join_item");Z.initSvg(),Q.connect(Z.previousConnection),Q=Z.nextConnection}return R},compose:function(f){var R=f.getInputTargetBlock("STACK");for(f=[];R;)R.isInsertionMarker()||f.push(R.valueConnection_),R=R.getNextBlock();for(R=0;R<this.itemCount_;R++){const Q=this.getInput("ADD"+R).connection.targetConnection;Q&&f.indexOf(Q)===-1&&Q.disconnect()}for(this.itemCount_=f.length,this.updateShape_(),R=0;R<this.itemCount_;R++){let Q;(Q=f[R])==null||Q.reconnect(this,"ADD"+R)}},saveConnections:function(f){f=f.getInputTargetBlock("STACK");let R=0;for(;f;){if(f.isInsertionMarker()){f=f.getNextBlock();continue}const Q=this.getInput("ADD"+R);f.valueConnection_=Q&&Q.connection.targetConnection,f=f.getNextBlock(),R++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var f=0;f<this.itemCount_;f++)if(!this.getInput("ADD"+f)){const R=this.appendValueInput("ADD"+f).setAlign(s.Align$$module$build$src$core$inputs$align.RIGHT);f===0&&R.appendField(s.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(f=this.itemCount_;this.getInput("ADD"+f);f++)this.removeInput("ADD"+f)}},Ae=function(){this.mixin(O),this.itemCount_=2,this.updateShape_(),this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};s.register$$module$build$src$core$extensions("text_append_tooltip",s.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var nt=function(){this.setTooltip(()=>s.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},P={isAt_:!1,mutationToDom:function(){const f=s.createElement$$module$build$src$core$utils$xml("mutation");return f.setAttribute("at",`${this.isAt_}`),f},domToMutation:function(f){f=f.getAttribute("at")!=="false",this.updateAt_(f)},updateAt_:function(f){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),f&&(this.appendValueInput("AT").setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),s.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=f}},v=function(){this.getField("WHERE").setValidator(function(f){f=f==="FROM_START"||f==="FROM_END";const R=this.getSourceBlock();f!==R.isAt_&&R.updateAt_(f)}),this.updateAt_(!0),this.setTooltip(()=>{var f=this.getFieldValue("WHERE");let R=s.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(f==="FROM_START"||f==="FROM_END")&&(f=f==="FROM_START"?s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(R+="  "+f.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),R})};s.register$$module$build$src$core$extensions("text_indexOf_tooltip",nt),s.register$$module$build$src$core$extensions("text_quotes",F),s.registerMutator$$module$build$src$core$extensions("text_join_mutator",Oe,Ae),s.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",P,v),s.defineBlocks$$module$build$src$core$common(ee);var w={};w.blocks=ee;var M=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),Te={customContextMenu:function(f){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(R={text:s.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:Me(this)},Q=this.getField("VAR").getText(),Q={text:s.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",Q),enabled:!0,callback:se(this)},f.unshift(R),f.unshift(Q));else{if(this.type==="variables_get")var R="variables_set",Q=s.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else R="variables_get",Q=s.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;const le=this.getField("VAR").getText(),Z=s.createElement$$module$build$src$core$utils$xml("field");Z.setAttribute("name","VAR"),Z.appendChild(s.createTextNode$$module$build$src$core$utils$xml(le));const ye=s.createElement$$module$build$src$core$utils$xml("block");ye.setAttribute("type",R),ye.appendChild(Z),f.push({enabled:0<this.workspace.remainingCapacity(),text:Q.replace("%1",le),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,ye)})}}},Me=function(f){return function(){const R=f.workspace,Q=f.getField("VAR").getVariable();s.renameVariable$$module$build$src$core$variables(R,Q)}},se=function(f){return function(){const R=f.workspace,Q=f.getField("VAR").getVariable();R.deleteVariableById(Q.getId()),R.refreshToolboxSelection()}};s.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",Te),s.defineBlocks$$module$build$src$core$common(M);var be={};be.blocks=M;var De=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),Fe={customContextMenu:function(f){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(R={text:s.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:Ge(this)},le=this.getField("VAR").getText(),le={text:s.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",le),enabled:!0,callback:ze(this)},f.unshift(R),f.unshift(le));else{var R=this.getFieldValue("VAR"),Q=this.workspace.getVariableById(R).type;if(this.type==="variables_get_dynamic"){R="variables_set_dynamic";var le=s.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET}else R="variables_get_dynamic",le=s.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;const Z=this.getField("VAR").getText(),ye=s.createElement$$module$build$src$core$utils$xml("field");ye.setAttribute("name","VAR"),ye.setAttribute("variabletype",Q),ye.appendChild(s.createTextNode$$module$build$src$core$utils$xml(Z)),Q=s.createElement$$module$build$src$core$utils$xml("block"),Q.setAttribute("type",R),Q.appendChild(ye),f.push({enabled:0<this.workspace.remainingCapacity(),text:le.replace("%1",Z),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,Q)})}},onchange:function(f){f=this.getFieldValue("VAR"),f=s.getVariable$$module$build$src$core$variables(this.workspace,f),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(f.type):this.getInput("VALUE").connection.setCheck(f.type)}},Ge=function(f){return function(){const R=f.workspace,Q=f.getField("VAR").getVariable();s.renameVariable$$module$build$src$core$variables(R,Q)}},ze=function(f){return function(){const R=f.workspace,Q=f.getField("VAR").getVariable();R.deleteVariableById(Q.getId()),R.refreshToolboxSelection()}};s.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",Fe),s.defineBlocks$$module$build$src$core$common(De);var Xe={};Xe.blocks=De;var st=Object.assign({},a,h,H,U,J,ue,M,De),oe={};return oe.blocks=st,oe.colour=u,oe.lists=B,oe.loops=q,oe.math=ge,oe.procedures=j,oe.texts=w,oe.variables=be,oe.variablesDynamic=Xe,oe.__namespace__=s,oe})}(C_)),C_.exports}var yO;function ZD(){return yO||(yO=1,function(r,n){(function(i,s){r.exports=s(qD())})(ut,function(i){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})}(k_)),k_.exports}var nL={exports:{}},A_={exports:{}},wO;function JD(){return wO||(wO=1,function(r,n){(function(i,s){r.exports=s(Lb())})(ut,function(i){var s=i.__namespace__,a=function(b,k){return[k.quote_(b.getFieldValue("COLOUR")),oe.ATOMIC]},u=function(b,k){return[k.provideFunction_("colourRandom",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",oe.FUNCTION_CALL]},h=function(b,k){const ne=k.valueToCode(b,"RED",oe.NONE)||0,Ee=k.valueToCode(b,"GREEN",oe.NONE)||0;return b=k.valueToCode(b,"BLUE",oe.NONE)||0,[k.provideFunction_("colourRgb",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+ne+", "+Ee+", "+b+")",oe.FUNCTION_CALL]},d=function(b,k){const ne=k.valueToCode(b,"COLOUR1",oe.NONE)||"'#000000'",Ee=k.valueToCode(b,"COLOUR2",oe.NONE)||"'#000000'";return b=k.valueToCode(b,"RATIO",oe.NONE)||.5,[k.provideFunction_("colourBlend",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+ne+", "+Ee+", "+b+")",oe.FUNCTION_CALL]},p=function(b,k){return["[]",oe.ATOMIC]},T=function(b,k){const ne=Array(b.itemCount_);for(let Ee=0;Ee<b.itemCount_;Ee++)ne[Ee]=k.valueToCode(b,"ADD"+Ee,oe.NONE)||"null";return["["+ne.join(", ")+"]",oe.ATOMIC]},E=function(b,k){const ne=k.provideFunction_("listsRepeat",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),Ee=k.valueToCode(b,"ITEM",oe.NONE)||"null";return b=k.valueToCode(b,"NUM",oe.NONE)||"0",[ne+"("+Ee+", "+b+")",oe.FUNCTION_CALL]},y=function(b,k){return[(k.valueToCode(b,"VALUE",oe.MEMBER)||"[]")+".length",oe.MEMBER]},S=function(b,k){return["!"+(k.valueToCode(b,"VALUE",oe.MEMBER)||"[]")+".length",oe.LOGICAL_NOT]},x=function(b,k){const ne=b.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",Ee=k.valueToCode(b,"FIND",oe.NONE)||"''";return k=(k.valueToCode(b,"VALUE",oe.MEMBER)||"[]")+"."+ne+"("+Ee+")",b.workspace.options.oneBasedIndex?[k+" + 1",oe.ADDITION]:[k,oe.FUNCTION_CALL]},B=function(b,k){const ne=b.getFieldValue("MODE")||"GET",Ee=b.getFieldValue("WHERE")||"FROM_START";var Le=k.valueToCode(b,"VALUE",Ee==="RANDOM"?oe.NONE:oe.MEMBER)||"[]";switch(Ee){case"FIRST":if(ne==="GET")return[Le+"[0]",oe.MEMBER];if(ne==="GET_REMOVE")return[Le+".shift()",oe.MEMBER];if(ne==="REMOVE")return Le+`.shift();
`;break;case"LAST":if(ne==="GET")return[Le+".slice(-1)[0]",oe.MEMBER];if(ne==="GET_REMOVE")return[Le+".pop()",oe.MEMBER];if(ne==="REMOVE")return Le+`.pop();
`;break;case"FROM_START":if(b=k.getAdjusted(b,"AT"),ne==="GET")return[Le+"["+b+"]",oe.MEMBER];if(ne==="GET_REMOVE")return[Le+".splice("+b+", 1)[0]",oe.FUNCTION_CALL];if(ne==="REMOVE")return Le+".splice("+b+`, 1);
`;break;case"FROM_END":if(b=k.getAdjusted(b,"AT",1,!0),ne==="GET")return[Le+".slice("+b+")[0]",oe.FUNCTION_CALL];if(ne==="GET_REMOVE")return[Le+".splice("+b+", 1)[0]",oe.FUNCTION_CALL];if(ne==="REMOVE")return Le+".splice("+b+", 1);";break;case"RANDOM":if(Le=k.provideFunction_("listsGetRandomItem",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+Le+", "+(ne!=="GET")+")",ne==="GET"||ne==="GET_REMOVE")return[Le,oe.FUNCTION_CALL];if(ne==="REMOVE")return Le+`;
`}throw Error("Unhandled combination (lists_getIndex).")},H=function(b,k){function ne(){if(Ee.match(/^\w+$/))return"";const gt=k.nameDB_.getDistinctName("tmpList",s.NameType$$module$build$src$core$names.VARIABLE),jt="var "+gt+" = "+Ee+`;
`;return Ee=gt,jt}let Ee=k.valueToCode(b,"LIST",oe.MEMBER)||"[]";const Le=b.getFieldValue("MODE")||"GET";var Ue=b.getFieldValue("WHERE")||"FROM_START";const tt=k.valueToCode(b,"TO",oe.ASSIGNMENT)||"null";switch(Ue){case"FIRST":if(Le==="SET")return Ee+"[0] = "+tt+`;
`;if(Le==="INSERT")return Ee+".unshift("+tt+`);
`;break;case"LAST":if(Le==="SET")return ne()+(Ee+"["+Ee+".length - 1] = "+tt+`;
`);if(Le==="INSERT")return Ee+".push("+tt+`);
`;break;case"FROM_START":if(b=k.getAdjusted(b,"AT"),Le==="SET")return Ee+"["+b+"] = "+tt+`;
`;if(Le==="INSERT")return Ee+".splice("+b+", 0, "+tt+`);
`;break;case"FROM_END":if(b=k.getAdjusted(b,"AT",1,!1,oe.SUBTRACTION),Ue=ne(),Le==="SET")return Ue+(Ee+"["+Ee+".length - "+b+"] = "+tt+`;
`);if(Le==="INSERT")return Ue+(Ee+".splice("+Ee+".length - "+b+", 0, "+tt+`);
`);break;case"RANDOM":if(b=ne(),Ue=k.nameDB_.getDistinctName("tmpX",s.NameType$$module$build$src$core$names.VARIABLE),b+="var "+Ue+" = Math.floor(Math.random() * "+Ee+`.length);
`,Le==="SET")return b+(Ee+"["+Ue+"] = "+tt+`;
`);if(Le==="INSERT")return b+(Ee+".splice("+Ue+", 0, "+tt+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},W=function(b,k){var ne=k.valueToCode(b,"LIST",oe.MEMBER)||"[]",Ee=b.getFieldValue("WHERE1");const Le=b.getFieldValue("WHERE2");if(Ee==="FIRST"&&Le==="LAST")ne+=".slice(0)";else if(ne.match(/^\w+$/)||Ee!=="FROM_END"&&Le==="FROM_START"){switch(Ee){case"FROM_START":Ee=k.getAdjusted(b,"AT1");break;case"FROM_END":Ee=k.getAdjusted(b,"AT1",1,!1,oe.SUBTRACTION),Ee=ne+".length - "+Ee;break;case"FIRST":Ee="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(Le){case"FROM_START":k=k.getAdjusted(b,"AT2",1);break;case"FROM_END":k=k.getAdjusted(b,"AT2",0,!1,oe.SUBTRACTION),k=ne+".length - "+k;break;case"LAST":k=ne+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}ne=ne+".slice("+Ee+", "+k+")"}else{const Ue=k.getAdjusted(b,"AT1");b=k.getAdjusted(b,"AT2");const tt={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};ne=k.provideFunction_("subsequence"+tt[Ee]+tt[Le],`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(sequence${Ee==="FROM_END"||Ee==="FROM_START"?", at1":""}${Le==="FROM_END"||Le==="FROM_START"?", at2":""}) {
  var start = ${Q("sequence",Ee,"at1")};
  var end = ${Q("sequence",Le,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+ne+(Ee==="FROM_END"||Ee==="FROM_START"?", "+Ue:"")+(Le==="FROM_END"||Le==="FROM_START"?", "+b:"")+")"}return[ne,oe.FUNCTION_CALL]},$=function(b,k){const ne=k.valueToCode(b,"LIST",oe.FUNCTION_CALL)||"[]",Ee=b.getFieldValue("DIRECTION")==="1"?1:-1;return b=b.getFieldValue("TYPE"),k=k.provideFunction_("listsGetSortCompare",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[ne+".slice().sort("+k+'("'+b+'", '+Ee+"))",oe.FUNCTION_CALL]},m=function(b,k){let ne=k.valueToCode(b,"INPUT",oe.MEMBER);if(k=k.valueToCode(b,"DELIM",oe.NONE)||"''",b=b.getFieldValue("MODE"),b==="SPLIT")ne||(ne="''"),b="split";else if(b==="JOIN")ne||(ne="[]"),b="join";else throw Error("Unknown mode: "+b);return[ne+"."+b+"("+k+")",oe.FUNCTION_CALL]},I=function(b,k){return[(k.valueToCode(b,"LIST",oe.FUNCTION_CALL)||"[]")+".slice().reverse()",oe.FUNCTION_CALL]},D=function(b,k){var ne=0;let Ee="";k.STATEMENT_PREFIX&&(Ee+=k.injectId(k.STATEMENT_PREFIX,b));do{const Le=k.valueToCode(b,"IF"+ne,oe.NONE)||"false";let Ue=k.statementToCode(b,"DO"+ne);k.STATEMENT_SUFFIX&&(Ue=k.prefixLines(k.injectId(k.STATEMENT_SUFFIX,b),k.INDENT)+Ue),Ee+=(0<ne?" else ":"")+"if ("+Le+`) {
`+Ue+"}",ne++}while(b.getInput("IF"+ne));return(b.getInput("ELSE")||k.STATEMENT_SUFFIX)&&(ne=k.statementToCode(b,"ELSE"),k.STATEMENT_SUFFIX&&(ne=k.prefixLines(k.injectId(k.STATEMENT_SUFFIX,b),k.INDENT)+ne),Ee+=` else {
`+ne+"}"),Ee+`
`},C=function(b,k){const ne={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[b.getFieldValue("OP")],Ee=ne==="=="||ne==="!="?oe.EQUALITY:oe.RELATIONAL,Le=k.valueToCode(b,"A",Ee)||"0";return b=k.valueToCode(b,"B",Ee)||"0",[Le+" "+ne+" "+b,Ee]},U=function(b,k){const ne=b.getFieldValue("OP")==="AND"?"&&":"||",Ee=ne==="&&"?oe.LOGICAL_AND:oe.LOGICAL_OR;let Le=k.valueToCode(b,"A",Ee);return b=k.valueToCode(b,"B",Ee),Le||b?(k=ne==="&&"?"true":"false",Le||(Le=k),b||(b=k)):b=Le="false",[Le+" "+ne+" "+b,Ee]},V=function(b,k){const ne=oe.LOGICAL_NOT;return["!"+(k.valueToCode(b,"BOOL",ne)||"true"),ne]},te=function(b,k){return[b.getFieldValue("BOOL")==="TRUE"?"true":"false",oe.ATOMIC]},ae=function(b,k){return["null",oe.ATOMIC]},de=function(b,k){const ne=k.valueToCode(b,"IF",oe.CONDITIONAL)||"false",Ee=k.valueToCode(b,"THEN",oe.CONDITIONAL)||"null";return b=k.valueToCode(b,"ELSE",oe.CONDITIONAL)||"null",[ne+" ? "+Ee+" : "+b,oe.CONDITIONAL]},we=function(b,k){let ne;ne=b.getField("TIMES")?String(Number(b.getFieldValue("TIMES"))):k.valueToCode(b,"TIMES",oe.ASSIGNMENT)||"0";let Ee=k.statementToCode(b,"DO");Ee=k.addLoopTrap(Ee,b),b="";const Le=k.nameDB_.getDistinctName("count",s.NameType$$module$build$src$core$names.VARIABLE);let Ue=ne;return ne.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(ne)||(Ue=k.nameDB_.getDistinctName("repeat_end",s.NameType$$module$build$src$core$names.VARIABLE),b+="var "+Ue+" = "+ne+`;
`),b+("for (var "+Le+" = 0; "+Le+" < "+Ue+"; "+Le+`++) {
`+Ee+`}
`)},q=function(b,k){const ne=b.getFieldValue("MODE")==="UNTIL";let Ee=k.valueToCode(b,"BOOL",ne?oe.LOGICAL_NOT:oe.NONE)||"false",Le=k.statementToCode(b,"DO");return Le=k.addLoopTrap(Le,b),ne&&(Ee="!"+Ee),"while ("+Ee+`) {
`+Le+`}
`},J=function(b,k){var ne=k.nameDB_.getName(b.getFieldValue("VAR"),s.NameType$$module$build$src$core$names.VARIABLE),Ee=k.valueToCode(b,"FROM",oe.ASSIGNMENT)||"0",Le=k.valueToCode(b,"TO",oe.ASSIGNMENT)||"0";const Ue=k.valueToCode(b,"BY",oe.ASSIGNMENT)||"1";let tt=k.statementToCode(b,"DO");if(tt=k.addLoopTrap(tt,b),s.isNumber$$module$build$src$core$utils$string(Ee)&&s.isNumber$$module$build$src$core$utils$string(Le)&&s.isNumber$$module$build$src$core$utils$string(Ue))k=Number(Ee)<=Number(Le),b="for ("+ne+" = "+Ee+"; "+ne+(k?" <= ":" >= ")+Le+"; "+ne,ne=Math.abs(Number(Ue)),b=ne===1?b+(k?"++":"--"):b+((k?" += ":" -= ")+ne),b+=`) {
`+tt+`}
`;else{b="";let gt=Ee;Ee.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(Ee)||(gt=k.nameDB_.getDistinctName(ne+"_start",s.NameType$$module$build$src$core$names.VARIABLE),b+="var "+gt+" = "+Ee+`;
`),Ee=Le,Le.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(Le)||(Ee=k.nameDB_.getDistinctName(ne+"_end",s.NameType$$module$build$src$core$names.VARIABLE),b+="var "+Ee+" = "+Le+`;
`),Le=k.nameDB_.getDistinctName(ne+"_inc",s.NameType$$module$build$src$core$names.VARIABLE),b+="var "+Le+" = ",b=s.isNumber$$module$build$src$core$utils$string(Ue)?b+(Math.abs(Ue)+`;
`):b+("Math.abs("+Ue+`);
`),b+="if ("+gt+" > "+Ee+`) {
`,b+=k.INDENT+Le+" = -"+Le+`;
`,b=b+`}
for (`+(ne+" = "+gt+"; "+Le+" >= 0 ? "+ne+" <= "+Ee+" : "+ne+" >= "+Ee+"; "+ne+" += "+Le+`) {
`+tt+`}
`)}return b},G=function(b,k){const ne=k.nameDB_.getName(b.getFieldValue("VAR"),s.NameType$$module$build$src$core$names.VARIABLE);var Ee=k.valueToCode(b,"LIST",oe.ASSIGNMENT)||"[]";let Le=k.statementToCode(b,"DO");Le=k.addLoopTrap(Le,b),b="";let Ue=Ee;return Ee.match(/^\w+$/)||(Ue=k.nameDB_.getDistinctName(ne+"_list",s.NameType$$module$build$src$core$names.VARIABLE),b+="var "+Ue+" = "+Ee+`;
`),Ee=k.nameDB_.getDistinctName(ne+"_index",s.NameType$$module$build$src$core$names.VARIABLE),Le=k.INDENT+ne+" = "+Ue+"["+Ee+`];
`+Le,b+("for (var "+Ee+" in "+Ue+`) {
`+Le+`}
`)},X=function(b,k){let ne="";if(k.STATEMENT_PREFIX&&(ne+=k.injectId(k.STATEMENT_PREFIX,b)),k.STATEMENT_SUFFIX&&(ne+=k.injectId(k.STATEMENT_SUFFIX,b)),k.STATEMENT_PREFIX){const Ee=b.getSurroundLoop();Ee&&!Ee.suppressPrefixSuffix&&(ne+=k.injectId(k.STATEMENT_PREFIX,Ee))}switch(b.getFieldValue("FLOW")){case"BREAK":return ne+`break;
`;case"CONTINUE":return ne+`continue;
`}throw Error("Unknown flow statement.")},ce=function(b,k){return b=Number(b.getFieldValue("NUM")),[b,0<=b?oe.ATOMIC:oe.UNARY_NEGATION]},fe=function(b,k){var ne={ADD:[" + ",oe.ADDITION],MINUS:[" - ",oe.SUBTRACTION],MULTIPLY:[" * ",oe.MULTIPLICATION],DIVIDE:[" / ",oe.DIVISION],POWER:[null,oe.NONE]}[b.getFieldValue("OP")];const Ee=ne[0];ne=ne[1];const Le=k.valueToCode(b,"A",ne)||"0";return b=k.valueToCode(b,"B",ne)||"0",Ee?[Le+Ee+b,ne]:["Math.pow("+Le+", "+b+")",oe.FUNCTION_CALL]},re=function(b,k){const ne=b.getFieldValue("OP");let Ee;if(ne==="NEG")return b=k.valueToCode(b,"NUM",oe.UNARY_NEGATION)||"0",b[0]==="-"&&(b=" "+b),["-"+b,oe.UNARY_NEGATION];switch(b=ne==="SIN"||ne==="COS"||ne==="TAN"?k.valueToCode(b,"NUM",oe.DIVISION)||"0":k.valueToCode(b,"NUM",oe.NONE)||"0",ne){case"ABS":Ee="Math.abs("+b+")";break;case"ROOT":Ee="Math.sqrt("+b+")";break;case"LN":Ee="Math.log("+b+")";break;case"EXP":Ee="Math.exp("+b+")";break;case"POW10":Ee="Math.pow(10,"+b+")";break;case"ROUND":Ee="Math.round("+b+")";break;case"ROUNDUP":Ee="Math.ceil("+b+")";break;case"ROUNDDOWN":Ee="Math.floor("+b+")";break;case"SIN":Ee="Math.sin("+b+" / 180 * Math.PI)";break;case"COS":Ee="Math.cos("+b+" / 180 * Math.PI)";break;case"TAN":Ee="Math.tan("+b+" / 180 * Math.PI)"}if(Ee)return[Ee,oe.FUNCTION_CALL];switch(ne){case"LOG10":Ee="Math.log("+b+") / Math.log(10)";break;case"ASIN":Ee="Math.asin("+b+") / Math.PI * 180";break;case"ACOS":Ee="Math.acos("+b+") / Math.PI * 180";break;case"ATAN":Ee="Math.atan("+b+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+ne)}return[Ee,oe.DIVISION]},ge=function(b,k){return{PI:["Math.PI",oe.MEMBER],E:["Math.E",oe.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",oe.DIVISION],SQRT2:["Math.SQRT2",oe.MEMBER],SQRT1_2:["Math.SQRT1_2",oe.MEMBER],INFINITY:["Infinity",oe.ATOMIC]}[b.getFieldValue("CONSTANT")]},ue=function(b,k){var ne={EVEN:[" % 2 === 0",oe.MODULUS,oe.EQUALITY],ODD:[" % 2 === 1",oe.MODULUS,oe.EQUALITY],WHOLE:[" % 1 === 0",oe.MODULUS,oe.EQUALITY],POSITIVE:[" > 0",oe.RELATIONAL,oe.RELATIONAL],NEGATIVE:[" < 0",oe.RELATIONAL,oe.RELATIONAL],DIVISIBLE_BY:[null,oe.MODULUS,oe.EQUALITY],PRIME:[null,oe.NONE,oe.FUNCTION_CALL]};const Ee=b.getFieldValue("PROPERTY"),[Le,Ue,tt]=ne[Ee];return ne=k.valueToCode(b,"NUMBER_TO_CHECK",Ue)||"0",Ee==="PRIME"?b=k.provideFunction_("mathIsPrime",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+ne+")":Ee==="DIVISIBLE_BY"?(b=k.valueToCode(b,"DIVISOR",oe.MODULUS)||"0",b=ne+" % "+b+" === 0"):b=ne+Le,[b,tt]},ie=function(b,k){const ne=k.valueToCode(b,"DELTA",oe.ADDITION)||"0";return b=k.nameDB_.getName(b.getFieldValue("VAR"),s.NameType$$module$build$src$core$names.VARIABLE),b+" = (typeof "+b+" === 'number' ? "+b+" : 0) + "+ne+`;
`},A=function(b,k){var ne=b.getFieldValue("OP");switch(ne){case"SUM":b=k.valueToCode(b,"LIST",oe.MEMBER)||"[]",b+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":b=k.valueToCode(b,"LIST",oe.NONE)||"[]",b="Math.min.apply(null, "+b+")";break;case"MAX":b=k.valueToCode(b,"LIST",oe.NONE)||"[]",b="Math.max.apply(null, "+b+")";break;case"AVERAGE":ne=k.provideFunction_("mathMean",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),b=k.valueToCode(b,"LIST",oe.NONE)||"[]",b=ne+"("+b+")";break;case"MEDIAN":ne=k.provideFunction_("mathMedian",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),b=k.valueToCode(b,"LIST",oe.NONE)||"[]",b=ne+"("+b+")";break;case"MODE":ne=k.provideFunction_("mathModes",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),b=k.valueToCode(b,"LIST",oe.NONE)||"[]",b=ne+"("+b+")";break;case"STD_DEV":ne=k.provideFunction_("mathStandardDeviation",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),b=k.valueToCode(b,"LIST",oe.NONE)||"[]",b=ne+"("+b+")";break;case"RANDOM":ne=k.provideFunction_("mathRandomList",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),b=k.valueToCode(b,"LIST",oe.NONE)||"[]",b=ne+"("+b+")";break;default:throw Error("Unknown operator: "+ne)}return[b,oe.FUNCTION_CALL]},Y=function(b,k){const ne=k.valueToCode(b,"DIVIDEND",oe.MODULUS)||"0";return b=k.valueToCode(b,"DIVISOR",oe.MODULUS)||"0",[ne+" % "+b,oe.MODULUS]},K=function(b,k){const ne=k.valueToCode(b,"VALUE",oe.NONE)||"0",Ee=k.valueToCode(b,"LOW",oe.NONE)||"0";return b=k.valueToCode(b,"HIGH",oe.NONE)||"Infinity",["Math.min(Math.max("+ne+", "+Ee+"), "+b+")",oe.FUNCTION_CALL]},pe=function(b,k){const ne=k.valueToCode(b,"FROM",oe.NONE)||"0";return b=k.valueToCode(b,"TO",oe.NONE)||"0",[k.provideFunction_("mathRandomInt",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+ne+", "+b+")",oe.FUNCTION_CALL]},j=function(b,k){return["Math.random()",oe.FUNCTION_CALL]},ee=function(b,k){const ne=k.valueToCode(b,"X",oe.NONE)||"0";return["Math.atan2("+(k.valueToCode(b,"Y",oe.NONE)||"0")+", "+ne+") / Math.PI * 180",oe.DIVISION]},me=function(b,k){const ne=k.nameDB_.getName(b.getFieldValue("NAME"),s.NameType$$module$build$src$core$names.PROCEDURE);var Ee="";k.STATEMENT_PREFIX&&(Ee+=k.injectId(k.STATEMENT_PREFIX,b)),k.STATEMENT_SUFFIX&&(Ee+=k.injectId(k.STATEMENT_SUFFIX,b)),Ee&&(Ee=k.prefixLines(Ee,k.INDENT));let Le="";k.INFINITE_LOOP_TRAP&&(Le=k.prefixLines(k.injectId(k.INFINITE_LOOP_TRAP,b),k.INDENT));const Ue=k.statementToCode(b,"STACK");let tt=k.valueToCode(b,"RETURN",oe.NONE)||"",gt="";Ue&&tt&&(gt=Ee),tt&&(tt=k.INDENT+"return "+tt+`;
`);const jt=[],Ye=b.getVars();for(let Ht=0;Ht<Ye.length;Ht++)jt[Ht]=k.nameDB_.getName(Ye[Ht],s.NameType$$module$build$src$core$names.VARIABLE);return Ee="function "+ne+"("+jt.join(", ")+`) {
`+Ee+Le+Ue+gt+tt+"}",Ee=k.scrub_(b,Ee),k.definitions_["%"+ne]=Ee,null},Se=function(b,k){const ne=k.nameDB_.getName(b.getFieldValue("NAME"),s.NameType$$module$build$src$core$names.PROCEDURE),Ee=[],Le=b.getVars();for(let Ue=0;Ue<Le.length;Ue++)Ee[Ue]=k.valueToCode(b,"ARG"+Ue,oe.NONE)||"null";return[ne+"("+Ee.join(", ")+")",oe.FUNCTION_CALL]},Ne=function(b,k){return k.forBlock.procedures_callreturn(b,k)[0]+`;
`},O=function(b,k){let ne="if ("+(k.valueToCode(b,"CONDITION",oe.NONE)||"false")+`) {
`;return k.STATEMENT_SUFFIX&&(ne+=k.prefixLines(k.injectId(k.STATEMENT_SUFFIX,b),k.INDENT)),b.hasReturnValue_?(b=k.valueToCode(b,"VALUE",oe.NONE)||"null",ne+=k.INDENT+"return "+b+`;
`):ne+=k.INDENT+`return;
`,ne+`}
`},F=function(b,k){return[k.quote_(b.getFieldValue("TEXT")),oe.ATOMIC]},Oe=function(b,k){return b=k.multiline_quote_(b.getFieldValue("TEXT")),k=b.indexOf("+")!==-1?oe.ADDITION:oe.ATOMIC,[b,k]},Ae=function(b,k){switch(b.itemCount_){case 0:return["''",oe.ATOMIC];case 1:return b=k.valueToCode(b,"ADD0",oe.NONE)||"''",_(b);case 2:var ne=k.valueToCode(b,"ADD0",oe.NONE)||"''";return b=k.valueToCode(b,"ADD1",oe.NONE)||"''",[_(ne)[0]+" + "+_(b)[0],oe.ADDITION];default:ne=Array(b.itemCount_);for(let Ee=0;Ee<b.itemCount_;Ee++)ne[Ee]=k.valueToCode(b,"ADD"+Ee,oe.NONE)||"''";return["["+ne.join(",")+"].join('')",oe.FUNCTION_CALL]}},nt=function(b,k){const ne=k.nameDB_.getName(b.getFieldValue("VAR"),s.NameType$$module$build$src$core$names.VARIABLE);return b=k.valueToCode(b,"TEXT",oe.NONE)||"''",ne+" += "+_(b)[0]+`;
`},P=function(b,k){return[(k.valueToCode(b,"VALUE",oe.MEMBER)||"''")+".length",oe.MEMBER]},v=function(b,k){return["!"+(k.valueToCode(b,"VALUE",oe.MEMBER)||"''")+".length",oe.LOGICAL_NOT]},w=function(b,k){const ne=b.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",Ee=k.valueToCode(b,"FIND",oe.NONE)||"''";return k=(k.valueToCode(b,"VALUE",oe.MEMBER)||"''")+"."+ne+"("+Ee+")",b.workspace.options.oneBasedIndex?[k+" + 1",oe.ADDITION]:[k,oe.FUNCTION_CALL]},M=function(b,k){const ne=b.getFieldValue("WHERE")||"FROM_START",Ee=k.valueToCode(b,"VALUE",ne==="RANDOM"?oe.NONE:oe.MEMBER)||"''";switch(ne){case"FIRST":return[Ee+".charAt(0)",oe.FUNCTION_CALL];case"LAST":return[Ee+".slice(-1)",oe.FUNCTION_CALL];case"FROM_START":return b=k.getAdjusted(b,"AT"),[Ee+".charAt("+b+")",oe.FUNCTION_CALL];case"FROM_END":return b=k.getAdjusted(b,"AT",1,!0),[Ee+".slice("+b+").charAt(0)",oe.FUNCTION_CALL];case"RANDOM":return[k.provideFunction_("textRandomLetter",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+Ee+")",oe.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},Te=function(b,k){var ne=b.getFieldValue("WHERE1");const Ee=b.getFieldValue("WHERE2");var Le=ne!=="FROM_END"&&ne!=="LAST"&&Ee!=="FROM_END"&&Ee!=="LAST",Ue=k.valueToCode(b,"STRING",Le?oe.MEMBER:oe.NONE)||"''";if(ne==="FIRST"&&Ee==="LAST")return[Ue,oe.NONE];if(Ue.match(/^'?\w+'?$/)||Le){switch(ne){case"FROM_START":ne=k.getAdjusted(b,"AT1");break;case"FROM_END":ne=k.getAdjusted(b,"AT1",1,!1,oe.SUBTRACTION),ne=Ue+".length - "+ne;break;case"FIRST":ne="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(Ee){case"FROM_START":k=k.getAdjusted(b,"AT2",1);break;case"FROM_END":k=k.getAdjusted(b,"AT2",0,!1,oe.SUBTRACTION),k=Ue+".length - "+k;break;case"LAST":k=Ue+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}Ue=Ue+".slice("+ne+", "+k+")"}else{Le=k.getAdjusted(b,"AT1"),b=k.getAdjusted(b,"AT2");const tt={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};Ue=k.provideFunction_("subsequence"+tt[ne]+tt[Ee],`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(sequence${ne==="FROM_END"||ne==="FROM_START"?", at1":""}${Ee==="FROM_END"||Ee==="FROM_START"?", at2":""}) {
  var start = ${ke("sequence",ne,"at1")};
  var end = ${ke("sequence",Ee,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Ue+(ne==="FROM_END"||ne==="FROM_START"?", "+Le:"")+(Ee==="FROM_END"||Ee==="FROM_START"?", "+b:"")+")"}return[Ue,oe.FUNCTION_CALL]},Me=function(b,k){const ne={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[b.getFieldValue("CASE")];return b=k.valueToCode(b,"TEXT",ne?oe.MEMBER:oe.NONE)||"''",[ne?b+ne:k.provideFunction_("textToTitleCase",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+b+")",oe.FUNCTION_CALL]},se=function(b,k){const ne={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[b.getFieldValue("MODE")];return[(k.valueToCode(b,"TEXT",oe.MEMBER)||"''")+ne,oe.FUNCTION_CALL]},be=function(b,k){return"window.alert("+(k.valueToCode(b,"TEXT",oe.NONE)||"''")+`);
`},De=function(b,k){return k="window.prompt("+(b.getField("TEXT")?k.quote_(b.getFieldValue("TEXT")):k.valueToCode(b,"TEXT",oe.NONE)||"''")+")",b.getFieldValue("TYPE")==="NUMBER"&&(k="Number("+k+")"),[k,oe.FUNCTION_CALL]},Fe=function(b,k){const ne=k.valueToCode(b,"TEXT",oe.NONE)||"''";return b=k.valueToCode(b,"SUB",oe.NONE)||"''",[k.provideFunction_("textCount",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+ne+", "+b+")",oe.FUNCTION_CALL]},Ge=function(b,k){const ne=k.valueToCode(b,"TEXT",oe.NONE)||"''",Ee=k.valueToCode(b,"FROM",oe.NONE)||"''";return b=k.valueToCode(b,"TO",oe.NONE)||"''",[k.provideFunction_("textReplace",`
function ${k.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+ne+", "+Ee+", "+b+")",oe.FUNCTION_CALL]},ze=function(b,k){return[(k.valueToCode(b,"TEXT",oe.MEMBER)||"''")+".split('').reverse().join('')",oe.FUNCTION_CALL]},Xe=function(b,k){return[k.nameDB_.getName(b.getFieldValue("VAR"),s.NameType$$module$build$src$core$names.VARIABLE),oe.ATOMIC]},st=function(b,k){const ne=k.valueToCode(b,"VALUE",oe.ASSIGNMENT)||"0";return k.nameDB_.getName(b.getFieldValue("VAR"),s.NameType$$module$build$src$core$names.VARIABLE)+" = "+ne+`;
`},oe={ATOMIC:0,NEW:1.1,MEMBER:1.2,FUNCTION_CALL:2,INCREMENT:3,DECREMENT:3,BITWISE_NOT:4.1,UNARY_PLUS:4.2,UNARY_NEGATION:4.3,LOGICAL_NOT:4.4,TYPEOF:4.5,VOID:4.6,DELETE:4.7,AWAIT:4.8,EXPONENTIATION:5,MULTIPLICATION:5.1,DIVISION:5.2,MODULUS:5.3,SUBTRACTION:6.1,ADDITION:6.2,BITWISE_SHIFT:7,RELATIONAL:8,IN:8,INSTANCEOF:8,EQUALITY:9,BITWISE_AND:10,BITWISE_XOR:11,BITWISE_OR:12,LOGICAL_AND:13,LOGICAL_OR:14,CONDITIONAL:15,ASSIGNMENT:16,YIELD:17,COMMA:18,NONE:99},f=class extends s.CodeGenerator$$module$build$src$core$generator{constructor(b){super(b??"JavaScript"),this.ORDER_OVERRIDES=[[oe.FUNCTION_CALL,oe.MEMBER],[oe.FUNCTION_CALL,oe.FUNCTION_CALL],[oe.MEMBER,oe.MEMBER],[oe.MEMBER,oe.FUNCTION_CALL],[oe.LOGICAL_NOT,oe.LOGICAL_NOT],[oe.MULTIPLICATION,oe.MULTIPLICATION],[oe.ADDITION,oe.ADDITION],[oe.LOGICAL_AND,oe.LOGICAL_AND],[oe.LOGICAL_OR,oe.LOGICAL_OR]],this.isInitialized=!1;for(const k in oe)this["ORDER_"+k]=oe[k];this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(b){super.init(b),this.nameDB_?this.nameDB_.reset():this.nameDB_=new s.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(b.getVariableMap()),this.nameDB_.populateVariables(b),this.nameDB_.populateProcedures(b);const k=[];var ne=s.allDeveloperVariables$$module$build$src$core$variables(b);for(let Ee=0;Ee<ne.length;Ee++)k.push(this.nameDB_.getName(ne[Ee],s.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(b=s.allUsedVarModels$$module$build$src$core$variables(b),ne=0;ne<b.length;ne++)k.push(this.nameDB_.getName(b[ne].getId(),s.NameType$$module$build$src$core$names.VARIABLE));k.length&&(this.definitions_.variables="var "+k.join(", ")+";"),this.isInitialized=!0}finish(b){const k=Object.values(this.definitions_);return super.finish(b),this.isInitialized=!1,this.nameDB_.reset(),k.join(`

`)+`


`+b}scrubNakedValue(b){return b+`;
`}quote_(b){return b=b.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+b+"'"}multiline_quote_(b){return b.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(b,k,ne){let Ee="";if(!b.outputConnection||!b.outputConnection.targetConnection){var Le=b.getCommentText();Le&&(Le=s.wrap$$module$build$src$core$utils$string(Le,this.COMMENT_WRAP-3),Ee+=this.prefixLines(Le+`
`,"// "));for(let Ue=0;Ue<b.inputList.length;Ue++)b.inputList[Ue].type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(Le=b.inputList[Ue].connection.targetBlock())&&(Le=this.allNestedComments(Le))&&(Ee+=this.prefixLines(Le,"// "))}return b=b.nextConnection&&b.nextConnection.targetBlock(),ne=ne?"":this.blockToCode(b),Ee+k+ne}getAdjusted(b,k,ne,Ee,Le){ne=ne||0,Le=Le||this.ORDER_NONE,b.workspace.options.oneBasedIndex&&ne--;const Ue=b.workspace.options.oneBasedIndex?"1":"0";let tt,gt=Le;return 0<ne?tt=gt=this.ORDER_ADDITION:0>ne?tt=gt=this.ORDER_SUBTRACTION:Ee&&(tt=gt=this.ORDER_UNARY_NEGATION),b=this.valueToCode(b,k,gt)||Ue,s.isNumber$$module$build$src$core$utils$string(b)?(b=Number(b)+ne,Ee&&(b=-b)):(0<ne?b=b+" + "+ne:0>ne&&(b=b+" - "+-ne),Ee&&(b=ne?"-("+b+")":"-"+b),tt=Math.floor(tt),Le=Math.floor(Le),tt&&Le>=tt&&(b="("+b+")")),b}},R={};R.colour_blend=d,R.colour_picker=a,R.colour_random=u,R.colour_rgb=h;var Q=function(b,k,ne){return k==="FIRST"?"0":k==="FROM_END"?b+".length - 1 - "+ne:k==="LAST"?b+".length - 1":ne},le={};le.lists_create_empty=p,le.lists_create_with=T,le.lists_getIndex=B,le.lists_getSublist=W,le.lists_indexOf=x,le.lists_isEmpty=S,le.lists_length=y,le.lists_repeat=E,le.lists_reverse=I,le.lists_setIndex=H,le.lists_sort=$,le.lists_split=m;var Z={};Z.controls_if=D,Z.controls_ifelse=D,Z.logic_boolean=te,Z.logic_compare=C,Z.logic_negate=V,Z.logic_null=ae,Z.logic_operation=U,Z.logic_ternary=de;var ye={};ye.controls_flow_statements=X,ye.controls_for=J,ye.controls_forEach=G,ye.controls_repeat=we,ye.controls_repeat_ext=we,ye.controls_whileUntil=q;var N={};N.math_arithmetic=fe,N.math_atan2=ee,N.math_change=ie,N.math_constant=ge,N.math_constrain=K,N.math_modulo=Y,N.math_number=ce,N.math_number_property=ue,N.math_on_list=A,N.math_random_float=j,N.math_random_int=pe,N.math_round=re,N.math_single=re,N.math_trig=re;var Be={};Be.procedures_callnoreturn=Ne,Be.procedures_callreturn=Se,Be.procedures_defnoreturn=me,Be.procedures_defreturn=me,Be.procedures_ifreturn=O;var ot=/^\s*'([^']|\\')*'\s*$/,_=function(b){return ot.test(b)?[b,oe.ATOMIC]:["String("+b+")",oe.FUNCTION_CALL]},ke=function(b,k,ne){return k==="FIRST"?"0":k==="FROM_END"?b+".length - 1 - "+ne:k==="LAST"?b+".length - 1":ne},Ie={};Ie.text=F,Ie.text_append=nt,Ie.text_changeCase=Me,Ie.text_charAt=M,Ie.text_count=Fe,Ie.text_getSubstring=Te,Ie.text_indexOf=w,Ie.text_isEmpty=v,Ie.text_join=Ae,Ie.text_length=P,Ie.text_multiline=Oe,Ie.text_print=be,Ie.text_prompt=De,Ie.text_prompt_ext=De,Ie.text_replace=Ge,Ie.text_reverse=ze,Ie.text_trim=se;var z={};z.variables_get=Xe,z.variables_set=st;var $e={};$e.variables_get_dynamic=Xe,$e.variables_set_dynamic=st;var Re=new f;Object.assign(Re.forBlock,R,le,Z,ye,N,Be,Ie,z,$e);var Qe={};return Qe.JavascriptGenerator=f,Qe.Order=oe,Qe.javascriptGenerator=Re,Qe.__namespace__=s,Qe})}(A_)),A_.exports}(function(r,n){(function(i,s){r.exports=s(rL(),JD())})(ut,function(i,s){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return s})})(nL);var iL=nL.exports,SO;function QD(){return SO||(SO=1,function(r,n){(function(i,s){r.exports=s(rL(),KD(),ZD(),iL)})(ut,function(i,s,a,u){return i.setLocale(s),i})}(w_)),w_.exports}(function(r,n){(function(i,s){r.exports=s(QD())})(ut,function(i){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})})(tL);var eP=tL.exports;const Si=qs(eP);Si.Blocks.console_log={init:function(){this.appendValueInput("MESSAGE").setCheck(null).appendField("Console.log"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip("dd"),this.setHelpUrl("")}};function tP(r,n){var i=null,s=null,a=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];s=function(){i=null,r.apply(void 0,h)},i!=null&&clearTimeout(i),i=window.setTimeout(s,n)},u=function(){i!=null&&(clearTimeout(i),s&&s())};return[a,u]}var wf=globalThis&&globalThis.__assign||function(){return wf=Object.assign||function(r){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},wf.apply(this,arguments)};function rP(r,n,i){try{return n.getAllBlocks(!1).length>0?void 0:(Si.Xml.domToWorkspace(Si.Xml.textToDom(r),n),!0)}catch(s){return i&&i(s),!1}}function nP(r,n,i){try{return Si.serialization.workspaces.load(r,n),!0}catch(s){return i&&i(s),!1}}var iP=function(r){var n=r.ref,i=r.initialXml,s=r.initialJson,a=r.toolboxConfiguration,u=r.workspaceConfiguration,h=r.onWorkspaceChange,d=r.onImportXmlError,p=r.onImportError,T=r.onInject,E=r.onDispose;p=p??d;var y=Dt.useState(null),S=y[0],x=y[1],B=Dt.useState(i||null),H=B[0],W=B[1],$=Dt.useState(s||null),m=$[0],I=$[1],D=Dt.useState(!1),C=D[0],U=D[1],V=Dt.useState(!1),te=V[0],ae=V[1],de=Dt.useRef(u);Dt.useEffect(function(){de.current=u},[u]);var we=Dt.useRef(a);Dt.useEffect(function(){we.current=a,a&&S&&S.updateToolbox(a)},[a,S]);var q=Dt.useRef(T),J=Dt.useRef(E);Dt.useEffect(function(){q.current=T},[T]),Dt.useEffect(function(){J.current=E},[E]);var G=Dt.useCallback(function(X){h&&h(X)},[h]);return Dt.useEffect(function(){if(n.current){var X=Si.inject(n.current,wf(wf({},de.current),{toolbox:we.current}));x(X),U(!1),ae(!1),q.current&&q.current(X);var ce=J.current;return function(){X.dispose(),ce&&ce(X)}}},[n]),Dt.useEffect(function(){S&&!te&&G(S)},[G,te,S]),Dt.useEffect(function(){if(S!=null){var X=function(){G(S)};return S.addChangeListener(X),function(){S.removeChangeListener(X)}}},[S,G]),Dt.useEffect(function(){if(S!=null){var X=tP(function(){var re=Si.Xml.domToText(Si.Xml.workspaceToDom(S));if(re!==H){var ge=Si.serialization.workspaces.save(S);I(ge),W(re)}},200),ce=X[0],fe=X[1];return S.addChangeListener(ce),function(){S.removeChangeListener(ce),fe()}}},[S,H]),Dt.useEffect(function(){if(H&&S&&!C){var X=rP(H,S,p);X||W(null),U(!0)}else if(m&&S&&!C){var X=nP(m,S,p);X||I(null);var ce=Si.Xml.domToText(Si.Xml.workspaceToDom(S));W(ce),U(!0)}},[m,H,S,C,p]),{workspace:S,xml:H,json:m}},oL={exports:{}},oP="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",sP=oP,lP=sP;function sL(){}function lL(){}lL.resetWarningCache=sL;var aP=function(){function r(s,a,u,h,d,p){if(p!==lP){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}r.isRequired=r;function n(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:n,element:r,elementType:r,instanceOf:n,node:r,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:lL,resetWarningCache:sL};return i.PropTypes=i,i};oL.exports=aP();var uP=oL.exports;const wn=qs(uP);var cP={initialXml:wn.string,initialJson:wn.object,toolboxConfiguration:wn.object,workspaceConfiguration:wn.object,className:wn.string,onWorkspaceChange:wn.func,onImportXmlError:wn.func,onImportError:wn.func,onXmlChange:wn.func,onJsonChange:wn.func,onInject:wn.func,onDispose:wn.func},hP={initialXml:null,initialJson:null,toolboxConfiguration:null,workspaceConfiguration:null,className:null,onWorkspaceChange:null,onImportXmlError:null,onImportError:null,onXmlChange:null,onJsonChange:null,onInject:null,onDispose:null};function Nb(r){var n=r.initialXml,i=r.initialJson,s=r.toolboxConfiguration,a=r.workspaceConfiguration,u=r.className,h=r.onWorkspaceChange,d=r.onXmlChange,p=r.onJsonChange,T=r.onImportXmlError,E=r.onImportError,y=r.onInject,S=r.onDispose,x=Dt.useRef(null),B=iP({ref:x,initialXml:n,initialJson:i,toolboxConfiguration:s,workspaceConfiguration:a,onWorkspaceChange:h,onImportXmlError:T,onImportError:E,onInject:y,onDispose:S}),H=B.xml,W=B.json,$=Dt.useRef(d);Dt.useEffect(function(){$.current=d},[d]);var m=Dt.useRef(p);return Dt.useEffect(function(){m.current=p},[p]),Dt.useEffect(function(){$.current&&H&&$.current(H),m.current&&W&&m.current(W)},[H,W]),yt.jsx("div",{className:u,ref:x})}Nb.propTypes=cP;Nb.defaultProps=hP;var _t={},ep={};ep.byteLength=pP;ep.toByteArray=mP;ep.fromByteArray=EP;var Ri=[],In=[],dP=typeof Uint8Array<"u"?Uint8Array:Array,L_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Yl=0,fP=L_.length;Yl<fP;++Yl)Ri[Yl]=L_[Yl],In[L_.charCodeAt(Yl)]=Yl;In["-".charCodeAt(0)]=62;In["_".charCodeAt(0)]=63;function aL(r){var n=r.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=r.indexOf("=");i===-1&&(i=n);var s=i===n?0:4-i%4;return[i,s]}function pP(r){var n=aL(r),i=n[0],s=n[1];return(i+s)*3/4-s}function gP(r,n,i){return(n+i)*3/4-i}function mP(r){var n,i=aL(r),s=i[0],a=i[1],u=new dP(gP(r,s,a)),h=0,d=a>0?s-4:s,p;for(p=0;p<d;p+=4)n=In[r.charCodeAt(p)]<<18|In[r.charCodeAt(p+1)]<<12|In[r.charCodeAt(p+2)]<<6|In[r.charCodeAt(p+3)],u[h++]=n>>16&255,u[h++]=n>>8&255,u[h++]=n&255;return a===2&&(n=In[r.charCodeAt(p)]<<2|In[r.charCodeAt(p+1)]>>4,u[h++]=n&255),a===1&&(n=In[r.charCodeAt(p)]<<10|In[r.charCodeAt(p+1)]<<4|In[r.charCodeAt(p+2)]>>2,u[h++]=n>>8&255,u[h++]=n&255),u}function $P(r){return Ri[r>>18&63]+Ri[r>>12&63]+Ri[r>>6&63]+Ri[r&63]}function _P(r,n,i){for(var s,a=[],u=n;u<i;u+=3)s=(r[u]<<16&16711680)+(r[u+1]<<8&65280)+(r[u+2]&255),a.push($P(s));return a.join("")}function EP(r){for(var n,i=r.length,s=i%3,a=[],u=16383,h=0,d=i-s;h<d;h+=u)a.push(_P(r,h,h+u>d?d:h+u));return s===1?(n=r[i-1],a.push(Ri[n>>2]+Ri[n<<4&63]+"==")):s===2&&(n=(r[i-2]<<8)+r[i-1],a.push(Ri[n>>10]+Ri[n>>4&63]+Ri[n<<2&63]+"=")),a.join("")}var xb={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */xb.read=function(r,n,i,s,a){var u,h,d=a*8-s-1,p=(1<<d)-1,T=p>>1,E=-7,y=i?a-1:0,S=i?-1:1,x=r[n+y];for(y+=S,u=x&(1<<-E)-1,x>>=-E,E+=d;E>0;u=u*256+r[n+y],y+=S,E-=8);for(h=u&(1<<-E)-1,u>>=-E,E+=s;E>0;h=h*256+r[n+y],y+=S,E-=8);if(u===0)u=1-T;else{if(u===p)return h?NaN:(x?-1:1)*(1/0);h=h+Math.pow(2,s),u=u-T}return(x?-1:1)*h*Math.pow(2,u-s)};xb.write=function(r,n,i,s,a,u){var h,d,p,T=u*8-a-1,E=(1<<T)-1,y=E>>1,S=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=s?0:u-1,B=s?1:-1,H=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(d=isNaN(n)?1:0,h=E):(h=Math.floor(Math.log(n)/Math.LN2),n*(p=Math.pow(2,-h))<1&&(h--,p*=2),h+y>=1?n+=S/p:n+=S*Math.pow(2,1-y),n*p>=2&&(h++,p/=2),h+y>=E?(d=0,h=E):h+y>=1?(d=(n*p-1)*Math.pow(2,a),h=h+y):(d=n*Math.pow(2,y-1)*Math.pow(2,a),h=0));a>=8;r[i+x]=d&255,x+=B,d/=256,a-=8);for(h=h<<a|d,T+=a;T>0;r[i+x]=h&255,x+=B,h/=256,T-=8);r[i+x-B]|=H*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){var n=ep,i=xb,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=d,r.SlowBuffer=m,r.INSPECT_MAX_BYTES=50;var a=2147483647;r.kMaxLength=a,d.TYPED_ARRAY_SUPPORT=u(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{var P=new Uint8Array(1),v={foo:function(){return 42}};return Object.setPrototypeOf(v,Uint8Array.prototype),Object.setPrototypeOf(P,v),P.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function h(P){if(P>a)throw new RangeError('The value "'+P+'" is invalid for option "size"');var v=new Uint8Array(P);return Object.setPrototypeOf(v,d.prototype),v}function d(P,v,w){if(typeof P=="number"){if(typeof v=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(P)}return p(P,v,w)}d.poolSize=8192;function p(P,v,w){if(typeof P=="string")return S(P,v);if(ArrayBuffer.isView(P))return B(P);if(P==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(Oe(P,ArrayBuffer)||P&&Oe(P.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Oe(P,SharedArrayBuffer)||P&&Oe(P.buffer,SharedArrayBuffer)))return H(P,v,w);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var M=P.valueOf&&P.valueOf();if(M!=null&&M!==P)return d.from(M,v,w);var Te=W(P);if(Te)return Te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return d.from(P[Symbol.toPrimitive]("string"),v,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}d.from=function(P,v,w){return p(P,v,w)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array);function T(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function E(P,v,w){return T(P),P<=0?h(P):v!==void 0?typeof w=="string"?h(P).fill(v,w):h(P).fill(v):h(P)}d.alloc=function(P,v,w){return E(P,v,w)};function y(P){return T(P),h(P<0?0:$(P)|0)}d.allocUnsafe=function(P){return y(P)},d.allocUnsafeSlow=function(P){return y(P)};function S(P,v){if((typeof v!="string"||v==="")&&(v="utf8"),!d.isEncoding(v))throw new TypeError("Unknown encoding: "+v);var w=I(P,v)|0,M=h(w),Te=M.write(P,v);return Te!==w&&(M=M.slice(0,Te)),M}function x(P){for(var v=P.length<0?0:$(P.length)|0,w=h(v),M=0;M<v;M+=1)w[M]=P[M]&255;return w}function B(P){if(Oe(P,Uint8Array)){var v=new Uint8Array(P);return H(v.buffer,v.byteOffset,v.byteLength)}return x(P)}function H(P,v,w){if(v<0||P.byteLength<v)throw new RangeError('"offset" is outside of buffer bounds');if(P.byteLength<v+(w||0))throw new RangeError('"length" is outside of buffer bounds');var M;return v===void 0&&w===void 0?M=new Uint8Array(P):w===void 0?M=new Uint8Array(P,v):M=new Uint8Array(P,v,w),Object.setPrototypeOf(M,d.prototype),M}function W(P){if(d.isBuffer(P)){var v=$(P.length)|0,w=h(v);return w.length===0||P.copy(w,0,0,v),w}if(P.length!==void 0)return typeof P.length!="number"||Ae(P.length)?h(0):x(P);if(P.type==="Buffer"&&Array.isArray(P.data))return x(P.data)}function $(P){if(P>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return P|0}function m(P){return+P!=P&&(P=0),d.alloc(+P)}d.isBuffer=function(v){return v!=null&&v._isBuffer===!0&&v!==d.prototype},d.compare=function(v,w){if(Oe(v,Uint8Array)&&(v=d.from(v,v.offset,v.byteLength)),Oe(w,Uint8Array)&&(w=d.from(w,w.offset,w.byteLength)),!d.isBuffer(v)||!d.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===w)return 0;for(var M=v.length,Te=w.length,Me=0,se=Math.min(M,Te);Me<se;++Me)if(v[Me]!==w[Me]){M=v[Me],Te=w[Me];break}return M<Te?-1:Te<M?1:0},d.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(v,w){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return d.alloc(0);var M;if(w===void 0)for(w=0,M=0;M<v.length;++M)w+=v[M].length;var Te=d.allocUnsafe(w),Me=0;for(M=0;M<v.length;++M){var se=v[M];if(Oe(se,Uint8Array))Me+se.length>Te.length?d.from(se).copy(Te,Me):Uint8Array.prototype.set.call(Te,se,Me);else if(d.isBuffer(se))se.copy(Te,Me);else throw new TypeError('"list" argument must be an Array of Buffers');Me+=se.length}return Te};function I(P,v){if(d.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||Oe(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);var w=P.length,M=arguments.length>2&&arguments[2]===!0;if(!M&&w===0)return 0;for(var Te=!1;;)switch(v){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return me(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return O(P).length;default:if(Te)return M?-1:me(P).length;v=(""+v).toLowerCase(),Te=!0}}d.byteLength=I;function D(P,v,w){var M=!1;if((v===void 0||v<0)&&(v=0),v>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,v>>>=0,w<=v))return"";for(P||(P="utf8");;)switch(P){case"hex":return ge(this,v,w);case"utf8":case"utf-8":return G(this,v,w);case"ascii":return fe(this,v,w);case"latin1":case"binary":return re(this,v,w);case"base64":return J(this,v,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,v,w);default:if(M)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),M=!0}}d.prototype._isBuffer=!0;function C(P,v,w){var M=P[v];P[v]=P[w],P[w]=M}d.prototype.swap16=function(){var v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var w=0;w<v;w+=2)C(this,w,w+1);return this},d.prototype.swap32=function(){var v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var w=0;w<v;w+=4)C(this,w,w+3),C(this,w+1,w+2);return this},d.prototype.swap64=function(){var v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var w=0;w<v;w+=8)C(this,w,w+7),C(this,w+1,w+6),C(this,w+2,w+5),C(this,w+3,w+4);return this},d.prototype.toString=function(){var v=this.length;return v===0?"":arguments.length===0?G(this,0,v):D.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(v){if(!d.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:d.compare(this,v)===0},d.prototype.inspect=function(){var v="",w=r.INSPECT_MAX_BYTES;return v=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(v+=" ... "),"<Buffer "+v+">"},s&&(d.prototype[s]=d.prototype.inspect),d.prototype.compare=function(v,w,M,Te,Me){if(Oe(v,Uint8Array)&&(v=d.from(v,v.offset,v.byteLength)),!d.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(w===void 0&&(w=0),M===void 0&&(M=v?v.length:0),Te===void 0&&(Te=0),Me===void 0&&(Me=this.length),w<0||M>v.length||Te<0||Me>this.length)throw new RangeError("out of range index");if(Te>=Me&&w>=M)return 0;if(Te>=Me)return-1;if(w>=M)return 1;if(w>>>=0,M>>>=0,Te>>>=0,Me>>>=0,this===v)return 0;for(var se=Me-Te,be=M-w,De=Math.min(se,be),Fe=this.slice(Te,Me),Ge=v.slice(w,M),ze=0;ze<De;++ze)if(Fe[ze]!==Ge[ze]){se=Fe[ze],be=Ge[ze];break}return se<be?-1:be<se?1:0};function U(P,v,w,M,Te){if(P.length===0)return-1;if(typeof w=="string"?(M=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,Ae(w)&&(w=Te?0:P.length-1),w<0&&(w=P.length+w),w>=P.length){if(Te)return-1;w=P.length-1}else if(w<0)if(Te)w=0;else return-1;if(typeof v=="string"&&(v=d.from(v,M)),d.isBuffer(v))return v.length===0?-1:V(P,v,w,M,Te);if(typeof v=="number")return v=v&255,typeof Uint8Array.prototype.indexOf=="function"?Te?Uint8Array.prototype.indexOf.call(P,v,w):Uint8Array.prototype.lastIndexOf.call(P,v,w):V(P,[v],w,M,Te);throw new TypeError("val must be string, number or Buffer")}function V(P,v,w,M,Te){var Me=1,se=P.length,be=v.length;if(M!==void 0&&(M=String(M).toLowerCase(),M==="ucs2"||M==="ucs-2"||M==="utf16le"||M==="utf-16le")){if(P.length<2||v.length<2)return-1;Me=2,se/=2,be/=2,w/=2}function De(st,oe){return Me===1?st[oe]:st.readUInt16BE(oe*Me)}var Fe;if(Te){var Ge=-1;for(Fe=w;Fe<se;Fe++)if(De(P,Fe)===De(v,Ge===-1?0:Fe-Ge)){if(Ge===-1&&(Ge=Fe),Fe-Ge+1===be)return Ge*Me}else Ge!==-1&&(Fe-=Fe-Ge),Ge=-1}else for(w+be>se&&(w=se-be),Fe=w;Fe>=0;Fe--){for(var ze=!0,Xe=0;Xe<be;Xe++)if(De(P,Fe+Xe)!==De(v,Xe)){ze=!1;break}if(ze)return Fe}return-1}d.prototype.includes=function(v,w,M){return this.indexOf(v,w,M)!==-1},d.prototype.indexOf=function(v,w,M){return U(this,v,w,M,!0)},d.prototype.lastIndexOf=function(v,w,M){return U(this,v,w,M,!1)};function te(P,v,w,M){w=Number(w)||0;var Te=P.length-w;M?(M=Number(M),M>Te&&(M=Te)):M=Te;var Me=v.length;M>Me/2&&(M=Me/2);for(var se=0;se<M;++se){var be=parseInt(v.substr(se*2,2),16);if(Ae(be))return se;P[w+se]=be}return se}function ae(P,v,w,M){return F(me(v,P.length-w),P,w,M)}function de(P,v,w,M){return F(Se(v),P,w,M)}function we(P,v,w,M){return F(O(v),P,w,M)}function q(P,v,w,M){return F(Ne(v,P.length-w),P,w,M)}d.prototype.write=function(v,w,M,Te){if(w===void 0)Te="utf8",M=this.length,w=0;else if(M===void 0&&typeof w=="string")Te=w,M=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(M)?(M=M>>>0,Te===void 0&&(Te="utf8")):(Te=M,M=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Me=this.length-w;if((M===void 0||M>Me)&&(M=Me),v.length>0&&(M<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");Te||(Te="utf8");for(var se=!1;;)switch(Te){case"hex":return te(this,v,w,M);case"utf8":case"utf-8":return ae(this,v,w,M);case"ascii":case"latin1":case"binary":return de(this,v,w,M);case"base64":return we(this,v,w,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,v,w,M);default:if(se)throw new TypeError("Unknown encoding: "+Te);Te=(""+Te).toLowerCase(),se=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J(P,v,w){return v===0&&w===P.length?n.fromByteArray(P):n.fromByteArray(P.slice(v,w))}function G(P,v,w){w=Math.min(P.length,w);for(var M=[],Te=v;Te<w;){var Me=P[Te],se=null,be=Me>239?4:Me>223?3:Me>191?2:1;if(Te+be<=w){var De,Fe,Ge,ze;switch(be){case 1:Me<128&&(se=Me);break;case 2:De=P[Te+1],(De&192)===128&&(ze=(Me&31)<<6|De&63,ze>127&&(se=ze));break;case 3:De=P[Te+1],Fe=P[Te+2],(De&192)===128&&(Fe&192)===128&&(ze=(Me&15)<<12|(De&63)<<6|Fe&63,ze>2047&&(ze<55296||ze>57343)&&(se=ze));break;case 4:De=P[Te+1],Fe=P[Te+2],Ge=P[Te+3],(De&192)===128&&(Fe&192)===128&&(Ge&192)===128&&(ze=(Me&15)<<18|(De&63)<<12|(Fe&63)<<6|Ge&63,ze>65535&&ze<1114112&&(se=ze))}}se===null?(se=65533,be=1):se>65535&&(se-=65536,M.push(se>>>10&1023|55296),se=56320|se&1023),M.push(se),Te+=be}return ce(M)}var X=4096;function ce(P){var v=P.length;if(v<=X)return String.fromCharCode.apply(String,P);for(var w="",M=0;M<v;)w+=String.fromCharCode.apply(String,P.slice(M,M+=X));return w}function fe(P,v,w){var M="";w=Math.min(P.length,w);for(var Te=v;Te<w;++Te)M+=String.fromCharCode(P[Te]&127);return M}function re(P,v,w){var M="";w=Math.min(P.length,w);for(var Te=v;Te<w;++Te)M+=String.fromCharCode(P[Te]);return M}function ge(P,v,w){var M=P.length;(!v||v<0)&&(v=0),(!w||w<0||w>M)&&(w=M);for(var Te="",Me=v;Me<w;++Me)Te+=nt[P[Me]];return Te}function ue(P,v,w){for(var M=P.slice(v,w),Te="",Me=0;Me<M.length-1;Me+=2)Te+=String.fromCharCode(M[Me]+M[Me+1]*256);return Te}d.prototype.slice=function(v,w){var M=this.length;v=~~v,w=w===void 0?M:~~w,v<0?(v+=M,v<0&&(v=0)):v>M&&(v=M),w<0?(w+=M,w<0&&(w=0)):w>M&&(w=M),w<v&&(w=v);var Te=this.subarray(v,w);return Object.setPrototypeOf(Te,d.prototype),Te};function ie(P,v,w){if(P%1!==0||P<0)throw new RangeError("offset is not uint");if(P+v>w)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(v,w,M){v=v>>>0,w=w>>>0,M||ie(v,w,this.length);for(var Te=this[v],Me=1,se=0;++se<w&&(Me*=256);)Te+=this[v+se]*Me;return Te},d.prototype.readUintBE=d.prototype.readUIntBE=function(v,w,M){v=v>>>0,w=w>>>0,M||ie(v,w,this.length);for(var Te=this[v+--w],Me=1;w>0&&(Me*=256);)Te+=this[v+--w]*Me;return Te},d.prototype.readUint8=d.prototype.readUInt8=function(v,w){return v=v>>>0,w||ie(v,1,this.length),this[v]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(v,w){return v=v>>>0,w||ie(v,2,this.length),this[v]|this[v+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(v,w){return v=v>>>0,w||ie(v,2,this.length),this[v]<<8|this[v+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(v,w){return v=v>>>0,w||ie(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(v,w){return v=v>>>0,w||ie(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},d.prototype.readIntLE=function(v,w,M){v=v>>>0,w=w>>>0,M||ie(v,w,this.length);for(var Te=this[v],Me=1,se=0;++se<w&&(Me*=256);)Te+=this[v+se]*Me;return Me*=128,Te>=Me&&(Te-=Math.pow(2,8*w)),Te},d.prototype.readIntBE=function(v,w,M){v=v>>>0,w=w>>>0,M||ie(v,w,this.length);for(var Te=w,Me=1,se=this[v+--Te];Te>0&&(Me*=256);)se+=this[v+--Te]*Me;return Me*=128,se>=Me&&(se-=Math.pow(2,8*w)),se},d.prototype.readInt8=function(v,w){return v=v>>>0,w||ie(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},d.prototype.readInt16LE=function(v,w){v=v>>>0,w||ie(v,2,this.length);var M=this[v]|this[v+1]<<8;return M&32768?M|4294901760:M},d.prototype.readInt16BE=function(v,w){v=v>>>0,w||ie(v,2,this.length);var M=this[v+1]|this[v]<<8;return M&32768?M|4294901760:M},d.prototype.readInt32LE=function(v,w){return v=v>>>0,w||ie(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},d.prototype.readInt32BE=function(v,w){return v=v>>>0,w||ie(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},d.prototype.readFloatLE=function(v,w){return v=v>>>0,w||ie(v,4,this.length),i.read(this,v,!0,23,4)},d.prototype.readFloatBE=function(v,w){return v=v>>>0,w||ie(v,4,this.length),i.read(this,v,!1,23,4)},d.prototype.readDoubleLE=function(v,w){return v=v>>>0,w||ie(v,8,this.length),i.read(this,v,!0,52,8)},d.prototype.readDoubleBE=function(v,w){return v=v>>>0,w||ie(v,8,this.length),i.read(this,v,!1,52,8)};function A(P,v,w,M,Te,Me){if(!d.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>Te||v<Me)throw new RangeError('"value" argument is out of bounds');if(w+M>P.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(v,w,M,Te){if(v=+v,w=w>>>0,M=M>>>0,!Te){var Me=Math.pow(2,8*M)-1;A(this,v,w,M,Me,0)}var se=1,be=0;for(this[w]=v&255;++be<M&&(se*=256);)this[w+be]=v/se&255;return w+M},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(v,w,M,Te){if(v=+v,w=w>>>0,M=M>>>0,!Te){var Me=Math.pow(2,8*M)-1;A(this,v,w,M,Me,0)}var se=M-1,be=1;for(this[w+se]=v&255;--se>=0&&(be*=256);)this[w+se]=v/be&255;return w+M},d.prototype.writeUint8=d.prototype.writeUInt8=function(v,w,M){return v=+v,w=w>>>0,M||A(this,v,w,1,255,0),this[w]=v&255,w+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(v,w,M){return v=+v,w=w>>>0,M||A(this,v,w,2,65535,0),this[w]=v&255,this[w+1]=v>>>8,w+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(v,w,M){return v=+v,w=w>>>0,M||A(this,v,w,2,65535,0),this[w]=v>>>8,this[w+1]=v&255,w+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(v,w,M){return v=+v,w=w>>>0,M||A(this,v,w,4,4294967295,0),this[w+3]=v>>>24,this[w+2]=v>>>16,this[w+1]=v>>>8,this[w]=v&255,w+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(v,w,M){return v=+v,w=w>>>0,M||A(this,v,w,4,4294967295,0),this[w]=v>>>24,this[w+1]=v>>>16,this[w+2]=v>>>8,this[w+3]=v&255,w+4},d.prototype.writeIntLE=function(v,w,M,Te){if(v=+v,w=w>>>0,!Te){var Me=Math.pow(2,8*M-1);A(this,v,w,M,Me-1,-Me)}var se=0,be=1,De=0;for(this[w]=v&255;++se<M&&(be*=256);)v<0&&De===0&&this[w+se-1]!==0&&(De=1),this[w+se]=(v/be>>0)-De&255;return w+M},d.prototype.writeIntBE=function(v,w,M,Te){if(v=+v,w=w>>>0,!Te){var Me=Math.pow(2,8*M-1);A(this,v,w,M,Me-1,-Me)}var se=M-1,be=1,De=0;for(this[w+se]=v&255;--se>=0&&(be*=256);)v<0&&De===0&&this[w+se+1]!==0&&(De=1),this[w+se]=(v/be>>0)-De&255;return w+M},d.prototype.writeInt8=function(v,w,M){return v=+v,w=w>>>0,M||A(this,v,w,1,127,-128),v<0&&(v=255+v+1),this[w]=v&255,w+1},d.prototype.writeInt16LE=function(v,w,M){return v=+v,w=w>>>0,M||A(this,v,w,2,32767,-32768),this[w]=v&255,this[w+1]=v>>>8,w+2},d.prototype.writeInt16BE=function(v,w,M){return v=+v,w=w>>>0,M||A(this,v,w,2,32767,-32768),this[w]=v>>>8,this[w+1]=v&255,w+2},d.prototype.writeInt32LE=function(v,w,M){return v=+v,w=w>>>0,M||A(this,v,w,4,2147483647,-2147483648),this[w]=v&255,this[w+1]=v>>>8,this[w+2]=v>>>16,this[w+3]=v>>>24,w+4},d.prototype.writeInt32BE=function(v,w,M){return v=+v,w=w>>>0,M||A(this,v,w,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[w]=v>>>24,this[w+1]=v>>>16,this[w+2]=v>>>8,this[w+3]=v&255,w+4};function Y(P,v,w,M,Te,Me){if(w+M>P.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function K(P,v,w,M,Te){return v=+v,w=w>>>0,Te||Y(P,v,w,4),i.write(P,v,w,M,23,4),w+4}d.prototype.writeFloatLE=function(v,w,M){return K(this,v,w,!0,M)},d.prototype.writeFloatBE=function(v,w,M){return K(this,v,w,!1,M)};function pe(P,v,w,M,Te){return v=+v,w=w>>>0,Te||Y(P,v,w,8),i.write(P,v,w,M,52,8),w+8}d.prototype.writeDoubleLE=function(v,w,M){return pe(this,v,w,!0,M)},d.prototype.writeDoubleBE=function(v,w,M){return pe(this,v,w,!1,M)},d.prototype.copy=function(v,w,M,Te){if(!d.isBuffer(v))throw new TypeError("argument should be a Buffer");if(M||(M=0),!Te&&Te!==0&&(Te=this.length),w>=v.length&&(w=v.length),w||(w=0),Te>0&&Te<M&&(Te=M),Te===M||v.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(M<0||M>=this.length)throw new RangeError("Index out of range");if(Te<0)throw new RangeError("sourceEnd out of bounds");Te>this.length&&(Te=this.length),v.length-w<Te-M&&(Te=v.length-w+M);var Me=Te-M;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,M,Te):Uint8Array.prototype.set.call(v,this.subarray(M,Te),w),Me},d.prototype.fill=function(v,w,M,Te){if(typeof v=="string"){if(typeof w=="string"?(Te=w,w=0,M=this.length):typeof M=="string"&&(Te=M,M=this.length),Te!==void 0&&typeof Te!="string")throw new TypeError("encoding must be a string");if(typeof Te=="string"&&!d.isEncoding(Te))throw new TypeError("Unknown encoding: "+Te);if(v.length===1){var Me=v.charCodeAt(0);(Te==="utf8"&&Me<128||Te==="latin1")&&(v=Me)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(w<0||this.length<w||this.length<M)throw new RangeError("Out of range index");if(M<=w)return this;w=w>>>0,M=M===void 0?this.length:M>>>0,v||(v=0);var se;if(typeof v=="number")for(se=w;se<M;++se)this[se]=v;else{var be=d.isBuffer(v)?v:d.from(v,Te),De=be.length;if(De===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(se=0;se<M-w;++se)this[se+w]=be[se%De]}return this};var j=/[^+/0-9A-Za-z-_]/g;function ee(P){if(P=P.split("=")[0],P=P.trim().replace(j,""),P.length<2)return"";for(;P.length%4!==0;)P=P+"=";return P}function me(P,v){v=v||1/0;for(var w,M=P.length,Te=null,Me=[],se=0;se<M;++se){if(w=P.charCodeAt(se),w>55295&&w<57344){if(!Te){if(w>56319){(v-=3)>-1&&Me.push(239,191,189);continue}else if(se+1===M){(v-=3)>-1&&Me.push(239,191,189);continue}Te=w;continue}if(w<56320){(v-=3)>-1&&Me.push(239,191,189),Te=w;continue}w=(Te-55296<<10|w-56320)+65536}else Te&&(v-=3)>-1&&Me.push(239,191,189);if(Te=null,w<128){if((v-=1)<0)break;Me.push(w)}else if(w<2048){if((v-=2)<0)break;Me.push(w>>6|192,w&63|128)}else if(w<65536){if((v-=3)<0)break;Me.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((v-=4)<0)break;Me.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return Me}function Se(P){for(var v=[],w=0;w<P.length;++w)v.push(P.charCodeAt(w)&255);return v}function Ne(P,v){for(var w,M,Te,Me=[],se=0;se<P.length&&!((v-=2)<0);++se)w=P.charCodeAt(se),M=w>>8,Te=w%256,Me.push(Te),Me.push(M);return Me}function O(P){return n.toByteArray(ee(P))}function F(P,v,w,M){for(var Te=0;Te<M&&!(Te+w>=v.length||Te>=P.length);++Te)v[Te+w]=P[Te];return Te}function Oe(P,v){return P instanceof v||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===v.name}function Ae(P){return P!==P}var nt=function(){for(var P="0123456789abcdef",v=new Array(256),w=0;w<16;++w)for(var M=w*16,Te=0;Te<16;++Te)v[M+Te]=P[w]+P[Te];return v}()})(_t);var uL={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(r){(function(){var n={}.hasOwnProperty;function i(){for(var s=[],a=0;a<arguments.length;a++){var u=arguments[a];if(u){var h=typeof u;if(h==="string"||h==="number")s.push(u);else if(Array.isArray(u)){if(u.length){var d=i.apply(null,u);d&&s.push(d)}}else if(h==="object"){if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]")){s.push(u.toString());continue}for(var p in u)n.call(u,p)&&u[p]&&s.push(p)}}}return s.join(" ")}r.exports?(i.default=i,r.exports=i):window.classNames=i})()})(uL);var TP=uL.exports;const vP=qs(TP);var cL={},Mb={exports:{}};function bP(r,n){var i=n&&n.cache?n.cache:RP,s=n&&n.serializer?n.serializer:OP,a=n&&n.strategy?n.strategy:wP;return a(r,{cache:i,serializer:s})}function yP(r){return r==null||typeof r=="number"||typeof r=="boolean"}function hL(r,n,i,s){var a=yP(s)?s:i(s),u=n.get(a);return typeof u>"u"&&(u=r.call(this,s),n.set(a,u)),u}function dL(r,n,i){var s=Array.prototype.slice.call(arguments,3),a=i(s),u=n.get(a);return typeof u>"u"&&(u=r.apply(this,s),n.set(a,u)),u}function Db(r,n,i,s,a){return i.bind(n,r,s,a)}function wP(r,n){var i=r.length===1?hL:dL;return Db(r,this,i,n.cache.create(),n.serializer)}function SP(r,n){var i=dL;return Db(r,this,i,n.cache.create(),n.serializer)}function IP(r,n){var i=hL;return Db(r,this,i,n.cache.create(),n.serializer)}function OP(){return JSON.stringify(arguments)}function tp(){this.cache=Object.create(null)}tp.prototype.has=function(r){return r in this.cache};tp.prototype.get=function(r){return this.cache[r]};tp.prototype.set=function(r,n){this.cache[r]=n};var RP={create:function(){return new tp}};Mb.exports=bP;Mb.exports.strategies={variadic:SP,monadic:IP};var fL=Mb.exports,rp={},kP=ut&&ut.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rp,"__esModule",{value:!0});rp.getRules=void 0;var CP=kP(fL),AP="a^",pL=function(r){var n=r.prefix,i=r.jit,s=i?"\\[.+\\]":AP,a="((\\d|\\.|/)+|"+s+")",u="($|-0|-"+s+")",h="($|-"+a+")",d="([a-zA-Z]|"+a+")+",p="(-|[a-zA-Z]|"+a+")+",T="($|-"+p+")",E=[{regex:"content-none",properties:["content"]},{regex:"ease-(linear|in|out|in-out)",properties:["transition-timing-function"]},{regex:"duration-"+a,properties:["transition-duration"]},{regex:"delay-"+a,properties:["transition-delay"]},{regex:"transition($|-all|-colors|-opacity|-shadow|-transform)",properties:["transition-duration","transition-property","transition-timing-function"]},{regex:"transition-none",properties:["transition-property"]},{regex:"backdrop-sepia"+u,properties:["--tw-backdrop-sepia"]},{regex:"backdrop-saturate-"+a,properties:["--tw-backdrop-saturate"]},{regex:"backdrop-opacity-"+a,properties:["--tw-backdrop-opacity"]},{regex:"backdrop-invert"+u,properties:["--tw-backdrop-invert"]},{regex:"-?backdrop-hue-rotate-"+a,properties:["--tw-backdrop-hue-rotate"]},{regex:"backdrop-grayscale"+u,properties:["--tw-backdrop-grayscale"]},{regex:"backdrop-contrast-"+a,properties:["--tw-backdrop-contrast"]},{regex:"backdrop-brightness-"+a,properties:["--tw-backdrop-brightness"]},{regex:"backdrop-blur"+T,properties:["--tw-backdrop-blur"]},{regex:"backdrop-filter-none",properties:["-webkit-backdrop-filter","backdrop-filter"]},{regex:"backdrop-filter",properties:["--tw-backdrop-blur","--tw-backdrop-brightness","--tw-backdrop-contrast","--tw-backdrop-grayscale","--tw-backdrop-hue-rotate","--tw-backdrop-invert","--tw-backdrop-opacity","--tw-backdrop-saturate","--tw-backdrop-sepia","-webkit-backdrop-filter","backdrop-filter"]},{regex:"sepia"+u,properties:["--tw-sepia"]},{regex:"saturate-"+a,properties:["--tw-saturate"]},{regex:"invert"+u,properties:["--tw-invert"]},{regex:"-?hue-rotate-"+a,properties:["--tw-hue-rotate"]},{regex:"grayscale"+u,properties:["--tw-grayscale"]},{regex:"drop-shadow"+T,properties:["--tw-drop-shadow"]},{regex:"contrast-"+a,properties:["--tw-contrast"]},{regex:"brightness-"+a,properties:["--tw-brightness"]},{regex:"blur"+T,properties:["--tw-blur"]},{regex:"filter-none",properties:["filter"]},{regex:"filter",properties:["--tw-blur","--tw-brightness","--tw-contrast","--tw-drop-shadow","--tw-grayscale","--tw-hue-rotate","--tw-invert","--tw-saturate","--tw-sepia","filter"]},{regex:"ring-offset-[A-Za-z].*",properties:["--tw-ring-offset-color"]},{regex:"ring-offset-"+a,properties:["--tw-ring-offset-width"]},{regex:"ring-opacity-"+a,properties:["--tw-ring-opacity"]},{regex:"ring-(transparent|current)",properties:["--tw-ring-color"]},{regex:"ring"+h,properties:["--tw-ring-offset-shadow","--tw-ring-shadow","box-shadow"]},{regex:"ring-inset",properties:["--tw-ring-inset"]},{regex:"ring-"+p,properties:["--tw-ring-color","--tw-ring-opacity"]},{regex:"outline-(none|white|black)",properties:["outline","outline-offset"]},{regex:"shadow"+T,properties:["--tw-shadow","box-shadow"]},{regex:"mix-blend-"+p,properties:["mix-blend-mode"]},{regex:"bg-blend-"+p,properties:["background-blend-mode"]},{regex:"opacity-"+a,properties:["opacity"]},{regex:"caret-"+p,properties:["caret-color"]},{regex:"(subpixel-antialiased|antialiased)",properties:["-moz-osx-font-smoothing","-webkit-font-smoothing"]},{regex:"(underline|line-through|no-underline)",properties:["text-decoration"]},{regex:"text-opacity-"+a,properties:["--tw-text-opacity"]},{regex:"text-(transparent|current)",properties:["color"]},{regex:"text-(xs|sm|base|lg|xl|\\dxl)",properties:["font-size","line-height"]},{regex:"text-(left|center|right|justify)",properties:["text-align"]},{regex:"text-"+p,properties:["--tw-text-opacity","color"]},{regex:"tracking-"+p,properties:["letter-spacing"]},{regex:"leading-"+p,properties:["line-height"]},{regex:"(diagonal-fractions|stacked-fractions)",properties:["--tw-numeric-fraction"]},{regex:"(proportional-nums|tabular-nums)",properties:["--tw-numeric-spacing"]},{regex:"(lining-nums|oldstyle-nums)",properties:["--tw-numeric-figure"]},{regex:"slashed-zero",properties:["--tw-slashed-zero"]},{regex:"normal-nums",properties:["font-variant-numeric"]},{regex:"ordinal",properties:["--tw-numeric-figure","--tw-numeric-fraction","--tw-numeric-spacing","--tw-ordinal","--tw-slashed-zero","font-variant-numeric"]},{regex:"(italic|not-italic)",properties:["font-style"]},{regex:"(uppercase|lowercase|capitalize|normal-case)",properties:["text-transform"]},{regex:"font-(sans|serif|mono)",properties:["font-family"]},{regex:"font-"+p,properties:["font-weight"]},{regex:"align-"+p,properties:["vertical-align"]},{regex:"pl-"+d,properties:["padding-left"]},{regex:"pb-"+d,properties:["padding-bottom"]},{regex:"pr-"+d,properties:["padding-right"]},{regex:"pt-"+d,properties:["padding-top"]},{regex:"py-"+d,properties:["padding-bottom","padding-top"]},{regex:"px-"+d,properties:["padding-left","padding-right"]},{regex:"p-"+d,properties:["padding"]},{regex:"object-(bottom|center|left.*|right.*|top)",properties:["-o-object-position","object-position"]},{regex:"object-(contain|cover|fill|none|scale-down)",properties:["-o-object-fit","object-fit"]},{regex:"stroke-"+a,properties:["stroke-width"]},{regex:"stroke-current",properties:["stroke"]},{regex:"fill-current",properties:["fill"]},{regex:"bg-origin-"+p,properties:["background-origin"]},{regex:"bg-(no-)?repeat"+T,properties:["background-repeat"]},{regex:"bg-(bottom|center|left.*|right.*|top)",properties:["background-position"]},{regex:"bg-clip-text",properties:["-webkit-background-clip","background-clip"]},{regex:"bg-clip-(border|padding|content)",properties:["background-clip"]},{regex:"bg-(fixed|local|scroll)",properties:["background-attachment"]},{regex:"bg-(auto|cover|contain)",properties:["background-size"]},{regex:"decoration-(slice|clone)",properties:["-webkit-box-decoration-break","box-decoration-break"]},{regex:"to-"+p,properties:["--tw-gradient-to"]},{regex:"via-"+p,properties:["--tw-gradient-stops"]},{regex:"from-"+p,properties:["--tw-gradient-from","--tw-gradient-stops"]},{regex:"bg-(none|gradient-to-"+p+")",properties:["background-image"]},{regex:"bg-opacity-"+a,properties:["--tw-bg-opacity"]},{regex:"bg-(transparent|current)",properties:["background-color"]},{regex:"bg-"+p,properties:["--tw-bg-opacity","background-color"]},{regex:"border-opacity-"+a,properties:["--tw-border-opacity"]},{regex:"border-l"+h,properties:["border-left-width"]},{regex:"border-b"+h,properties:["border-bottom-width"]},{regex:"border-r"+h,properties:["border-right-width"]},{regex:"border-t"+h,properties:["border-top-width"]},{regex:"(divide-transparent|divide-current|border-transparent|border-current)",properties:["border-color"]},{regex:"(divide|border)-(solid|dashed|dotted|double|none)",properties:["border-style"]},{regex:"border-(collapse|separate)",properties:["border-collapse"]},{regex:"border"+h,properties:["border-width"]},{regex:"border-"+p,properties:["--tw-border-opacity","border-color"]},{regex:"rounded-bl"+T,properties:["border-bottom-left-radius"]},{regex:"rounded-br"+T,properties:["border-bottom-right-radius"]},{regex:"rounded-tr"+T,properties:["border-top-right-radius"]},{regex:"rounded-tl"+T,properties:["border-top-left-radius"]},{regex:"rounded-l"+T,properties:["border-bottom-left-radius","border-top-left-radius"]},{regex:"rounded-b"+T,properties:["border-bottom-left-radius","border-bottom-right-radius"]},{regex:"rounded-r"+T,properties:["border-bottom-right-radius","border-top-right-radius"]},{regex:"rounded-t"+T,properties:["border-top-left-radius","border-top-right-radius"]},{regex:"rounded"+T,properties:["border-radius"]},{regex:"break-all",properties:["word-break"]},{regex:"break-words",properties:["overflow-wrap"]},{regex:"break-normal",properties:["overflow-wrap","word-break"]},{regex:"whitespace-(normal|nowrap|pre|pre-line|pre-wrap)",properties:["white-space"]},{regex:"overflow-(clip|ellipsis)",properties:["text-overflow"]},{regex:"truncate",properties:["overflow","text-overflow","white-space"]},{regex:"overscroll-x-(auto|contain|none)",properties:["overscroll-behavior-x"]},{regex:"overscroll-y-(auto|contain|none)",properties:["overscroll-behavior-y"]},{regex:"overscroll-(auto|contain|none)",properties:["-ms-scroll-chaining","overscroll-behavior"]},{regex:"overflow-y-(auto|hidden|visible|scroll)",properties:["overflow-y"]},{regex:"overflow-x-(auto|hidden|visible|scroll)",properties:["overflow-x"]},{regex:"overflow-(auto|hidden|visible|scroll)",properties:["overflow"]},{regex:"justify-self-(auto|start|end|center|stretch)",properties:["justify-self"]},{regex:"self-(auto|start|end|center|stretch|baseline)",properties:["align-self"]},{regex:"place-self-(auto|start|end|center|stretch)",properties:["place-self"]},{regex:"divide-opacity-"+a,properties:["--tw-divide-opacity"]},{regex:"divide-x-reverse",properties:["--tw-divide-x-reverse"]},{regex:"divide-y-reverse",properties:["--tw-divide-y-reverse"]},{regex:"divide-y"+h,properties:["--tw-divide-y-reverse","border-bottom-width","border-top-width"]},{regex:"divide-x"+h,properties:["--tw-divide-x-reverse","border-left-width","border-right-width"]},{regex:"divide-"+p,properties:["--tw-divide-opacity","border-color"]},{regex:"space-x-reverse",properties:["--tw-space-x-reverse"]},{regex:"space-y-reverse",properties:["--tw-space-y-reverse"]},{regex:"-?space-y-"+d,properties:["--tw-space-y-reverse","margin-bottom","margin-top"]},{regex:"-?space-x-"+d,properties:["--tw-space-x-reverse","margin-left","margin-right"]},{regex:"gap-y-"+d,properties:["row-gap"]},{regex:"gap-x-"+d,properties:["-moz-column-gap","column-gap"]},{regex:"gap-"+d,properties:["gap"]},{regex:"justify-items-(start|end|center|stretch)",properties:["justify-items"]},{regex:"justify-(start|end|center|between|around|evenly)",properties:["justify-content"]},{regex:"items-(start|end|center|baseline|stretch)",properties:["align-items"]},{regex:"content-(center|start|end|between|around|evenly)",properties:["align-content"]},{regex:"place-items-(start|end|center|stretch)",properties:["place-items"]},{regex:"place-content-(center|start|end|between|around|evenly|stretch)",properties:["place-content"]},{regex:"flex-(wrap|wrap-reverse|nowrap)",properties:["flex-wrap"]},{regex:"flex-(row|row-reverse|col|col-reverse)",properties:["flex-direction"]},{regex:"grid-rows-"+d,properties:["grid-template-rows"]},{regex:"grid-cols-"+p,properties:["grid-template-columns"]},{regex:"auto-rows-"+p,properties:["grid-auto-rows"]},{regex:"grid-flow-"+p,properties:["grid-auto-flow"]},{regex:"auto-cols-"+p,properties:["grid-auto-columns"]},{regex:"appearance-none",properties:["-moz-appearance","-webkit-appearance","appearance"]},{regex:"list-(none|disc|decimal)",properties:["list-style-type"]},{regex:"list-(inside|outside)",properties:["list-style-position"]},{regex:"resize(-none|-y|-x)?",properties:["resize"]},{regex:"select-all",properties:["-moz-user-select","-webkit-user-select","user-select"]},{regex:"select-(none|text|auto)",properties:["-moz-user-select","-ms-user-select","-webkit-user-select","user-select"]},{regex:"cursor-"+p,properties:["cursor"]},{regex:"animate-"+p,properties:["-webkit-animation","animation"]},{regex:"scale-y-"+a,properties:["--tw-scale-y"]},{regex:"scale-x-"+a,properties:["--tw-scale-x"]},{regex:"scale-"+a,properties:["--tw-scale-x","--tw-scale-y"]},{regex:"-?skew-y-"+a,properties:["--tw-skew-y"]},{regex:"-?skew-x-"+a,properties:["--tw-skew-x"]},{regex:"-?rotate-"+a,properties:["--tw-rotate"]},{regex:"-?translate-y-"+d,properties:["--tw-translate-y"]},{regex:"-?translate-x-"+d,properties:["--tw-translate-x"]},{regex:"transform-none",properties:["transform"]},{regex:"transform(-gpu)?",properties:["--tw-rotate","--tw-scale-x","--tw-scale-y","--tw-skew-x","--tw-skew-y","--tw-translate-x","--tw-translate-y","transform"]},{regex:"origin-"+p,properties:["transform-origin"]},{regex:"table-(auto|fixed)",properties:["table-layout"]},{regex:"flex-grow"+u,properties:["flex-grow"]},{regex:"flex-shrink"+u,properties:["flex-shrink"]},{regex:"flex-"+p,properties:["flex"]},{regex:"max-w-"+p,properties:["max-width"]},{regex:"min-w-"+p,properties:["min-width"]},{regex:"w-"+p,properties:["width"]},{regex:"min-h-"+p,properties:["min-height"]},{regex:"max-h-"+p,properties:["max-height"]},{regex:"h-"+p,properties:["height"]},{regex:"(block|inline-block|inline|flex|inline-flex|table|inline-table|table-caption|table-cell|table-column|table-column-group|table-footer-group|table-header-group|table-row-group|table-row|flow-root|grid|inline-grid|contents|list-item|hidden)",properties:["display"]},{regex:"box-(border|content)",properties:["box-sizing"]},{regex:"-?ml-"+d,properties:["margin-left"]},{regex:"-?mb-"+d,properties:["margin-bottom"]},{regex:"-?mr-"+d,properties:["margin-right"]},{regex:"-?mt-"+d,properties:["margin-top"]},{regex:"-?my-"+d,properties:["margin-bottom","margin-top"]},{regex:"-?mx-"+d,properties:["margin-left","margin-right"]},{regex:"-?m-"+d,properties:["margin"]},{regex:"clear-(left|right|both|none)",properties:["clear"]},{regex:"float-(right|left|none)",properties:["float"]},{regex:"row-end-"+d,properties:["grid-row-end"]},{regex:"row-start-"+d,properties:["grid-row-start"]},{regex:"row-(auto|span-"+d+")",properties:["grid-row"]},{regex:"col-end-"+d,properties:["grid-column-end"]},{regex:"col-start-"+d,properties:["grid-column-start"]},{regex:"col-(auto|span-"+d+")",properties:["grid-column"]},{regex:"order-"+d,properties:["order"]},{regex:"z-"+d,properties:["z-index"]},{regex:"(isolate|isolation-auto)",properties:["isolation"]},{regex:"-?left-"+p,properties:["left"]},{regex:"-?bottom-"+p,properties:["bottom"]},{regex:"-?right-"+p,properties:["right"]},{regex:"-?top-"+p,properties:["top"]},{regex:"-?inset-y-"+p,properties:["bottom","top"]},{regex:"-?inset-x-"+p,properties:["left","right"]},{regex:"-?inset-"+p,properties:["bottom","left","right","top"]},{regex:"(static|fixed|absolute|relative|sticky)",properties:["position"]},{regex:"(visible|invisible)",properties:["visibility"]},{regex:"pointer-events-(none|auto)",properties:["pointer-events"]},{regex:"not-sr-only",properties:["clip","height","margin","overflow","padding","position","white-space","width"]},{regex:"sr-only",properties:["border-width","clip","height","margin","overflow","padding","position","white-space","width"]}];return E.map(function(y){return{regex:new RegExp("^"+n+y.regex+"$"),properties:y.properties}})},LP=(0,CP.default)(pL),NP=function(r){return r.ruleLookupCache?LP(r):pL(r)};rp.getRules=NP;(function(r){var n=ut&&ut.__assign||function(){return n=Object.assign||function(D){for(var C,U=1,V=arguments.length;U<V;U++){C=arguments[U];for(var te in C)Object.prototype.hasOwnProperty.call(C,te)&&(D[te]=C[te])}return D},n.apply(this,arguments)},i=ut&&ut.__spreadArray||function(D,C,U){if(U||arguments.length===2)for(var V=0,te=C.length,ae;V<te;V++)(ae||!(V in C))&&(ae||(ae=Array.prototype.slice.call(C,0,V)),ae[V]=C[V]);return D.concat(ae||Array.prototype.slice.call(C))},s=ut&&ut.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(r,"__esModule",{value:!0}),r.overrideTailwindClasses=r.findTailwindProperties=void 0;var a=s(fL),u=rp,h={prefix:"",jit:!0,ruleLookupCache:!0,ignoreCssVariables:!0},d=function(D){return D.startsWith("--")},p=function(D,C){var U,V;return(V=(U=(0,u.getRules)(C).find(function(te){return te.regex.test(D)}))===null||U===void 0?void 0:U.properties)===null||V===void 0?void 0:V.filter(function(te){return!C.ignoreCssVariables||!d(te)})},T=(0,a.default)(p),E=function(D,C){return C===void 0&&(C=h),C.ruleLookupCache?T(D,C):p(D,C)};r.findTailwindProperties=E;var y=function(D){return D.lastIndexOf(":")},S=function(D){var C=y(D);return C===-1?"":D.substring(0,C)},x=function(D){return D.substring(y(D)+1)},B=function(D){return D.replace(/^!/g,"")},H=function(D){return D.replace(/\/(\d|\.|\[|\])+$/g,"")},W=function(D){return H(B(D))},$=function(D,C){var U=x(D);return C.jit?W(U):U},m=function(D,C,U){var V=S(D),te=S(C),ae=(0,r.findTailwindProperties)($(D,U),U),de=(0,r.findTailwindProperties)($(C,U),U);return ae&&de&&V===te&&ae.some(function(we){return de.includes(we)})},I=function(D,C){C===void 0&&(C=h);var U=n(n({},h),C),V=D.split(/\s+/);return V.reduce(function(te,ae){var de=te.filter(function(we){return!m(ae,we,U)});return i(i([],de,!0),[ae],!1)},[]).join(" ")};r.overrideTailwindClasses=I})(cL);const xP=(...r)=>cL.overrideTailwindClasses(vP(...r));function Sf(r){return yt.jsx("button",{onClick:r.onClick,className:xP("rounded","p2",r.classNames),children:r.text})}class IO extends Error{constructor(n){super(n),this.name="WebSerialError"}}class MP{constructor(n){Lu(this,"callbacks",{});Lu(this,"port");Lu(this,"reader");Lu(this,"writer");var h,d;this.port=n;const i=(h=this.port.readable)==null?void 0:h.getReader();if(!i)throw new IO("Cannot open reader");const s=(d=this.port.writable)==null?void 0:d.getWriter();if(!s)throw new IO("Cannot open writer");this.reader=i,this.writer=s;const a=this;(async()=>{try{for(;;){const{value:p,done:T}=await a.reader.read();if(T){a.reader.releaseLock(),a.callbacks.end&&a.callbacks.end();break}else a.callbacks.data&&a.callbacks.data(_t.Buffer.from(p))}}catch(p){console.log(p)}})()}put(n){this.writer.write(_t.Buffer.from([n]))}write(n){const i=_t.Buffer.from(n);this.writer.write(i)}onData(n){this.callbacks.data=n}onEnd(n){this.callbacks.end=n}onError(n){this.callbacks.error=n}destroy(){return new Promise((n,i)=>{if(this.callbacks.end){const s=this.callbacks.end;this.callbacks.end=()=>{s(),n()}}else this.callbacks.end=()=>{n()};if(this.callbacks.error){const s=this.callbacks.error;this.callbacks.error=a=>{s(a),i(a)}}else this.callbacks.error=s=>{i(s)}})}}var gL={exports:{}},sr=gL.exports={},yi,wi;function ZT(){throw new Error("setTimeout has not been defined")}function JT(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?yi=setTimeout:yi=ZT}catch{yi=ZT}try{typeof clearTimeout=="function"?wi=clearTimeout:wi=JT}catch{wi=JT}})();function mL(r){if(yi===setTimeout)return setTimeout(r,0);if((yi===ZT||!yi)&&setTimeout)return yi=setTimeout,setTimeout(r,0);try{return yi(r,0)}catch{try{return yi.call(null,r,0)}catch{return yi.call(this,r,0)}}}function DP(r){if(wi===clearTimeout)return clearTimeout(r);if((wi===JT||!wi)&&clearTimeout)return wi=clearTimeout,clearTimeout(r);try{return wi(r)}catch{try{return wi.call(null,r)}catch{return wi.call(this,r)}}}var eo=[],$a=!1,Bs,jd=-1;function PP(){!$a||!Bs||($a=!1,Bs.length?eo=Bs.concat(eo):jd=-1,eo.length&&$L())}function $L(){if(!$a){var r=mL(PP);$a=!0;for(var n=eo.length;n;){for(Bs=eo,eo=[];++jd<n;)Bs&&Bs[jd].run();jd=-1,n=eo.length}Bs=null,$a=!1,DP(r)}}sr.nextTick=function(r){var n=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)n[i-1]=arguments[i];eo.push(new _L(r,n)),eo.length===1&&!$a&&mL($L)};function _L(r,n){this.fun=r,this.array=n}_L.prototype.run=function(){this.fun.apply(null,this.array)};sr.title="browser";sr.browser=!0;sr.env={};sr.argv=[];sr.version="";sr.versions={};function uo(){}sr.on=uo;sr.addListener=uo;sr.once=uo;sr.off=uo;sr.removeListener=uo;sr.removeAllListeners=uo;sr.emit=uo;sr.prependListener=uo;sr.prependOnceListener=uo;sr.listeners=function(r){return[]};sr.binding=function(r){throw new Error("process.binding is not supported")};sr.cwd=function(){return"/"};sr.chdir=function(r){throw new Error("process.chdir is not supported")};sr.umask=function(){return 0};var BP=gL.exports;const Ve=qs(BP);(function(r){function n(){var s=this||self;return delete r.prototype.__magic__,s}if(typeof globalThis=="object")return globalThis;if(this)return n();r.defineProperty(r.prototype,"__magic__",{configurable:!0,get:n});var i=__magic__;return i})(Object);var Xu={},np={};function QT(r){"@babel/helpers - typeof";return QT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},QT(r)}function OO(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,s.key,s)}}function FP(r,n,i){return n&&OO(r.prototype,n),i&&OO(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function UP(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function HP(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&yc(r,n)}function GP(r){var n=TL();return function(){var s=wc(r),a;if(n){var u=wc(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return VP(this,a)}}function VP(r,n){if(n&&(QT(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EL(r)}function EL(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ev(r){var n=typeof Map=="function"?new Map:void 0;return ev=function(s){if(s===null||!WP(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(s))return n.get(s);n.set(s,a)}function a(){return zd(s,arguments,wc(this).constructor)}return a.prototype=Object.create(s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),yc(a,s)},ev(r)}function zd(r,n,i){return TL()?zd=Reflect.construct.bind():zd=function(a,u,h){var d=[null];d.push.apply(d,u);var p=Function.bind.apply(a,d),T=new p;return h&&yc(T,h.prototype),T},zd.apply(null,arguments)}function TL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function WP(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function yc(r,n){return yc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},yc(r,n)}function wc(r){return wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},wc(r)}var jP=function(r){HP(i,r);var n=GP(i);function i(s){var a;return UP(this,i),a=n.call(this,`Format functions must be synchronous taking a two arguments: (info, opts)
Found: `.concat(s.toString().split(`
`)[0],`
`)),Error.captureStackTrace(EL(a),i),a}return FP(i)}(ev(Error)),$n=function(r){if(r.length>2)throw new jP(r);function n(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=s}n.prototype.transform=r;function i(s){return new n(s)}return i.Format=n,i},If={exports:{}},vL={exports:{}},bL={exports:{}},Nr={},yL={},wL=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var n={},i=Symbol("test"),s=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var a=42;n[i]=a;for(i in n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var u=Object.getOwnPropertySymbols(n);if(u.length!==1||u[0]!==i||!Object.prototype.propertyIsEnumerable.call(n,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var h=Object.getOwnPropertyDescriptor(n,i);if(h.value!==a||h.enumerable!==!0)return!1}return!0},zP=wL,ip=function(){return zP()&&!!Symbol.toStringTag},RO=typeof Symbol<"u"&&Symbol,XP=wL,YP=function(){return typeof RO!="function"||typeof Symbol!="function"||typeof RO("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:XP()},kO={foo:{}},KP=Object,qP=function(){return{__proto__:kO}.foo===kO.foo&&!({__proto__:null}instanceof KP)},ZP="Function.prototype.bind called on incompatible ",N_=Array.prototype.slice,JP=Object.prototype.toString,QP="[object Function]",eB=function(n){var i=this;if(typeof i!="function"||JP.call(i)!==QP)throw new TypeError(ZP+i);for(var s=N_.call(arguments,1),a,u=function(){if(this instanceof a){var E=i.apply(this,s.concat(N_.call(arguments)));return Object(E)===E?E:this}else return i.apply(n,s.concat(N_.call(arguments)))},h=Math.max(0,i.length-s.length),d=[],p=0;p<h;p++)d.push("$"+p);if(a=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(u),i.prototype){var T=function(){};T.prototype=i.prototype,a.prototype=new T,T.prototype=null}return a},tB=eB,Pb=Function.prototype.bind||tB,rB=Pb,nB=rB.call(Function.call,Object.prototype.hasOwnProperty),$t,Ca=SyntaxError,SL=Function,_a=TypeError,x_=function(r){try{return SL('"use strict"; return ('+r+").constructor;")()}catch{}},Hs=Object.getOwnPropertyDescriptor;if(Hs)try{Hs({},"")}catch{Hs=null}var M_=function(){throw new _a},iB=Hs?function(){try{return arguments.callee,M_}catch{try{return Hs(arguments,"callee").get}catch{return M_}}}():M_,Kl=YP(),oB=qP(),$r=Object.getPrototypeOf||(oB?function(r){return r.__proto__}:null),ql={},sB=typeof Uint8Array>"u"||!$r?$t:$r(Uint8Array),Gs={"%AggregateError%":typeof AggregateError>"u"?$t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?$t:ArrayBuffer,"%ArrayIteratorPrototype%":Kl&&$r?$r([][Symbol.iterator]()):$t,"%AsyncFromSyncIteratorPrototype%":$t,"%AsyncFunction%":ql,"%AsyncGenerator%":ql,"%AsyncGeneratorFunction%":ql,"%AsyncIteratorPrototype%":ql,"%Atomics%":typeof Atomics>"u"?$t:Atomics,"%BigInt%":typeof BigInt>"u"?$t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?$t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?$t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?$t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?$t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?$t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?$t:FinalizationRegistry,"%Function%":SL,"%GeneratorFunction%":ql,"%Int8Array%":typeof Int8Array>"u"?$t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?$t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?$t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Kl&&$r?$r($r([][Symbol.iterator]())):$t,"%JSON%":typeof JSON=="object"?JSON:$t,"%Map%":typeof Map>"u"?$t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Kl||!$r?$t:$r(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?$t:Promise,"%Proxy%":typeof Proxy>"u"?$t:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?$t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?$t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Kl||!$r?$t:$r(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?$t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Kl&&$r?$r(""[Symbol.iterator]()):$t,"%Symbol%":Kl?Symbol:$t,"%SyntaxError%":Ca,"%ThrowTypeError%":iB,"%TypedArray%":sB,"%TypeError%":_a,"%Uint8Array%":typeof Uint8Array>"u"?$t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?$t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?$t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?$t:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?$t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?$t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?$t:WeakSet};if($r)try{null.error}catch(r){var lB=$r($r(r));Gs["%Error.prototype%"]=lB}var aB=function r(n){var i;if(n==="%AsyncFunction%")i=x_("async function () {}");else if(n==="%GeneratorFunction%")i=x_("function* () {}");else if(n==="%AsyncGeneratorFunction%")i=x_("async function* () {}");else if(n==="%AsyncGenerator%"){var s=r("%AsyncGeneratorFunction%");s&&(i=s.prototype)}else if(n==="%AsyncIteratorPrototype%"){var a=r("%AsyncGenerator%");a&&$r&&(i=$r(a.prototype))}return Gs[n]=i,i},CO={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},xc=Pb,Of=nB,uB=xc.call(Function.call,Array.prototype.concat),cB=xc.call(Function.apply,Array.prototype.splice),AO=xc.call(Function.call,String.prototype.replace),Rf=xc.call(Function.call,String.prototype.slice),hB=xc.call(Function.call,RegExp.prototype.exec),dB=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,fB=/\\(\\)?/g,pB=function(n){var i=Rf(n,0,1),s=Rf(n,-1);if(i==="%"&&s!=="%")throw new Ca("invalid intrinsic syntax, expected closing `%`");if(s==="%"&&i!=="%")throw new Ca("invalid intrinsic syntax, expected opening `%`");var a=[];return AO(n,dB,function(u,h,d,p){a[a.length]=d?AO(p,fB,"$1"):h||u}),a},gB=function(n,i){var s=n,a;if(Of(CO,s)&&(a=CO[s],s="%"+a[0]+"%"),Of(Gs,s)){var u=Gs[s];if(u===ql&&(u=aB(s)),typeof u>"u"&&!i)throw new _a("intrinsic "+n+" exists, but is not available. Please file an issue!");return{alias:a,name:s,value:u}}throw new Ca("intrinsic "+n+" does not exist!")},op=function(n,i){if(typeof n!="string"||n.length===0)throw new _a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof i!="boolean")throw new _a('"allowMissing" argument must be a boolean');if(hB(/^%?[^%]*%?$/,n)===null)throw new Ca("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var s=pB(n),a=s.length>0?s[0]:"",u=gB("%"+a+"%",i),h=u.name,d=u.value,p=!1,T=u.alias;T&&(a=T[0],cB(s,uB([0,1],T)));for(var E=1,y=!0;E<s.length;E+=1){var S=s[E],x=Rf(S,0,1),B=Rf(S,-1);if((x==='"'||x==="'"||x==="`"||B==='"'||B==="'"||B==="`")&&x!==B)throw new Ca("property names with quotes must have matching quotes");if((S==="constructor"||!y)&&(p=!0),a+="."+S,h="%"+a+"%",Of(Gs,h))d=Gs[h];else if(d!=null){if(!(S in d)){if(!i)throw new _a("base intrinsic for "+n+" exists, but the property is not available.");return}if(Hs&&E+1>=s.length){var H=Hs(d,S);y=!!H,y&&"get"in H&&!("originalValue"in H.get)?d=H.get:d=d[S]}else y=Of(d,S),d=d[S];y&&!p&&(Gs[h]=d)}}return d},IL={exports:{}};(function(r){var n=Pb,i=op,s=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),u=i("%Reflect.apply%",!0)||n.call(a,s),h=i("%Object.getOwnPropertyDescriptor%",!0),d=i("%Object.defineProperty%",!0),p=i("%Math.max%");if(d)try{d({},"a",{value:1})}catch{d=null}r.exports=function(y){var S=u(n,a,arguments);if(h&&d){var x=h(S,"length");x.configurable&&d(S,"length",{value:1+p(0,y.length-(arguments.length-1))})}return S};var T=function(){return u(n,s,arguments)};d?d(r.exports,"apply",{value:T}):r.exports.apply=T})(IL);var Bb=IL.exports,OL=op,RL=Bb,mB=RL(OL("String.prototype.indexOf")),Fb=function(n,i){var s=OL(n,!!i);return typeof s=="function"&&mB(n,".prototype.")>-1?RL(s):s},$B=ip(),_B=Fb,tv=_B("Object.prototype.toString"),sp=function(n){return $B&&n&&typeof n=="object"&&Symbol.toStringTag in n?!1:tv(n)==="[object Arguments]"},kL=function(n){return sp(n)?!0:n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&tv(n)!=="[object Array]"&&tv(n.callee)==="[object Function]"},EB=function(){return sp(arguments)}();sp.isLegacyArguments=kL;var TB=EB?sp:kL,vB=Object.prototype.toString,bB=Function.prototype.toString,yB=/^\s*(?:function)?\*/,CL=ip(),D_=Object.getPrototypeOf,wB=function(){if(!CL)return!1;try{return Function("return function*() {}")()}catch{}},P_,SB=function(n){if(typeof n!="function")return!1;if(yB.test(bB.call(n)))return!0;if(!CL){var i=vB.call(n);return i==="[object GeneratorFunction]"}if(!D_)return!1;if(typeof P_>"u"){var s=wB();P_=s?D_(s):!1}return D_(n)===P_},AL=Function.prototype.toString,ua=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,rv,Xd;if(typeof ua=="function"&&typeof Object.defineProperty=="function")try{rv=Object.defineProperty({},"length",{get:function(){throw Xd}}),Xd={},ua(function(){throw 42},null,rv)}catch(r){r!==Xd&&(ua=null)}else ua=null;var IB=/^\s*class\b/,nv=function(n){try{var i=AL.call(n);return IB.test(i)}catch{return!1}},B_=function(n){try{return nv(n)?!1:(AL.call(n),!0)}catch{return!1}},Yd=Object.prototype.toString,OB="[object Object]",RB="[object Function]",kB="[object GeneratorFunction]",CB="[object HTMLAllCollection]",AB="[object HTML document.all class]",LB="[object HTMLCollection]",NB=typeof Symbol=="function"&&!!Symbol.toStringTag,xB=!(0 in[,]),iv=function(){return!1};if(typeof document=="object"){var MB=document.all;Yd.call(MB)===Yd.call(document.all)&&(iv=function(n){if((xB||!n)&&(typeof n>"u"||typeof n=="object"))try{var i=Yd.call(n);return(i===CB||i===AB||i===LB||i===OB)&&n("")==null}catch{}return!1})}var DB=ua?function(n){if(iv(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;try{ua(n,null,rv)}catch(i){if(i!==Xd)return!1}return!nv(n)&&B_(n)}:function(n){if(iv(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;if(NB)return B_(n);if(nv(n))return!1;var i=Yd.call(n);return i!==RB&&i!==kB&&!/^\[object HTML/.test(i)?!1:B_(n)},PB=DB,BB=Object.prototype.toString,LL=Object.prototype.hasOwnProperty,FB=function(n,i,s){for(var a=0,u=n.length;a<u;a++)LL.call(n,a)&&(s==null?i(n[a],a,n):i.call(s,n[a],a,n))},UB=function(n,i,s){for(var a=0,u=n.length;a<u;a++)s==null?i(n.charAt(a),a,n):i.call(s,n.charAt(a),a,n)},HB=function(n,i,s){for(var a in n)LL.call(n,a)&&(s==null?i(n[a],a,n):i.call(s,n[a],a,n))},GB=function(n,i,s){if(!PB(i))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=s),BB.call(n)==="[object Array]"?FB(n,i,a):typeof n=="string"?UB(n,i,a):HB(n,i,a)},NL=GB,F_=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],VB=typeof globalThis>"u"?ut:globalThis,xL=function(){for(var n=[],i=0;i<F_.length;i++)typeof VB[F_[i]]=="function"&&(n[n.length]=F_[i]);return n},WB=op,Kd=WB("%Object.getOwnPropertyDescriptor%",!0);if(Kd)try{Kd([],"length")}catch{Kd=null}var ML=Kd,DL=NL,jB=xL,Ub=Fb,zB=Ub("Object.prototype.toString"),PL=ip(),qd=ML,XB=typeof globalThis>"u"?ut:globalThis,BL=jB(),YB=Ub("Array.prototype.indexOf",!0)||function(n,i){for(var s=0;s<n.length;s+=1)if(n[s]===i)return s;return-1},KB=Ub("String.prototype.slice"),FL={},U_=Object.getPrototypeOf;PL&&qd&&U_&&DL(BL,function(r){var n=new XB[r];if(Symbol.toStringTag in n){var i=U_(n),s=qd(i,Symbol.toStringTag);if(!s){var a=U_(i);s=qd(a,Symbol.toStringTag)}FL[r]=s.get}});var qB=function(n){var i=!1;return DL(FL,function(s,a){if(!i)try{i=s.call(n)===a}catch{}}),i},UL=function(n){if(!n||typeof n!="object")return!1;if(!PL||!(Symbol.toStringTag in n)){var i=KB(zB(n),8,-1);return YB(BL,i)>-1}return qd?qB(n):!1},HL=NL,ZB=xL,GL=Fb,H_=ML,JB=GL("Object.prototype.toString"),VL=ip(),LO=typeof globalThis>"u"?ut:globalThis,QB=ZB(),eF=GL("String.prototype.slice"),WL={},G_=Object.getPrototypeOf;VL&&H_&&G_&&HL(QB,function(r){if(typeof LO[r]=="function"){var n=new LO[r];if(Symbol.toStringTag in n){var i=G_(n),s=H_(i,Symbol.toStringTag);if(!s){var a=G_(i);s=H_(a,Symbol.toStringTag)}WL[r]=s.get}}});var tF=function(n){var i=!1;return HL(WL,function(s,a){if(!i)try{var u=s.call(n);u===a&&(i=u)}catch{}}),i},rF=UL,nF=function(n){return rF(n)?!VL||!(Symbol.toStringTag in n)?eF(JB(n),8,-1):tF(n):!1};(function(r){var n=TB,i=SB,s=nF,a=UL;function u(M){return M.call.bind(M)}var h=typeof BigInt<"u",d=typeof Symbol<"u",p=u(Object.prototype.toString),T=u(Number.prototype.valueOf),E=u(String.prototype.valueOf),y=u(Boolean.prototype.valueOf);if(h)var S=u(BigInt.prototype.valueOf);if(d)var x=u(Symbol.prototype.valueOf);function B(M,Te){if(typeof M!="object")return!1;try{return Te(M),!0}catch{return!1}}r.isArgumentsObject=n,r.isGeneratorFunction=i,r.isTypedArray=a;function H(M){return typeof Promise<"u"&&M instanceof Promise||M!==null&&typeof M=="object"&&typeof M.then=="function"&&typeof M.catch=="function"}r.isPromise=H;function W(M){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(M):a(M)||Y(M)}r.isArrayBufferView=W;function $(M){return s(M)==="Uint8Array"}r.isUint8Array=$;function m(M){return s(M)==="Uint8ClampedArray"}r.isUint8ClampedArray=m;function I(M){return s(M)==="Uint16Array"}r.isUint16Array=I;function D(M){return s(M)==="Uint32Array"}r.isUint32Array=D;function C(M){return s(M)==="Int8Array"}r.isInt8Array=C;function U(M){return s(M)==="Int16Array"}r.isInt16Array=U;function V(M){return s(M)==="Int32Array"}r.isInt32Array=V;function te(M){return s(M)==="Float32Array"}r.isFloat32Array=te;function ae(M){return s(M)==="Float64Array"}r.isFloat64Array=ae;function de(M){return s(M)==="BigInt64Array"}r.isBigInt64Array=de;function we(M){return s(M)==="BigUint64Array"}r.isBigUint64Array=we;function q(M){return p(M)==="[object Map]"}q.working=typeof Map<"u"&&q(new Map);function J(M){return typeof Map>"u"?!1:q.working?q(M):M instanceof Map}r.isMap=J;function G(M){return p(M)==="[object Set]"}G.working=typeof Set<"u"&&G(new Set);function X(M){return typeof Set>"u"?!1:G.working?G(M):M instanceof Set}r.isSet=X;function ce(M){return p(M)==="[object WeakMap]"}ce.working=typeof WeakMap<"u"&&ce(new WeakMap);function fe(M){return typeof WeakMap>"u"?!1:ce.working?ce(M):M instanceof WeakMap}r.isWeakMap=fe;function re(M){return p(M)==="[object WeakSet]"}re.working=typeof WeakSet<"u"&&re(new WeakSet);function ge(M){return re(M)}r.isWeakSet=ge;function ue(M){return p(M)==="[object ArrayBuffer]"}ue.working=typeof ArrayBuffer<"u"&&ue(new ArrayBuffer);function ie(M){return typeof ArrayBuffer>"u"?!1:ue.working?ue(M):M instanceof ArrayBuffer}r.isArrayBuffer=ie;function A(M){return p(M)==="[object DataView]"}A.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&A(new DataView(new ArrayBuffer(1),0,1));function Y(M){return typeof DataView>"u"?!1:A.working?A(M):M instanceof DataView}r.isDataView=Y;var K=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function pe(M){return p(M)==="[object SharedArrayBuffer]"}function j(M){return typeof K>"u"?!1:(typeof pe.working>"u"&&(pe.working=pe(new K)),pe.working?pe(M):M instanceof K)}r.isSharedArrayBuffer=j;function ee(M){return p(M)==="[object AsyncFunction]"}r.isAsyncFunction=ee;function me(M){return p(M)==="[object Map Iterator]"}r.isMapIterator=me;function Se(M){return p(M)==="[object Set Iterator]"}r.isSetIterator=Se;function Ne(M){return p(M)==="[object Generator]"}r.isGeneratorObject=Ne;function O(M){return p(M)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=O;function F(M){return B(M,T)}r.isNumberObject=F;function Oe(M){return B(M,E)}r.isStringObject=Oe;function Ae(M){return B(M,y)}r.isBooleanObject=Ae;function nt(M){return h&&B(M,S)}r.isBigIntObject=nt;function P(M){return d&&B(M,x)}r.isSymbolObject=P;function v(M){return F(M)||Oe(M)||Ae(M)||nt(M)||P(M)}r.isBoxedPrimitive=v;function w(M){return typeof Uint8Array<"u"&&(ie(M)||j(M))}r.isAnyArrayBuffer=w,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(M){Object.defineProperty(r,M,{enumerable:!1,value:function(){throw new Error(M+" is not supported in userland")}})})})(yL);var iF=function(n){return n&&typeof n=="object"&&typeof n.copy=="function"&&typeof n.fill=="function"&&typeof n.readUInt8=="function"},ov={exports:{}};typeof Object.create=="function"?ov.exports=function(n,i){i&&(n.super_=i,n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:ov.exports=function(n,i){if(i){n.super_=i;var s=function(){};s.prototype=i.prototype,n.prototype=new s,n.prototype.constructor=n}};var co=ov.exports;(function(r){var n=Object.getOwnPropertyDescriptors||function(Y){for(var K=Object.keys(Y),pe={},j=0;j<K.length;j++)pe[K[j]]=Object.getOwnPropertyDescriptor(Y,K[j]);return pe},i=/%[sdj%]/g;r.format=function(A){if(!C(A)){for(var Y=[],K=0;K<arguments.length;K++)Y.push(h(arguments[K]));return Y.join(" ")}for(var K=1,pe=arguments,j=pe.length,ee=String(A).replace(i,function(Se){if(Se==="%%")return"%";if(K>=j)return Se;switch(Se){case"%s":return String(pe[K++]);case"%d":return Number(pe[K++]);case"%j":try{return JSON.stringify(pe[K++])}catch{return"[Circular]"}default:return Se}}),me=pe[K];K<j;me=pe[++K])m(me)||!ae(me)?ee+=" "+me:ee+=" "+h(me);return ee},r.deprecate=function(A,Y){if(typeof Ve<"u"&&Ve.noDeprecation===!0)return A;if(typeof Ve>"u")return function(){return r.deprecate(A,Y).apply(this,arguments)};var K=!1;function pe(){if(!K){if(Ve.throwDeprecation)throw new Error(Y);Ve.traceDeprecation?console.trace(Y):console.error(Y),K=!0}return A.apply(this,arguments)}return pe};var s={},a=/^$/;if({}.NODE_DEBUG){var u={}.NODE_DEBUG;u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+u+"$","i")}r.debuglog=function(A){if(A=A.toUpperCase(),!s[A])if(a.test(A)){var Y=Ve.pid;s[A]=function(){var K=r.format.apply(r,arguments);console.error("%s %d: %s",A,Y,K)}}else s[A]=function(){};return s[A]};function h(A,Y){var K={seen:[],stylize:p};return arguments.length>=3&&(K.depth=arguments[2]),arguments.length>=4&&(K.colors=arguments[3]),$(Y)?K.showHidden=Y:Y&&r._extend(K,Y),V(K.showHidden)&&(K.showHidden=!1),V(K.depth)&&(K.depth=2),V(K.colors)&&(K.colors=!1),V(K.customInspect)&&(K.customInspect=!0),K.colors&&(K.stylize=d),E(K,A,K.depth)}r.inspect=h,h.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},h.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function d(A,Y){var K=h.styles[Y];return K?"\x1B["+h.colors[K][0]+"m"+A+"\x1B["+h.colors[K][1]+"m":A}function p(A,Y){return A}function T(A){var Y={};return A.forEach(function(K,pe){Y[K]=!0}),Y}function E(A,Y,K){if(A.customInspect&&Y&&q(Y.inspect)&&Y.inspect!==r.inspect&&!(Y.constructor&&Y.constructor.prototype===Y)){var pe=Y.inspect(K,A);return C(pe)||(pe=E(A,pe,K)),pe}var j=y(A,Y);if(j)return j;var ee=Object.keys(Y),me=T(ee);if(A.showHidden&&(ee=Object.getOwnPropertyNames(Y)),we(Y)&&(ee.indexOf("message")>=0||ee.indexOf("description")>=0))return S(Y);if(ee.length===0){if(q(Y)){var Se=Y.name?": "+Y.name:"";return A.stylize("[Function"+Se+"]","special")}if(te(Y))return A.stylize(RegExp.prototype.toString.call(Y),"regexp");if(de(Y))return A.stylize(Date.prototype.toString.call(Y),"date");if(we(Y))return S(Y)}var Ne="",O=!1,F=["{","}"];if(W(Y)&&(O=!0,F=["[","]"]),q(Y)){var Oe=Y.name?": "+Y.name:"";Ne=" [Function"+Oe+"]"}if(te(Y)&&(Ne=" "+RegExp.prototype.toString.call(Y)),de(Y)&&(Ne=" "+Date.prototype.toUTCString.call(Y)),we(Y)&&(Ne=" "+S(Y)),ee.length===0&&(!O||Y.length==0))return F[0]+Ne+F[1];if(K<0)return te(Y)?A.stylize(RegExp.prototype.toString.call(Y),"regexp"):A.stylize("[Object]","special");A.seen.push(Y);var Ae;return O?Ae=x(A,Y,K,me,ee):Ae=ee.map(function(nt){return B(A,Y,K,me,nt,O)}),A.seen.pop(),H(Ae,Ne,F)}function y(A,Y){if(V(Y))return A.stylize("undefined","undefined");if(C(Y)){var K="'"+JSON.stringify(Y).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return A.stylize(K,"string")}if(D(Y))return A.stylize(""+Y,"number");if($(Y))return A.stylize(""+Y,"boolean");if(m(Y))return A.stylize("null","null")}function S(A){return"["+Error.prototype.toString.call(A)+"]"}function x(A,Y,K,pe,j){for(var ee=[],me=0,Se=Y.length;me<Se;++me)re(Y,String(me))?ee.push(B(A,Y,K,pe,String(me),!0)):ee.push("");return j.forEach(function(Ne){Ne.match(/^\d+$/)||ee.push(B(A,Y,K,pe,Ne,!0))}),ee}function B(A,Y,K,pe,j,ee){var me,Se,Ne;if(Ne=Object.getOwnPropertyDescriptor(Y,j)||{value:Y[j]},Ne.get?Ne.set?Se=A.stylize("[Getter/Setter]","special"):Se=A.stylize("[Getter]","special"):Ne.set&&(Se=A.stylize("[Setter]","special")),re(pe,j)||(me="["+j+"]"),Se||(A.seen.indexOf(Ne.value)<0?(m(K)?Se=E(A,Ne.value,null):Se=E(A,Ne.value,K-1),Se.indexOf(`
`)>-1&&(ee?Se=Se.split(`
`).map(function(O){return"  "+O}).join(`
`).slice(2):Se=`
`+Se.split(`
`).map(function(O){return"   "+O}).join(`
`))):Se=A.stylize("[Circular]","special")),V(me)){if(ee&&j.match(/^\d+$/))return Se;me=JSON.stringify(""+j),me.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(me=me.slice(1,-1),me=A.stylize(me,"name")):(me=me.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),me=A.stylize(me,"string"))}return me+": "+Se}function H(A,Y,K){var pe=A.reduce(function(j,ee){return ee.indexOf(`
`)>=0,j+ee.replace(/\u001b\[\d\d?m/g,"").length+1},0);return pe>60?K[0]+(Y===""?"":Y+`
 `)+" "+A.join(`,
  `)+" "+K[1]:K[0]+Y+" "+A.join(", ")+" "+K[1]}r.types=yL;function W(A){return Array.isArray(A)}r.isArray=W;function $(A){return typeof A=="boolean"}r.isBoolean=$;function m(A){return A===null}r.isNull=m;function I(A){return A==null}r.isNullOrUndefined=I;function D(A){return typeof A=="number"}r.isNumber=D;function C(A){return typeof A=="string"}r.isString=C;function U(A){return typeof A=="symbol"}r.isSymbol=U;function V(A){return A===void 0}r.isUndefined=V;function te(A){return ae(A)&&G(A)==="[object RegExp]"}r.isRegExp=te,r.types.isRegExp=te;function ae(A){return typeof A=="object"&&A!==null}r.isObject=ae;function de(A){return ae(A)&&G(A)==="[object Date]"}r.isDate=de,r.types.isDate=de;function we(A){return ae(A)&&(G(A)==="[object Error]"||A instanceof Error)}r.isError=we,r.types.isNativeError=we;function q(A){return typeof A=="function"}r.isFunction=q;function J(A){return A===null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||typeof A=="symbol"||typeof A>"u"}r.isPrimitive=J,r.isBuffer=iF;function G(A){return Object.prototype.toString.call(A)}function X(A){return A<10?"0"+A.toString(10):A.toString(10)}var ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function fe(){var A=new Date,Y=[X(A.getHours()),X(A.getMinutes()),X(A.getSeconds())].join(":");return[A.getDate(),ce[A.getMonth()],Y].join(" ")}r.log=function(){console.log("%s - %s",fe(),r.format.apply(r,arguments))},r.inherits=co,r._extend=function(A,Y){if(!Y||!ae(Y))return A;for(var K=Object.keys(Y),pe=K.length;pe--;)A[K[pe]]=Y[K[pe]];return A};function re(A,Y){return Object.prototype.hasOwnProperty.call(A,Y)}var ge=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(Y){if(typeof Y!="function")throw new TypeError('The "original" argument must be of type Function');if(ge&&Y[ge]){var K=Y[ge];if(typeof K!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(K,ge,{value:K,enumerable:!1,writable:!1,configurable:!0}),K}function K(){for(var pe,j,ee=new Promise(function(Ne,O){pe=Ne,j=O}),me=[],Se=0;Se<arguments.length;Se++)me.push(arguments[Se]);me.push(function(Ne,O){Ne?j(Ne):pe(O)});try{Y.apply(this,me)}catch(Ne){j(Ne)}return ee}return Object.setPrototypeOf(K,Object.getPrototypeOf(Y)),ge&&Object.defineProperty(K,ge,{value:K,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(K,n(Y))},r.promisify.custom=ge;function ue(A,Y){if(!A){var K=new Error("Promise was rejected with a falsy value");K.reason=A,A=K}return Y(A)}function ie(A){if(typeof A!="function")throw new TypeError('The "original" argument must be of type Function');function Y(){for(var K=[],pe=0;pe<arguments.length;pe++)K.push(arguments[pe]);var j=K.pop();if(typeof j!="function")throw new TypeError("The last argument must be of type Function");var ee=this,me=function(){return j.apply(ee,arguments)};A.apply(this,K).then(function(Se){Ve.nextTick(me.bind(null,null,Se))},function(Se){Ve.nextTick(ue.bind(null,Se,me))})}return Object.setPrototypeOf(Y,Object.getPrototypeOf(A)),Object.defineProperties(Y,n(A)),Y}r.callbackify=ie})(Nr);var jL={exports:{}};(function(r){var n={};r.exports=n;var i={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(i).forEach(function(s){var a=i[s],u=n[s]=[];u.open="\x1B["+a[0]+"m",u.close="\x1B["+a[1]+"m"})})(jL);var oF=jL.exports,qt={};qt.endianness=function(){return"LE"};qt.hostname=function(){return typeof location<"u"?location.hostname:""};qt.loadavg=function(){return[]};qt.uptime=function(){return 0};qt.freemem=function(){return Number.MAX_VALUE};qt.totalmem=function(){return Number.MAX_VALUE};qt.cpus=function(){return[]};qt.type=function(){return"Browser"};qt.release=function(){return typeof navigator<"u"?navigator.appVersion:""};qt.networkInterfaces=qt.getNetworkInterfaces=function(){return{}};qt.arch=function(){return"javascript"};qt.platform=function(){return"browser"};qt.tmpdir=qt.tmpDir=function(){return"/tmp"};qt.EOL=`
`;qt.homedir=function(){return"/"};var sF=function(r,n){n=n||Ve.argv;var i=n.indexOf("--"),s=/^-{1,2}/.test(r)?"":"--",a=n.indexOf(s+r);return a!==-1&&(i===-1?!0:a<i)},lF=qt,Zn=sF,Fr=Ve.env,Ea=void 0;Zn("no-color")||Zn("no-colors")||Zn("color=false")?Ea=!1:(Zn("color")||Zn("colors")||Zn("color=true")||Zn("color=always"))&&(Ea=!0);"FORCE_COLOR"in Fr&&(Ea=Fr.FORCE_COLOR.length===0||parseInt(Fr.FORCE_COLOR,10)!==0);function aF(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function uF(r){if(Ea===!1)return 0;if(Zn("color=16m")||Zn("color=full")||Zn("color=truecolor"))return 3;if(Zn("color=256"))return 2;if(r&&!r.isTTY&&Ea!==!0)return 0;var n=Ea?1:0;if(Ve.platform==="win32"){var i=lF.release().split(".");return Number(Ve.versions.node.split(".")[0])>=8&&Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in Fr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(a){return a in Fr})||Fr.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in Fr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Fr.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in Fr){var s=parseInt((Fr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Fr.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Fr.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(Fr.TERM)||"COLORTERM"in Fr?1:(Fr.TERM==="dumb",n)}function V_(r){var n=uF(r);return aF(n)}var cF={supportsColor:V_,stdout:V_(Ve.stdout),stderr:V_(Ve.stderr)},W_={exports:{}},NO;function hF(){return NO||(NO=1,function(r){r.exports=function(i,s){var a="";i=i||"Run the trap, drop the bass",i=i.split("");var u={a:["@","","","","","",""],b:["","","","","",""],c:["","",""],d:["","","","","",""],e:["","","","","","","",""],f:[""],g:[""],h:["","","","","",""],i:[""],j:[""],k:["","","",""],l:[""],m:["","","","","",""],n:["","","","","",""],o:["","","","","","","","",""],p:["",""],q:[""],r:["","","","","",""],s:["","","",""],t:["","",""],u:["",""],v:[""],w:["","","",""],x:["","","",""],y:["","",""],z:["",""]};return i.forEach(function(h){h=h.toLowerCase();var d=u[h]||[" "],p=Math.floor(Math.random()*d.length);typeof u[h]<"u"?a+=u[h][p]:a+=h}),a}}(W_)),W_.exports}var j_={exports:{}},xO;function dF(){return xO||(xO=1,function(r){r.exports=function(i,s){i=i||"   he is here   ";var a={up:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],down:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],mid:["","","","","","","","","","","","","","","","","","","","",""," "]},u=[].concat(a.up,a.down,a.mid);function h(T){var E=Math.floor(Math.random()*T);return E}function d(T){var E=!1;return u.filter(function(y){E=y===T}),E}function p(T,E){var y="",S,x;E=E||{},E.up=typeof E.up<"u"?E.up:!0,E.mid=typeof E.mid<"u"?E.mid:!0,E.down=typeof E.down<"u"?E.down:!0,E.size=typeof E.size<"u"?E.size:"maxi",T=T.split("");for(x in T)if(!d(x)){switch(y=y+T[x],S={up:0,down:0,mid:0},E.size){case"mini":S.up=h(8),S.mid=h(2),S.down=h(8);break;case"maxi":S.up=h(16)+3,S.mid=h(4)+1,S.down=h(64)+3;break;default:S.up=h(8)+1,S.mid=h(6)/2,S.down=h(8)+1;break}var B=["up","mid","down"];for(var H in B)for(var W=B[H],$=0;$<=S[W];$++)E[W]&&(y=y+a[W][h(a[W].length)])}return y}return p(i,s)}}(j_)),j_.exports}var z_={exports:{}},MO;function fF(){return MO||(MO=1,function(r){r.exports=function(n){return function(i,s,a){if(i===" ")return i;switch(s%3){case 0:return n.red(i);case 1:return n.white(i);case 2:return n.blue(i)}}}}(z_)),z_.exports}var X_={exports:{}},DO;function pF(){return DO||(DO=1,function(r){r.exports=function(n){return function(i,s,a){return s%2===0?i:n.inverse(i)}}}(X_)),X_.exports}var Y_={exports:{}},PO;function gF(){return PO||(PO=1,function(r){r.exports=function(n){var i=["red","yellow","green","blue","magenta"];return function(s,a,u){return s===" "?s:n[i[a++%i.length]](s)}}}(Y_)),Y_.exports}var K_={exports:{}},BO;function mF(){return BO||(BO=1,function(r){r.exports=function(n){var i=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(s,a,u){return s===" "?s:n[i[Math.round(Math.random()*(i.length-2))]](s)}}}(K_)),K_.exports}(function(r){var n={};r.exports=n,n.themes={};var i=Nr,s=n.styles=oF,a=Object.defineProperties,u=new RegExp(/[\r\n]+/g);n.supportsColor=cF.supportsColor,typeof n.enabled>"u"&&(n.enabled=n.supportsColor()!==!1),n.enable=function(){n.enabled=!0},n.disable=function(){n.enabled=!1},n.stripColors=n.strip=function(H){return(""+H).replace(/\x1B\[\d+m/g,"")},n.stylize=function(W,$){if(!n.enabled)return W+"";var m=s[$];return!m&&$ in n?n[$](W):m.open+W+m.close};var h=/[|\\{}()[\]^$+*?.]/g,d=function(H){if(typeof H!="string")throw new TypeError("Expected a string");return H.replace(h,"\\$&")};function p(H){var W=function $(){return y.apply($,arguments)};return W._styles=H,W.__proto__=E,W}var T=function(){var H={};return s.grey=s.gray,Object.keys(s).forEach(function(W){s[W].closeRe=new RegExp(d(s[W].close),"g"),H[W]={get:function(){return p(this._styles.concat(W))}}}),H}(),E=a(function(){},T);function y(){var H=Array.prototype.slice.call(arguments),W=H.map(function(C){return C!=null&&C.constructor===String?C:i.inspect(C)}).join(" ");if(!n.enabled||!W)return W;for(var $=W.indexOf(`
`)!=-1,m=this._styles,I=m.length;I--;){var D=s[m[I]];W=D.open+W.replace(D.closeRe,D.open)+D.close,$&&(W=W.replace(u,function(C){return D.close+C+D.open}))}return W}n.setTheme=function(H){if(typeof H=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var W in H)(function($){n[$]=function(m){if(typeof H[$]=="object"){var I=m;for(var D in H[$])I=n[H[$][D]](I);return I}return n[H[$]](m)}})(W)};function S(){var H={};return Object.keys(T).forEach(function(W){H[W]={get:function(){return p([W])}}}),H}var x=function(W,$){var m=$.split("");return m=m.map(W),m.join("")};n.trap=hF(),n.zalgo=dF(),n.maps={},n.maps.america=fF()(n),n.maps.zebra=pF()(n),n.maps.rainbow=gF()(n),n.maps.random=mF()(n);for(var B in n.maps)(function(H){n[H]=function(W){return x(n.maps[H],W)}})(B);a(n,S())})(bL);var $F=bL.exports;(function(r){var n=$F;r.exports=n})(vL);var zL=vL.exports,nr={},XL={},Hb={};Hb.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};Hb.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"};var Gb={};Gb.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};Gb.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"};var Vb={};Vb.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};Vb.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"};(function(r){Object.defineProperty(r,"cli",{value:Hb}),Object.defineProperty(r,"npm",{value:Gb}),Object.defineProperty(r,"syslog",{value:Vb})})(XL);(function(r){Object.defineProperty(r,"LEVEL",{value:Symbol.for("level")}),Object.defineProperty(r,"MESSAGE",{value:Symbol.for("message")}),Object.defineProperty(r,"SPLAT",{value:Symbol.for("splat")}),Object.defineProperty(r,"configs",{value:XL})})(nr);function _F(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function FO(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,s.key,s)}}function EF(r,n,i){return n&&FO(r.prototype,n),i&&FO(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}var sv=zL,YL=nr,q_=YL.LEVEL,Z_=YL.MESSAGE;sv.enabled=!0;var UO=/\s+/,KL=function(){function r(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_F(this,r),n.colors&&this.addColors(n.colors),this.options=n}return EF(r,[{key:"addColors",value:function(i){return r.addColors(i)}},{key:"colorize",value:function(i,s,a){if(typeof a>"u"&&(a=s),!Array.isArray(r.allColors[i]))return sv[r.allColors[i]](a);for(var u=0,h=r.allColors[i].length;u<h;u++)a=sv[r.allColors[i][u]](a);return a}},{key:"transform",value:function(i,s){return s.all&&typeof i[Z_]=="string"&&(i[Z_]=this.colorize(i[q_],i.level,i[Z_])),(s.level||s.all||!s.message)&&(i.level=this.colorize(i[q_],i.level)),(s.all||s.message)&&(i.message=this.colorize(i[q_],i.level,i.message)),i}}],[{key:"addColors",value:function(i){var s=Object.keys(i).reduce(function(a,u){return a[u]=UO.test(i[u])?i[u].split(UO):i[u],a},{});return r.allColors=Object.assign({},r.allColors||{},s),r.allColors}}]),r}();If.exports=function(r){return new KL(r)};If.exports.Colorizer=If.exports.Format=KL;var Wb=If.exports,TF=Wb,vF=TF.Colorizer,bF=function(r){return vF.addColors(r.colors||r),r},yF=$n,wF=yF(function(r){return r.message="	".concat(r.message),r}),jb={exports:{}},kf={exports:{}};function SF(r){return kF(r)||RF(r)||OF(r)||IF()}function IF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OF(r,n){if(r){if(typeof r=="string")return lv(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(r);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return lv(r,n)}}function RF(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function kF(r){if(Array.isArray(r))return lv(r)}function lv(r,n){(n==null||n>r.length)&&(n=r.length);for(var i=0,s=new Array(n);i<n;i++)s[i]=r[i];return s}function CF(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function HO(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,s.key,s)}}function AF(r,n,i){return n&&HO(r.prototype,n),i&&HO(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}var zb=nr,LF=zb.configs,GO=zb.LEVEL,J_=zb.MESSAGE,qL=function(){function r(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{levels:LF.npm.levels};CF(this,r),this.paddings=r.paddingForLevels(n.levels,n.filler),this.options=n}return AF(r,[{key:"transform",value:function(i,s){return i.message="".concat(this.paddings[i[GO]]).concat(i.message),i[J_]&&(i[J_]="".concat(this.paddings[i[GO]]).concat(i[J_])),i}}],[{key:"getLongestLevel",value:function(i){var s=Object.keys(i).map(function(a){return a.length});return Math.max.apply(Math,SF(s))}},{key:"paddingForLevel",value:function(i,s,a){var u=a+1-i.length,h=Math.floor(u/s.length),d="".concat(s).concat(s.repeat(h));return d.slice(0,u)}},{key:"paddingForLevels",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ",a=r.getLongestLevel(i);return Object.keys(i).reduce(function(u,h){return u[h]=r.paddingForLevel(h,s,a),u},{})}}]),r}();kf.exports=function(r){return new qL(r)};kf.exports.Padder=kf.exports.Format=qL;var ZL=kf.exports;function NF(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function VO(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,s.key,s)}}function xF(r,n,i){return n&&VO(r.prototype,n),i&&VO(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}var MF=Wb,DF=MF.Colorizer,PF=ZL,BF=PF.Padder,JL=nr,FF=JL.configs,UF=JL.MESSAGE,QL=function(){function r(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};NF(this,r),n.levels||(n.levels=FF.cli.levels),this.colorizer=new DF(n),this.padder=new BF(n),this.options=n}return xF(r,[{key:"transform",value:function(i,s){return this.colorizer.transform(this.padder.transform(i,s),s),i[UF]="".concat(i.level,":").concat(i.message),i}}]),r}();jb.exports=function(r){return new QL(r)};jb.exports.Format=QL;var HF=jb.exports,Xb={exports:{}},GF=$n;function eN(r){if(r.every(VF))return function(n){for(var i=n,s=0;s<r.length;s++)if(i=r[s].transform(i,r[s].options),!i)return!1;return i}}function VF(r){if(typeof r.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}Xb.exports=function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=GF(eN(n)),a=s();return a.Format=s.Format,a};Xb.exports.cascade=eN;var WF=Xb.exports;function Q_(r,n,i){return n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}var jF=$n,tN=nr,WO=tN.LEVEL,eE=tN.MESSAGE,zF=jF(function(r,n){var i=n.stack,s=n.cause;if(r instanceof Error){var a,u=Object.assign({},r,(a={level:r.level},Q_(a,WO,r[WO]||r.level),Q_(a,"message",r.message),Q_(a,eE,r[eE]||r.message),a));return i&&(u.stack=r.stack),s&&(u.cause=r.cause),u}if(!(r.message instanceof Error))return r;var h=r.message;return Object.assign(r,h),r.message=h.message,r[eE]=h.message,i&&(r.stack=h.stack),s&&(r.cause=h.cause),r}),av={exports:{}};(function(r,n){const{hasOwnProperty:i}=Object.prototype,s=W();s.configure=W,s.stringify=s,s.default=s,n.stringify=s,n.configure=W,r.exports=s;const a=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function u($){return $.length<5e3&&!a.test($)?`"${$}"`:JSON.stringify($)}function h($){if($.length>200)return $.sort();for(let m=1;m<$.length;m++){const I=$[m];let D=m;for(;D!==0&&$[D-1]>I;)$[D]=$[D-1],D--;$[D]=I}return $}const d=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function p($){return d.call($)!==void 0&&$.length!==0}function T($,m,I){$.length<I&&(I=$.length);const D=m===","?"":" ";let C=`"0":${D}${$[0]}`;for(let U=1;U<I;U++)C+=`${m}"${U}":${D}${$[U]}`;return C}function E($){if(i.call($,"circularValue")){const m=$.circularValue;if(typeof m=="string")return`"${m}"`;if(m==null)return m;if(m===Error||m===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function y($,m){let I;if(i.call($,m)&&(I=$[m],typeof I!="boolean"))throw new TypeError(`The "${m}" argument must be of type boolean`);return I===void 0?!0:I}function S($,m){let I;if(i.call($,m)){if(I=$[m],typeof I!="number")throw new TypeError(`The "${m}" argument must be of type number`);if(!Number.isInteger(I))throw new TypeError(`The "${m}" argument must be an integer`);if(I<1)throw new RangeError(`The "${m}" argument must be >= 1`)}return I===void 0?1/0:I}function x($){return $===1?"1 item":`${$} items`}function B($){const m=new Set;for(const I of $)(typeof I=="string"||typeof I=="number")&&m.add(String(I));return m}function H($){if(i.call($,"strict")){const m=$.strict;if(typeof m!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(m)return I=>{let D=`Object can not safely be stringified. Received type ${typeof I}`;throw typeof I!="function"&&(D+=` (${I.toString()})`),new Error(D)}}}function W($){$={...$};const m=H($);m&&($.bigint===void 0&&($.bigint=!1),"circularValue"in $||($.circularValue=Error));const I=E($),D=y($,"bigint"),C=y($,"deterministic"),U=S($,"maximumDepth"),V=S($,"maximumBreadth");function te(J,G,X,ce,fe,re){let ge=G[J];switch(typeof ge=="object"&&ge!==null&&typeof ge.toJSON=="function"&&(ge=ge.toJSON(J)),ge=ce.call(G,J,ge),typeof ge){case"string":return u(ge);case"object":{if(ge===null)return"null";if(X.indexOf(ge)!==-1)return I;let ue="",ie=",";const A=re;if(Array.isArray(ge)){if(ge.length===0)return"[]";if(U<X.length+1)return'"[Array]"';X.push(ge),fe!==""&&(re+=fe,ue+=`
${re}`,ie=`,
${re}`);const me=Math.min(ge.length,V);let Se=0;for(;Se<me-1;Se++){const O=te(String(Se),ge,X,ce,fe,re);ue+=O!==void 0?O:"null",ue+=ie}const Ne=te(String(Se),ge,X,ce,fe,re);if(ue+=Ne!==void 0?Ne:"null",ge.length-1>V){const O=ge.length-V-1;ue+=`${ie}"... ${x(O)} not stringified"`}return fe!==""&&(ue+=`
${A}`),X.pop(),`[${ue}]`}let Y=Object.keys(ge);const K=Y.length;if(K===0)return"{}";if(U<X.length+1)return'"[Object]"';let pe="",j="";fe!==""&&(re+=fe,ie=`,
${re}`,pe=" ");const ee=Math.min(K,V);C&&!p(ge)&&(Y=h(Y)),X.push(ge);for(let me=0;me<ee;me++){const Se=Y[me],Ne=te(Se,ge,X,ce,fe,re);Ne!==void 0&&(ue+=`${j}${u(Se)}:${pe}${Ne}`,j=ie)}if(K>V){const me=K-V;ue+=`${j}"...":${pe}"${x(me)} not stringified"`,j=ie}return fe!==""&&j.length>1&&(ue=`
${re}${ue}
${A}`),X.pop(),`{${ue}}`}case"number":return isFinite(ge)?String(ge):m?m(ge):"null";case"boolean":return ge===!0?"true":"false";case"undefined":return;case"bigint":if(D)return String(ge);default:return m?m(ge):void 0}}function ae(J,G,X,ce,fe,re){switch(typeof G=="object"&&G!==null&&typeof G.toJSON=="function"&&(G=G.toJSON(J)),typeof G){case"string":return u(G);case"object":{if(G===null)return"null";if(X.indexOf(G)!==-1)return I;const ge=re;let ue="",ie=",";if(Array.isArray(G)){if(G.length===0)return"[]";if(U<X.length+1)return'"[Array]"';X.push(G),fe!==""&&(re+=fe,ue+=`
${re}`,ie=`,
${re}`);const K=Math.min(G.length,V);let pe=0;for(;pe<K-1;pe++){const ee=ae(String(pe),G[pe],X,ce,fe,re);ue+=ee!==void 0?ee:"null",ue+=ie}const j=ae(String(pe),G[pe],X,ce,fe,re);if(ue+=j!==void 0?j:"null",G.length-1>V){const ee=G.length-V-1;ue+=`${ie}"... ${x(ee)} not stringified"`}return fe!==""&&(ue+=`
${ge}`),X.pop(),`[${ue}]`}X.push(G);let A="";fe!==""&&(re+=fe,ie=`,
${re}`,A=" ");let Y="";for(const K of ce){const pe=ae(K,G[K],X,ce,fe,re);pe!==void 0&&(ue+=`${Y}${u(K)}:${A}${pe}`,Y=ie)}return fe!==""&&Y.length>1&&(ue=`
${re}${ue}
${ge}`),X.pop(),`{${ue}}`}case"number":return isFinite(G)?String(G):m?m(G):"null";case"boolean":return G===!0?"true":"false";case"undefined":return;case"bigint":if(D)return String(G);default:return m?m(G):void 0}}function de(J,G,X,ce,fe){switch(typeof G){case"string":return u(G);case"object":{if(G===null)return"null";if(typeof G.toJSON=="function"){if(G=G.toJSON(J),typeof G!="object")return de(J,G,X,ce,fe);if(G===null)return"null"}if(X.indexOf(G)!==-1)return I;const re=fe;if(Array.isArray(G)){if(G.length===0)return"[]";if(U<X.length+1)return'"[Array]"';X.push(G),fe+=ce;let pe=`
${fe}`;const j=`,
${fe}`,ee=Math.min(G.length,V);let me=0;for(;me<ee-1;me++){const Ne=de(String(me),G[me],X,ce,fe);pe+=Ne!==void 0?Ne:"null",pe+=j}const Se=de(String(me),G[me],X,ce,fe);if(pe+=Se!==void 0?Se:"null",G.length-1>V){const Ne=G.length-V-1;pe+=`${j}"... ${x(Ne)} not stringified"`}return pe+=`
${re}`,X.pop(),`[${pe}]`}let ge=Object.keys(G);const ue=ge.length;if(ue===0)return"{}";if(U<X.length+1)return'"[Object]"';fe+=ce;const ie=`,
${fe}`;let A="",Y="",K=Math.min(ue,V);p(G)&&(A+=T(G,ie,V),ge=ge.slice(G.length),K-=G.length,Y=ie),C&&(ge=h(ge)),X.push(G);for(let pe=0;pe<K;pe++){const j=ge[pe],ee=de(j,G[j],X,ce,fe);ee!==void 0&&(A+=`${Y}${u(j)}: ${ee}`,Y=ie)}if(ue>V){const pe=ue-V;A+=`${Y}"...": "${x(pe)} not stringified"`,Y=ie}return Y!==""&&(A=`
${fe}${A}
${re}`),X.pop(),`{${A}}`}case"number":return isFinite(G)?String(G):m?m(G):"null";case"boolean":return G===!0?"true":"false";case"undefined":return;case"bigint":if(D)return String(G);default:return m?m(G):void 0}}function we(J,G,X){switch(typeof G){case"string":return u(G);case"object":{if(G===null)return"null";if(typeof G.toJSON=="function"){if(G=G.toJSON(J),typeof G!="object")return we(J,G,X);if(G===null)return"null"}if(X.indexOf(G)!==-1)return I;let ce="";if(Array.isArray(G)){if(G.length===0)return"[]";if(U<X.length+1)return'"[Array]"';X.push(G);const ie=Math.min(G.length,V);let A=0;for(;A<ie-1;A++){const K=we(String(A),G[A],X);ce+=K!==void 0?K:"null",ce+=","}const Y=we(String(A),G[A],X);if(ce+=Y!==void 0?Y:"null",G.length-1>V){const K=G.length-V-1;ce+=`,"... ${x(K)} not stringified"`}return X.pop(),`[${ce}]`}let fe=Object.keys(G);const re=fe.length;if(re===0)return"{}";if(U<X.length+1)return'"[Object]"';let ge="",ue=Math.min(re,V);p(G)&&(ce+=T(G,",",V),fe=fe.slice(G.length),ue-=G.length,ge=","),C&&(fe=h(fe)),X.push(G);for(let ie=0;ie<ue;ie++){const A=fe[ie],Y=we(A,G[A],X);Y!==void 0&&(ce+=`${ge}${u(A)}:${Y}`,ge=",")}if(re>V){const ie=re-V;ce+=`${ge}"...":"${x(ie)} not stringified"`}return X.pop(),`{${ce}}`}case"number":return isFinite(G)?String(G):m?m(G):"null";case"boolean":return G===!0?"true":"false";case"undefined":return;case"bigint":if(D)return String(G);default:return m?m(G):void 0}}function q(J,G,X){if(arguments.length>1){let ce="";if(typeof X=="number"?ce=" ".repeat(Math.min(X,10)):typeof X=="string"&&(ce=X.slice(0,10)),G!=null){if(typeof G=="function")return te("",{"":J},[],G,ce,"");if(Array.isArray(G))return ae("",J,[],B(G),ce,"")}if(ce.length!==0)return de("",J,[],ce,"")}return we("",J,[])}return q}})(av,av.exports);var Mc=av.exports,XF=$n,YF=nr,KF=YF.MESSAGE,qF=Mc;function ZF(r,n){return typeof n=="bigint"?n.toString():n}var JF=XF(function(r,n){var i=qF.configure(n);return r[KF]=i(r,n.replacer||ZF,n.space),r}),QF=$n,eU=QF(function(r,n){return n.message?(r.message="[".concat(n.label,"] ").concat(r.message),r):(r.label=n.label,r)}),tU=$n,rU=nr,nU=rU.MESSAGE,iU=Mc,oU=tU(function(r){var n={};return r.message&&(n["@message"]=r.message,delete r.message),r.timestamp&&(n["@timestamp"]=r.timestamp,delete r.timestamp),n["@fields"]=r,r[nU]=iU(n),r});function sU(r,n,i){return n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}var lU=$n;function aU(r,n,i){var s=n.reduce(function(u,h){return u[h]=r[h],delete r[h],u},{}),a=Object.keys(r).reduce(function(u,h){return u[h]=r[h],delete r[h],u},{});return Object.assign(r,s,sU({},i,a)),r}function uU(r,n,i){return r[i]=n.reduce(function(s,a){return s[a]=r[a],delete r[a],s},{}),r}var cU=lU(function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i="metadata";n.key&&(i=n.key);var s=[];return!n.fillExcept&&!n.fillWith&&(s.push("level"),s.push("message")),n.fillExcept&&(s=n.fillExcept),s.length>0?aU(r,s,i):n.fillWith?uU(r,n.fillWith,i):r}),Aa=1e3,La=Aa*60,Na=La*60,Ys=Na*24,hU=Ys*7,dU=Ys*365.25,fU=function(r,n){n=n||{};var i=typeof r;if(i==="string"&&r.length>0)return pU(r);if(i==="number"&&isFinite(r))return n.long?mU(r):gU(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function pU(r){if(r=String(r),!(r.length>100)){var n=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(n){var i=parseFloat(n[1]),s=(n[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return i*dU;case"weeks":case"week":case"w":return i*hU;case"days":case"day":case"d":return i*Ys;case"hours":case"hour":case"hrs":case"hr":case"h":return i*Na;case"minutes":case"minute":case"mins":case"min":case"m":return i*La;case"seconds":case"second":case"secs":case"sec":case"s":return i*Aa;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function gU(r){var n=Math.abs(r);return n>=Ys?Math.round(r/Ys)+"d":n>=Na?Math.round(r/Na)+"h":n>=La?Math.round(r/La)+"m":n>=Aa?Math.round(r/Aa)+"s":r+"ms"}function mU(r){var n=Math.abs(r);return n>=Ys?wd(r,n,Ys,"day"):n>=Na?wd(r,n,Na,"hour"):n>=La?wd(r,n,La,"minute"):n>=Aa?wd(r,n,Aa,"second"):r+" ms"}function wd(r,n,i,s){var a=n>=i*1.5;return Math.round(r/i)+" "+s+(a?"s":"")}var Sd=void 0,$U=$n,_U=fU,EU=$U(function(r){var n=+new Date;return Sd.diff=n-(Sd.prevTime||n),Sd.prevTime=n,r.ms="+".concat(_U(Sd.diff)),r}),TU=Nr.inspect,vU=$n,Yb=nr,bU=Yb.LEVEL,jO=Yb.MESSAGE,yU=Yb.SPLAT,wU=vU(function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=Object.assign({},r);return delete i[bU],delete i[jO],delete i[yU],r[jO]=TU(i,!1,n.depth||null,n.colorize),r}),Cf={exports:{}};function SU(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function zO(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,s.key,s)}}function IU(r,n,i){return n&&zO(r.prototype,n),i&&zO(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}var OU=nr,RU=OU.MESSAGE,rN=function(){function r(n){SU(this,r),this.template=n}return IU(r,[{key:"transform",value:function(i){return i[RU]=this.template(i),i}}]),r}();Cf.exports=function(r){return new rN(r)};Cf.exports.Printf=Cf.exports.Format=rN;var kU=Cf.exports,CU=$n,AU=nr,XO=AU.MESSAGE,LU=Mc,NU=CU(function(r){var n=LU(Object.assign({},r,{level:void 0,message:void 0,splat:void 0})),i=r.padding&&r.padding[r.level]||"";return n!=="{}"?r[XO]="".concat(r.level,":").concat(i," ").concat(r.message," ").concat(n):r[XO]="".concat(r.level,":").concat(i," ").concat(r.message),r});function xU(r){return BU(r)||PU(r)||DU(r)||MU()}function MU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DU(r,n){if(r){if(typeof r=="string")return uv(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(r);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return uv(r,n)}}function PU(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function BU(r){if(Array.isArray(r))return uv(r)}function uv(r,n){(n==null||n>r.length)&&(n=r.length);for(var i=0,s=new Array(n);i<n;i++)s[i]=r[i];return s}function FU(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function YO(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,s.key,s)}}function UU(r,n,i){return n&&YO(r.prototype,n),i&&YO(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}var KO=Nr,HU=nr,qO=HU.SPLAT,GU=/%[scdjifoO%]/g,VU=/%%/g,WU=function(){function r(n){FU(this,r),this.options=n}return UU(r,[{key:"_splat",value:function(i,s){var a=i.message,u=i[qO]||i.splat||[],h=a.match(VU),d=h&&h.length||0,p=s.length-d,T=p-u.length,E=T<0?u.splice(T,-1*T):[],y=E.length;if(y)for(var S=0;S<y;S++)Object.assign(i,E[S]);return i.message=KO.format.apply(KO,[a].concat(xU(u))),i}},{key:"transform",value:function(i){var s=i.message,a=i[qO]||i.splat;if(!a||!a.length)return i;var u=s&&s.match&&s.match(GU);if(!u&&(a||a.length)){var h=a.length>1?a.splice(0):a,d=h.length;if(d)for(var p=0;p<d;p++)Object.assign(i,h[p]);return i}return u?this._splat(i,u):i}}]),r}(),jU=function(r){return new WU(r)},nN=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,No="\\d\\d?",Lo="\\d\\d",zU="\\d{3}",XU="\\d{4}",ic="[^\\s]+",iN=/\[([^]*?)\]/gm;function oN(r,n){for(var i=[],s=0,a=r.length;s<a;s++)i.push(r[s].substr(0,n));return i}var ZO=function(r){return function(n,i){var s=i[r].map(function(u){return u.toLowerCase()}),a=s.indexOf(n.toLowerCase());return a>-1?a:null}};function Zo(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];for(var s=0,a=n;s<a.length;s++){var u=a[s];for(var h in u)r[h]=u[h]}return r}var sN=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],lN=["January","February","March","April","May","June","July","August","September","October","November","December"],YU=oN(lN,3),KU=oN(sN,3),Kb={dayNamesShort:KU,dayNames:sN,monthNamesShort:YU,monthNames:lN,amPm:["am","pm"],DoFn:function(r){return r+["th","st","nd","rd"][r%10>3?0:(r-r%10!==10?1:0)*r%10]}},Af=Zo({},Kb),aN=function(r){return Af=Zo(Af,r)},JO=function(r){return r.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Zr=function(r,n){for(n===void 0&&(n=2),r=String(r);r.length<n;)r="0"+r;return r},qU={D:function(r){return String(r.getDate())},DD:function(r){return Zr(r.getDate())},Do:function(r,n){return n.DoFn(r.getDate())},d:function(r){return String(r.getDay())},dd:function(r){return Zr(r.getDay())},ddd:function(r,n){return n.dayNamesShort[r.getDay()]},dddd:function(r,n){return n.dayNames[r.getDay()]},M:function(r){return String(r.getMonth()+1)},MM:function(r){return Zr(r.getMonth()+1)},MMM:function(r,n){return n.monthNamesShort[r.getMonth()]},MMMM:function(r,n){return n.monthNames[r.getMonth()]},YY:function(r){return Zr(String(r.getFullYear()),4).substr(2)},YYYY:function(r){return Zr(r.getFullYear(),4)},h:function(r){return String(r.getHours()%12||12)},hh:function(r){return Zr(r.getHours()%12||12)},H:function(r){return String(r.getHours())},HH:function(r){return Zr(r.getHours())},m:function(r){return String(r.getMinutes())},mm:function(r){return Zr(r.getMinutes())},s:function(r){return String(r.getSeconds())},ss:function(r){return Zr(r.getSeconds())},S:function(r){return String(Math.round(r.getMilliseconds()/100))},SS:function(r){return Zr(Math.round(r.getMilliseconds()/10),2)},SSS:function(r){return Zr(r.getMilliseconds(),3)},a:function(r,n){return r.getHours()<12?n.amPm[0]:n.amPm[1]},A:function(r,n){return r.getHours()<12?n.amPm[0].toUpperCase():n.amPm[1].toUpperCase()},ZZ:function(r){var n=r.getTimezoneOffset();return(n>0?"-":"+")+Zr(Math.floor(Math.abs(n)/60)*100+Math.abs(n)%60,4)},Z:function(r){var n=r.getTimezoneOffset();return(n>0?"-":"+")+Zr(Math.floor(Math.abs(n)/60),2)+":"+Zr(Math.abs(n)%60,2)}},QO=function(r){return+r-1},eR=[null,No],tR=[null,ic],rR=["isPm",ic,function(r,n){var i=r.toLowerCase();return i===n.amPm[0]?0:i===n.amPm[1]?1:null}],nR=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(r){var n=(r+"").match(/([+-]|\d\d)/gi);if(n){var i=+n[1]*60+parseInt(n[2],10);return n[0]==="+"?i:-i}return 0}],ZU={D:["day",No],DD:["day",Lo],Do:["day",No+ic,function(r){return parseInt(r,10)}],M:["month",No,QO],MM:["month",Lo,QO],YY:["year",Lo,function(r){var n=new Date,i=+(""+n.getFullYear()).substr(0,2);return+(""+(+r>68?i-1:i)+r)}],h:["hour",No,void 0,"isPm"],hh:["hour",Lo,void 0,"isPm"],H:["hour",No],HH:["hour",Lo],m:["minute",No],mm:["minute",Lo],s:["second",No],ss:["second",Lo],YYYY:["year",XU],S:["millisecond","\\d",function(r){return+r*100}],SS:["millisecond",Lo,function(r){return+r*10}],SSS:["millisecond",zU],d:eR,dd:eR,ddd:tR,dddd:tR,MMM:["month",ic,ZO("monthNamesShort")],MMMM:["month",ic,ZO("monthNames")],a:rR,A:rR,ZZ:nR,Z:nR},Lf={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},uN=function(r){return Zo(Lf,r)},cN=function(r,n,i){if(n===void 0&&(n=Lf.default),i===void 0&&(i={}),typeof r=="number"&&(r=new Date(r)),Object.prototype.toString.call(r)!=="[object Date]"||isNaN(r.getTime()))throw new Error("Invalid Date pass to format");n=Lf[n]||n;var s=[];n=n.replace(iN,function(u,h){return s.push(h),"@@@"});var a=Zo(Zo({},Af),i);return n=n.replace(nN,function(u){return qU[u](r,a)}),n.replace(/@@@/g,function(){return s.shift()})};function hN(r,n,i){if(i===void 0&&(i={}),typeof n!="string")throw new Error("Invalid format in fecha parse");if(n=Lf[n]||n,r.length>1e3)return null;var s=new Date,a={year:s.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},u=[],h=[],d=n.replace(iN,function(D,C){return h.push(JO(C)),"@@@"}),p={},T={};d=JO(d).replace(nN,function(D){var C=ZU[D],U=C[0],V=C[1],te=C[3];if(p[U])throw new Error("Invalid format. "+U+" specified twice in format");return p[U]=!0,te&&(T[te]=!0),u.push(C),"("+V+")"}),Object.keys(T).forEach(function(D){if(!p[D])throw new Error("Invalid format. "+D+" is required in specified format")}),d=d.replace(/@@@/g,function(){return h.shift()});var E=r.match(new RegExp(d,"i"));if(!E)return null;for(var y=Zo(Zo({},Af),i),S=1;S<E.length;S++){var x=u[S-1],B=x[0],H=x[2],W=H?H(E[S],y):+E[S];if(W==null)return null;a[B]=W}a.isPm===1&&a.hour!=null&&+a.hour!=12?a.hour=+a.hour+12:a.isPm===0&&+a.hour==12&&(a.hour=0);var $;if(a.timezoneOffset==null){$=new Date(a.year,a.month,a.day,a.hour,a.minute,a.second,a.millisecond);for(var m=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],S=0,I=m.length;S<I;S++)if(p[m[S][0]]&&a[m[S][0]]!==$[m[S][1]]())return null}else if($=new Date(Date.UTC(a.year,a.month,a.day,a.hour,a.minute-a.timezoneOffset,a.second,a.millisecond)),a.month>11||a.month<0||a.day>31||a.day<1||a.hour>23||a.hour<0||a.minute>59||a.minute<0||a.second>59||a.second<0)return null;return $}var JU={format:cN,parse:hN,defaultI18n:Kb,setGlobalDateI18n:aN,setGlobalDateMasks:uN};const QU=Object.freeze(Object.defineProperty({__proto__:null,assign:Zo,default:JU,defaultI18n:Kb,format:cN,parse:hN,setGlobalDateI18n:aN,setGlobalDateMasks:uN},Symbol.toStringTag,{value:"Module"})),eH=Pv(QU);var tH=eH,rH=$n,nH=rH(function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n.format&&(r.timestamp=typeof n.format=="function"?n.format():tH.format(new Date,n.format)),r.timestamp||(r.timestamp=new Date().toISOString()),n.alias&&(r[n.alias]=r.timestamp),r}),tE=zL,iH=$n,oH=nr,rE=oH.MESSAGE,sH=iH(function(r,n){return n.level!==!1&&(r.level=tE.strip(r.level)),n.message!==!1&&(r.message=tE.strip(String(r.message))),n.raw!==!1&&r[rE]&&(r[rE]=tE.strip(String(r[rE]))),r}),Ir=np.format=$n;np.levels=bF;Object.defineProperty(Ir,"align",{value:wF});Object.defineProperty(Ir,"cli",{value:HF});Object.defineProperty(Ir,"colorize",{value:Wb});Object.defineProperty(Ir,"combine",{value:WF});Object.defineProperty(Ir,"errors",{value:zF});Object.defineProperty(Ir,"json",{value:JF});Object.defineProperty(Ir,"label",{value:eU});Object.defineProperty(Ir,"logstash",{value:oU});Object.defineProperty(Ir,"metadata",{value:cU});Object.defineProperty(Ir,"ms",{value:EU});Object.defineProperty(Ir,"padLevels",{value:ZL});Object.defineProperty(Ir,"prettyPrint",{value:wU});Object.defineProperty(Ir,"printf",{value:kU});Object.defineProperty(Ir,"simple",{value:NU});Object.defineProperty(Ir,"splat",{value:jU});Object.defineProperty(Ir,"timestamp",{value:nH});Object.defineProperty(Ir,"uncolorize",{value:sH});var qb={};(function(r){var n=Nr,i=n.format;r.warn={deprecated:function(a){return function(){throw new Error(i("{ %s } was removed in winston@3.0.0.",a))}},useFormat:function(a){return function(){throw new Error([i("{ %s } was removed in winston@3.0.0.",a),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions:function(a,u,h){h.forEach(function(d){a[d]=r.warn[u](d)})},moved:function(a,u,h){function d(){return function(){throw new Error([i("winston.%s was moved in winston@3.0.0.",h),i("Use a winston.%s instead.",u)].join(`
`))}}Object.defineProperty(a,h,{get:d,set:d})},forProperties:function(a,u,h){h.forEach(function(d){var p=r.warn[u](d);Object.defineProperty(a,d,{get:p,set:p})})}}})(qb);const lH="winston",aH="A logger for just about everything.",uH="3.9.0",cH="Charlie Robbins <charlie.robbins@gmail.com>",hH=["David Hyde <dabh@alumni.stanford.edu>"],dH={type:"git",url:"https://github.com/winstonjs/winston.git"},fH=["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],pH={"@dabh/diagnostics":"^2.0.2","@colors/colors":"1.5.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.4.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.5.0"},gH={"@babel/cli":"^7.17.0","@babel/core":"^7.17.2","@babel/preset-env":"^7.16.7","@dabh/eslint-config-populist":"^5.0.0","@types/node":"^18.0.0","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.9.0",hock:"^1.4.1",mocha:"8.1.3",nyc:"^15.1.0",rimraf:"^3.0.2",split2:"^4.1.0","std-mocks":"^1.0.1",through2:"^4.0.2","winston-compat":"^0.1.5"},mH="./lib/winston.js",$H="./dist/winston",_H="./index.d.ts",EH={lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"mocha","test:coverage":"nyc npm run test:unit","test:unit":"mocha test/unit","test:integration":"mocha test/integration",build:"rimraf dist && babel lib -d dist",prepublishOnly:"npm run build"},TH={node:">= 12.0.0"},vH="MIT",bH={name:lH,description:aH,version:uH,author:cH,maintainers:hH,repository:dH,keywords:fH,dependencies:pH,devDependencies:gH,main:mH,browser:$H,types:_H,scripts:EH,engines:TH,license:vH};var dN={},Id={exports:{}},yH=wH;function wH(r,n){if(nE("noDeprecation"))return r;var i=!1;function s(){if(!i){if(nE("throwDeprecation"))throw new Error(n);nE("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return r.apply(this,arguments)}return s}function nE(r){try{if(!ut.localStorage)return!1}catch{return!1}var n=ut.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}var Zb={exports:{}},Ta=typeof Reflect=="object"?Reflect:null,iR=Ta&&typeof Ta.apply=="function"?Ta.apply:function(n,i,s){return Function.prototype.apply.call(n,i,s)},Zd;Ta&&typeof Ta.ownKeys=="function"?Zd=Ta.ownKeys:Object.getOwnPropertySymbols?Zd=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Zd=function(n){return Object.getOwnPropertyNames(n)};function SH(r){console&&console.warn&&console.warn(r)}var fN=Number.isNaN||function(n){return n!==n};function Ct(){Ct.init.call(this)}Zb.exports=Ct;Zb.exports.once=kH;Ct.EventEmitter=Ct;Ct.prototype._events=void 0;Ct.prototype._eventsCount=0;Ct.prototype._maxListeners=void 0;var oR=10;function lp(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Ct,"defaultMaxListeners",{enumerable:!0,get:function(){return oR},set:function(r){if(typeof r!="number"||r<0||fN(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");oR=r}});Ct.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ct.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||fN(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function pN(r){return r._maxListeners===void 0?Ct.defaultMaxListeners:r._maxListeners}Ct.prototype.getMaxListeners=function(){return pN(this)};Ct.prototype.emit=function(n){for(var i=[],s=1;s<arguments.length;s++)i.push(arguments[s]);var a=n==="error",u=this._events;if(u!==void 0)a=a&&u.error===void 0;else if(!a)return!1;if(a){var h;if(i.length>0&&(h=i[0]),h instanceof Error)throw h;var d=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw d.context=h,d}var p=u[n];if(p===void 0)return!1;if(typeof p=="function")iR(p,this,i);else for(var T=p.length,E=EN(p,T),s=0;s<T;++s)iR(E[s],this,i);return!0};function gN(r,n,i,s){var a,u,h;if(lp(i),u=r._events,u===void 0?(u=r._events=Object.create(null),r._eventsCount=0):(u.newListener!==void 0&&(r.emit("newListener",n,i.listener?i.listener:i),u=r._events),h=u[n]),h===void 0)h=u[n]=i,++r._eventsCount;else if(typeof h=="function"?h=u[n]=s?[i,h]:[h,i]:s?h.unshift(i):h.push(i),a=pN(r),a>0&&h.length>a&&!h.warned){h.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=r,d.type=n,d.count=h.length,SH(d)}return r}Ct.prototype.addListener=function(n,i){return gN(this,n,i,!1)};Ct.prototype.on=Ct.prototype.addListener;Ct.prototype.prependListener=function(n,i){return gN(this,n,i,!0)};function IH(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function mN(r,n,i){var s={fired:!1,wrapFn:void 0,target:r,type:n,listener:i},a=IH.bind(s);return a.listener=i,s.wrapFn=a,a}Ct.prototype.once=function(n,i){return lp(i),this.on(n,mN(this,n,i)),this};Ct.prototype.prependOnceListener=function(n,i){return lp(i),this.prependListener(n,mN(this,n,i)),this};Ct.prototype.removeListener=function(n,i){var s,a,u,h,d;if(lp(i),a=this._events,a===void 0)return this;if(s=a[n],s===void 0)return this;if(s===i||s.listener===i)--this._eventsCount===0?this._events=Object.create(null):(delete a[n],a.removeListener&&this.emit("removeListener",n,s.listener||i));else if(typeof s!="function"){for(u=-1,h=s.length-1;h>=0;h--)if(s[h]===i||s[h].listener===i){d=s[h].listener,u=h;break}if(u<0)return this;u===0?s.shift():OH(s,u),s.length===1&&(a[n]=s[0]),a.removeListener!==void 0&&this.emit("removeListener",n,d||i)}return this};Ct.prototype.off=Ct.prototype.removeListener;Ct.prototype.removeAllListeners=function(n){var i,s,a;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[n]),this;if(arguments.length===0){var u=Object.keys(s),h;for(a=0;a<u.length;++a)h=u[a],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(i=s[n],typeof i=="function")this.removeListener(n,i);else if(i!==void 0)for(a=i.length-1;a>=0;a--)this.removeListener(n,i[a]);return this};function $N(r,n,i){var s=r._events;if(s===void 0)return[];var a=s[n];return a===void 0?[]:typeof a=="function"?i?[a.listener||a]:[a]:i?RH(a):EN(a,a.length)}Ct.prototype.listeners=function(n){return $N(this,n,!0)};Ct.prototype.rawListeners=function(n){return $N(this,n,!1)};Ct.listenerCount=function(r,n){return typeof r.listenerCount=="function"?r.listenerCount(n):_N.call(r,n)};Ct.prototype.listenerCount=_N;function _N(r){var n=this._events;if(n!==void 0){var i=n[r];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}Ct.prototype.eventNames=function(){return this._eventsCount>0?Zd(this._events):[]};function EN(r,n){for(var i=new Array(n),s=0;s<n;++s)i[s]=r[s];return i}function OH(r,n){for(;n+1<r.length;n++)r[n]=r[n+1];r.pop()}function RH(r){for(var n=new Array(r.length),i=0;i<n.length;++i)n[i]=r[i].listener||r[i];return n}function kH(r,n){return new Promise(function(i,s){function a(h){r.removeListener(n,u),s(h)}function u(){typeof r.removeListener=="function"&&r.removeListener("error",a),i([].slice.call(arguments))}TN(r,n,u,{once:!0}),n!=="error"&&CH(r,a,{once:!0})})}function CH(r,n,i){typeof r.on=="function"&&TN(r,"error",n,i)}function TN(r,n,i,s){if(typeof r.on=="function")s.once?r.once(n,i):r.on(n,i);else if(typeof r.addEventListener=="function")r.addEventListener(n,function a(u){s.once&&r.removeEventListener(n,a),i(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var Jb=Zb.exports,vN=Jb.EventEmitter;function AH(r,n){var i=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ve.nextTick(cv,this,r)):Ve.nextTick(cv,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(u){!n&&u?i._writableState?i._writableState.errorEmitted?Ve.nextTick(Jd,i):(i._writableState.errorEmitted=!0,Ve.nextTick(sR,i,u)):Ve.nextTick(sR,i,u):n?(Ve.nextTick(Jd,i),n(u)):Ve.nextTick(Jd,i)}),this)}function sR(r,n){cv(r,n),Jd(r)}function Jd(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function LH(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function cv(r,n){r.emit("error",n)}function NH(r,n){var i=r._readableState,s=r._writableState;i&&i.autoDestroy||s&&s.autoDestroy?r.destroy(n):r.emit("error",n)}var bN={destroy:AH,undestroy:LH,errorOrDestroy:NH},Qs={};function xH(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var yN={};function xn(r,n,i){i||(i=Error);function s(u,h,d){return typeof n=="string"?n:n(u,h,d)}var a=function(u){xH(h,u);function h(d,p,T){return u.call(this,s(d,p,T))||this}return h}(i);a.prototype.name=i.name,a.prototype.code=r,yN[r]=a}function lR(r,n){if(Array.isArray(r)){var i=r.length;return r=r.map(function(s){return String(s)}),i>2?"one of ".concat(n," ").concat(r.slice(0,i-1).join(", "),", or ")+r[i-1]:i===2?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}else return"of ".concat(n," ").concat(String(r))}function MH(r,n,i){return r.substr(!i||i<0?0:+i,n.length)===n}function DH(r,n,i){return(i===void 0||i>r.length)&&(i=r.length),r.substring(i-n.length,i)===n}function PH(r,n,i){return typeof i!="number"&&(i=0),i+n.length>r.length?!1:r.indexOf(n,i)!==-1}xn("ERR_INVALID_OPT_VALUE",function(r,n){return'The value "'+n+'" is invalid for option "'+r+'"'},TypeError);xn("ERR_INVALID_ARG_TYPE",function(r,n,i){var s;typeof n=="string"&&MH(n,"not ")?(s="must not be",n=n.replace(/^not /,"")):s="must be";var a;if(DH(r," argument"))a="The ".concat(r," ").concat(s," ").concat(lR(n,"type"));else{var u=PH(r,".")?"property":"argument";a='The "'.concat(r,'" ').concat(u," ").concat(s," ").concat(lR(n,"type"))}return a+=". Received type ".concat(typeof i),a},TypeError);xn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");xn("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});xn("ERR_STREAM_PREMATURE_CLOSE","Premature close");xn("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});xn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");xn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");xn("ERR_STREAM_WRITE_AFTER_END","write after end");xn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);xn("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);xn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Qs.codes=yN;var BH=Qs.codes.ERR_INVALID_OPT_VALUE;function FH(r,n,i){return r.highWaterMark!=null?r.highWaterMark:n?r[i]:null}function UH(r,n,i,s){var a=FH(n,s,i);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var u=s?i:"highWaterMark";throw new BH(u,a)}return Math.floor(a)}return r.objectMode?16:16*1024}var wN={getHighWaterMark:UH},iE,aR;function HH(){if(aR)return iE;aR=1;function r(B,H){var W=Object.keys(B);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(B);H&&($=$.filter(function(m){return Object.getOwnPropertyDescriptor(B,m).enumerable})),W.push.apply(W,$)}return W}function n(B){for(var H=1;H<arguments.length;H++){var W=arguments[H]!=null?arguments[H]:{};H%2?r(Object(W),!0).forEach(function($){i(B,$,W[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(W)):r(Object(W)).forEach(function($){Object.defineProperty(B,$,Object.getOwnPropertyDescriptor(W,$))})}return B}function i(B,H,W){return H=h(H),H in B?Object.defineProperty(B,H,{value:W,enumerable:!0,configurable:!0,writable:!0}):B[H]=W,B}function s(B,H){if(!(B instanceof H))throw new TypeError("Cannot call a class as a function")}function a(B,H){for(var W=0;W<H.length;W++){var $=H[W];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(B,h($.key),$)}}function u(B,H,W){return H&&a(B.prototype,H),W&&a(B,W),Object.defineProperty(B,"prototype",{writable:!1}),B}function h(B){var H=d(B,"string");return typeof H=="symbol"?H:String(H)}function d(B,H){if(typeof B!="object"||B===null)return B;var W=B[Symbol.toPrimitive];if(W!==void 0){var $=W.call(B,H||"default");if(typeof $!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(B)}var p=_t,T=p.Buffer,E=Nr,y=E.inspect,S=y&&y.custom||"inspect";function x(B,H,W){T.prototype.copy.call(B,H,W)}return iE=function(){function B(){s(this,B),this.head=null,this.tail=null,this.length=0}return u(B,[{key:"push",value:function(W){var $={data:W,next:null};this.length>0?this.tail.next=$:this.head=$,this.tail=$,++this.length}},{key:"unshift",value:function(W){var $={data:W,next:this.head};this.length===0&&(this.tail=$),this.head=$,++this.length}},{key:"shift",value:function(){if(this.length!==0){var W=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,W}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(W){if(this.length===0)return"";for(var $=this.head,m=""+$.data;$=$.next;)m+=W+$.data;return m}},{key:"concat",value:function(W){if(this.length===0)return T.alloc(0);for(var $=T.allocUnsafe(W>>>0),m=this.head,I=0;m;)x(m.data,$,I),I+=m.data.length,m=m.next;return $}},{key:"consume",value:function(W,$){var m;return W<this.head.data.length?(m=this.head.data.slice(0,W),this.head.data=this.head.data.slice(W)):W===this.head.data.length?m=this.shift():m=$?this._getString(W):this._getBuffer(W),m}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(W){var $=this.head,m=1,I=$.data;for(W-=I.length;$=$.next;){var D=$.data,C=W>D.length?D.length:W;if(C===D.length?I+=D:I+=D.slice(0,W),W-=C,W===0){C===D.length?(++m,$.next?this.head=$.next:this.head=this.tail=null):(this.head=$,$.data=D.slice(C));break}++m}return this.length-=m,I}},{key:"_getBuffer",value:function(W){var $=T.allocUnsafe(W),m=this.head,I=1;for(m.data.copy($),W-=m.data.length;m=m.next;){var D=m.data,C=W>D.length?D.length:W;if(D.copy($,$.length-W,0,C),W-=C,W===0){C===D.length?(++I,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=D.slice(C));break}++I}return this.length-=I,$}},{key:S,value:function(W,$){return y(this,n(n({},$),{},{depth:0,customInspect:!1}))}}]),B}(),iE}var oE={},Od={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var uR;function GH(){return uR||(uR=1,function(r,n){var i=_t,s=i.Buffer;function a(h,d){for(var p in h)d[p]=h[p]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?r.exports=i:(a(i,n),n.Buffer=u);function u(h,d,p){return s(h,d,p)}u.prototype=Object.create(s.prototype),a(s,u),u.from=function(h,d,p){if(typeof h=="number")throw new TypeError("Argument must not be a number");return s(h,d,p)},u.alloc=function(h,d,p){if(typeof h!="number")throw new TypeError("Argument must be a number");var T=s(h);return d!==void 0?typeof p=="string"?T.fill(d,p):T.fill(d):T.fill(0),T},u.allocUnsafe=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return s(h)},u.allocUnsafeSlow=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(h)}}(Od,Od.exports)),Od.exports}var cR;function hv(){if(cR)return oE;cR=1;var r=GH().Buffer,n=r.isEncoding||function($){switch($=""+$,$&&$.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i($){if(!$)return"utf8";for(var m;;)switch($){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return $;default:if(m)return;$=(""+$).toLowerCase(),m=!0}}function s($){var m=i($);if(typeof m!="string"&&(r.isEncoding===n||!n($)))throw new Error("Unknown encoding: "+$);return m||$}oE.StringDecoder=a;function a($){this.encoding=s($);var m;switch(this.encoding){case"utf16le":this.text=y,this.end=S,m=4;break;case"utf8":this.fillLast=p,m=4;break;case"base64":this.text=x,this.end=B,m=3;break;default:this.write=H,this.end=W;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(m)}a.prototype.write=function($){if($.length===0)return"";var m,I;if(this.lastNeed){if(m=this.fillLast($),m===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<$.length?m?m+this.text($,I):this.text($,I):m||""},a.prototype.end=E,a.prototype.text=T,a.prototype.fillLast=function($){if(this.lastNeed<=$.length)return $.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);$.copy(this.lastChar,this.lastTotal-this.lastNeed,0,$.length),this.lastNeed-=$.length};function u($){return $<=127?0:$>>5===6?2:$>>4===14?3:$>>3===30?4:$>>6===2?-1:-2}function h($,m,I){var D=m.length-1;if(D<I)return 0;var C=u(m[D]);return C>=0?(C>0&&($.lastNeed=C-1),C):--D<I||C===-2?0:(C=u(m[D]),C>=0?(C>0&&($.lastNeed=C-2),C):--D<I||C===-2?0:(C=u(m[D]),C>=0?(C>0&&(C===2?C=0:$.lastNeed=C-3),C):0))}function d($,m,I){if((m[0]&192)!==128)return $.lastNeed=0,"";if($.lastNeed>1&&m.length>1){if((m[1]&192)!==128)return $.lastNeed=1,"";if($.lastNeed>2&&m.length>2&&(m[2]&192)!==128)return $.lastNeed=2,""}}function p($){var m=this.lastTotal-this.lastNeed,I=d(this,$);if(I!==void 0)return I;if(this.lastNeed<=$.length)return $.copy(this.lastChar,m,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);$.copy(this.lastChar,m,0,$.length),this.lastNeed-=$.length}function T($,m){var I=h(this,$,m);if(!this.lastNeed)return $.toString("utf8",m);this.lastTotal=I;var D=$.length-(I-this.lastNeed);return $.copy(this.lastChar,0,D),$.toString("utf8",m,D)}function E($){var m=$&&$.length?this.write($):"";return this.lastNeed?m+"":m}function y($,m){if(($.length-m)%2===0){var I=$.toString("utf16le",m);if(I){var D=I.charCodeAt(I.length-1);if(D>=55296&&D<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=$[$.length-2],this.lastChar[1]=$[$.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=$[$.length-1],$.toString("utf16le",m,$.length-1)}function S($){var m=$&&$.length?this.write($):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return m+this.lastChar.toString("utf16le",0,I)}return m}function x($,m){var I=($.length-m)%3;return I===0?$.toString("base64",m):(this.lastNeed=3-I,this.lastTotal=3,I===1?this.lastChar[0]=$[$.length-1]:(this.lastChar[0]=$[$.length-2],this.lastChar[1]=$[$.length-1]),$.toString("base64",m,$.length-I))}function B($){var m=$&&$.length?this.write($):"";return this.lastNeed?m+this.lastChar.toString("base64",0,3-this.lastNeed):m}function H($){return $.toString(this.encoding)}function W($){return $&&$.length?this.write($):""}return oE}var hR=Qs.codes.ERR_STREAM_PREMATURE_CLOSE;function VH(r){var n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];r.apply(this,s)}}}function WH(){}function jH(r){return r.setHeader&&typeof r.abort=="function"}function SN(r,n,i){if(typeof n=="function")return SN(r,null,n);n||(n={}),i=VH(i||WH);var s=n.readable||n.readable!==!1&&r.readable,a=n.writable||n.writable!==!1&&r.writable,u=function(){r.writable||d()},h=r._writableState&&r._writableState.finished,d=function(){a=!1,h=!0,s||i.call(r)},p=r._readableState&&r._readableState.endEmitted,T=function(){s=!1,p=!0,a||i.call(r)},E=function(B){i.call(r,B)},y=function(){var B;if(s&&!p)return(!r._readableState||!r._readableState.ended)&&(B=new hR),i.call(r,B);if(a&&!h)return(!r._writableState||!r._writableState.ended)&&(B=new hR),i.call(r,B)},S=function(){r.req.on("finish",d)};return jH(r)?(r.on("complete",d),r.on("abort",y),r.req?S():r.on("request",S)):a&&!r._writableState&&(r.on("end",u),r.on("close",u)),r.on("end",T),r.on("finish",d),n.error!==!1&&r.on("error",E),r.on("close",y),function(){r.removeListener("complete",d),r.removeListener("abort",y),r.removeListener("request",S),r.req&&r.req.removeListener("finish",d),r.removeListener("end",u),r.removeListener("close",u),r.removeListener("finish",d),r.removeListener("end",T),r.removeListener("error",E),r.removeListener("close",y)}}var ap=SN,sE,dR;function zH(){if(dR)return sE;dR=1;var r;function n(I,D,C){return D=i(D),D in I?Object.defineProperty(I,D,{value:C,enumerable:!0,configurable:!0,writable:!0}):I[D]=C,I}function i(I){var D=s(I,"string");return typeof D=="symbol"?D:String(D)}function s(I,D){if(typeof I!="object"||I===null)return I;var C=I[Symbol.toPrimitive];if(C!==void 0){var U=C.call(I,D||"default");if(typeof U!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(I)}var a=ap,u=Symbol("lastResolve"),h=Symbol("lastReject"),d=Symbol("error"),p=Symbol("ended"),T=Symbol("lastPromise"),E=Symbol("handlePromise"),y=Symbol("stream");function S(I,D){return{value:I,done:D}}function x(I){var D=I[u];if(D!==null){var C=I[y].read();C!==null&&(I[T]=null,I[u]=null,I[h]=null,D(S(C,!1)))}}function B(I){Ve.nextTick(x,I)}function H(I,D){return function(C,U){I.then(function(){if(D[p]){C(S(void 0,!0));return}D[E](C,U)},U)}}var W=Object.getPrototypeOf(function(){}),$=Object.setPrototypeOf((r={get stream(){return this[y]},next:function(){var D=this,C=this[d];if(C!==null)return Promise.reject(C);if(this[p])return Promise.resolve(S(void 0,!0));if(this[y].destroyed)return new Promise(function(ae,de){Ve.nextTick(function(){D[d]?de(D[d]):ae(S(void 0,!0))})});var U=this[T],V;if(U)V=new Promise(H(U,this));else{var te=this[y].read();if(te!==null)return Promise.resolve(S(te,!1));V=new Promise(this[E])}return this[T]=V,V}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var D=this;return new Promise(function(C,U){D[y].destroy(null,function(V){if(V){U(V);return}C(S(void 0,!0))})})}),r),W),m=function(D){var C,U=Object.create($,(C={},n(C,y,{value:D,writable:!0}),n(C,u,{value:null,writable:!0}),n(C,h,{value:null,writable:!0}),n(C,d,{value:null,writable:!0}),n(C,p,{value:D._readableState.endEmitted,writable:!0}),n(C,E,{value:function(te,ae){var de=U[y].read();de?(U[T]=null,U[u]=null,U[h]=null,te(S(de,!1))):(U[u]=te,U[h]=ae)},writable:!0}),C));return U[T]=null,a(D,function(V){if(V&&V.code!=="ERR_STREAM_PREMATURE_CLOSE"){var te=U[h];te!==null&&(U[T]=null,U[u]=null,U[h]=null,te(V)),U[d]=V;return}var ae=U[u];ae!==null&&(U[T]=null,U[u]=null,U[h]=null,ae(S(void 0,!0))),U[p]=!0}),D.on("readable",B.bind(null,U)),U};return sE=m,sE}var lE,fR;function XH(){return fR||(fR=1,lE=function(){throw new Error("Readable.from is not available in the browser")}),lE}var aE,pR;function Qb(){if(pR)return aE;pR=1,aE=ae;var r;ae.ReadableState=te,Jb.EventEmitter;var n=function(F,Oe){return F.listeners(Oe).length},i=vN,s=_t.Buffer,a=(typeof ut<"u"?ut:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function u(O){return s.from(O)}function h(O){return s.isBuffer(O)||O instanceof a}var d=Nr,p;d&&d.debuglog?p=d.debuglog("stream"):p=function(){};var T=HH(),E=bN,y=wN,S=y.getHighWaterMark,x=Qs.codes,B=x.ERR_INVALID_ARG_TYPE,H=x.ERR_STREAM_PUSH_AFTER_EOF,W=x.ERR_METHOD_NOT_IMPLEMENTED,$=x.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,m,I,D;co(ae,i);var C=E.errorOrDestroy,U=["error","close","destroy","pause","resume"];function V(O,F,Oe){if(typeof O.prependListener=="function")return O.prependListener(F,Oe);!O._events||!O._events[F]?O.on(F,Oe):Array.isArray(O._events[F])?O._events[F].unshift(Oe):O._events[F]=[Oe,O._events[F]]}function te(O,F,Oe){r=r||Ks(),O=O||{},typeof Oe!="boolean"&&(Oe=F instanceof r),this.objectMode=!!O.objectMode,Oe&&(this.objectMode=this.objectMode||!!O.readableObjectMode),this.highWaterMark=S(this,O,"readableHighWaterMark",Oe),this.buffer=new T,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.destroyed=!1,this.defaultEncoding=O.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,O.encoding&&(m||(m=hv().StringDecoder),this.decoder=new m(O.encoding),this.encoding=O.encoding)}function ae(O){if(r=r||Ks(),!(this instanceof ae))return new ae(O);var F=this instanceof r;this._readableState=new te(O,this,F),this.readable=!0,O&&(typeof O.read=="function"&&(this._read=O.read),typeof O.destroy=="function"&&(this._destroy=O.destroy)),i.call(this)}Object.defineProperty(ae.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(F){this._readableState&&(this._readableState.destroyed=F)}}),ae.prototype.destroy=E.destroy,ae.prototype._undestroy=E.undestroy,ae.prototype._destroy=function(O,F){F(O)},ae.prototype.push=function(O,F){var Oe=this._readableState,Ae;return Oe.objectMode?Ae=!0:typeof O=="string"&&(F=F||Oe.defaultEncoding,F!==Oe.encoding&&(O=s.from(O,F),F=""),Ae=!0),de(this,O,F,!1,Ae)},ae.prototype.unshift=function(O){return de(this,O,null,!0,!1)};function de(O,F,Oe,Ae,nt){p("readableAddChunk",F);var P=O._readableState;if(F===null)P.reading=!1,ce(O,P);else{var v;if(nt||(v=q(P,F)),v)C(O,v);else if(P.objectMode||F&&F.length>0)if(typeof F!="string"&&!P.objectMode&&Object.getPrototypeOf(F)!==s.prototype&&(F=u(F)),Ae)P.endEmitted?C(O,new $):we(O,P,F,!0);else if(P.ended)C(O,new H);else{if(P.destroyed)return!1;P.reading=!1,P.decoder&&!Oe?(F=P.decoder.write(F),P.objectMode||F.length!==0?we(O,P,F,!1):ge(O,P)):we(O,P,F,!1)}else Ae||(P.reading=!1,ge(O,P))}return!P.ended&&(P.length<P.highWaterMark||P.length===0)}function we(O,F,Oe,Ae){F.flowing&&F.length===0&&!F.sync?(F.awaitDrain=0,O.emit("data",Oe)):(F.length+=F.objectMode?1:Oe.length,Ae?F.buffer.unshift(Oe):F.buffer.push(Oe),F.needReadable&&fe(O)),ge(O,F)}function q(O,F){var Oe;return!h(F)&&typeof F!="string"&&F!==void 0&&!O.objectMode&&(Oe=new B("chunk",["string","Buffer","Uint8Array"],F)),Oe}ae.prototype.isPaused=function(){return this._readableState.flowing===!1},ae.prototype.setEncoding=function(O){m||(m=hv().StringDecoder);var F=new m(O);this._readableState.decoder=F,this._readableState.encoding=this._readableState.decoder.encoding;for(var Oe=this._readableState.buffer.head,Ae="";Oe!==null;)Ae+=F.write(Oe.data),Oe=Oe.next;return this._readableState.buffer.clear(),Ae!==""&&this._readableState.buffer.push(Ae),this._readableState.length=Ae.length,this};var J=1073741824;function G(O){return O>=J?O=J:(O--,O|=O>>>1,O|=O>>>2,O|=O>>>4,O|=O>>>8,O|=O>>>16,O++),O}function X(O,F){return O<=0||F.length===0&&F.ended?0:F.objectMode?1:O!==O?F.flowing&&F.length?F.buffer.head.data.length:F.length:(O>F.highWaterMark&&(F.highWaterMark=G(O)),O<=F.length?O:F.ended?F.length:(F.needReadable=!0,0))}ae.prototype.read=function(O){p("read",O),O=parseInt(O,10);var F=this._readableState,Oe=O;if(O!==0&&(F.emittedReadable=!1),O===0&&F.needReadable&&((F.highWaterMark!==0?F.length>=F.highWaterMark:F.length>0)||F.ended))return p("read: emitReadable",F.length,F.ended),F.length===0&&F.ended?me(this):fe(this),null;if(O=X(O,F),O===0&&F.ended)return F.length===0&&me(this),null;var Ae=F.needReadable;p("need readable",Ae),(F.length===0||F.length-O<F.highWaterMark)&&(Ae=!0,p("length less than watermark",Ae)),F.ended||F.reading?(Ae=!1,p("reading or ended",Ae)):Ae&&(p("do read"),F.reading=!0,F.sync=!0,F.length===0&&(F.needReadable=!0),this._read(F.highWaterMark),F.sync=!1,F.reading||(O=X(Oe,F)));var nt;return O>0?nt=ee(O,F):nt=null,nt===null?(F.needReadable=F.length<=F.highWaterMark,O=0):(F.length-=O,F.awaitDrain=0),F.length===0&&(F.ended||(F.needReadable=!0),Oe!==O&&F.ended&&me(this)),nt!==null&&this.emit("data",nt),nt};function ce(O,F){if(p("onEofChunk"),!F.ended){if(F.decoder){var Oe=F.decoder.end();Oe&&Oe.length&&(F.buffer.push(Oe),F.length+=F.objectMode?1:Oe.length)}F.ended=!0,F.sync?fe(O):(F.needReadable=!1,F.emittedReadable||(F.emittedReadable=!0,re(O)))}}function fe(O){var F=O._readableState;p("emitReadable",F.needReadable,F.emittedReadable),F.needReadable=!1,F.emittedReadable||(p("emitReadable",F.flowing),F.emittedReadable=!0,Ve.nextTick(re,O))}function re(O){var F=O._readableState;p("emitReadable_",F.destroyed,F.length,F.ended),!F.destroyed&&(F.length||F.ended)&&(O.emit("readable"),F.emittedReadable=!1),F.needReadable=!F.flowing&&!F.ended&&F.length<=F.highWaterMark,j(O)}function ge(O,F){F.readingMore||(F.readingMore=!0,Ve.nextTick(ue,O,F))}function ue(O,F){for(;!F.reading&&!F.ended&&(F.length<F.highWaterMark||F.flowing&&F.length===0);){var Oe=F.length;if(p("maybeReadMore read 0"),O.read(0),Oe===F.length)break}F.readingMore=!1}ae.prototype._read=function(O){C(this,new W("_read()"))},ae.prototype.pipe=function(O,F){var Oe=this,Ae=this._readableState;switch(Ae.pipesCount){case 0:Ae.pipes=O;break;case 1:Ae.pipes=[Ae.pipes,O];break;default:Ae.pipes.push(O);break}Ae.pipesCount+=1,p("pipe count=%d opts=%j",Ae.pipesCount,F);var nt=(!F||F.end!==!1)&&O!==Ve.stdout&&O!==Ve.stderr,P=nt?w:Ge;Ae.endEmitted?Ve.nextTick(P):Oe.once("end",P),O.on("unpipe",v);function v(ze,Xe){p("onunpipe"),ze===Oe&&Xe&&Xe.hasUnpiped===!1&&(Xe.hasUnpiped=!0,Me())}function w(){p("onend"),O.end()}var M=ie(Oe);O.on("drain",M);var Te=!1;function Me(){p("cleanup"),O.removeListener("close",De),O.removeListener("finish",Fe),O.removeListener("drain",M),O.removeListener("error",be),O.removeListener("unpipe",v),Oe.removeListener("end",w),Oe.removeListener("end",Ge),Oe.removeListener("data",se),Te=!0,Ae.awaitDrain&&(!O._writableState||O._writableState.needDrain)&&M()}Oe.on("data",se);function se(ze){p("ondata");var Xe=O.write(ze);p("dest.write",Xe),Xe===!1&&((Ae.pipesCount===1&&Ae.pipes===O||Ae.pipesCount>1&&Ne(Ae.pipes,O)!==-1)&&!Te&&(p("false write response, pause",Ae.awaitDrain),Ae.awaitDrain++),Oe.pause())}function be(ze){p("onerror",ze),Ge(),O.removeListener("error",be),n(O,"error")===0&&C(O,ze)}V(O,"error",be);function De(){O.removeListener("finish",Fe),Ge()}O.once("close",De);function Fe(){p("onfinish"),O.removeListener("close",De),Ge()}O.once("finish",Fe);function Ge(){p("unpipe"),Oe.unpipe(O)}return O.emit("pipe",Oe),Ae.flowing||(p("pipe resume"),Oe.resume()),O};function ie(O){return function(){var Oe=O._readableState;p("pipeOnDrain",Oe.awaitDrain),Oe.awaitDrain&&Oe.awaitDrain--,Oe.awaitDrain===0&&n(O,"data")&&(Oe.flowing=!0,j(O))}}ae.prototype.unpipe=function(O){var F=this._readableState,Oe={hasUnpiped:!1};if(F.pipesCount===0)return this;if(F.pipesCount===1)return O&&O!==F.pipes?this:(O||(O=F.pipes),F.pipes=null,F.pipesCount=0,F.flowing=!1,O&&O.emit("unpipe",this,Oe),this);if(!O){var Ae=F.pipes,nt=F.pipesCount;F.pipes=null,F.pipesCount=0,F.flowing=!1;for(var P=0;P<nt;P++)Ae[P].emit("unpipe",this,{hasUnpiped:!1});return this}var v=Ne(F.pipes,O);return v===-1?this:(F.pipes.splice(v,1),F.pipesCount-=1,F.pipesCount===1&&(F.pipes=F.pipes[0]),O.emit("unpipe",this,Oe),this)},ae.prototype.on=function(O,F){var Oe=i.prototype.on.call(this,O,F),Ae=this._readableState;return O==="data"?(Ae.readableListening=this.listenerCount("readable")>0,Ae.flowing!==!1&&this.resume()):O==="readable"&&!Ae.endEmitted&&!Ae.readableListening&&(Ae.readableListening=Ae.needReadable=!0,Ae.flowing=!1,Ae.emittedReadable=!1,p("on readable",Ae.length,Ae.reading),Ae.length?fe(this):Ae.reading||Ve.nextTick(Y,this)),Oe},ae.prototype.addListener=ae.prototype.on,ae.prototype.removeListener=function(O,F){var Oe=i.prototype.removeListener.call(this,O,F);return O==="readable"&&Ve.nextTick(A,this),Oe},ae.prototype.removeAllListeners=function(O){var F=i.prototype.removeAllListeners.apply(this,arguments);return(O==="readable"||O===void 0)&&Ve.nextTick(A,this),F};function A(O){var F=O._readableState;F.readableListening=O.listenerCount("readable")>0,F.resumeScheduled&&!F.paused?F.flowing=!0:O.listenerCount("data")>0&&O.resume()}function Y(O){p("readable nexttick read 0"),O.read(0)}ae.prototype.resume=function(){var O=this._readableState;return O.flowing||(p("resume"),O.flowing=!O.readableListening,K(this,O)),O.paused=!1,this};function K(O,F){F.resumeScheduled||(F.resumeScheduled=!0,Ve.nextTick(pe,O,F))}function pe(O,F){p("resume",F.reading),F.reading||O.read(0),F.resumeScheduled=!1,O.emit("resume"),j(O),F.flowing&&!F.reading&&O.read(0)}ae.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function j(O){var F=O._readableState;for(p("flow",F.flowing);F.flowing&&O.read()!==null;);}ae.prototype.wrap=function(O){var F=this,Oe=this._readableState,Ae=!1;O.on("end",function(){if(p("wrapped end"),Oe.decoder&&!Oe.ended){var v=Oe.decoder.end();v&&v.length&&F.push(v)}F.push(null)}),O.on("data",function(v){if(p("wrapped data"),Oe.decoder&&(v=Oe.decoder.write(v)),!(Oe.objectMode&&v==null)&&!(!Oe.objectMode&&(!v||!v.length))){var w=F.push(v);w||(Ae=!0,O.pause())}});for(var nt in O)this[nt]===void 0&&typeof O[nt]=="function"&&(this[nt]=function(w){return function(){return O[w].apply(O,arguments)}}(nt));for(var P=0;P<U.length;P++)O.on(U[P],this.emit.bind(this,U[P]));return this._read=function(v){p("wrapped _read",v),Ae&&(Ae=!1,O.resume())},this},typeof Symbol=="function"&&(ae.prototype[Symbol.asyncIterator]=function(){return I===void 0&&(I=zH()),I(this)}),Object.defineProperty(ae.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ae.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ae.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(F){this._readableState&&(this._readableState.flowing=F)}}),ae._fromList=ee,Object.defineProperty(ae.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ee(O,F){if(F.length===0)return null;var Oe;return F.objectMode?Oe=F.buffer.shift():!O||O>=F.length?(F.decoder?Oe=F.buffer.join(""):F.buffer.length===1?Oe=F.buffer.first():Oe=F.buffer.concat(F.length),F.buffer.clear()):Oe=F.buffer.consume(O,F.decoder),Oe}function me(O){var F=O._readableState;p("endReadable",F.endEmitted),F.endEmitted||(F.ended=!0,Ve.nextTick(Se,F,O))}function Se(O,F){if(p("endReadableNT",O.endEmitted,O.length),!O.endEmitted&&O.length===0&&(O.endEmitted=!0,F.readable=!1,F.emit("end"),O.autoDestroy)){var Oe=F._writableState;(!Oe||Oe.autoDestroy&&Oe.finished)&&F.destroy()}}typeof Symbol=="function"&&(ae.from=function(O,F){return D===void 0&&(D=XH()),D(ae,O,F)});function Ne(O,F){for(var Oe=0,Ae=O.length;Oe<Ae;Oe++)if(O[Oe]===F)return Oe;return-1}return aE}var uE,gR;function Ks(){if(gR)return uE;gR=1;var r=Object.keys||function(T){var E=[];for(var y in T)E.push(y);return E};uE=h;var n=Qb(),i=up();co(h,n);for(var s=r(i.prototype),a=0;a<s.length;a++){var u=s[a];h.prototype[u]||(h.prototype[u]=i.prototype[u])}function h(T){if(!(this instanceof h))return new h(T);n.call(this,T),i.call(this,T),this.allowHalfOpen=!0,T&&(T.readable===!1&&(this.readable=!1),T.writable===!1&&(this.writable=!1),T.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d(){this._writableState.ended||Ve.nextTick(p,this)}function p(T){T.end()}return Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(E){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=E,this._writableState.destroyed=E)}}),uE}var cE,mR;function up(){if(mR)return cE;mR=1,cE=te;function r(j){var ee=this;this.next=null,this.entry=null,this.finish=function(){pe(ee,j)}}var n;te.WritableState=U;var i={deprecate:yH},s=vN,a=_t.Buffer,u=(typeof ut<"u"?ut:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function h(j){return a.from(j)}function d(j){return a.isBuffer(j)||j instanceof u}var p=bN,T=wN,E=T.getHighWaterMark,y=Qs.codes,S=y.ERR_INVALID_ARG_TYPE,x=y.ERR_METHOD_NOT_IMPLEMENTED,B=y.ERR_MULTIPLE_CALLBACK,H=y.ERR_STREAM_CANNOT_PIPE,W=y.ERR_STREAM_DESTROYED,$=y.ERR_STREAM_NULL_VALUES,m=y.ERR_STREAM_WRITE_AFTER_END,I=y.ERR_UNKNOWN_ENCODING,D=p.errorOrDestroy;co(te,s);function C(){}function U(j,ee,me){n=n||Ks(),j=j||{},typeof me!="boolean"&&(me=ee instanceof n),this.objectMode=!!j.objectMode,me&&(this.objectMode=this.objectMode||!!j.writableObjectMode),this.highWaterMark=E(this,j,"writableHighWaterMark",me),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Se=j.decodeStrings===!1;this.decodeStrings=!Se,this.defaultEncoding=j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ne){ce(ee,Ne)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=j.emitClose!==!1,this.autoDestroy=!!j.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}U.prototype.getBuffer=function(){for(var ee=this.bufferedRequest,me=[];ee;)me.push(ee),ee=ee.next;return me},function(){try{Object.defineProperty(U.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var V;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(V=Function.prototype[Symbol.hasInstance],Object.defineProperty(te,Symbol.hasInstance,{value:function(ee){return V.call(this,ee)?!0:this!==te?!1:ee&&ee._writableState instanceof U}})):V=function(ee){return ee instanceof this};function te(j){n=n||Ks();var ee=this instanceof n;if(!ee&&!V.call(te,this))return new te(j);this._writableState=new U(j,this,ee),this.writable=!0,j&&(typeof j.write=="function"&&(this._write=j.write),typeof j.writev=="function"&&(this._writev=j.writev),typeof j.destroy=="function"&&(this._destroy=j.destroy),typeof j.final=="function"&&(this._final=j.final)),s.call(this)}te.prototype.pipe=function(){D(this,new H)};function ae(j,ee){var me=new m;D(j,me),Ve.nextTick(ee,me)}function de(j,ee,me,Se){var Ne;return me===null?Ne=new $:typeof me!="string"&&!ee.objectMode&&(Ne=new S("chunk",["string","Buffer"],me)),Ne?(D(j,Ne),Ve.nextTick(Se,Ne),!1):!0}te.prototype.write=function(j,ee,me){var Se=this._writableState,Ne=!1,O=!Se.objectMode&&d(j);return O&&!a.isBuffer(j)&&(j=h(j)),typeof ee=="function"&&(me=ee,ee=null),O?ee="buffer":ee||(ee=Se.defaultEncoding),typeof me!="function"&&(me=C),Se.ending?ae(this,me):(O||de(this,Se,j,me))&&(Se.pendingcb++,Ne=q(this,Se,O,j,ee,me)),Ne},te.prototype.cork=function(){this._writableState.corked++},te.prototype.uncork=function(){var j=this._writableState;j.corked&&(j.corked--,!j.writing&&!j.corked&&!j.bufferProcessing&&j.bufferedRequest&&ge(this,j))},te.prototype.setDefaultEncoding=function(ee){if(typeof ee=="string"&&(ee=ee.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ee+"").toLowerCase())>-1))throw new I(ee);return this._writableState.defaultEncoding=ee,this},Object.defineProperty(te.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function we(j,ee,me){return!j.objectMode&&j.decodeStrings!==!1&&typeof ee=="string"&&(ee=a.from(ee,me)),ee}Object.defineProperty(te.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function q(j,ee,me,Se,Ne,O){if(!me){var F=we(ee,Se,Ne);Se!==F&&(me=!0,Ne="buffer",Se=F)}var Oe=ee.objectMode?1:Se.length;ee.length+=Oe;var Ae=ee.length<ee.highWaterMark;if(Ae||(ee.needDrain=!0),ee.writing||ee.corked){var nt=ee.lastBufferedRequest;ee.lastBufferedRequest={chunk:Se,encoding:Ne,isBuf:me,callback:O,next:null},nt?nt.next=ee.lastBufferedRequest:ee.bufferedRequest=ee.lastBufferedRequest,ee.bufferedRequestCount+=1}else J(j,ee,!1,Oe,Se,Ne,O);return Ae}function J(j,ee,me,Se,Ne,O,F){ee.writelen=Se,ee.writecb=F,ee.writing=!0,ee.sync=!0,ee.destroyed?ee.onwrite(new W("write")):me?j._writev(Ne,ee.onwrite):j._write(Ne,O,ee.onwrite),ee.sync=!1}function G(j,ee,me,Se,Ne){--ee.pendingcb,me?(Ve.nextTick(Ne,Se),Ve.nextTick(Y,j,ee),j._writableState.errorEmitted=!0,D(j,Se)):(Ne(Se),j._writableState.errorEmitted=!0,D(j,Se),Y(j,ee))}function X(j){j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0}function ce(j,ee){var me=j._writableState,Se=me.sync,Ne=me.writecb;if(typeof Ne!="function")throw new B;if(X(me),ee)G(j,me,Se,ee,Ne);else{var O=ue(me)||j.destroyed;!O&&!me.corked&&!me.bufferProcessing&&me.bufferedRequest&&ge(j,me),Se?Ve.nextTick(fe,j,me,O,Ne):fe(j,me,O,Ne)}}function fe(j,ee,me,Se){me||re(j,ee),ee.pendingcb--,Se(),Y(j,ee)}function re(j,ee){ee.length===0&&ee.needDrain&&(ee.needDrain=!1,j.emit("drain"))}function ge(j,ee){ee.bufferProcessing=!0;var me=ee.bufferedRequest;if(j._writev&&me&&me.next){var Se=ee.bufferedRequestCount,Ne=new Array(Se),O=ee.corkedRequestsFree;O.entry=me;for(var F=0,Oe=!0;me;)Ne[F]=me,me.isBuf||(Oe=!1),me=me.next,F+=1;Ne.allBuffers=Oe,J(j,ee,!0,ee.length,Ne,"",O.finish),ee.pendingcb++,ee.lastBufferedRequest=null,O.next?(ee.corkedRequestsFree=O.next,O.next=null):ee.corkedRequestsFree=new r(ee),ee.bufferedRequestCount=0}else{for(;me;){var Ae=me.chunk,nt=me.encoding,P=me.callback,v=ee.objectMode?1:Ae.length;if(J(j,ee,!1,v,Ae,nt,P),me=me.next,ee.bufferedRequestCount--,ee.writing)break}me===null&&(ee.lastBufferedRequest=null)}ee.bufferedRequest=me,ee.bufferProcessing=!1}te.prototype._write=function(j,ee,me){me(new x("_write()"))},te.prototype._writev=null,te.prototype.end=function(j,ee,me){var Se=this._writableState;return typeof j=="function"?(me=j,j=null,ee=null):typeof ee=="function"&&(me=ee,ee=null),j!=null&&this.write(j,ee),Se.corked&&(Se.corked=1,this.uncork()),Se.ending||K(this,Se,me),this},Object.defineProperty(te.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ue(j){return j.ending&&j.length===0&&j.bufferedRequest===null&&!j.finished&&!j.writing}function ie(j,ee){j._final(function(me){ee.pendingcb--,me&&D(j,me),ee.prefinished=!0,j.emit("prefinish"),Y(j,ee)})}function A(j,ee){!ee.prefinished&&!ee.finalCalled&&(typeof j._final=="function"&&!ee.destroyed?(ee.pendingcb++,ee.finalCalled=!0,Ve.nextTick(ie,j,ee)):(ee.prefinished=!0,j.emit("prefinish")))}function Y(j,ee){var me=ue(ee);if(me&&(A(j,ee),ee.pendingcb===0&&(ee.finished=!0,j.emit("finish"),ee.autoDestroy))){var Se=j._readableState;(!Se||Se.autoDestroy&&Se.endEmitted)&&j.destroy()}return me}function K(j,ee,me){ee.ending=!0,Y(j,ee),me&&(ee.finished?Ve.nextTick(me):j.once("finish",me)),ee.ended=!0,j.writable=!1}function pe(j,ee,me){var Se=j.entry;for(j.entry=null;Se;){var Ne=Se.callback;ee.pendingcb--,Ne(me),Se=Se.next}ee.corkedRequestsFree.next=j}return Object.defineProperty(te.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(ee){this._writableState&&(this._writableState.destroyed=ee)}}),te.prototype.destroy=p.destroy,te.prototype._undestroy=p.undestroy,te.prototype._destroy=function(j,ee){ee(j)},cE}var hE={exports:{}},$R;function YH(){if($R)return hE.exports;$R=1;var r=Nr,n=nr,i=n.LEVEL,s=el(),a=hE.exports=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(s.call(this,h),!h.transport||typeof h.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=h.transport,this.level=this.level||h.transport.level,this.handleExceptions=this.handleExceptions||h.transport.handleExceptions,this._deprecated();function d(p){this.emit("error",p,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=d.bind(this),this.transport.on("error",this.transport.__winstonError))};return r.inherits(a,s),a.prototype._write=function(h,d,p){if(this.silent||h.exception===!0&&!this.handleExceptions)return p(null);(!this.level||this.levels[this.level]>=this.levels[h[i]])&&this.transport.log(h[i],h.message,h,this._nop),p(null)},a.prototype._writev=function(h,d){for(var p=0;p<h.length;p++)this._accept(h[p])&&(this.transport.log(h[p].chunk[i],h[p].chunk.message,h[p].chunk,this._nop),h[p].callback());return d(null)},a.prototype._deprecated=function(){console.error([this.transport.name+" is a legacy winston transport. Consider upgrading: ","- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))},a.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)},hE.exports}var _R;function el(){if(_R)return Id.exports;_R=1;var r=Nr,n=up(),i=nr,s=i.LEVEL,a=Id.exports=function(){var h=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.call(this,{objectMode:!0,highWaterMark:d.highWaterMark}),this.format=d.format,this.level=d.level,this.handleExceptions=d.handleExceptions,this.handleRejections=d.handleRejections,this.silent=d.silent,d.log&&(this.log=d.log),d.logv&&(this.logv=d.logv),d.close&&(this.close=d.close),this.once("pipe",function(p){h.levels=p.levels,h.parent=p}),this.once("unpipe",function(p){p===h.parent&&(h.parent=null,h.close&&h.close())})};return r.inherits(a,n),a.prototype._write=function(h,d,p){if(this.silent||h.exception===!0&&!this.handleExceptions)return p(null);var T=this.level||this.parent&&this.parent.level;if(!T||this.levels[T]>=this.levels[h[s]]){if(h&&!this.format)return this.log(h,p);var E=void 0,y=void 0;try{y=this.format.transform(Object.assign({},h),this.format.options)}catch(S){E=S}if(E||!y){if(p(),E)throw E;return}return this.log(y,p)}return this._writableState.sync=!1,p(null)},a.prototype._writev=function(h,d){if(this.logv){var p=h.filter(this._accept,this);return p.length?this.logv(p,d):d(null)}for(var T=0;T<h.length;T++)if(this._accept(h[T])){if(h[T].chunk&&!this.format){this.log(h[T].chunk,h[T].callback);continue}var E=void 0,y=void 0;try{y=this.format.transform(Object.assign({},h[T].chunk),this.format.options)}catch(S){E=S}if(E||!y){if(h[T].callback(),E)throw d(null),E}else this.log(y,h[T].callback)}return d(null)},a.prototype._accept=function(h){var d=h.chunk;if(this.silent)return!1;var p=this.level||this.parent&&this.parent.level;return!!((d.exception===!0||!p||this.levels[p]>=this.levels[d[s]])&&(this.handleExceptions||d.exception!==!0))},a.prototype._nop=function(){},Id.exports.LegacyTransportStream=YH(),Id.exports}var dE,ER;function KH(){if(ER)return dE;ER=1;function r(m){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},r(m)}function n(m,I){if(!(m instanceof I))throw new TypeError("Cannot call a class as a function")}function i(m,I){for(var D=0;D<I.length;D++){var C=I[D];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(m,a(C.key),C)}}function s(m,I,D){return I&&i(m.prototype,I),D&&i(m,D),Object.defineProperty(m,"prototype",{writable:!1}),m}function a(m){var I=u(m,"string");return r(I)==="symbol"?I:String(I)}function u(m,I){if(r(m)!=="object"||m===null)return m;var D=m[Symbol.toPrimitive];if(D!==void 0){var C=D.call(m,I||"default");if(r(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(m)}function h(m,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(I&&I.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),I&&d(m,I)}function d(m,I){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,U){return C.__proto__=U,C},d(m,I)}function p(m){var I=y();return function(){var C=S(m),U;if(I){var V=S(this).constructor;U=Reflect.construct(C,arguments,V)}else U=C.apply(this,arguments);return T(this,U)}}function T(m,I){if(I&&(r(I)==="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(m)}function E(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(m){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},S(m)}var x=qt,B=nr,H=B.LEVEL,W=B.MESSAGE,$=el();return dE=function(m){h(D,m);var I=p(D);function D(){var C,U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n(this,D),C=I.call(this,U),C.name=U.name||"console",C.stderrLevels=C._stringArrayToSet(U.stderrLevels),C.consoleWarnLevels=C._stringArrayToSet(U.consoleWarnLevels),C.eol=typeof U.eol=="string"?U.eol:x.EOL,C.setMaxListeners(30),C}return s(D,[{key:"log",value:function(U,V){var te=this;if(setImmediate(function(){return te.emit("logged",U)}),this.stderrLevels[U[H]]){console._stderr?console._stderr.write("".concat(U[W]).concat(this.eol)):console.error(U[W]),V&&V();return}else if(this.consoleWarnLevels[U[H]]){console._stderr?console._stderr.write("".concat(U[W]).concat(this.eol)):console.warn(U[W]),V&&V();return}console._stdout?console._stdout.write("".concat(U[W]).concat(this.eol)):console.log(U[W]),V&&V()}},{key:"_stringArrayToSet",value:function(U,V){if(!U)return{};if(V=V||"Cannot make set from type other than Array of string elements",!Array.isArray(U))throw new Error(V);return U.reduce(function(te,ae){if(typeof ae!="string")throw new Error(V);return te[ae]=!0,te},{})}}]),D}($),dE}const qH={},ZH=Object.freeze(Object.defineProperty({__proto__:null,default:qH},Symbol.toStringTag,{value:"Module"})),IN=Pv(ZH);function Ei(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function TR(r,n){for(var i="",s=0,a=-1,u=0,h,d=0;d<=r.length;++d){if(d<r.length)h=r.charCodeAt(d);else{if(h===47)break;h=47}if(h===47){if(!(a===d-1||u===1))if(a!==d-1&&u===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){var p=i.lastIndexOf("/");if(p!==i.length-1){p===-1?(i="",s=0):(i=i.slice(0,p),s=i.length-1-i.lastIndexOf("/")),a=d,u=0;continue}}else if(i.length===2||i.length===1){i="",s=0,a=d,u=0;continue}}n&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+="/"+r.slice(a+1,d):i=r.slice(a+1,d),s=d-a-1;a=d,u=0}else h===46&&u!==-1?++u:u=-1}return i}function JH(r,n){var i=n.dir||n.root,s=n.base||(n.name||"")+(n.ext||"");return i?i===n.root?i+s:i+r+s:s}var va={resolve:function(){for(var n="",i=!1,s,a=arguments.length-1;a>=-1&&!i;a--){var u;a>=0?u=arguments[a]:(s===void 0&&(s=Ve.cwd()),u=s),Ei(u),u.length!==0&&(n=u+"/"+n,i=u.charCodeAt(0)===47)}return n=TR(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(Ei(n),n.length===0)return".";var i=n.charCodeAt(0)===47,s=n.charCodeAt(n.length-1)===47;return n=TR(n,!i),n.length===0&&!i&&(n="."),n.length>0&&s&&(n+="/"),i?"/"+n:n},isAbsolute:function(n){return Ei(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,i=0;i<arguments.length;++i){var s=arguments[i];Ei(s),s.length>0&&(n===void 0?n=s:n+="/"+s)}return n===void 0?".":va.normalize(n)},relative:function(n,i){if(Ei(n),Ei(i),n===i||(n=va.resolve(n),i=va.resolve(i),n===i))return"";for(var s=1;s<n.length&&n.charCodeAt(s)===47;++s);for(var a=n.length,u=a-s,h=1;h<i.length&&i.charCodeAt(h)===47;++h);for(var d=i.length,p=d-h,T=u<p?u:p,E=-1,y=0;y<=T;++y){if(y===T){if(p>T){if(i.charCodeAt(h+y)===47)return i.slice(h+y+1);if(y===0)return i.slice(h+y)}else u>T&&(n.charCodeAt(s+y)===47?E=y:y===0&&(E=0));break}var S=n.charCodeAt(s+y),x=i.charCodeAt(h+y);if(S!==x)break;S===47&&(E=y)}var B="";for(y=s+E+1;y<=a;++y)(y===a||n.charCodeAt(y)===47)&&(B.length===0?B+="..":B+="/..");return B.length>0?B+i.slice(h+E):(h+=E,i.charCodeAt(h)===47&&++h,i.slice(h))},_makeLong:function(n){return n},dirname:function(n){if(Ei(n),n.length===0)return".";for(var i=n.charCodeAt(0),s=i===47,a=-1,u=!0,h=n.length-1;h>=1;--h)if(i=n.charCodeAt(h),i===47){if(!u){a=h;break}}else u=!1;return a===-1?s?"/":".":s&&a===1?"//":n.slice(0,a)},basename:function(n,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');Ei(n);var s=0,a=-1,u=!0,h;if(i!==void 0&&i.length>0&&i.length<=n.length){if(i.length===n.length&&i===n)return"";var d=i.length-1,p=-1;for(h=n.length-1;h>=0;--h){var T=n.charCodeAt(h);if(T===47){if(!u){s=h+1;break}}else p===-1&&(u=!1,p=h+1),d>=0&&(T===i.charCodeAt(d)?--d===-1&&(a=h):(d=-1,a=p))}return s===a?a=p:a===-1&&(a=n.length),n.slice(s,a)}else{for(h=n.length-1;h>=0;--h)if(n.charCodeAt(h)===47){if(!u){s=h+1;break}}else a===-1&&(u=!1,a=h+1);return a===-1?"":n.slice(s,a)}},extname:function(n){Ei(n);for(var i=-1,s=0,a=-1,u=!0,h=0,d=n.length-1;d>=0;--d){var p=n.charCodeAt(d);if(p===47){if(!u){s=d+1;break}continue}a===-1&&(u=!1,a=d+1),p===46?i===-1?i=d:h!==1&&(h=1):i!==-1&&(h=-1)}return i===-1||a===-1||h===0||h===1&&i===a-1&&i===s+1?"":n.slice(i,a)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return JH("/",n)},parse:function(n){Ei(n);var i={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return i;var s=n.charCodeAt(0),a=s===47,u;a?(i.root="/",u=1):u=0;for(var h=-1,d=0,p=-1,T=!0,E=n.length-1,y=0;E>=u;--E){if(s=n.charCodeAt(E),s===47){if(!T){d=E+1;break}continue}p===-1&&(T=!1,p=E+1),s===46?h===-1?h=E:y!==1&&(y=1):h!==-1&&(y=-1)}return h===-1||p===-1||y===0||y===1&&h===p-1&&h===d+1?p!==-1&&(d===0&&a?i.base=i.name=n.slice(1,p):i.base=i.name=n.slice(d,p)):(d===0&&a?(i.name=n.slice(1,h),i.base=n.slice(1,p)):(i.name=n.slice(d,h),i.base=n.slice(d,p)),i.ext=n.slice(h,p)),d>0?i.dir=n.slice(0,d-1):a&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};va.posix=va;var ON=va;const vR=qs(ON);var Rd={exports:{}},kd={exports:{}},dv={exports:{}};(function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;function i(s){return s&&typeof s.length=="number"&&s.length>=0&&s.length%1===0}r.exports=n.default})(dv,dv.exports);var ey=dv.exports,Ti={},Cd={exports:{}},fv={exports:{}};(function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(i){return function(...s){var a=s.pop();return i.call(this,s,a)}},r.exports=n.default})(fv,fv.exports);var QH=fv.exports,rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.fallback=RN;rs.wrap=kN;var e2=rs.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,t2=rs.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,r2=rs.hasNextTick=typeof Ve=="object"&&typeof Ve.nextTick=="function";function RN(r){setTimeout(r,0)}function kN(r){return(n,...i)=>r(()=>n(...i))}var Yu;e2?Yu=queueMicrotask:t2?Yu=setImmediate:r2?Yu=Ve.nextTick:Yu=RN;rs.default=kN(Yu);var bR;function n2(){return bR||(bR=1,function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=p;var i=QH,s=d(i),a=rs,u=d(a),h=Ua();function d(y){return y&&y.__esModule?y:{default:y}}function p(y){return(0,h.isAsync)(y)?function(...S){const x=S.pop(),B=y.apply(this,S);return T(B,x)}:(0,s.default)(function(S,x){var B;try{B=y.apply(this,S)}catch(H){return x(H)}if(B&&typeof B.then=="function")return T(B,x);x(null,B)})}function T(y,S){return y.then(x=>{E(S,null,x)},x=>{E(S,x&&x.message?x:new Error(x))})}function E(y,S,x){try{y(S,x)}catch(B){(0,u.default)(H=>{throw H},B)}}r.exports=n.default}(Cd,Cd.exports)),Cd.exports}var yR;function Ua(){if(yR)return Ti;yR=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.isAsyncIterable=Ti.isAsyncGenerator=Ti.isAsync=void 0;var r=n2(),n=i(r);function i(d){return d&&d.__esModule?d:{default:d}}function s(d){return d[Symbol.toStringTag]==="AsyncFunction"}function a(d){return d[Symbol.toStringTag]==="AsyncGenerator"}function u(d){return typeof d[Symbol.asyncIterator]=="function"}function h(d){if(typeof d!="function")throw new Error("expected a function");return s(d)?(0,n.default)(d):d}return Ti.default=h,Ti.isAsync=s,Ti.isAsyncGenerator=a,Ti.isAsyncIterable=u,Ti}var pv={exports:{}};(function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;function i(s,a=s.length){if(!a)throw new Error("arity is undefined");function u(...h){return typeof h[a-1]=="function"?s.apply(this,h):new Promise((d,p)=>{h[a-1]=(T,...E)=>{if(T)return p(T);d(E.length>1?E:E[0])},s.apply(this,h)})}return u}r.exports=n.default})(pv,pv.exports);var Dc=pv.exports,wR;function i2(){return wR||(wR=1,function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var i=ey,s=p(i),a=Ua(),u=p(a),h=Dc,d=p(h);function p(T){return T&&T.__esModule?T:{default:T}}n.default=(0,d.default)((T,E,y)=>{var S=(0,s.default)(E)?[]:{};T(E,(x,B,H)=>{(0,u.default)(x)((W,...$)=>{$.length<2&&([$]=$),S[B]=$,H(W)})},x=>y(x,S))},3),r.exports=n.default}(kd,kd.exports)),kd.exports}var Ad={exports:{}},gv={exports:{}},mv={exports:{}},$v={exports:{}};(function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;function i(s){function a(...u){if(s!==null){var h=s;s=null,h.apply(this,u)}}return Object.assign(a,s),a}r.exports=n.default})($v,$v.exports);var CN=$v.exports,_v={exports:{}},Ev={exports:{}};(function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(i){return i[Symbol.iterator]&&i[Symbol.iterator]()},r.exports=n.default})(Ev,Ev.exports);var o2=Ev.exports;(function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=E;var i=ey,s=h(i),a=o2,u=h(a);function h(y){return y&&y.__esModule?y:{default:y}}function d(y){var S=-1,x=y.length;return function(){return++S<x?{value:y[S],key:S}:null}}function p(y){var S=-1;return function(){var B=y.next();return B.done?null:(S++,{value:B.value,key:S})}}function T(y){var S=y?Object.keys(y):[],x=-1,B=S.length;return function H(){var W=S[++x];return W==="__proto__"?H():x<B?{value:y[W],key:W}:null}}function E(y){if((0,s.default)(y))return d(y);var S=(0,u.default)(y);return S?p(S):T(y)}r.exports=n.default})(_v,_v.exports);var s2=_v.exports,Tv={exports:{}};(function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;function i(s){return function(...a){if(s===null)throw new Error("Callback was already called.");var u=s;s=null,u.apply(this,a)}}r.exports=n.default})(Tv,Tv.exports);var AN=Tv.exports,vv={exports:{}},bv={exports:{}};(function(r,n){Object.defineProperty(n,"__esModule",{value:!0});const i={};n.default=i,r.exports=n.default})(bv,bv.exports);var ty=bv.exports;(function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var i=ty,s=a(i);function a(h){return h&&h.__esModule?h:{default:h}}function u(h,d,p,T){let E=!1,y=!1,S=!1,x=0,B=0;function H(){x>=d||S||E||(S=!0,h.next().then(({value:m,done:I})=>{if(!(y||E)){if(S=!1,I){E=!0,x<=0&&T(null);return}x++,p(m,B,W),B++,H()}}).catch($))}function W(m,I){if(x-=1,!y){if(m)return $(m);if(m===!1){E=!0,y=!0;return}if(I===s.default||E&&x<=0)return E=!0,T(null);H()}}function $(m){y||(S=!1,E=!0,T(m))}H()}r.exports=n.default})(vv,vv.exports);var l2=vv.exports;(function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var i=CN,s=x(i),a=s2,u=x(a),h=AN,d=x(h),p=Ua(),T=l2,E=x(T),y=ty,S=x(y);function x(B){return B&&B.__esModule?B:{default:B}}n.default=B=>(H,W,$)=>{if($=(0,s.default)($),B<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!H)return $(null);if((0,p.isAsyncGenerator)(H))return(0,E.default)(H,B,W,$);if((0,p.isAsyncIterable)(H))return(0,E.default)(H[Symbol.asyncIterator](),B,W,$);var m=(0,u.default)(H),I=!1,D=!1,C=0,U=!1;function V(ae,de){if(!D)if(C-=1,ae)I=!0,$(ae);else if(ae===!1)I=!0,D=!0;else{if(de===S.default||I&&C<=0)return I=!0,$(null);U||te()}}function te(){for(U=!0;C<B&&!I;){var ae=m();if(ae===null){I=!0,C<=0&&$(null);return}C+=1,W(ae.value,ae.key,(0,d.default)(V))}U=!1}te()},r.exports=n.default})(mv,mv.exports);var a2=mv.exports;(function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var i=a2,s=p(i),a=Ua(),u=p(a),h=Dc,d=p(h);function p(E){return E&&E.__esModule?E:{default:E}}function T(E,y,S,x){return(0,s.default)(y)(E,(0,u.default)(S),x)}n.default=(0,d.default)(T,4),r.exports=n.default})(gv,gv.exports);var LN=gv.exports,SR;function u2(){return SR||(SR=1,function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var i=LN,s=h(i),a=Dc,u=h(a);function h(p){return p&&p.__esModule?p:{default:p}}function d(p,T,E){return(0,s.default)(p,1,T,E)}n.default=(0,u.default)(d,3),r.exports=n.default}(Ad,Ad.exports)),Ad.exports}var IR;function c2(){return IR||(IR=1,function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=d;var i=i2(),s=h(i),a=u2(),u=h(a);function h(p){return p&&p.__esModule?p:{default:p}}function d(p,T){return(0,s.default)(u.default,p,T)}r.exports=n.default}(Rd,Rd.exports)),Rd.exports}var fE={},ry=lo,cp=Qs.codes,h2=cp.ERR_METHOD_NOT_IMPLEMENTED,d2=cp.ERR_MULTIPLE_CALLBACK,f2=cp.ERR_TRANSFORM_ALREADY_TRANSFORMING,p2=cp.ERR_TRANSFORM_WITH_LENGTH_0,hp=Ks();co(lo,hp);function g2(r,n){var i=this._transformState;i.transforming=!1;var s=i.writecb;if(s===null)return this.emit("error",new d2);i.writechunk=null,i.writecb=null,n!=null&&this.push(n),s(r);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function lo(r){if(!(this instanceof lo))return new lo(r);hp.call(this,r),this._transformState={afterTransform:g2.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",m2)}function m2(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(n,i){OR(r,n,i)}):OR(this,null,null)}lo.prototype.push=function(r,n){return this._transformState.needTransform=!1,hp.prototype.push.call(this,r,n)};lo.prototype._transform=function(r,n,i){i(new h2("_transform()"))};lo.prototype._write=function(r,n,i){var s=this._transformState;if(s.writecb=i,s.writechunk=r,s.writeencoding=n,!s.transforming){var a=this._readableState;(s.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}};lo.prototype._read=function(r){var n=this._transformState;n.writechunk!==null&&!n.transforming?(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform)):n.needTransform=!0};lo.prototype._destroy=function(r,n){hp.prototype._destroy.call(this,r,function(i){n(i)})};function OR(r,n,i){if(n)return r.emit("error",n);if(i!=null&&r.push(i),r._writableState.length)throw new p2;if(r._transformState.transforming)throw new f2;return r.push(null)}var NN=Sc,xN=ry;co(Sc,xN);function Sc(r){if(!(this instanceof Sc))return new Sc(r);xN.call(this,r)}Sc.prototype._transform=function(r,n,i){i(null,r)};var pE;function $2(r){var n=!1;return function(){n||(n=!0,r.apply(void 0,arguments))}}var MN=Qs.codes,_2=MN.ERR_MISSING_ARGS,E2=MN.ERR_STREAM_DESTROYED;function RR(r){if(r)throw r}function T2(r){return r.setHeader&&typeof r.abort=="function"}function v2(r,n,i,s){s=$2(s);var a=!1;r.on("close",function(){a=!0}),pE===void 0&&(pE=ap),pE(r,{readable:n,writable:i},function(h){if(h)return s(h);a=!0,s()});var u=!1;return function(h){if(!a&&!u){if(u=!0,T2(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();s(h||new E2("pipe"))}}}function kR(r){r()}function b2(r,n){return r.pipe(n)}function y2(r){return!r.length||typeof r[r.length-1]!="function"?RR:r.pop()}function w2(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=y2(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new _2("streams");var a,u=n.map(function(h,d){var p=d<n.length-1,T=d>0;return v2(h,p,T,function(E){a||(a=E),E&&u.forEach(kR),!p&&(u.forEach(kR),s(a))})});return n.reduce(b2)}var DN=w2,gE,CR;function S2(){if(CR)return gE;CR=1,gE=i;var r=Jb.EventEmitter,n=co;n(i,r),i.Readable=Qb(),i.Writable=up(),i.Duplex=Ks(),i.Transform=ry,i.PassThrough=NN,i.finished=ap,i.pipeline=DN,i.Stream=i;function i(){r.call(this)}return i.prototype.pipe=function(s,a){var u=this;function h(x){s.writable&&s.write(x)===!1&&u.pause&&u.pause()}u.on("data",h);function d(){u.readable&&u.resume&&u.resume()}s.on("drain",d),!s._isStdio&&(!a||a.end!==!1)&&(u.on("end",T),u.on("close",E));var p=!1;function T(){p||(p=!0,s.end())}function E(){p||(p=!0,typeof s.destroy=="function"&&s.destroy())}function y(x){if(S(),r.listenerCount(this,"error")===0)throw x}u.on("error",y),s.on("error",y);function S(){u.removeListener("data",h),s.removeListener("drain",d),u.removeListener("end",T),u.removeListener("close",E),u.removeListener("error",y),s.removeListener("error",y),u.removeListener("end",S),u.removeListener("close",S),s.removeListener("close",S)}return u.on("end",S),u.on("close",S),s.on("close",S),s.emit("pipe",u),s},gE}var mE={},$E={exports:{}},_E={},AR;function PN(){if(AR)return _E;AR=1;function r(H){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function($){return typeof $}:r=function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},r(H)}function n(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")}function i(H,W){return W&&(r(W)==="object"||typeof W=="function")?W:s(H)}function s(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function a(H){return a=Object.setPrototypeOf?Object.getPrototypeOf:function($){return $.__proto__||Object.getPrototypeOf($)},a(H)}function u(H,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(W&&W.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),W&&h(H,W)}function h(H,W){return h=Object.setPrototypeOf||function(m,I){return m.__proto__=I,m},h(H,W)}var d={},p,T;function E(H,W,$){$||($=Error);function m(D,C,U){return typeof W=="string"?W:W(D,C,U)}var I=function(D){u(C,D);function C(U,V,te){var ae;return n(this,C),ae=i(this,a(C).call(this,m(U,V,te))),ae.code=H,ae}return C}($);d[H]=I}function y(H,W){if(Array.isArray(H)){var $=H.length;return H=H.map(function(m){return String(m)}),$>2?"one of ".concat(W," ").concat(H.slice(0,$-1).join(", "),", or ")+H[$-1]:$===2?"one of ".concat(W," ").concat(H[0]," or ").concat(H[1]):"of ".concat(W," ").concat(H[0])}else return"of ".concat(W," ").concat(String(H))}function S(H,W,$){return H.substr(!$||$<0?0:+$,W.length)===W}function x(H,W,$){return($===void 0||$>H.length)&&($=H.length),H.substring($-W.length,$)===W}function B(H,W,$){return typeof $!="number"&&($=0),$+W.length>H.length?!1:H.indexOf(W,$)!==-1}return E("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),E("ERR_INVALID_ARG_TYPE",function(H,W,$){p===void 0&&(p=Nf()),p(typeof H=="string","'name' must be a string");var m;typeof W=="string"&&S(W,"not ")?(m="must not be",W=W.replace(/^not /,"")):m="must be";var I;if(x(H," argument"))I="The ".concat(H," ").concat(m," ").concat(y(W,"type"));else{var D=B(H,".")?"property":"argument";I='The "'.concat(H,'" ').concat(D," ").concat(m," ").concat(y(W,"type"))}return I+=". Received type ".concat(r($)),I},TypeError),E("ERR_INVALID_ARG_VALUE",function(H,W){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";T===void 0&&(T=Nr);var m=T.inspect(W);return m.length>128&&(m="".concat(m.slice(0,128),"...")),"The argument '".concat(H,"' ").concat($,". Received ").concat(m)},TypeError),E("ERR_INVALID_RETURN_VALUE",function(H,W,$){var m;return $&&$.constructor&&$.constructor.name?m="instance of ".concat($.constructor.name):m="type ".concat(r($)),"Expected ".concat(H,' to be returned from the "').concat(W,'"')+" function but got ".concat(m,".")},TypeError),E("ERR_MISSING_ARGS",function(){for(var H=arguments.length,W=new Array(H),$=0;$<H;$++)W[$]=arguments[$];p===void 0&&(p=Nf()),p(W.length>0,"At least one arg needs to be specified");var m="The ",I=W.length;switch(W=W.map(function(D){return'"'.concat(D,'"')}),I){case 1:m+="".concat(W[0]," argument");break;case 2:m+="".concat(W[0]," and ").concat(W[1]," arguments");break;default:m+=W.slice(0,I-1).join(", "),m+=", and ".concat(W[I-1]," arguments");break}return"".concat(m," must be specified")},TypeError),_E.codes=d,_E}var EE,LR;function I2(){if(LR)return EE;LR=1;function r(X){for(var ce=1;ce<arguments.length;ce++){var fe=arguments[ce]!=null?arguments[ce]:{},re=Object.keys(fe);typeof Object.getOwnPropertySymbols=="function"&&(re=re.concat(Object.getOwnPropertySymbols(fe).filter(function(ge){return Object.getOwnPropertyDescriptor(fe,ge).enumerable}))),re.forEach(function(ge){n(X,ge,fe[ge])})}return X}function n(X,ce,fe){return ce in X?Object.defineProperty(X,ce,{value:fe,enumerable:!0,configurable:!0,writable:!0}):X[ce]=fe,X}function i(X,ce){if(!(X instanceof ce))throw new TypeError("Cannot call a class as a function")}function s(X,ce){for(var fe=0;fe<ce.length;fe++){var re=ce[fe];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(X,re.key,re)}}function a(X,ce,fe){return ce&&s(X.prototype,ce),fe&&s(X,fe),X}function u(X,ce){return ce&&(B(ce)==="object"||typeof ce=="function")?ce:h(X)}function h(X){if(X===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function d(X,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(ce&&ce.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),ce&&S(X,ce)}function p(X){var ce=typeof Map=="function"?new Map:void 0;return p=function(re){if(re===null||!y(re))return re;if(typeof re!="function")throw new TypeError("Super expression must either be null or a function");if(typeof ce<"u"){if(ce.has(re))return ce.get(re);ce.set(re,ge)}function ge(){return E(re,arguments,x(this).constructor)}return ge.prototype=Object.create(re.prototype,{constructor:{value:ge,enumerable:!1,writable:!0,configurable:!0}}),S(ge,re)},p(X)}function T(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function E(X,ce,fe){return T()?E=Reflect.construct:E=function(ge,ue,ie){var A=[null];A.push.apply(A,ue);var Y=Function.bind.apply(ge,A),K=new Y;return ie&&S(K,ie.prototype),K},E.apply(null,arguments)}function y(X){return Function.toString.call(X).indexOf("[native code]")!==-1}function S(X,ce){return S=Object.setPrototypeOf||function(re,ge){return re.__proto__=ge,re},S(X,ce)}function x(X){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},x(X)}function B(X){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B=function(fe){return typeof fe}:B=function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe},B(X)}var H=Nr,W=H.inspect,$=PN(),m=$.codes.ERR_INVALID_ARG_TYPE;function I(X,ce,fe){return(fe===void 0||fe>X.length)&&(fe=X.length),X.substring(fe-ce.length,fe)===ce}function D(X,ce){if(ce=Math.floor(ce),X.length==0||ce==0)return"";var fe=X.length*ce;for(ce=Math.floor(Math.log(ce)/Math.log(2));ce;)X+=X,ce--;return X+=X.substring(0,fe-X.length),X}var C="",U="",V="",te="",ae={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},de=10;function we(X){var ce=Object.keys(X),fe=Object.create(Object.getPrototypeOf(X));return ce.forEach(function(re){fe[re]=X[re]}),Object.defineProperty(fe,"message",{value:X.message}),fe}function q(X){return W(X,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function J(X,ce,fe){var re="",ge="",ue=0,ie="",A=!1,Y=q(X),K=Y.split(`
`),pe=q(ce).split(`
`),j=0,ee="";if(fe==="strictEqual"&&B(X)==="object"&&B(ce)==="object"&&X!==null&&ce!==null&&(fe="strictEqualObject"),K.length===1&&pe.length===1&&K[0]!==pe[0]){var me=K[0].length+pe[0].length;if(me<=de){if((B(X)!=="object"||X===null)&&(B(ce)!=="object"||ce===null)&&(X!==0||ce!==0))return"".concat(ae[fe],`

`)+"".concat(K[0]," !== ").concat(pe[0],`
`)}else if(fe!=="strictEqualObject"){var Se=Ve.stderr&&Ve.stderr.isTTY?Ve.stderr.columns:80;if(me<Se){for(;K[0][j]===pe[0][j];)j++;j>2&&(ee=`
  `.concat(D(" ",j),"^"),j=0)}}}for(var Ne=K[K.length-1],O=pe[pe.length-1];Ne===O&&(j++<2?ie=`
  `.concat(Ne).concat(ie):re=Ne,K.pop(),pe.pop(),!(K.length===0||pe.length===0));)Ne=K[K.length-1],O=pe[pe.length-1];var F=Math.max(K.length,pe.length);if(F===0){var Oe=Y.split(`
`);if(Oe.length>30)for(Oe[26]="".concat(C,"...").concat(te);Oe.length>27;)Oe.pop();return"".concat(ae.notIdentical,`

`).concat(Oe.join(`
`),`
`)}j>3&&(ie=`
`.concat(C,"...").concat(te).concat(ie),A=!0),re!==""&&(ie=`
  `.concat(re).concat(ie),re="");var Ae=0,nt=ae[fe]+`
`.concat(U,"+ actual").concat(te," ").concat(V,"- expected").concat(te),P=" ".concat(C,"...").concat(te," Lines skipped");for(j=0;j<F;j++){var v=j-ue;if(K.length<j+1)v>1&&j>2&&(v>4?(ge+=`
`.concat(C,"...").concat(te),A=!0):v>3&&(ge+=`
  `.concat(pe[j-2]),Ae++),ge+=`
  `.concat(pe[j-1]),Ae++),ue=j,re+=`
`.concat(V,"-").concat(te," ").concat(pe[j]),Ae++;else if(pe.length<j+1)v>1&&j>2&&(v>4?(ge+=`
`.concat(C,"...").concat(te),A=!0):v>3&&(ge+=`
  `.concat(K[j-2]),Ae++),ge+=`
  `.concat(K[j-1]),Ae++),ue=j,ge+=`
`.concat(U,"+").concat(te," ").concat(K[j]),Ae++;else{var w=pe[j],M=K[j],Te=M!==w&&(!I(M,",")||M.slice(0,-1)!==w);Te&&I(w,",")&&w.slice(0,-1)===M&&(Te=!1,M+=","),Te?(v>1&&j>2&&(v>4?(ge+=`
`.concat(C,"...").concat(te),A=!0):v>3&&(ge+=`
  `.concat(K[j-2]),Ae++),ge+=`
  `.concat(K[j-1]),Ae++),ue=j,ge+=`
`.concat(U,"+").concat(te," ").concat(M),re+=`
`.concat(V,"-").concat(te," ").concat(w),Ae+=2):(ge+=re,re="",(v===1||j===0)&&(ge+=`
  `.concat(M),Ae++))}if(Ae>20&&j<F-2)return"".concat(nt).concat(P,`
`).concat(ge,`
`).concat(C,"...").concat(te).concat(re,`
`)+"".concat(C,"...").concat(te)}return"".concat(nt).concat(A?P:"",`
`).concat(ge).concat(re).concat(ie).concat(ee)}var G=function(X){d(ce,X);function ce(fe){var re;if(i(this,ce),B(fe)!=="object"||fe===null)throw new m("options","Object",fe);var ge=fe.message,ue=fe.operator,ie=fe.stackStartFn,A=fe.actual,Y=fe.expected,K=Error.stackTraceLimit;if(Error.stackTraceLimit=0,ge!=null)re=u(this,x(ce).call(this,String(ge)));else if(Ve.stderr&&Ve.stderr.isTTY&&(Ve.stderr&&Ve.stderr.getColorDepth&&Ve.stderr.getColorDepth()!==1?(C="\x1B[34m",U="\x1B[32m",te="\x1B[39m",V="\x1B[31m"):(C="",U="",te="",V="")),B(A)==="object"&&A!==null&&B(Y)==="object"&&Y!==null&&"stack"in A&&A instanceof Error&&"stack"in Y&&Y instanceof Error&&(A=we(A),Y=we(Y)),ue==="deepStrictEqual"||ue==="strictEqual")re=u(this,x(ce).call(this,J(A,Y,ue)));else if(ue==="notDeepStrictEqual"||ue==="notStrictEqual"){var pe=ae[ue],j=q(A).split(`
`);if(ue==="notStrictEqual"&&B(A)==="object"&&A!==null&&(pe=ae.notStrictEqualObject),j.length>30)for(j[26]="".concat(C,"...").concat(te);j.length>27;)j.pop();j.length===1?re=u(this,x(ce).call(this,"".concat(pe," ").concat(j[0]))):re=u(this,x(ce).call(this,"".concat(pe,`

`).concat(j.join(`
`),`
`)))}else{var ee=q(A),me="",Se=ae[ue];ue==="notDeepEqual"||ue==="notEqual"?(ee="".concat(ae[ue],`

`).concat(ee),ee.length>1024&&(ee="".concat(ee.slice(0,1021),"..."))):(me="".concat(q(Y)),ee.length>512&&(ee="".concat(ee.slice(0,509),"...")),me.length>512&&(me="".concat(me.slice(0,509),"...")),ue==="deepEqual"||ue==="equal"?ee="".concat(Se,`

`).concat(ee,`

should equal

`):me=" ".concat(ue," ").concat(me)),re=u(this,x(ce).call(this,"".concat(ee).concat(me)))}return Error.stackTraceLimit=K,re.generatedMessage=!ge,Object.defineProperty(h(re),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),re.code="ERR_ASSERTION",re.actual=A,re.expected=Y,re.operator=ue,Error.captureStackTrace&&Error.captureStackTrace(h(re),ie),re.stack,re.name="AssertionError",u(re)}return a(ce,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:W.custom,value:function(re,ge){return W(this,r({},ge,{customInspect:!1,depth:0}))}}]),ce}(p(Error));return EE=G,EE}var TE,NR;function O2(){if(NR)return TE;NR=1;function r(i,s){if(i==null)throw new TypeError("Cannot convert first argument to object");for(var a=Object(i),u=1;u<arguments.length;u++){var h=arguments[u];if(h!=null)for(var d=Object.keys(Object(h)),p=0,T=d.length;p<T;p++){var E=d[p],y=Object.getOwnPropertyDescriptor(h,E);y!==void 0&&y.enumerable&&(a[E]=h[E])}}return a}function n(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}return TE={assign:r,polyfill:n},TE}var vE,xR;function BN(){if(xR)return vE;xR=1;var r=Object.prototype.toString;return vE=function(i){var s=r.call(i),a=s==="[object Arguments]";return a||(a=s!=="[object Array]"&&i!==null&&typeof i=="object"&&typeof i.length=="number"&&i.length>=0&&r.call(i.callee)==="[object Function]"),a},vE}var bE,MR;function R2(){if(MR)return bE;MR=1;var r;if(!Object.keys){var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,s=BN(),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),h=a.call(function(){},"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(S){var x=S.constructor;return x&&x.prototype===S},T={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},E=function(){if(typeof window>"u")return!1;for(var S in window)try{if(!T["$"+S]&&n.call(window,S)&&window[S]!==null&&typeof window[S]=="object")try{p(window[S])}catch{return!0}}catch{return!0}return!1}(),y=function(S){if(typeof window>"u"||!E)return p(S);try{return p(S)}catch{return!1}};r=function(x){var B=x!==null&&typeof x=="object",H=i.call(x)==="[object Function]",W=s(x),$=B&&i.call(x)==="[object String]",m=[];if(!B&&!H&&!W)throw new TypeError("Object.keys called on a non-object");var I=h&&H;if($&&x.length>0&&!n.call(x,0))for(var D=0;D<x.length;++D)m.push(String(D));if(W&&x.length>0)for(var C=0;C<x.length;++C)m.push(String(C));else for(var U in x)!(I&&U==="prototype")&&n.call(x,U)&&m.push(String(U));if(u)for(var V=y(x),te=0;te<d.length;++te)!(V&&d[te]==="constructor")&&n.call(x,d[te])&&m.push(d[te]);return m}}return bE=r,bE}var yE,DR;function k2(){if(DR)return yE;DR=1;var r=Array.prototype.slice,n=BN(),i=Object.keys,s=i?function(h){return i(h)}:R2(),a=Object.keys;return s.shim=function(){if(Object.keys){var h=function(){var d=Object.keys(arguments);return d&&d.length===arguments.length}(1,2);h||(Object.keys=function(p){return n(p)?a(r.call(p)):a(p)})}else Object.keys=s;return Object.keys||s},yE=s,yE}var wE,PR;function C2(){if(PR)return wE;PR=1;var r=op,n=r("%Object.defineProperty%",!0),i=function(){if(n)try{return n({},"a",{value:1}),!0}catch{return!1}return!1};return i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return n([],"length",{value:1}).length!==1}catch{return!0}},wE=i,wE}var SE,BR;function dp(){if(BR)return SE;BR=1;var r=k2(),n=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",i=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,u=function(E){return typeof E=="function"&&i.call(E)==="[object Function]"},h=C2()(),d=a&&h,p=function(E,y,S,x){if(y in E){if(x===!0){if(E[y]===S)return}else if(!u(x)||!x())return}d?a(E,y,{configurable:!0,enumerable:!1,value:S,writable:!0}):E[y]=S},T=function(E,y){var S=arguments.length>2?arguments[2]:{},x=r(y);n&&(x=s.call(x,Object.getOwnPropertySymbols(y)));for(var B=0;B<x.length;B+=1)p(E,x[B],y[x[B]],S[x[B]])};return T.supportsDescriptors=!!d,SE=T,SE}var IE,FR;function FN(){if(FR)return IE;FR=1;var r=function(n){return n!==n};return IE=function(i,s){return i===0&&s===0?1/i===1/s:!!(i===s||r(i)&&r(s))},IE}var OE,UR;function UN(){if(UR)return OE;UR=1;var r=FN();return OE=function(){return typeof Object.is=="function"?Object.is:r},OE}var RE,HR;function A2(){if(HR)return RE;HR=1;var r=UN(),n=dp();return RE=function(){var s=r();return n(Object,{is:s},{is:function(){return Object.is!==s}}),s},RE}var kE,GR;function HN(){if(GR)return kE;GR=1;var r=dp(),n=Bb,i=FN(),s=UN(),a=A2(),u=n(s(),Object);return r(u,{getPolyfill:s,implementation:i,shim:a}),kE=u,kE}var CE,VR;function GN(){return VR||(VR=1,CE=function(n){return n!==n}),CE}var AE,WR;function VN(){if(WR)return AE;WR=1;var r=GN();return AE=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r},AE}var LE,jR;function L2(){if(jR)return LE;jR=1;var r=dp(),n=VN();return LE=function(){var s=n();return r(Number,{isNaN:s},{isNaN:function(){return Number.isNaN!==s}}),s},LE}var NE,zR;function N2(){if(zR)return NE;zR=1;var r=Bb,n=dp(),i=GN(),s=VN(),a=L2(),u=r(s(),Number);return n(u,{getPolyfill:s,implementation:i,shim:a}),NE=u,NE}var xE,XR;function x2(){if(XR)return xE;XR=1;function r(se,be){return s(se)||i(se,be)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(se,be){var De=[],Fe=!0,Ge=!1,ze=void 0;try{for(var Xe=se[Symbol.iterator](),st;!(Fe=(st=Xe.next()).done)&&(De.push(st.value),!(be&&De.length===be));Fe=!0);}catch(oe){Ge=!0,ze=oe}finally{try{!Fe&&Xe.return!=null&&Xe.return()}finally{if(Ge)throw ze}}return De}function s(se){if(Array.isArray(se))return se}function a(se){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(De){return typeof De}:a=function(De){return De&&typeof Symbol=="function"&&De.constructor===Symbol&&De!==Symbol.prototype?"symbol":typeof De},a(se)}var u=/a/g.flags!==void 0,h=function(be){var De=[];return be.forEach(function(Fe){return De.push(Fe)}),De},d=function(be){var De=[];return be.forEach(function(Fe,Ge){return De.push([Ge,Fe])}),De},p=Object.is?Object.is:HN(),T=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},E=Number.isNaN?Number.isNaN:N2();function y(se){return se.call.bind(se)}var S=y(Object.prototype.hasOwnProperty),x=y(Object.prototype.propertyIsEnumerable),B=y(Object.prototype.toString),H=Nr.types,W=H.isAnyArrayBuffer,$=H.isArrayBufferView,m=H.isDate,I=H.isMap,D=H.isRegExp,C=H.isSet,U=H.isNativeError,V=H.isBoxedPrimitive,te=H.isNumberObject,ae=H.isStringObject,de=H.isBooleanObject,we=H.isBigIntObject,q=H.isSymbolObject,J=H.isFloat32Array,G=H.isFloat64Array;function X(se){if(se.length===0||se.length>10)return!0;for(var be=0;be<se.length;be++){var De=se.charCodeAt(be);if(De<48||De>57)return!0}return se.length===10&&se>=Math.pow(2,32)}function ce(se){return Object.keys(se).filter(X).concat(T(se).filter(Object.prototype.propertyIsEnumerable.bind(se)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function fe(se,be){if(se===be)return 0;for(var De=se.length,Fe=be.length,Ge=0,ze=Math.min(De,Fe);Ge<ze;++Ge)if(se[Ge]!==be[Ge]){De=se[Ge],Fe=be[Ge];break}return De<Fe?-1:Fe<De?1:0}var re=!0,ge=!1,ue=0,ie=1,A=2,Y=3;function K(se,be){return u?se.source===be.source&&se.flags===be.flags:RegExp.prototype.toString.call(se)===RegExp.prototype.toString.call(be)}function pe(se,be){if(se.byteLength!==be.byteLength)return!1;for(var De=0;De<se.byteLength;De++)if(se[De]!==be[De])return!1;return!0}function j(se,be){return se.byteLength!==be.byteLength?!1:fe(new Uint8Array(se.buffer,se.byteOffset,se.byteLength),new Uint8Array(be.buffer,be.byteOffset,be.byteLength))===0}function ee(se,be){return se.byteLength===be.byteLength&&fe(new Uint8Array(se),new Uint8Array(be))===0}function me(se,be){return te(se)?te(be)&&p(Number.prototype.valueOf.call(se),Number.prototype.valueOf.call(be)):ae(se)?ae(be)&&String.prototype.valueOf.call(se)===String.prototype.valueOf.call(be):de(se)?de(be)&&Boolean.prototype.valueOf.call(se)===Boolean.prototype.valueOf.call(be):we(se)?we(be)&&BigInt.prototype.valueOf.call(se)===BigInt.prototype.valueOf.call(be):q(be)&&Symbol.prototype.valueOf.call(se)===Symbol.prototype.valueOf.call(be)}function Se(se,be,De,Fe){if(se===be)return se!==0?!0:De?p(se,be):!0;if(De){if(a(se)!=="object")return typeof se=="number"&&E(se)&&E(be);if(a(be)!=="object"||se===null||be===null||Object.getPrototypeOf(se)!==Object.getPrototypeOf(be))return!1}else{if(se===null||a(se)!=="object")return be===null||a(be)!=="object"?se==be:!1;if(be===null||a(be)!=="object")return!1}var Ge=B(se),ze=B(be);if(Ge!==ze)return!1;if(Array.isArray(se)){if(se.length!==be.length)return!1;var Xe=ce(se),st=ce(be);return Xe.length!==st.length?!1:O(se,be,De,Fe,ie,Xe)}if(Ge==="[object Object]"&&(!I(se)&&I(be)||!C(se)&&C(be)))return!1;if(m(se)){if(!m(be)||Date.prototype.getTime.call(se)!==Date.prototype.getTime.call(be))return!1}else if(D(se)){if(!D(be)||!K(se,be))return!1}else if(U(se)||se instanceof Error){if(se.message!==be.message||se.name!==be.name)return!1}else if($(se)){if(!De&&(J(se)||G(se))){if(!pe(se,be))return!1}else if(!j(se,be))return!1;var oe=ce(se),f=ce(be);return oe.length!==f.length?!1:O(se,be,De,Fe,ue,oe)}else{if(C(se))return!C(be)||se.size!==be.size?!1:O(se,be,De,Fe,A);if(I(se))return!I(be)||se.size!==be.size?!1:O(se,be,De,Fe,Y);if(W(se)){if(!ee(se,be))return!1}else if(V(se)&&!me(se,be))return!1}return O(se,be,De,Fe,ue)}function Ne(se,be){return be.filter(function(De){return x(se,De)})}function O(se,be,De,Fe,Ge,ze){if(arguments.length===5){ze=Object.keys(se);var Xe=Object.keys(be);if(ze.length!==Xe.length)return!1}for(var st=0;st<ze.length;st++)if(!S(be,ze[st]))return!1;if(De&&arguments.length===5){var oe=T(se);if(oe.length!==0){var f=0;for(st=0;st<oe.length;st++){var R=oe[st];if(x(se,R)){if(!x(be,R))return!1;ze.push(R),f++}else if(x(be,R))return!1}var Q=T(be);if(oe.length!==Q.length&&Ne(be,Q).length!==f)return!1}else{var le=T(be);if(le.length!==0&&Ne(be,le).length!==0)return!1}}if(ze.length===0&&(Ge===ue||Ge===ie&&se.length===0||se.size===0))return!0;if(Fe===void 0)Fe={val1:new Map,val2:new Map,position:0};else{var Z=Fe.val1.get(se);if(Z!==void 0){var ye=Fe.val2.get(be);if(ye!==void 0)return Z===ye}Fe.position++}Fe.val1.set(se,Fe.position),Fe.val2.set(be,Fe.position);var N=M(se,be,De,ze,Fe,Ge);return Fe.val1.delete(se),Fe.val2.delete(be),N}function F(se,be,De,Fe){for(var Ge=h(se),ze=0;ze<Ge.length;ze++){var Xe=Ge[ze];if(Se(be,Xe,De,Fe))return se.delete(Xe),!0}return!1}function Oe(se){switch(a(se)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":se=+se;case"number":if(E(se))return!1}return!0}function Ae(se,be,De){var Fe=Oe(De);return Fe??(be.has(Fe)&&!se.has(Fe))}function nt(se,be,De,Fe,Ge){var ze=Oe(De);if(ze!=null)return ze;var Xe=be.get(ze);return Xe===void 0&&!be.has(ze)||!Se(Fe,Xe,!1,Ge)?!1:!se.has(ze)&&Se(Fe,Xe,!1,Ge)}function P(se,be,De,Fe){for(var Ge=null,ze=h(se),Xe=0;Xe<ze.length;Xe++){var st=ze[Xe];if(a(st)==="object"&&st!==null)Ge===null&&(Ge=new Set),Ge.add(st);else if(!be.has(st)){if(De||!Ae(se,be,st))return!1;Ge===null&&(Ge=new Set),Ge.add(st)}}if(Ge!==null){for(var oe=h(be),f=0;f<oe.length;f++){var R=oe[f];if(a(R)==="object"&&R!==null){if(!F(Ge,R,De,Fe))return!1}else if(!De&&!se.has(R)&&!F(Ge,R,De,Fe))return!1}return Ge.size===0}return!0}function v(se,be,De,Fe,Ge,ze){for(var Xe=h(se),st=0;st<Xe.length;st++){var oe=Xe[st];if(Se(De,oe,Ge,ze)&&Se(Fe,be.get(oe),Ge,ze))return se.delete(oe),!0}return!1}function w(se,be,De,Fe){for(var Ge=null,ze=d(se),Xe=0;Xe<ze.length;Xe++){var st=r(ze[Xe],2),oe=st[0],f=st[1];if(a(oe)==="object"&&oe!==null)Ge===null&&(Ge=new Set),Ge.add(oe);else{var R=be.get(oe);if(R===void 0&&!be.has(oe)||!Se(f,R,De,Fe)){if(De||!nt(se,be,oe,f,Fe))return!1;Ge===null&&(Ge=new Set),Ge.add(oe)}}}if(Ge!==null){for(var Q=d(be),le=0;le<Q.length;le++){var Z=r(Q[le],2),oe=Z[0],ye=Z[1];if(a(oe)==="object"&&oe!==null){if(!v(Ge,se,oe,ye,De,Fe))return!1}else if(!De&&(!se.has(oe)||!Se(se.get(oe),ye,!1,Fe))&&!v(Ge,se,oe,ye,!1,Fe))return!1}return Ge.size===0}return!0}function M(se,be,De,Fe,Ge,ze){var Xe=0;if(ze===A){if(!P(se,be,De,Ge))return!1}else if(ze===Y){if(!w(se,be,De,Ge))return!1}else if(ze===ie)for(;Xe<se.length;Xe++)if(S(se,Xe)){if(!S(be,Xe)||!Se(se[Xe],be[Xe],De,Ge))return!1}else{if(S(be,Xe))return!1;for(var st=Object.keys(se);Xe<st.length;Xe++){var oe=st[Xe];if(!S(be,oe)||!Se(se[oe],be[oe],De,Ge))return!1}return st.length===Object.keys(be).length}for(Xe=0;Xe<Fe.length;Xe++){var f=Fe[Xe];if(!Se(se[f],be[f],De,Ge))return!1}return!0}function Te(se,be){return Se(se,be,ge)}function Me(se,be){return Se(se,be,re)}return xE={isDeepEqual:Te,isDeepStrictEqual:Me},xE}var YR;function Nf(){if(YR)return $E.exports;YR=1;function r(ie){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(Y){return typeof Y}:r=function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},r(ie)}function n(ie,A){if(!(ie instanceof A))throw new TypeError("Cannot call a class as a function")}var i=PN(),s=i.codes,a=s.ERR_AMBIGUOUS_ARGUMENT,u=s.ERR_INVALID_ARG_TYPE,h=s.ERR_INVALID_ARG_VALUE,d=s.ERR_INVALID_RETURN_VALUE,p=s.ERR_MISSING_ARGS,T=I2(),E=Nr,y=E.inspect,S=Nr.types,x=S.isPromise,B=S.isRegExp,H=Object.assign?Object.assign:O2().assign,W=Object.is?Object.is:HN(),$,m;function I(){var ie=x2();$=ie.isDeepEqual,m=ie.isDeepStrictEqual}var D=!1,C=$E.exports=de,U={};function V(ie){throw ie.message instanceof Error?ie.message:new T(ie)}function te(ie,A,Y,K,pe){var j=arguments.length,ee;if(j===0)ee="Failed";else if(j===1)Y=ie,ie=void 0;else{if(D===!1){D=!0;var me=Ve.emitWarning?Ve.emitWarning:console.warn.bind(console);me("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}j===2&&(K="!=")}if(Y instanceof Error)throw Y;var Se={actual:ie,expected:A,operator:K===void 0?"fail":K,stackStartFn:pe||te};Y!==void 0&&(Se.message=Y);var Ne=new T(Se);throw ee&&(Ne.message=ee,Ne.generatedMessage=!0),Ne}C.fail=te,C.AssertionError=T;function ae(ie,A,Y,K){if(!Y){var pe=!1;if(A===0)pe=!0,K="No value argument passed to `assert.ok()`";else if(K instanceof Error)throw K;var j=new T({actual:Y,expected:!0,message:K,operator:"==",stackStartFn:ie});throw j.generatedMessage=pe,j}}function de(){for(var ie=arguments.length,A=new Array(ie),Y=0;Y<ie;Y++)A[Y]=arguments[Y];ae.apply(void 0,[de,A.length].concat(A))}C.ok=de,C.equal=function ie(A,Y,K){if(arguments.length<2)throw new p("actual","expected");A!=Y&&V({actual:A,expected:Y,message:K,operator:"==",stackStartFn:ie})},C.notEqual=function ie(A,Y,K){if(arguments.length<2)throw new p("actual","expected");A==Y&&V({actual:A,expected:Y,message:K,operator:"!=",stackStartFn:ie})},C.deepEqual=function ie(A,Y,K){if(arguments.length<2)throw new p("actual","expected");$===void 0&&I(),$(A,Y)||V({actual:A,expected:Y,message:K,operator:"deepEqual",stackStartFn:ie})},C.notDeepEqual=function ie(A,Y,K){if(arguments.length<2)throw new p("actual","expected");$===void 0&&I(),$(A,Y)&&V({actual:A,expected:Y,message:K,operator:"notDeepEqual",stackStartFn:ie})},C.deepStrictEqual=function ie(A,Y,K){if(arguments.length<2)throw new p("actual","expected");$===void 0&&I(),m(A,Y)||V({actual:A,expected:Y,message:K,operator:"deepStrictEqual",stackStartFn:ie})},C.notDeepStrictEqual=we;function we(ie,A,Y){if(arguments.length<2)throw new p("actual","expected");$===void 0&&I(),m(ie,A)&&V({actual:ie,expected:A,message:Y,operator:"notDeepStrictEqual",stackStartFn:we})}C.strictEqual=function ie(A,Y,K){if(arguments.length<2)throw new p("actual","expected");W(A,Y)||V({actual:A,expected:Y,message:K,operator:"strictEqual",stackStartFn:ie})},C.notStrictEqual=function ie(A,Y,K){if(arguments.length<2)throw new p("actual","expected");W(A,Y)&&V({actual:A,expected:Y,message:K,operator:"notStrictEqual",stackStartFn:ie})};var q=function ie(A,Y,K){var pe=this;n(this,ie),Y.forEach(function(j){j in A&&(K!==void 0&&typeof K[j]=="string"&&B(A[j])&&A[j].test(K[j])?pe[j]=K[j]:pe[j]=A[j])})};function J(ie,A,Y,K,pe,j){if(!(Y in ie)||!m(ie[Y],A[Y])){if(!K){var ee=new q(ie,pe),me=new q(A,pe,ie),Se=new T({actual:ee,expected:me,operator:"deepStrictEqual",stackStartFn:j});throw Se.actual=ie,Se.expected=A,Se.operator=j.name,Se}V({actual:ie,expected:A,message:K,operator:j.name,stackStartFn:j})}}function G(ie,A,Y,K){if(typeof A!="function"){if(B(A))return A.test(ie);if(arguments.length===2)throw new u("expected",["Function","RegExp"],A);if(r(ie)!=="object"||ie===null){var pe=new T({actual:ie,expected:A,message:Y,operator:"deepStrictEqual",stackStartFn:K});throw pe.operator=K.name,pe}var j=Object.keys(A);if(A instanceof Error)j.push("name","message");else if(j.length===0)throw new h("error",A,"may not be an empty object");return $===void 0&&I(),j.forEach(function(ee){typeof ie[ee]=="string"&&B(A[ee])&&A[ee].test(ie[ee])||J(ie,A,ee,Y,j,K)}),!0}return A.prototype!==void 0&&ie instanceof A?!0:Error.isPrototypeOf(A)?!1:A.call({},ie)===!0}function X(ie){if(typeof ie!="function")throw new u("fn","Function",ie);try{ie()}catch(A){return A}return U}function ce(ie){return x(ie)||ie!==null&&r(ie)==="object"&&typeof ie.then=="function"&&typeof ie.catch=="function"}function fe(ie){return Promise.resolve().then(function(){var A;if(typeof ie=="function"){if(A=ie(),!ce(A))throw new d("instance of Promise","promiseFn",A)}else if(ce(ie))A=ie;else throw new u("promiseFn",["Function","Promise"],ie);return Promise.resolve().then(function(){return A}).then(function(){return U}).catch(function(Y){return Y})})}function re(ie,A,Y,K){if(typeof Y=="string"){if(arguments.length===4)throw new u("error",["Object","Error","Function","RegExp"],Y);if(r(A)==="object"&&A!==null){if(A.message===Y)throw new a("error/message",'The error message "'.concat(A.message,'" is identical to the message.'))}else if(A===Y)throw new a("error/message",'The error "'.concat(A,'" is identical to the message.'));K=Y,Y=void 0}else if(Y!=null&&r(Y)!=="object"&&typeof Y!="function")throw new u("error",["Object","Error","Function","RegExp"],Y);if(A===U){var pe="";Y&&Y.name&&(pe+=" (".concat(Y.name,")")),pe+=K?": ".concat(K):".";var j=ie.name==="rejects"?"rejection":"exception";V({actual:void 0,expected:Y,operator:ie.name,message:"Missing expected ".concat(j).concat(pe),stackStartFn:ie})}if(Y&&!G(A,Y,K,ie))throw A}function ge(ie,A,Y,K){if(A!==U){if(typeof Y=="string"&&(K=Y,Y=void 0),!Y||G(A,Y)){var pe=K?": ".concat(K):".",j=ie.name==="doesNotReject"?"rejection":"exception";V({actual:A,expected:Y,operator:ie.name,message:"Got unwanted ".concat(j).concat(pe,`
`)+'Actual message: "'.concat(A&&A.message,'"'),stackStartFn:ie})}throw A}}C.throws=function ie(A){for(var Y=arguments.length,K=new Array(Y>1?Y-1:0),pe=1;pe<Y;pe++)K[pe-1]=arguments[pe];re.apply(void 0,[ie,X(A)].concat(K))},C.rejects=function ie(A){for(var Y=arguments.length,K=new Array(Y>1?Y-1:0),pe=1;pe<Y;pe++)K[pe-1]=arguments[pe];return fe(A).then(function(j){return re.apply(void 0,[ie,j].concat(K))})},C.doesNotThrow=function ie(A){for(var Y=arguments.length,K=new Array(Y>1?Y-1:0),pe=1;pe<Y;pe++)K[pe-1]=arguments[pe];ge.apply(void 0,[ie,X(A)].concat(K))},C.doesNotReject=function ie(A){for(var Y=arguments.length,K=new Array(Y>1?Y-1:0),pe=1;pe<Y;pe++)K[pe-1]=arguments[pe];return fe(A).then(function(j){return ge.apply(void 0,[ie,j].concat(K))})},C.ifError=function ie(A){if(A!=null){var Y="ifError got unwanted exception: ";r(A)==="object"&&typeof A.message=="string"?A.message.length===0&&A.constructor?Y+=A.constructor.name:Y+=A.message:Y+=y(A);var K=new T({actual:A,expected:null,operator:"ifError",message:Y,stackStartFn:ie}),pe=A.stack;if(typeof pe=="string"){var j=pe.split(`
`);j.shift();for(var ee=K.stack.split(`
`),me=0;me<j.length;me++){var Se=ee.indexOf(j[me]);if(Se!==-1){ee=ee.slice(0,Se);break}}K.stack="".concat(ee.join(`
`),`
`).concat(j.join(`
`))}throw K}};function ue(){for(var ie=arguments.length,A=new Array(ie),Y=0;Y<ie;Y++)A[Y]=arguments[Y];ae.apply(void 0,[ue,A.length].concat(A))}return C.strict=H(ue,C,{equal:C.strictEqual,deepEqual:C.deepStrictEqual,notEqual:C.notStrictEqual,notDeepEqual:C.notDeepStrictEqual}),C.strict.strict=C.strict,$E.exports}var ME,KR;function M2(){if(KR)return ME;KR=1;function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return ME=r,ME}var zn={},DE={},qR;function fp(){return qR||(qR=1,function(r){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function i(u,h){return Object.prototype.hasOwnProperty.call(u,h)}r.assign=function(u){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var d=h.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var p in d)i(d,p)&&(u[p]=d[p])}}return u},r.shrinkBuf=function(u,h){return u.length===h?u:u.subarray?u.subarray(0,h):(u.length=h,u)};var s={arraySet:function(u,h,d,p,T){if(h.subarray&&u.subarray){u.set(h.subarray(d,d+p),T);return}for(var E=0;E<p;E++)u[T+E]=h[d+E]},flattenChunks:function(u){var h,d,p,T,E,y;for(p=0,h=0,d=u.length;h<d;h++)p+=u[h].length;for(y=new Uint8Array(p),T=0,h=0,d=u.length;h<d;h++)E=u[h],y.set(E,T),T+=E.length;return y}},a={arraySet:function(u,h,d,p,T){for(var E=0;E<p;E++)u[T+E]=h[d+E]},flattenChunks:function(u){return[].concat.apply([],u)}};r.setTyped=function(u){u?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,s)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)}(DE)),DE}var ks={},ZR;function D2(){if(ZR)return ks;ZR=1;var r=fp(),n=4,i=0,s=1,a=2;function u(f){for(var R=f.length;--R>=0;)f[R]=0}var h=0,d=1,p=2,T=3,E=258,y=29,S=256,x=S+1+y,B=30,H=19,W=2*x+1,$=15,m=16,I=7,D=256,C=16,U=17,V=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ae=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],de=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],we=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=512,J=new Array((x+2)*2);u(J);var G=new Array(B*2);u(G);var X=new Array(q);u(X);var ce=new Array(E-T+1);u(ce);var fe=new Array(y);u(fe);var re=new Array(B);u(re);function ge(f,R,Q,le,Z){this.static_tree=f,this.extra_bits=R,this.extra_base=Q,this.elems=le,this.max_length=Z,this.has_stree=f&&f.length}var ue,ie,A;function Y(f,R){this.dyn_tree=f,this.max_code=0,this.stat_desc=R}function K(f){return f<256?X[f]:X[256+(f>>>7)]}function pe(f,R){f.pending_buf[f.pending++]=R&255,f.pending_buf[f.pending++]=R>>>8&255}function j(f,R,Q){f.bi_valid>m-Q?(f.bi_buf|=R<<f.bi_valid&65535,pe(f,f.bi_buf),f.bi_buf=R>>m-f.bi_valid,f.bi_valid+=Q-m):(f.bi_buf|=R<<f.bi_valid&65535,f.bi_valid+=Q)}function ee(f,R,Q){j(f,Q[R*2],Q[R*2+1])}function me(f,R){var Q=0;do Q|=f&1,f>>>=1,Q<<=1;while(--R>0);return Q>>>1}function Se(f){f.bi_valid===16?(pe(f,f.bi_buf),f.bi_buf=0,f.bi_valid=0):f.bi_valid>=8&&(f.pending_buf[f.pending++]=f.bi_buf&255,f.bi_buf>>=8,f.bi_valid-=8)}function Ne(f,R){var Q=R.dyn_tree,le=R.max_code,Z=R.stat_desc.static_tree,ye=R.stat_desc.has_stree,N=R.stat_desc.extra_bits,Be=R.stat_desc.extra_base,ot=R.stat_desc.max_length,_,ke,Ie,z,$e,Re,Qe=0;for(z=0;z<=$;z++)f.bl_count[z]=0;for(Q[f.heap[f.heap_max]*2+1]=0,_=f.heap_max+1;_<W;_++)ke=f.heap[_],z=Q[Q[ke*2+1]*2+1]+1,z>ot&&(z=ot,Qe++),Q[ke*2+1]=z,!(ke>le)&&(f.bl_count[z]++,$e=0,ke>=Be&&($e=N[ke-Be]),Re=Q[ke*2],f.opt_len+=Re*(z+$e),ye&&(f.static_len+=Re*(Z[ke*2+1]+$e)));if(Qe!==0){do{for(z=ot-1;f.bl_count[z]===0;)z--;f.bl_count[z]--,f.bl_count[z+1]+=2,f.bl_count[ot]--,Qe-=2}while(Qe>0);for(z=ot;z!==0;z--)for(ke=f.bl_count[z];ke!==0;)Ie=f.heap[--_],!(Ie>le)&&(Q[Ie*2+1]!==z&&(f.opt_len+=(z-Q[Ie*2+1])*Q[Ie*2],Q[Ie*2+1]=z),ke--)}}function O(f,R,Q){var le=new Array($+1),Z=0,ye,N;for(ye=1;ye<=$;ye++)le[ye]=Z=Z+Q[ye-1]<<1;for(N=0;N<=R;N++){var Be=f[N*2+1];Be!==0&&(f[N*2]=me(le[Be]++,Be))}}function F(){var f,R,Q,le,Z,ye=new Array($+1);for(Q=0,le=0;le<y-1;le++)for(fe[le]=Q,f=0;f<1<<te[le];f++)ce[Q++]=le;for(ce[Q-1]=le,Z=0,le=0;le<16;le++)for(re[le]=Z,f=0;f<1<<ae[le];f++)X[Z++]=le;for(Z>>=7;le<B;le++)for(re[le]=Z<<7,f=0;f<1<<ae[le]-7;f++)X[256+Z++]=le;for(R=0;R<=$;R++)ye[R]=0;for(f=0;f<=143;)J[f*2+1]=8,f++,ye[8]++;for(;f<=255;)J[f*2+1]=9,f++,ye[9]++;for(;f<=279;)J[f*2+1]=7,f++,ye[7]++;for(;f<=287;)J[f*2+1]=8,f++,ye[8]++;for(O(J,x+1,ye),f=0;f<B;f++)G[f*2+1]=5,G[f*2]=me(f,5);ue=new ge(J,te,S+1,x,$),ie=new ge(G,ae,0,B,$),A=new ge(new Array(0),de,0,H,I)}function Oe(f){var R;for(R=0;R<x;R++)f.dyn_ltree[R*2]=0;for(R=0;R<B;R++)f.dyn_dtree[R*2]=0;for(R=0;R<H;R++)f.bl_tree[R*2]=0;f.dyn_ltree[D*2]=1,f.opt_len=f.static_len=0,f.last_lit=f.matches=0}function Ae(f){f.bi_valid>8?pe(f,f.bi_buf):f.bi_valid>0&&(f.pending_buf[f.pending++]=f.bi_buf),f.bi_buf=0,f.bi_valid=0}function nt(f,R,Q,le){Ae(f),le&&(pe(f,Q),pe(f,~Q)),r.arraySet(f.pending_buf,f.window,R,Q,f.pending),f.pending+=Q}function P(f,R,Q,le){var Z=R*2,ye=Q*2;return f[Z]<f[ye]||f[Z]===f[ye]&&le[R]<=le[Q]}function v(f,R,Q){for(var le=f.heap[Q],Z=Q<<1;Z<=f.heap_len&&(Z<f.heap_len&&P(R,f.heap[Z+1],f.heap[Z],f.depth)&&Z++,!P(R,le,f.heap[Z],f.depth));)f.heap[Q]=f.heap[Z],Q=Z,Z<<=1;f.heap[Q]=le}function w(f,R,Q){var le,Z,ye=0,N,Be;if(f.last_lit!==0)do le=f.pending_buf[f.d_buf+ye*2]<<8|f.pending_buf[f.d_buf+ye*2+1],Z=f.pending_buf[f.l_buf+ye],ye++,le===0?ee(f,Z,R):(N=ce[Z],ee(f,N+S+1,R),Be=te[N],Be!==0&&(Z-=fe[N],j(f,Z,Be)),le--,N=K(le),ee(f,N,Q),Be=ae[N],Be!==0&&(le-=re[N],j(f,le,Be)));while(ye<f.last_lit);ee(f,D,R)}function M(f,R){var Q=R.dyn_tree,le=R.stat_desc.static_tree,Z=R.stat_desc.has_stree,ye=R.stat_desc.elems,N,Be,ot=-1,_;for(f.heap_len=0,f.heap_max=W,N=0;N<ye;N++)Q[N*2]!==0?(f.heap[++f.heap_len]=ot=N,f.depth[N]=0):Q[N*2+1]=0;for(;f.heap_len<2;)_=f.heap[++f.heap_len]=ot<2?++ot:0,Q[_*2]=1,f.depth[_]=0,f.opt_len--,Z&&(f.static_len-=le[_*2+1]);for(R.max_code=ot,N=f.heap_len>>1;N>=1;N--)v(f,Q,N);_=ye;do N=f.heap[1],f.heap[1]=f.heap[f.heap_len--],v(f,Q,1),Be=f.heap[1],f.heap[--f.heap_max]=N,f.heap[--f.heap_max]=Be,Q[_*2]=Q[N*2]+Q[Be*2],f.depth[_]=(f.depth[N]>=f.depth[Be]?f.depth[N]:f.depth[Be])+1,Q[N*2+1]=Q[Be*2+1]=_,f.heap[1]=_++,v(f,Q,1);while(f.heap_len>=2);f.heap[--f.heap_max]=f.heap[1],Ne(f,R),O(Q,ot,f.bl_count)}function Te(f,R,Q){var le,Z=-1,ye,N=R[0*2+1],Be=0,ot=7,_=4;for(N===0&&(ot=138,_=3),R[(Q+1)*2+1]=65535,le=0;le<=Q;le++)ye=N,N=R[(le+1)*2+1],!(++Be<ot&&ye===N)&&(Be<_?f.bl_tree[ye*2]+=Be:ye!==0?(ye!==Z&&f.bl_tree[ye*2]++,f.bl_tree[C*2]++):Be<=10?f.bl_tree[U*2]++:f.bl_tree[V*2]++,Be=0,Z=ye,N===0?(ot=138,_=3):ye===N?(ot=6,_=3):(ot=7,_=4))}function Me(f,R,Q){var le,Z=-1,ye,N=R[0*2+1],Be=0,ot=7,_=4;for(N===0&&(ot=138,_=3),le=0;le<=Q;le++)if(ye=N,N=R[(le+1)*2+1],!(++Be<ot&&ye===N)){if(Be<_)do ee(f,ye,f.bl_tree);while(--Be!==0);else ye!==0?(ye!==Z&&(ee(f,ye,f.bl_tree),Be--),ee(f,C,f.bl_tree),j(f,Be-3,2)):Be<=10?(ee(f,U,f.bl_tree),j(f,Be-3,3)):(ee(f,V,f.bl_tree),j(f,Be-11,7));Be=0,Z=ye,N===0?(ot=138,_=3):ye===N?(ot=6,_=3):(ot=7,_=4)}}function se(f){var R;for(Te(f,f.dyn_ltree,f.l_desc.max_code),Te(f,f.dyn_dtree,f.d_desc.max_code),M(f,f.bl_desc),R=H-1;R>=3&&f.bl_tree[we[R]*2+1]===0;R--);return f.opt_len+=3*(R+1)+5+5+4,R}function be(f,R,Q,le){var Z;for(j(f,R-257,5),j(f,Q-1,5),j(f,le-4,4),Z=0;Z<le;Z++)j(f,f.bl_tree[we[Z]*2+1],3);Me(f,f.dyn_ltree,R-1),Me(f,f.dyn_dtree,Q-1)}function De(f){var R=4093624447,Q;for(Q=0;Q<=31;Q++,R>>>=1)if(R&1&&f.dyn_ltree[Q*2]!==0)return i;if(f.dyn_ltree[9*2]!==0||f.dyn_ltree[10*2]!==0||f.dyn_ltree[13*2]!==0)return s;for(Q=32;Q<S;Q++)if(f.dyn_ltree[Q*2]!==0)return s;return i}var Fe=!1;function Ge(f){Fe||(F(),Fe=!0),f.l_desc=new Y(f.dyn_ltree,ue),f.d_desc=new Y(f.dyn_dtree,ie),f.bl_desc=new Y(f.bl_tree,A),f.bi_buf=0,f.bi_valid=0,Oe(f)}function ze(f,R,Q,le){j(f,(h<<1)+(le?1:0),3),nt(f,R,Q,!0)}function Xe(f){j(f,d<<1,3),ee(f,D,J),Se(f)}function st(f,R,Q,le){var Z,ye,N=0;f.level>0?(f.strm.data_type===a&&(f.strm.data_type=De(f)),M(f,f.l_desc),M(f,f.d_desc),N=se(f),Z=f.opt_len+3+7>>>3,ye=f.static_len+3+7>>>3,ye<=Z&&(Z=ye)):Z=ye=Q+5,Q+4<=Z&&R!==-1?ze(f,R,Q,le):f.strategy===n||ye===Z?(j(f,(d<<1)+(le?1:0),3),w(f,J,G)):(j(f,(p<<1)+(le?1:0),3),be(f,f.l_desc.max_code+1,f.d_desc.max_code+1,N+1),w(f,f.dyn_ltree,f.dyn_dtree)),Oe(f),le&&Ae(f)}function oe(f,R,Q){return f.pending_buf[f.d_buf+f.last_lit*2]=R>>>8&255,f.pending_buf[f.d_buf+f.last_lit*2+1]=R&255,f.pending_buf[f.l_buf+f.last_lit]=Q&255,f.last_lit++,R===0?f.dyn_ltree[Q*2]++:(f.matches++,R--,f.dyn_ltree[(ce[Q]+S+1)*2]++,f.dyn_dtree[K(R)*2]++),f.last_lit===f.lit_bufsize-1}return ks._tr_init=Ge,ks._tr_stored_block=ze,ks._tr_flush_block=st,ks._tr_tally=oe,ks._tr_align=Xe,ks}var PE,JR;function WN(){if(JR)return PE;JR=1;function r(n,i,s,a){for(var u=n&65535|0,h=n>>>16&65535|0,d=0;s!==0;){d=s>2e3?2e3:s,s-=d;do u=u+i[a++]|0,h=h+u|0;while(--d);u%=65521,h%=65521}return u|h<<16|0}return PE=r,PE}var BE,QR;function jN(){if(QR)return BE;QR=1;function r(){for(var s,a=[],u=0;u<256;u++){s=u;for(var h=0;h<8;h++)s=s&1?3988292384^s>>>1:s>>>1;a[u]=s}return a}var n=r();function i(s,a,u,h){var d=n,p=h+u;s^=-1;for(var T=h;T<p;T++)s=s>>>8^d[(s^a[T])&255];return s^-1}return BE=i,BE}var FE,ek;function P2(){return ek||(ek=1,FE={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),FE}var tk;function B2(){if(tk)return zn;tk=1;var r=fp(),n=D2(),i=WN(),s=jN(),a=P2(),u=0,h=1,d=3,p=4,T=5,E=0,y=1,S=-2,x=-3,B=-5,H=-1,W=1,$=2,m=3,I=4,D=0,C=2,U=8,V=9,te=15,ae=8,de=29,we=256,q=we+1+de,J=30,G=19,X=2*q+1,ce=15,fe=3,re=258,ge=re+fe+1,ue=32,ie=42,A=69,Y=73,K=91,pe=103,j=113,ee=666,me=1,Se=2,Ne=3,O=4,F=3;function Oe(_,ke){return _.msg=a[ke],ke}function Ae(_){return(_<<1)-(_>4?9:0)}function nt(_){for(var ke=_.length;--ke>=0;)_[ke]=0}function P(_){var ke=_.state,Ie=ke.pending;Ie>_.avail_out&&(Ie=_.avail_out),Ie!==0&&(r.arraySet(_.output,ke.pending_buf,ke.pending_out,Ie,_.next_out),_.next_out+=Ie,ke.pending_out+=Ie,_.total_out+=Ie,_.avail_out-=Ie,ke.pending-=Ie,ke.pending===0&&(ke.pending_out=0))}function v(_,ke){n._tr_flush_block(_,_.block_start>=0?_.block_start:-1,_.strstart-_.block_start,ke),_.block_start=_.strstart,P(_.strm)}function w(_,ke){_.pending_buf[_.pending++]=ke}function M(_,ke){_.pending_buf[_.pending++]=ke>>>8&255,_.pending_buf[_.pending++]=ke&255}function Te(_,ke,Ie,z){var $e=_.avail_in;return $e>z&&($e=z),$e===0?0:(_.avail_in-=$e,r.arraySet(ke,_.input,_.next_in,$e,Ie),_.state.wrap===1?_.adler=i(_.adler,ke,$e,Ie):_.state.wrap===2&&(_.adler=s(_.adler,ke,$e,Ie)),_.next_in+=$e,_.total_in+=$e,$e)}function Me(_,ke){var Ie=_.max_chain_length,z=_.strstart,$e,Re,Qe=_.prev_length,b=_.nice_match,k=_.strstart>_.w_size-ge?_.strstart-(_.w_size-ge):0,ne=_.window,Ee=_.w_mask,Le=_.prev,Ue=_.strstart+re,tt=ne[z+Qe-1],gt=ne[z+Qe];_.prev_length>=_.good_match&&(Ie>>=2),b>_.lookahead&&(b=_.lookahead);do if($e=ke,!(ne[$e+Qe]!==gt||ne[$e+Qe-1]!==tt||ne[$e]!==ne[z]||ne[++$e]!==ne[z+1])){z+=2,$e++;do;while(ne[++z]===ne[++$e]&&ne[++z]===ne[++$e]&&ne[++z]===ne[++$e]&&ne[++z]===ne[++$e]&&ne[++z]===ne[++$e]&&ne[++z]===ne[++$e]&&ne[++z]===ne[++$e]&&ne[++z]===ne[++$e]&&z<Ue);if(Re=re-(Ue-z),z=Ue-re,Re>Qe){if(_.match_start=ke,Qe=Re,Re>=b)break;tt=ne[z+Qe-1],gt=ne[z+Qe]}}while((ke=Le[ke&Ee])>k&&--Ie!==0);return Qe<=_.lookahead?Qe:_.lookahead}function se(_){var ke=_.w_size,Ie,z,$e,Re,Qe;do{if(Re=_.window_size-_.lookahead-_.strstart,_.strstart>=ke+(ke-ge)){r.arraySet(_.window,_.window,ke,ke,0),_.match_start-=ke,_.strstart-=ke,_.block_start-=ke,z=_.hash_size,Ie=z;do $e=_.head[--Ie],_.head[Ie]=$e>=ke?$e-ke:0;while(--z);z=ke,Ie=z;do $e=_.prev[--Ie],_.prev[Ie]=$e>=ke?$e-ke:0;while(--z);Re+=ke}if(_.strm.avail_in===0)break;if(z=Te(_.strm,_.window,_.strstart+_.lookahead,Re),_.lookahead+=z,_.lookahead+_.insert>=fe)for(Qe=_.strstart-_.insert,_.ins_h=_.window[Qe],_.ins_h=(_.ins_h<<_.hash_shift^_.window[Qe+1])&_.hash_mask;_.insert&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[Qe+fe-1])&_.hash_mask,_.prev[Qe&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=Qe,Qe++,_.insert--,!(_.lookahead+_.insert<fe)););}while(_.lookahead<ge&&_.strm.avail_in!==0)}function be(_,ke){var Ie=65535;for(Ie>_.pending_buf_size-5&&(Ie=_.pending_buf_size-5);;){if(_.lookahead<=1){if(se(_),_.lookahead===0&&ke===u)return me;if(_.lookahead===0)break}_.strstart+=_.lookahead,_.lookahead=0;var z=_.block_start+Ie;if((_.strstart===0||_.strstart>=z)&&(_.lookahead=_.strstart-z,_.strstart=z,v(_,!1),_.strm.avail_out===0)||_.strstart-_.block_start>=_.w_size-ge&&(v(_,!1),_.strm.avail_out===0))return me}return _.insert=0,ke===p?(v(_,!0),_.strm.avail_out===0?Ne:O):(_.strstart>_.block_start&&(v(_,!1),_.strm.avail_out===0),me)}function De(_,ke){for(var Ie,z;;){if(_.lookahead<ge){if(se(_),_.lookahead<ge&&ke===u)return me;if(_.lookahead===0)break}if(Ie=0,_.lookahead>=fe&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+fe-1])&_.hash_mask,Ie=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),Ie!==0&&_.strstart-Ie<=_.w_size-ge&&(_.match_length=Me(_,Ie)),_.match_length>=fe)if(z=n._tr_tally(_,_.strstart-_.match_start,_.match_length-fe),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=fe){_.match_length--;do _.strstart++,_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+fe-1])&_.hash_mask,Ie=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart;while(--_.match_length!==0);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+1])&_.hash_mask;else z=n._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(z&&(v(_,!1),_.strm.avail_out===0))return me}return _.insert=_.strstart<fe-1?_.strstart:fe-1,ke===p?(v(_,!0),_.strm.avail_out===0?Ne:O):_.last_lit&&(v(_,!1),_.strm.avail_out===0)?me:Se}function Fe(_,ke){for(var Ie,z,$e;;){if(_.lookahead<ge){if(se(_),_.lookahead<ge&&ke===u)return me;if(_.lookahead===0)break}if(Ie=0,_.lookahead>=fe&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+fe-1])&_.hash_mask,Ie=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=fe-1,Ie!==0&&_.prev_length<_.max_lazy_match&&_.strstart-Ie<=_.w_size-ge&&(_.match_length=Me(_,Ie),_.match_length<=5&&(_.strategy===W||_.match_length===fe&&_.strstart-_.match_start>4096)&&(_.match_length=fe-1)),_.prev_length>=fe&&_.match_length<=_.prev_length){$e=_.strstart+_.lookahead-fe,z=n._tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-fe),_.lookahead-=_.prev_length-1,_.prev_length-=2;do++_.strstart<=$e&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+fe-1])&_.hash_mask,Ie=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart);while(--_.prev_length!==0);if(_.match_available=0,_.match_length=fe-1,_.strstart++,z&&(v(_,!1),_.strm.avail_out===0))return me}else if(_.match_available){if(z=n._tr_tally(_,0,_.window[_.strstart-1]),z&&v(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return me}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(z=n._tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<fe-1?_.strstart:fe-1,ke===p?(v(_,!0),_.strm.avail_out===0?Ne:O):_.last_lit&&(v(_,!1),_.strm.avail_out===0)?me:Se}function Ge(_,ke){for(var Ie,z,$e,Re,Qe=_.window;;){if(_.lookahead<=re){if(se(_),_.lookahead<=re&&ke===u)return me;if(_.lookahead===0)break}if(_.match_length=0,_.lookahead>=fe&&_.strstart>0&&($e=_.strstart-1,z=Qe[$e],z===Qe[++$e]&&z===Qe[++$e]&&z===Qe[++$e])){Re=_.strstart+re;do;while(z===Qe[++$e]&&z===Qe[++$e]&&z===Qe[++$e]&&z===Qe[++$e]&&z===Qe[++$e]&&z===Qe[++$e]&&z===Qe[++$e]&&z===Qe[++$e]&&$e<Re);_.match_length=re-(Re-$e),_.match_length>_.lookahead&&(_.match_length=_.lookahead)}if(_.match_length>=fe?(Ie=n._tr_tally(_,1,_.match_length-fe),_.lookahead-=_.match_length,_.strstart+=_.match_length,_.match_length=0):(Ie=n._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++),Ie&&(v(_,!1),_.strm.avail_out===0))return me}return _.insert=0,ke===p?(v(_,!0),_.strm.avail_out===0?Ne:O):_.last_lit&&(v(_,!1),_.strm.avail_out===0)?me:Se}function ze(_,ke){for(var Ie;;){if(_.lookahead===0&&(se(_),_.lookahead===0)){if(ke===u)return me;break}if(_.match_length=0,Ie=n._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++,Ie&&(v(_,!1),_.strm.avail_out===0))return me}return _.insert=0,ke===p?(v(_,!0),_.strm.avail_out===0?Ne:O):_.last_lit&&(v(_,!1),_.strm.avail_out===0)?me:Se}function Xe(_,ke,Ie,z,$e){this.good_length=_,this.max_lazy=ke,this.nice_length=Ie,this.max_chain=z,this.func=$e}var st;st=[new Xe(0,0,0,0,be),new Xe(4,4,8,4,De),new Xe(4,5,16,8,De),new Xe(4,6,32,32,De),new Xe(4,4,16,16,Fe),new Xe(8,16,32,32,Fe),new Xe(8,16,128,128,Fe),new Xe(8,32,128,256,Fe),new Xe(32,128,258,1024,Fe),new Xe(32,258,258,4096,Fe)];function oe(_){_.window_size=2*_.w_size,nt(_.head),_.max_lazy_match=st[_.level].max_lazy,_.good_match=st[_.level].good_length,_.nice_match=st[_.level].nice_length,_.max_chain_length=st[_.level].max_chain,_.strstart=0,_.block_start=0,_.lookahead=0,_.insert=0,_.match_length=_.prev_length=fe-1,_.match_available=0,_.ins_h=0}function f(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=U,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(X*2),this.dyn_dtree=new r.Buf16((2*J+1)*2),this.bl_tree=new r.Buf16((2*G+1)*2),nt(this.dyn_ltree),nt(this.dyn_dtree),nt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(ce+1),this.heap=new r.Buf16(2*q+1),nt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*q+1),nt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function R(_){var ke;return!_||!_.state?Oe(_,S):(_.total_in=_.total_out=0,_.data_type=C,ke=_.state,ke.pending=0,ke.pending_out=0,ke.wrap<0&&(ke.wrap=-ke.wrap),ke.status=ke.wrap?ie:j,_.adler=ke.wrap===2?0:1,ke.last_flush=u,n._tr_init(ke),E)}function Q(_){var ke=R(_);return ke===E&&oe(_.state),ke}function le(_,ke){return!_||!_.state||_.state.wrap!==2?S:(_.state.gzhead=ke,E)}function Z(_,ke,Ie,z,$e,Re){if(!_)return S;var Qe=1;if(ke===H&&(ke=6),z<0?(Qe=0,z=-z):z>15&&(Qe=2,z-=16),$e<1||$e>V||Ie!==U||z<8||z>15||ke<0||ke>9||Re<0||Re>I)return Oe(_,S);z===8&&(z=9);var b=new f;return _.state=b,b.strm=_,b.wrap=Qe,b.gzhead=null,b.w_bits=z,b.w_size=1<<b.w_bits,b.w_mask=b.w_size-1,b.hash_bits=$e+7,b.hash_size=1<<b.hash_bits,b.hash_mask=b.hash_size-1,b.hash_shift=~~((b.hash_bits+fe-1)/fe),b.window=new r.Buf8(b.w_size*2),b.head=new r.Buf16(b.hash_size),b.prev=new r.Buf16(b.w_size),b.lit_bufsize=1<<$e+6,b.pending_buf_size=b.lit_bufsize*4,b.pending_buf=new r.Buf8(b.pending_buf_size),b.d_buf=1*b.lit_bufsize,b.l_buf=(1+2)*b.lit_bufsize,b.level=ke,b.strategy=Re,b.method=Ie,Q(_)}function ye(_,ke){return Z(_,ke,U,te,ae,D)}function N(_,ke){var Ie,z,$e,Re;if(!_||!_.state||ke>T||ke<0)return _?Oe(_,S):S;if(z=_.state,!_.output||!_.input&&_.avail_in!==0||z.status===ee&&ke!==p)return Oe(_,_.avail_out===0?B:S);if(z.strm=_,Ie=z.last_flush,z.last_flush=ke,z.status===ie)if(z.wrap===2)_.adler=0,w(z,31),w(z,139),w(z,8),z.gzhead?(w(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),w(z,z.gzhead.time&255),w(z,z.gzhead.time>>8&255),w(z,z.gzhead.time>>16&255),w(z,z.gzhead.time>>24&255),w(z,z.level===9?2:z.strategy>=$||z.level<2?4:0),w(z,z.gzhead.os&255),z.gzhead.extra&&z.gzhead.extra.length&&(w(z,z.gzhead.extra.length&255),w(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(_.adler=s(_.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=A):(w(z,0),w(z,0),w(z,0),w(z,0),w(z,0),w(z,z.level===9?2:z.strategy>=$||z.level<2?4:0),w(z,F),z.status=j);else{var Qe=U+(z.w_bits-8<<4)<<8,b=-1;z.strategy>=$||z.level<2?b=0:z.level<6?b=1:z.level===6?b=2:b=3,Qe|=b<<6,z.strstart!==0&&(Qe|=ue),Qe+=31-Qe%31,z.status=j,M(z,Qe),z.strstart!==0&&(M(z,_.adler>>>16),M(z,_.adler&65535)),_.adler=1}if(z.status===A)if(z.gzhead.extra){for($e=z.pending;z.gzindex<(z.gzhead.extra.length&65535)&&!(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>$e&&(_.adler=s(_.adler,z.pending_buf,z.pending-$e,$e)),P(_),$e=z.pending,z.pending===z.pending_buf_size));)w(z,z.gzhead.extra[z.gzindex]&255),z.gzindex++;z.gzhead.hcrc&&z.pending>$e&&(_.adler=s(_.adler,z.pending_buf,z.pending-$e,$e)),z.gzindex===z.gzhead.extra.length&&(z.gzindex=0,z.status=Y)}else z.status=Y;if(z.status===Y)if(z.gzhead.name){$e=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>$e&&(_.adler=s(_.adler,z.pending_buf,z.pending-$e,$e)),P(_),$e=z.pending,z.pending===z.pending_buf_size)){Re=1;break}z.gzindex<z.gzhead.name.length?Re=z.gzhead.name.charCodeAt(z.gzindex++)&255:Re=0,w(z,Re)}while(Re!==0);z.gzhead.hcrc&&z.pending>$e&&(_.adler=s(_.adler,z.pending_buf,z.pending-$e,$e)),Re===0&&(z.gzindex=0,z.status=K)}else z.status=K;if(z.status===K)if(z.gzhead.comment){$e=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>$e&&(_.adler=s(_.adler,z.pending_buf,z.pending-$e,$e)),P(_),$e=z.pending,z.pending===z.pending_buf_size)){Re=1;break}z.gzindex<z.gzhead.comment.length?Re=z.gzhead.comment.charCodeAt(z.gzindex++)&255:Re=0,w(z,Re)}while(Re!==0);z.gzhead.hcrc&&z.pending>$e&&(_.adler=s(_.adler,z.pending_buf,z.pending-$e,$e)),Re===0&&(z.status=pe)}else z.status=pe;if(z.status===pe&&(z.gzhead.hcrc?(z.pending+2>z.pending_buf_size&&P(_),z.pending+2<=z.pending_buf_size&&(w(z,_.adler&255),w(z,_.adler>>8&255),_.adler=0,z.status=j)):z.status=j),z.pending!==0){if(P(_),_.avail_out===0)return z.last_flush=-1,E}else if(_.avail_in===0&&Ae(ke)<=Ae(Ie)&&ke!==p)return Oe(_,B);if(z.status===ee&&_.avail_in!==0)return Oe(_,B);if(_.avail_in!==0||z.lookahead!==0||ke!==u&&z.status!==ee){var k=z.strategy===$?ze(z,ke):z.strategy===m?Ge(z,ke):st[z.level].func(z,ke);if((k===Ne||k===O)&&(z.status=ee),k===me||k===Ne)return _.avail_out===0&&(z.last_flush=-1),E;if(k===Se&&(ke===h?n._tr_align(z):ke!==T&&(n._tr_stored_block(z,0,0,!1),ke===d&&(nt(z.head),z.lookahead===0&&(z.strstart=0,z.block_start=0,z.insert=0))),P(_),_.avail_out===0))return z.last_flush=-1,E}return ke!==p?E:z.wrap<=0?y:(z.wrap===2?(w(z,_.adler&255),w(z,_.adler>>8&255),w(z,_.adler>>16&255),w(z,_.adler>>24&255),w(z,_.total_in&255),w(z,_.total_in>>8&255),w(z,_.total_in>>16&255),w(z,_.total_in>>24&255)):(M(z,_.adler>>>16),M(z,_.adler&65535)),P(_),z.wrap>0&&(z.wrap=-z.wrap),z.pending!==0?E:y)}function Be(_){var ke;return!_||!_.state?S:(ke=_.state.status,ke!==ie&&ke!==A&&ke!==Y&&ke!==K&&ke!==pe&&ke!==j&&ke!==ee?Oe(_,S):(_.state=null,ke===j?Oe(_,x):E))}function ot(_,ke){var Ie=ke.length,z,$e,Re,Qe,b,k,ne,Ee;if(!_||!_.state||(z=_.state,Qe=z.wrap,Qe===2||Qe===1&&z.status!==ie||z.lookahead))return S;for(Qe===1&&(_.adler=i(_.adler,ke,Ie,0)),z.wrap=0,Ie>=z.w_size&&(Qe===0&&(nt(z.head),z.strstart=0,z.block_start=0,z.insert=0),Ee=new r.Buf8(z.w_size),r.arraySet(Ee,ke,Ie-z.w_size,z.w_size,0),ke=Ee,Ie=z.w_size),b=_.avail_in,k=_.next_in,ne=_.input,_.avail_in=Ie,_.next_in=0,_.input=ke,se(z);z.lookahead>=fe;){$e=z.strstart,Re=z.lookahead-(fe-1);do z.ins_h=(z.ins_h<<z.hash_shift^z.window[$e+fe-1])&z.hash_mask,z.prev[$e&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=$e,$e++;while(--Re);z.strstart=$e,z.lookahead=fe-1,se(z)}return z.strstart+=z.lookahead,z.block_start=z.strstart,z.insert=z.lookahead,z.lookahead=0,z.match_length=z.prev_length=fe-1,z.match_available=0,_.next_in=k,_.input=ne,_.avail_in=b,z.wrap=Qe,E}return zn.deflateInit=ye,zn.deflateInit2=Z,zn.deflateReset=Q,zn.deflateResetKeep=R,zn.deflateSetHeader=le,zn.deflate=N,zn.deflateEnd=Be,zn.deflateSetDictionary=ot,zn.deflateInfo="pako deflate (from Nodeca project)",zn}var Sn={},UE,rk;function F2(){if(rk)return UE;rk=1;var r=30,n=12;return UE=function(s,a){var u,h,d,p,T,E,y,S,x,B,H,W,$,m,I,D,C,U,V,te,ae,de,we,q,J;u=s.state,h=s.next_in,q=s.input,d=h+(s.avail_in-5),p=s.next_out,J=s.output,T=p-(a-s.avail_out),E=p+(s.avail_out-257),y=u.dmax,S=u.wsize,x=u.whave,B=u.wnext,H=u.window,W=u.hold,$=u.bits,m=u.lencode,I=u.distcode,D=(1<<u.lenbits)-1,C=(1<<u.distbits)-1;e:do{$<15&&(W+=q[h++]<<$,$+=8,W+=q[h++]<<$,$+=8),U=m[W&D];t:for(;;){if(V=U>>>24,W>>>=V,$-=V,V=U>>>16&255,V===0)J[p++]=U&65535;else if(V&16){te=U&65535,V&=15,V&&($<V&&(W+=q[h++]<<$,$+=8),te+=W&(1<<V)-1,W>>>=V,$-=V),$<15&&(W+=q[h++]<<$,$+=8,W+=q[h++]<<$,$+=8),U=I[W&C];r:for(;;){if(V=U>>>24,W>>>=V,$-=V,V=U>>>16&255,V&16){if(ae=U&65535,V&=15,$<V&&(W+=q[h++]<<$,$+=8,$<V&&(W+=q[h++]<<$,$+=8)),ae+=W&(1<<V)-1,ae>y){s.msg="invalid distance too far back",u.mode=r;break e}if(W>>>=V,$-=V,V=p-T,ae>V){if(V=ae-V,V>x&&u.sane){s.msg="invalid distance too far back",u.mode=r;break e}if(de=0,we=H,B===0){if(de+=S-V,V<te){te-=V;do J[p++]=H[de++];while(--V);de=p-ae,we=J}}else if(B<V){if(de+=S+B-V,V-=B,V<te){te-=V;do J[p++]=H[de++];while(--V);if(de=0,B<te){V=B,te-=V;do J[p++]=H[de++];while(--V);de=p-ae,we=J}}}else if(de+=B-V,V<te){te-=V;do J[p++]=H[de++];while(--V);de=p-ae,we=J}for(;te>2;)J[p++]=we[de++],J[p++]=we[de++],J[p++]=we[de++],te-=3;te&&(J[p++]=we[de++],te>1&&(J[p++]=we[de++]))}else{de=p-ae;do J[p++]=J[de++],J[p++]=J[de++],J[p++]=J[de++],te-=3;while(te>2);te&&(J[p++]=J[de++],te>1&&(J[p++]=J[de++]))}}else if(V&64){s.msg="invalid distance code",u.mode=r;break e}else{U=I[(U&65535)+(W&(1<<V)-1)];continue r}break}}else if(V&64)if(V&32){u.mode=n;break e}else{s.msg="invalid literal/length code",u.mode=r;break e}else{U=m[(U&65535)+(W&(1<<V)-1)];continue t}break}}while(h<d&&p<E);te=$>>3,h-=te,$-=te<<3,W&=(1<<$)-1,s.next_in=h,s.next_out=p,s.avail_in=h<d?5+(d-h):5-(h-d),s.avail_out=p<E?257+(E-p):257-(p-E),u.hold=W,u.bits=$},UE}var HE,nk;function U2(){if(nk)return HE;nk=1;var r=fp(),n=15,i=852,s=592,a=0,u=1,h=2,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],E=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return HE=function(S,x,B,H,W,$,m,I){var D=I.bits,C=0,U=0,V=0,te=0,ae=0,de=0,we=0,q=0,J=0,G=0,X,ce,fe,re,ge,ue=null,ie=0,A,Y=new r.Buf16(n+1),K=new r.Buf16(n+1),pe=null,j=0,ee,me,Se;for(C=0;C<=n;C++)Y[C]=0;for(U=0;U<H;U++)Y[x[B+U]]++;for(ae=D,te=n;te>=1&&Y[te]===0;te--);if(ae>te&&(ae=te),te===0)return W[$++]=1<<24|64<<16|0,W[$++]=1<<24|64<<16|0,I.bits=1,0;for(V=1;V<te&&Y[V]===0;V++);for(ae<V&&(ae=V),q=1,C=1;C<=n;C++)if(q<<=1,q-=Y[C],q<0)return-1;if(q>0&&(S===a||te!==1))return-1;for(K[1]=0,C=1;C<n;C++)K[C+1]=K[C]+Y[C];for(U=0;U<H;U++)x[B+U]!==0&&(m[K[x[B+U]]++]=U);if(S===a?(ue=pe=m,A=19):S===u?(ue=d,ie-=257,pe=p,j-=257,A=256):(ue=T,pe=E,A=-1),G=0,U=0,C=V,ge=$,de=ae,we=0,fe=-1,J=1<<ae,re=J-1,S===u&&J>i||S===h&&J>s)return 1;for(;;){ee=C-we,m[U]<A?(me=0,Se=m[U]):m[U]>A?(me=pe[j+m[U]],Se=ue[ie+m[U]]):(me=32+64,Se=0),X=1<<C-we,ce=1<<de,V=ce;do ce-=X,W[ge+(G>>we)+ce]=ee<<24|me<<16|Se|0;while(ce!==0);for(X=1<<C-1;G&X;)X>>=1;if(X!==0?(G&=X-1,G+=X):G=0,U++,--Y[C]===0){if(C===te)break;C=x[B+m[U]]}if(C>ae&&(G&re)!==fe){for(we===0&&(we=ae),ge+=V,de=C-we,q=1<<de;de+we<te&&(q-=Y[de+we],!(q<=0));)de++,q<<=1;if(J+=1<<de,S===u&&J>i||S===h&&J>s)return 1;fe=G&re,W[fe]=ae<<24|de<<16|ge-$|0}}return G!==0&&(W[ge+G]=C-we<<24|64<<16|0),I.bits=ae,0},HE}var ik;function H2(){if(ik)return Sn;ik=1;var r=fp(),n=WN(),i=jN(),s=F2(),a=U2(),u=0,h=1,d=2,p=4,T=5,E=6,y=0,S=1,x=2,B=-2,H=-3,W=-4,$=-5,m=8,I=1,D=2,C=3,U=4,V=5,te=6,ae=7,de=8,we=9,q=10,J=11,G=12,X=13,ce=14,fe=15,re=16,ge=17,ue=18,ie=19,A=20,Y=21,K=22,pe=23,j=24,ee=25,me=26,Se=27,Ne=28,O=29,F=30,Oe=31,Ae=32,nt=852,P=592,v=15,w=v;function M(Z){return(Z>>>24&255)+(Z>>>8&65280)+((Z&65280)<<8)+((Z&255)<<24)}function Te(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Me(Z){var ye;return!Z||!Z.state?B:(ye=Z.state,Z.total_in=Z.total_out=ye.total=0,Z.msg="",ye.wrap&&(Z.adler=ye.wrap&1),ye.mode=I,ye.last=0,ye.havedict=0,ye.dmax=32768,ye.head=null,ye.hold=0,ye.bits=0,ye.lencode=ye.lendyn=new r.Buf32(nt),ye.distcode=ye.distdyn=new r.Buf32(P),ye.sane=1,ye.back=-1,y)}function se(Z){var ye;return!Z||!Z.state?B:(ye=Z.state,ye.wsize=0,ye.whave=0,ye.wnext=0,Me(Z))}function be(Z,ye){var N,Be;return!Z||!Z.state||(Be=Z.state,ye<0?(N=0,ye=-ye):(N=(ye>>4)+1,ye<48&&(ye&=15)),ye&&(ye<8||ye>15))?B:(Be.window!==null&&Be.wbits!==ye&&(Be.window=null),Be.wrap=N,Be.wbits=ye,se(Z))}function De(Z,ye){var N,Be;return Z?(Be=new Te,Z.state=Be,Be.window=null,N=be(Z,ye),N!==y&&(Z.state=null),N):B}function Fe(Z){return De(Z,w)}var Ge=!0,ze,Xe;function st(Z){if(Ge){var ye;for(ze=new r.Buf32(512),Xe=new r.Buf32(32),ye=0;ye<144;)Z.lens[ye++]=8;for(;ye<256;)Z.lens[ye++]=9;for(;ye<280;)Z.lens[ye++]=7;for(;ye<288;)Z.lens[ye++]=8;for(a(h,Z.lens,0,288,ze,0,Z.work,{bits:9}),ye=0;ye<32;)Z.lens[ye++]=5;a(d,Z.lens,0,32,Xe,0,Z.work,{bits:5}),Ge=!1}Z.lencode=ze,Z.lenbits=9,Z.distcode=Xe,Z.distbits=5}function oe(Z,ye,N,Be){var ot,_=Z.state;return _.window===null&&(_.wsize=1<<_.wbits,_.wnext=0,_.whave=0,_.window=new r.Buf8(_.wsize)),Be>=_.wsize?(r.arraySet(_.window,ye,N-_.wsize,_.wsize,0),_.wnext=0,_.whave=_.wsize):(ot=_.wsize-_.wnext,ot>Be&&(ot=Be),r.arraySet(_.window,ye,N-Be,ot,_.wnext),Be-=ot,Be?(r.arraySet(_.window,ye,N-Be,Be,0),_.wnext=Be,_.whave=_.wsize):(_.wnext+=ot,_.wnext===_.wsize&&(_.wnext=0),_.whave<_.wsize&&(_.whave+=ot))),0}function f(Z,ye){var N,Be,ot,_,ke,Ie,z,$e,Re,Qe,b,k,ne,Ee,Le=0,Ue,tt,gt,jt,Ye,Ht,lt,pr,Nt=new r.Buf8(4),Tr,Or,xr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Z||!Z.state||!Z.output||!Z.input&&Z.avail_in!==0)return B;N=Z.state,N.mode===G&&(N.mode=X),ke=Z.next_out,ot=Z.output,z=Z.avail_out,_=Z.next_in,Be=Z.input,Ie=Z.avail_in,$e=N.hold,Re=N.bits,Qe=Ie,b=z,pr=y;e:for(;;)switch(N.mode){case I:if(N.wrap===0){N.mode=X;break}for(;Re<16;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}if(N.wrap&2&&$e===35615){N.check=0,Nt[0]=$e&255,Nt[1]=$e>>>8&255,N.check=i(N.check,Nt,2,0),$e=0,Re=0,N.mode=D;break}if(N.flags=0,N.head&&(N.head.done=!1),!(N.wrap&1)||((($e&255)<<8)+($e>>8))%31){Z.msg="incorrect header check",N.mode=F;break}if(($e&15)!==m){Z.msg="unknown compression method",N.mode=F;break}if($e>>>=4,Re-=4,lt=($e&15)+8,N.wbits===0)N.wbits=lt;else if(lt>N.wbits){Z.msg="invalid window size",N.mode=F;break}N.dmax=1<<lt,Z.adler=N.check=1,N.mode=$e&512?q:G,$e=0,Re=0;break;case D:for(;Re<16;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}if(N.flags=$e,(N.flags&255)!==m){Z.msg="unknown compression method",N.mode=F;break}if(N.flags&57344){Z.msg="unknown header flags set",N.mode=F;break}N.head&&(N.head.text=$e>>8&1),N.flags&512&&(Nt[0]=$e&255,Nt[1]=$e>>>8&255,N.check=i(N.check,Nt,2,0)),$e=0,Re=0,N.mode=C;case C:for(;Re<32;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}N.head&&(N.head.time=$e),N.flags&512&&(Nt[0]=$e&255,Nt[1]=$e>>>8&255,Nt[2]=$e>>>16&255,Nt[3]=$e>>>24&255,N.check=i(N.check,Nt,4,0)),$e=0,Re=0,N.mode=U;case U:for(;Re<16;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}N.head&&(N.head.xflags=$e&255,N.head.os=$e>>8),N.flags&512&&(Nt[0]=$e&255,Nt[1]=$e>>>8&255,N.check=i(N.check,Nt,2,0)),$e=0,Re=0,N.mode=V;case V:if(N.flags&1024){for(;Re<16;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}N.length=$e,N.head&&(N.head.extra_len=$e),N.flags&512&&(Nt[0]=$e&255,Nt[1]=$e>>>8&255,N.check=i(N.check,Nt,2,0)),$e=0,Re=0}else N.head&&(N.head.extra=null);N.mode=te;case te:if(N.flags&1024&&(k=N.length,k>Ie&&(k=Ie),k&&(N.head&&(lt=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),r.arraySet(N.head.extra,Be,_,k,lt)),N.flags&512&&(N.check=i(N.check,Be,k,_)),Ie-=k,_+=k,N.length-=k),N.length))break e;N.length=0,N.mode=ae;case ae:if(N.flags&2048){if(Ie===0)break e;k=0;do lt=Be[_+k++],N.head&&lt&&N.length<65536&&(N.head.name+=String.fromCharCode(lt));while(lt&&k<Ie);if(N.flags&512&&(N.check=i(N.check,Be,k,_)),Ie-=k,_+=k,lt)break e}else N.head&&(N.head.name=null);N.length=0,N.mode=de;case de:if(N.flags&4096){if(Ie===0)break e;k=0;do lt=Be[_+k++],N.head&&lt&&N.length<65536&&(N.head.comment+=String.fromCharCode(lt));while(lt&&k<Ie);if(N.flags&512&&(N.check=i(N.check,Be,k,_)),Ie-=k,_+=k,lt)break e}else N.head&&(N.head.comment=null);N.mode=we;case we:if(N.flags&512){for(;Re<16;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}if($e!==(N.check&65535)){Z.msg="header crc mismatch",N.mode=F;break}$e=0,Re=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),Z.adler=N.check=0,N.mode=G;break;case q:for(;Re<32;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}Z.adler=N.check=M($e),$e=0,Re=0,N.mode=J;case J:if(N.havedict===0)return Z.next_out=ke,Z.avail_out=z,Z.next_in=_,Z.avail_in=Ie,N.hold=$e,N.bits=Re,x;Z.adler=N.check=1,N.mode=G;case G:if(ye===T||ye===E)break e;case X:if(N.last){$e>>>=Re&7,Re-=Re&7,N.mode=Se;break}for(;Re<3;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}switch(N.last=$e&1,$e>>>=1,Re-=1,$e&3){case 0:N.mode=ce;break;case 1:if(st(N),N.mode=A,ye===E){$e>>>=2,Re-=2;break e}break;case 2:N.mode=ge;break;case 3:Z.msg="invalid block type",N.mode=F}$e>>>=2,Re-=2;break;case ce:for($e>>>=Re&7,Re-=Re&7;Re<32;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}if(($e&65535)!==($e>>>16^65535)){Z.msg="invalid stored block lengths",N.mode=F;break}if(N.length=$e&65535,$e=0,Re=0,N.mode=fe,ye===E)break e;case fe:N.mode=re;case re:if(k=N.length,k){if(k>Ie&&(k=Ie),k>z&&(k=z),k===0)break e;r.arraySet(ot,Be,_,k,ke),Ie-=k,_+=k,z-=k,ke+=k,N.length-=k;break}N.mode=G;break;case ge:for(;Re<14;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}if(N.nlen=($e&31)+257,$e>>>=5,Re-=5,N.ndist=($e&31)+1,$e>>>=5,Re-=5,N.ncode=($e&15)+4,$e>>>=4,Re-=4,N.nlen>286||N.ndist>30){Z.msg="too many length or distance symbols",N.mode=F;break}N.have=0,N.mode=ue;case ue:for(;N.have<N.ncode;){for(;Re<3;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}N.lens[xr[N.have++]]=$e&7,$e>>>=3,Re-=3}for(;N.have<19;)N.lens[xr[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,Tr={bits:N.lenbits},pr=a(u,N.lens,0,19,N.lencode,0,N.work,Tr),N.lenbits=Tr.bits,pr){Z.msg="invalid code lengths set",N.mode=F;break}N.have=0,N.mode=ie;case ie:for(;N.have<N.nlen+N.ndist;){for(;Le=N.lencode[$e&(1<<N.lenbits)-1],Ue=Le>>>24,tt=Le>>>16&255,gt=Le&65535,!(Ue<=Re);){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}if(gt<16)$e>>>=Ue,Re-=Ue,N.lens[N.have++]=gt;else{if(gt===16){for(Or=Ue+2;Re<Or;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}if($e>>>=Ue,Re-=Ue,N.have===0){Z.msg="invalid bit length repeat",N.mode=F;break}lt=N.lens[N.have-1],k=3+($e&3),$e>>>=2,Re-=2}else if(gt===17){for(Or=Ue+3;Re<Or;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}$e>>>=Ue,Re-=Ue,lt=0,k=3+($e&7),$e>>>=3,Re-=3}else{for(Or=Ue+7;Re<Or;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}$e>>>=Ue,Re-=Ue,lt=0,k=11+($e&127),$e>>>=7,Re-=7}if(N.have+k>N.nlen+N.ndist){Z.msg="invalid bit length repeat",N.mode=F;break}for(;k--;)N.lens[N.have++]=lt}}if(N.mode===F)break;if(N.lens[256]===0){Z.msg="invalid code -- missing end-of-block",N.mode=F;break}if(N.lenbits=9,Tr={bits:N.lenbits},pr=a(h,N.lens,0,N.nlen,N.lencode,0,N.work,Tr),N.lenbits=Tr.bits,pr){Z.msg="invalid literal/lengths set",N.mode=F;break}if(N.distbits=6,N.distcode=N.distdyn,Tr={bits:N.distbits},pr=a(d,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,Tr),N.distbits=Tr.bits,pr){Z.msg="invalid distances set",N.mode=F;break}if(N.mode=A,ye===E)break e;case A:N.mode=Y;case Y:if(Ie>=6&&z>=258){Z.next_out=ke,Z.avail_out=z,Z.next_in=_,Z.avail_in=Ie,N.hold=$e,N.bits=Re,s(Z,b),ke=Z.next_out,ot=Z.output,z=Z.avail_out,_=Z.next_in,Be=Z.input,Ie=Z.avail_in,$e=N.hold,Re=N.bits,N.mode===G&&(N.back=-1);break}for(N.back=0;Le=N.lencode[$e&(1<<N.lenbits)-1],Ue=Le>>>24,tt=Le>>>16&255,gt=Le&65535,!(Ue<=Re);){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}if(tt&&!(tt&240)){for(jt=Ue,Ye=tt,Ht=gt;Le=N.lencode[Ht+(($e&(1<<jt+Ye)-1)>>jt)],Ue=Le>>>24,tt=Le>>>16&255,gt=Le&65535,!(jt+Ue<=Re);){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}$e>>>=jt,Re-=jt,N.back+=jt}if($e>>>=Ue,Re-=Ue,N.back+=Ue,N.length=gt,tt===0){N.mode=me;break}if(tt&32){N.back=-1,N.mode=G;break}if(tt&64){Z.msg="invalid literal/length code",N.mode=F;break}N.extra=tt&15,N.mode=K;case K:if(N.extra){for(Or=N.extra;Re<Or;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}N.length+=$e&(1<<N.extra)-1,$e>>>=N.extra,Re-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=pe;case pe:for(;Le=N.distcode[$e&(1<<N.distbits)-1],Ue=Le>>>24,tt=Le>>>16&255,gt=Le&65535,!(Ue<=Re);){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}if(!(tt&240)){for(jt=Ue,Ye=tt,Ht=gt;Le=N.distcode[Ht+(($e&(1<<jt+Ye)-1)>>jt)],Ue=Le>>>24,tt=Le>>>16&255,gt=Le&65535,!(jt+Ue<=Re);){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}$e>>>=jt,Re-=jt,N.back+=jt}if($e>>>=Ue,Re-=Ue,N.back+=Ue,tt&64){Z.msg="invalid distance code",N.mode=F;break}N.offset=gt,N.extra=tt&15,N.mode=j;case j:if(N.extra){for(Or=N.extra;Re<Or;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}N.offset+=$e&(1<<N.extra)-1,$e>>>=N.extra,Re-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){Z.msg="invalid distance too far back",N.mode=F;break}N.mode=ee;case ee:if(z===0)break e;if(k=b-z,N.offset>k){if(k=N.offset-k,k>N.whave&&N.sane){Z.msg="invalid distance too far back",N.mode=F;break}k>N.wnext?(k-=N.wnext,ne=N.wsize-k):ne=N.wnext-k,k>N.length&&(k=N.length),Ee=N.window}else Ee=ot,ne=ke-N.offset,k=N.length;k>z&&(k=z),z-=k,N.length-=k;do ot[ke++]=Ee[ne++];while(--k);N.length===0&&(N.mode=Y);break;case me:if(z===0)break e;ot[ke++]=N.length,z--,N.mode=Y;break;case Se:if(N.wrap){for(;Re<32;){if(Ie===0)break e;Ie--,$e|=Be[_++]<<Re,Re+=8}if(b-=z,Z.total_out+=b,N.total+=b,b&&(Z.adler=N.check=N.flags?i(N.check,ot,b,ke-b):n(N.check,ot,b,ke-b)),b=z,(N.flags?$e:M($e))!==N.check){Z.msg="incorrect data check",N.mode=F;break}$e=0,Re=0}N.mode=Ne;case Ne:if(N.wrap&&N.flags){for(;Re<32;){if(Ie===0)break e;Ie--,$e+=Be[_++]<<Re,Re+=8}if($e!==(N.total&4294967295)){Z.msg="incorrect length check",N.mode=F;break}$e=0,Re=0}N.mode=O;case O:pr=S;break e;case F:pr=H;break e;case Oe:return W;case Ae:default:return B}return Z.next_out=ke,Z.avail_out=z,Z.next_in=_,Z.avail_in=Ie,N.hold=$e,N.bits=Re,(N.wsize||b!==Z.avail_out&&N.mode<F&&(N.mode<Se||ye!==p))&&oe(Z,Z.output,Z.next_out,b-Z.avail_out),Qe-=Z.avail_in,b-=Z.avail_out,Z.total_in+=Qe,Z.total_out+=b,N.total+=b,N.wrap&&b&&(Z.adler=N.check=N.flags?i(N.check,ot,b,Z.next_out-b):n(N.check,ot,b,Z.next_out-b)),Z.data_type=N.bits+(N.last?64:0)+(N.mode===G?128:0)+(N.mode===A||N.mode===fe?256:0),(Qe===0&&b===0||ye===p)&&pr===y&&(pr=$),pr}function R(Z){if(!Z||!Z.state)return B;var ye=Z.state;return ye.window&&(ye.window=null),Z.state=null,y}function Q(Z,ye){var N;return!Z||!Z.state||(N=Z.state,!(N.wrap&2))?B:(N.head=ye,ye.done=!1,y)}function le(Z,ye){var N=ye.length,Be,ot,_;return!Z||!Z.state||(Be=Z.state,Be.wrap!==0&&Be.mode!==J)?B:Be.mode===J&&(ot=1,ot=n(ot,ye,N,0),ot!==Be.check)?H:(_=oe(Z,ye,N,N),_?(Be.mode=Oe,W):(Be.havedict=1,y))}return Sn.inflateReset=se,Sn.inflateReset2=be,Sn.inflateResetKeep=Me,Sn.inflateInit=Fe,Sn.inflateInit2=De,Sn.inflate=f,Sn.inflateEnd=R,Sn.inflateGetHeader=Q,Sn.inflateSetDictionary=le,Sn.inflateInfo="pako inflate (from Nodeca project)",Sn}var GE,ok;function G2(){return ok||(ok=1,GE={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),GE}var sk;function V2(){return sk||(sk=1,function(r){var n=Nf(),i=M2(),s=B2(),a=H2(),u=G2();for(var h in u)r[h]=u[h];r.NONE=0,r.DEFLATE=1,r.INFLATE=2,r.GZIP=3,r.GUNZIP=4,r.DEFLATERAW=5,r.INFLATERAW=6,r.UNZIP=7;var d=31,p=139;function T(E){if(typeof E!="number"||E<r.DEFLATE||E>r.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=E,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}T.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,n(this.init_done,"close before init"),n(this.mode<=r.UNZIP),this.mode===r.DEFLATE||this.mode===r.GZIP||this.mode===r.DEFLATERAW?s.deflateEnd(this.strm):(this.mode===r.INFLATE||this.mode===r.GUNZIP||this.mode===r.INFLATERAW||this.mode===r.UNZIP)&&a.inflateEnd(this.strm),this.mode=r.NONE,this.dictionary=null},T.prototype.write=function(E,y,S,x,B,H,W){return this._write(!0,E,y,S,x,B,H,W)},T.prototype.writeSync=function(E,y,S,x,B,H,W){return this._write(!1,E,y,S,x,B,H,W)},T.prototype._write=function(E,y,S,x,B,H,W,$){if(n.equal(arguments.length,8),n(this.init_done,"write before init"),n(this.mode!==r.NONE,"already finalized"),n.equal(!1,this.write_in_progress,"write already in progress"),n.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,n.equal(!1,y===void 0,"must provide flush value"),this.write_in_progress=!0,y!==r.Z_NO_FLUSH&&y!==r.Z_PARTIAL_FLUSH&&y!==r.Z_SYNC_FLUSH&&y!==r.Z_FULL_FLUSH&&y!==r.Z_FINISH&&y!==r.Z_BLOCK)throw new Error("Invalid flush value");if(S==null&&(S=_t.Buffer.alloc(0),B=0,x=0),this.strm.avail_in=B,this.strm.input=S,this.strm.next_in=x,this.strm.avail_out=$,this.strm.output=H,this.strm.next_out=W,this.flush=y,!E)return this._process(),this._checkError()?this._afterSync():void 0;var m=this;return Ve.nextTick(function(){m._process(),m._after()}),this},T.prototype._afterSync=function(){var E=this.strm.avail_out,y=this.strm.avail_in;return this.write_in_progress=!1,[y,E]},T.prototype._process=function(){var E=null;switch(this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case r.UNZIP:switch(this.strm.avail_in>0&&(E=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(E===null)break;if(this.strm.input[E]===d){if(this.gzip_id_bytes_read=1,E++,this.strm.avail_in===1)break}else{this.mode=r.INFLATE;break}case 1:if(E===null)break;this.strm.input[E]===p?(this.gzip_id_bytes_read=2,this.mode=r.GUNZIP):this.mode=r.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:for(this.err=a.inflate(this.strm,this.flush),this.err===r.Z_NEED_DICT&&this.dictionary&&(this.err=a.inflateSetDictionary(this.strm,this.dictionary),this.err===r.Z_OK?this.err=a.inflate(this.strm,this.flush):this.err===r.Z_DATA_ERROR&&(this.err=r.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===r.GUNZIP&&this.err===r.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=a.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},T.prototype._checkError=function(){switch(this.err){case r.Z_OK:case r.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===r.Z_FINISH)return this._error("unexpected end of file"),!1;break;case r.Z_STREAM_END:break;case r.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},T.prototype._after=function(){if(this._checkError()){var E=this.strm.avail_out,y=this.strm.avail_in;this.write_in_progress=!1,this.callback(y,E),this.pending_close&&this.close()}},T.prototype._error=function(E){this.strm.msg&&(E=this.strm.msg),this.onerror(E,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},T.prototype.init=function(E,y,S,x,B){n(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),n(E>=8&&E<=15,"invalid windowBits"),n(y>=-1&&y<=9,"invalid compression level"),n(S>=1&&S<=9,"invalid memlevel"),n(x===r.Z_FILTERED||x===r.Z_HUFFMAN_ONLY||x===r.Z_RLE||x===r.Z_FIXED||x===r.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(y,E,S,x,B),this._setDictionary()},T.prototype.params=function(){throw new Error("deflateParams Not supported")},T.prototype.reset=function(){this._reset(),this._setDictionary()},T.prototype._init=function(E,y,S,x,B){switch(this.level=E,this.windowBits=y,this.memLevel=S,this.strategy=x,this.flush=r.Z_NO_FLUSH,this.err=r.Z_OK,(this.mode===r.GZIP||this.mode===r.GUNZIP)&&(this.windowBits+=16),this.mode===r.UNZIP&&(this.windowBits+=32),(this.mode===r.DEFLATERAW||this.mode===r.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new i,this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,r.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:case r.UNZIP:this.err=a.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==r.Z_OK&&this._error("Init error"),this.dictionary=B,this.write_in_progress=!1,this.init_done=!0},T.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=r.Z_OK,this.mode){case r.DEFLATE:case r.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary);break}this.err!==r.Z_OK&&this._error("Failed to set dictionary")}},T.prototype._reset=function(){switch(this.err=r.Z_OK,this.mode){case r.DEFLATE:case r.DEFLATERAW:case r.GZIP:this.err=s.deflateReset(this.strm);break;case r.INFLATE:case r.INFLATERAW:case r.GUNZIP:this.err=a.inflateReset(this.strm);break}this.err!==r.Z_OK&&this._error("Failed to reset stream")},r.Zlib=T}(mE)),mE}var lk;function W2(){return lk||(lk=1,function(r){var n=_t.Buffer,i=S2().Transform,s=V2(),a=Nr,u=Nf().ok,h=_t.kMaxLength,d="Cannot create final Buffer. It would be larger than 0x"+h.toString(16)+" bytes";s.Z_MIN_WINDOWBITS=8,s.Z_MAX_WINDOWBITS=15,s.Z_DEFAULT_WINDOWBITS=15,s.Z_MIN_CHUNK=64,s.Z_MAX_CHUNK=1/0,s.Z_DEFAULT_CHUNK=16*1024,s.Z_MIN_MEMLEVEL=1,s.Z_MAX_MEMLEVEL=9,s.Z_DEFAULT_MEMLEVEL=8,s.Z_MIN_LEVEL=-1,s.Z_MAX_LEVEL=9,s.Z_DEFAULT_LEVEL=s.Z_DEFAULT_COMPRESSION;for(var p=Object.keys(s),T=0;T<p.length;T++){var E=p[T];E.match(/^Z/)&&Object.defineProperty(r,E,{enumerable:!0,value:s[E],writable:!1})}for(var y={Z_OK:s.Z_OK,Z_STREAM_END:s.Z_STREAM_END,Z_NEED_DICT:s.Z_NEED_DICT,Z_ERRNO:s.Z_ERRNO,Z_STREAM_ERROR:s.Z_STREAM_ERROR,Z_DATA_ERROR:s.Z_DATA_ERROR,Z_MEM_ERROR:s.Z_MEM_ERROR,Z_BUF_ERROR:s.Z_BUF_ERROR,Z_VERSION_ERROR:s.Z_VERSION_ERROR},S=Object.keys(y),x=0;x<S.length;x++){var B=S[x];y[y[B]]=B}Object.defineProperty(r,"codes",{enumerable:!0,value:Object.freeze(y),writable:!1}),r.Deflate=$,r.Inflate=m,r.Gzip=I,r.Gunzip=D,r.DeflateRaw=C,r.InflateRaw=U,r.Unzip=V,r.createDeflate=function(q){return new $(q)},r.createInflate=function(q){return new m(q)},r.createDeflateRaw=function(q){return new C(q)},r.createInflateRaw=function(q){return new U(q)},r.createGzip=function(q){return new I(q)},r.createGunzip=function(q){return new D(q)},r.createUnzip=function(q){return new V(q)},r.deflate=function(q,J,G){return typeof J=="function"&&(G=J,J={}),H(new $(J),q,G)},r.deflateSync=function(q,J){return W(new $(J),q)},r.gzip=function(q,J,G){return typeof J=="function"&&(G=J,J={}),H(new I(J),q,G)},r.gzipSync=function(q,J){return W(new I(J),q)},r.deflateRaw=function(q,J,G){return typeof J=="function"&&(G=J,J={}),H(new C(J),q,G)},r.deflateRawSync=function(q,J){return W(new C(J),q)},r.unzip=function(q,J,G){return typeof J=="function"&&(G=J,J={}),H(new V(J),q,G)},r.unzipSync=function(q,J){return W(new V(J),q)},r.inflate=function(q,J,G){return typeof J=="function"&&(G=J,J={}),H(new m(J),q,G)},r.inflateSync=function(q,J){return W(new m(J),q)},r.gunzip=function(q,J,G){return typeof J=="function"&&(G=J,J={}),H(new D(J),q,G)},r.gunzipSync=function(q,J){return W(new D(J),q)},r.inflateRaw=function(q,J,G){return typeof J=="function"&&(G=J,J={}),H(new U(J),q,G)},r.inflateRawSync=function(q,J){return W(new U(J),q)};function H(q,J,G){var X=[],ce=0;q.on("error",re),q.on("end",ge),q.end(J),fe();function fe(){for(var ue;(ue=q.read())!==null;)X.push(ue),ce+=ue.length;q.once("readable",fe)}function re(ue){q.removeListener("end",ge),q.removeListener("readable",fe),G(ue)}function ge(){var ue,ie=null;ce>=h?ie=new RangeError(d):ue=n.concat(X,ce),X=[],q.close(),G(ie,ue)}}function W(q,J){if(typeof J=="string"&&(J=n.from(J)),!n.isBuffer(J))throw new TypeError("Not a string or buffer");var G=q._finishFlushFlag;return q._processChunk(J,G)}function $(q){if(!(this instanceof $))return new $(q);ae.call(this,q,s.DEFLATE)}function m(q){if(!(this instanceof m))return new m(q);ae.call(this,q,s.INFLATE)}function I(q){if(!(this instanceof I))return new I(q);ae.call(this,q,s.GZIP)}function D(q){if(!(this instanceof D))return new D(q);ae.call(this,q,s.GUNZIP)}function C(q){if(!(this instanceof C))return new C(q);ae.call(this,q,s.DEFLATERAW)}function U(q){if(!(this instanceof U))return new U(q);ae.call(this,q,s.INFLATERAW)}function V(q){if(!(this instanceof V))return new V(q);ae.call(this,q,s.UNZIP)}function te(q){return q===s.Z_NO_FLUSH||q===s.Z_PARTIAL_FLUSH||q===s.Z_SYNC_FLUSH||q===s.Z_FULL_FLUSH||q===s.Z_FINISH||q===s.Z_BLOCK}function ae(q,J){var G=this;if(this._opts=q=q||{},this._chunkSize=q.chunkSize||r.Z_DEFAULT_CHUNK,i.call(this,q),q.flush&&!te(q.flush))throw new Error("Invalid flush flag: "+q.flush);if(q.finishFlush&&!te(q.finishFlush))throw new Error("Invalid flush flag: "+q.finishFlush);if(this._flushFlag=q.flush||s.Z_NO_FLUSH,this._finishFlushFlag=typeof q.finishFlush<"u"?q.finishFlush:s.Z_FINISH,q.chunkSize&&(q.chunkSize<r.Z_MIN_CHUNK||q.chunkSize>r.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+q.chunkSize);if(q.windowBits&&(q.windowBits<r.Z_MIN_WINDOWBITS||q.windowBits>r.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+q.windowBits);if(q.level&&(q.level<r.Z_MIN_LEVEL||q.level>r.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+q.level);if(q.memLevel&&(q.memLevel<r.Z_MIN_MEMLEVEL||q.memLevel>r.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+q.memLevel);if(q.strategy&&q.strategy!=r.Z_FILTERED&&q.strategy!=r.Z_HUFFMAN_ONLY&&q.strategy!=r.Z_RLE&&q.strategy!=r.Z_FIXED&&q.strategy!=r.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+q.strategy);if(q.dictionary&&!n.isBuffer(q.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new s.Zlib(J);var X=this;this._hadError=!1,this._handle.onerror=function(re,ge){de(X),X._hadError=!0;var ue=new Error(re);ue.errno=ge,ue.code=r.codes[ge],X.emit("error",ue)};var ce=r.Z_DEFAULT_COMPRESSION;typeof q.level=="number"&&(ce=q.level);var fe=r.Z_DEFAULT_STRATEGY;typeof q.strategy=="number"&&(fe=q.strategy),this._handle.init(q.windowBits||r.Z_DEFAULT_WINDOWBITS,ce,q.memLevel||r.Z_DEFAULT_MEMLEVEL,fe,q.dictionary),this._buffer=n.allocUnsafe(this._chunkSize),this._offset=0,this._level=ce,this._strategy=fe,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!G._handle},configurable:!0,enumerable:!0})}a.inherits(ae,i),ae.prototype.params=function(q,J,G){if(q<r.Z_MIN_LEVEL||q>r.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+q);if(J!=r.Z_FILTERED&&J!=r.Z_HUFFMAN_ONLY&&J!=r.Z_RLE&&J!=r.Z_FIXED&&J!=r.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+J);if(this._level!==q||this._strategy!==J){var X=this;this.flush(s.Z_SYNC_FLUSH,function(){u(X._handle,"zlib binding closed"),X._handle.params(q,J),X._hadError||(X._level=q,X._strategy=J,G&&G())})}else Ve.nextTick(G)},ae.prototype.reset=function(){return u(this._handle,"zlib binding closed"),this._handle.reset()},ae.prototype._flush=function(q){this._transform(n.alloc(0),"",q)},ae.prototype.flush=function(q,J){var G=this,X=this._writableState;(typeof q=="function"||q===void 0&&!J)&&(J=q,q=s.Z_FULL_FLUSH),X.ended?J&&Ve.nextTick(J):X.ending?J&&this.once("end",J):X.needDrain?J&&this.once("drain",function(){return G.flush(q,J)}):(this._flushFlag=q,this.write(n.alloc(0),"",J))},ae.prototype.close=function(q){de(this,q),Ve.nextTick(we,this)};function de(q,J){J&&Ve.nextTick(J),q._handle&&(q._handle.close(),q._handle=null)}function we(q){q.emit("close")}ae.prototype._transform=function(q,J,G){var X,ce=this._writableState,fe=ce.ending||ce.ended,re=fe&&(!q||ce.length===q.length);if(q!==null&&!n.isBuffer(q))return G(new Error("invalid input"));if(!this._handle)return G(new Error("zlib binding closed"));re?X=this._finishFlushFlag:(X=this._flushFlag,q.length>=ce.length&&(this._flushFlag=this._opts.flush||s.Z_NO_FLUSH)),this._processChunk(q,X,G)},ae.prototype._processChunk=function(q,J,G){var X=q&&q.length,ce=this._chunkSize-this._offset,fe=0,re=this,ge=typeof G=="function";if(!ge){var ue=[],ie=0,A;this.on("error",function(ee){A=ee}),u(this._handle,"zlib binding closed");do var Y=this._handle.writeSync(J,q,fe,X,this._buffer,this._offset,ce);while(!this._hadError&&j(Y[0],Y[1]));if(this._hadError)throw A;if(ie>=h)throw de(this),new RangeError(d);var K=n.concat(ue,ie);return de(this),K}u(this._handle,"zlib binding closed");var pe=this._handle.write(J,q,fe,X,this._buffer,this._offset,ce);pe.buffer=q,pe.callback=j;function j(ee,me){if(this&&(this.buffer=null,this.callback=null),!re._hadError){var Se=ce-me;if(u(Se>=0,"have should not go down"),Se>0){var Ne=re._buffer.slice(re._offset,re._offset+Se);re._offset+=Se,ge?re.push(Ne):(ue.push(Ne),ie+=Ne.length)}if((me===0||re._offset>=re._chunkSize)&&(ce=re._chunkSize,re._offset=0,re._buffer=n.allocUnsafe(re._chunkSize)),me===0){if(fe+=X-ee,X=ee,!ge)return!0;var O=re._handle.write(J,q,fe,X,re._buffer,re._offset,re._chunkSize);O.callback=j,O.buffer=q;return}if(!ge)return!1;G()}}},a.inherits($,ae),a.inherits(m,ae),a.inherits(I,ae),a.inherits(D,ae),a.inherits(C,ae),a.inherits(U,ae),a.inherits(V,ae)}(fE)),fE}var yv={exports:{}};(function(r,n){n=r.exports=Qb(),n.Stream=n,n.Readable=n,n.Writable=up(),n.Duplex=Ks(),n.Transform=ry,n.PassThrough=NN,n.finished=ap,n.pipeline=DN})(yv,yv.exports);var tl=yv.exports,zN={exports:{}},ca=[],oc=[],wv=function(){};function ny(r){return~ca.indexOf(r)?!1:(ca.push(r),!0)}function iy(r){wv=r}function j2(r){for(var n=[],i=0;i<ca.length;i++){if(ca[i].async){n.push(ca[i]);continue}if(ca[i](r))return!0}return n.length?new Promise(function(a){Promise.all(n.map(function(h){return h(r)})).then(function(h){a(h.some(Boolean))})}):!1}function oy(r){return~oc.indexOf(r)?!1:(oc.push(r),!0)}function Sv(){wv.apply(wv,arguments)}function XN(r){for(var n=0;n<oc.length;n++)r=oc[n].apply(oc[n],arguments);return r}function sy(r,n){var i=Object.prototype.hasOwnProperty;for(var s in n)i.call(n,s)&&(r[s]=n[s]);return r}function z2(r){return r.enabled=!1,r.modify=oy,r.set=iy,r.use=ny,sy(function(){return!1},r)}function X2(r){function n(){var i=Array.prototype.slice.call(arguments,0);return Sv.call(Sv,r,XN(i,r)),!0}return r.enabled=!0,r.modify=oy,r.set=iy,r.use=ny,sy(n,r)}var Y2=function(n){return n.introduce=sy,n.enabled=j2,n.process=XN,n.modify=oy,n.write=Sv,n.nope=z2,n.yep=X2,n.set=iy,n.use=ny,n},K2=Y2,q2=K2(function r(n,i){return i=i||{},i.namespace=n,i.prod=!0,i.dev=!1,i.force||r.force?r.yep(i):r.nope(i)}),Z2=q2;zN.exports=Z2;var pp=zN.exports,VE,ak;function J2(){if(ak)return VE;ak=1;var r=IN,n=hv(),i=n.StringDecoder,s=tl,a=s.Stream;function u(){}return VE=function(h,d){var p=_t.Buffer.alloc(65536),T=new i("utf8"),E=new a,y="",S=0,x=0;return h.start===-1&&delete h.start,E.readable=!0,E.destroy=function(){E.destroyed=!0,E.emit("end"),E.emit("close")},r.open(h.file,"a+","0644",function(B,H){if(B){d?d(B):E.emit("error",B),E.destroy();return}(function W(){if(E.destroyed){r.close(H,u);return}return r.read(H,p,0,p.length,S,function($,m){if($){d?d($):E.emit("error",$),E.destroy();return}if(!m)return y&&((h.start==null||x>h.start)&&(d?d(null,y):E.emit("line",y)),x++,y=""),setTimeout(W,1e3);var I=T.write(p.slice(0,m));d||E.emit("data",I),I=(y+I).split(/\n+/);for(var D=I.length-1,C=0;C<D;C++)(h.start==null||x>h.start)&&(d?d(null,I[C]):E.emit("line",I[C])),x++;return y=I[D],S+=m,W()})})()}),d?E.destroy:E},VE}var WE,uk;function Q2(){if(uk)return WE;uk=1;function r(de){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},r(de)}function n(de,we){if(!(de instanceof we))throw new TypeError("Cannot call a class as a function")}function i(de,we){for(var q=0;q<we.length;q++){var J=we[q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(de,a(J.key),J)}}function s(de,we,q){return we&&i(de.prototype,we),q&&i(de,q),Object.defineProperty(de,"prototype",{writable:!1}),de}function a(de){var we=u(de,"string");return r(we)==="symbol"?we:String(we)}function u(de,we){if(r(de)!=="object"||de===null)return de;var q=de[Symbol.toPrimitive];if(q!==void 0){var J=q.call(de,we||"default");if(r(J)!=="object")return J;throw new TypeError("@@toPrimitive must return a primitive value.")}return(we==="string"?String:Number)(de)}function h(de,we){if(typeof we!="function"&&we!==null)throw new TypeError("Super expression must either be null or a function");de.prototype=Object.create(we&&we.prototype,{constructor:{value:de,writable:!0,configurable:!0}}),Object.defineProperty(de,"prototype",{writable:!1}),we&&d(de,we)}function d(de,we){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(J,G){return J.__proto__=G,J},d(de,we)}function p(de){var we=y();return function(){var J=S(de),G;if(we){var X=S(this).constructor;G=Reflect.construct(J,arguments,X)}else G=J.apply(this,arguments);return T(this,G)}}function T(de,we){if(we&&(r(we)==="object"||typeof we=="function"))return we;if(we!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(de)}function E(de){if(de===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(de){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(q){return q.__proto__||Object.getPrototypeOf(q)},S(de)}var x=IN,B=ON,H=c2(),W=W2(),$=nr,m=$.MESSAGE,I=tl,D=I.Stream,C=I.PassThrough,U=el(),V=pp("winston:file"),te=qt,ae=J2();return WE=function(de){h(q,de);var we=p(q);function q(){var J,G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n(this,q),J=we.call(this,G),J.name=G.name||"file";function X(ce){for(var fe=arguments.length,re=new Array(fe>1?fe-1:0),ge=1;ge<fe;ge++)re[ge-1]=arguments[ge];re.slice(1).forEach(function(ue){if(G[ue])throw new Error("Cannot set ".concat(ue," and ").concat(ce," together"))})}if(J._stream=new C,J._stream.setMaxListeners(30),J._onError=J._onError.bind(E(J)),G.filename||G.dirname)X("filename or dirname","stream"),J._basename=J.filename=G.filename?B.basename(G.filename):"winston.log",J.dirname=G.dirname||B.dirname(G.filename),J.options=G.options||{flags:"a"};else if(G.stream)console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),X("stream","filename","maxsize"),J._dest=J._stream.pipe(J._setupStream(G.stream)),J.dirname=B.dirname(J._dest.path);else throw new Error("Cannot log to file without filename or stream.");return J.maxsize=G.maxsize||null,J.rotationFormat=G.rotationFormat||!1,J.zippedArchive=G.zippedArchive||!1,J.maxFiles=G.maxFiles||null,J.eol=typeof G.eol=="string"?G.eol:te.EOL,J.tailable=G.tailable||!1,J._size=0,J._pendingSize=0,J._created=0,J._drain=!1,J._opening=!1,J._ending=!1,J.dirname&&J._createLogDirIfNotExist(J.dirname),J.open(),J}return s(q,[{key:"finishIfEnding",value:function(){var G=this;this._ending&&(this._opening?this.once("open",function(){G._stream.once("finish",function(){return G.emit("finish")}),setImmediate(function(){return G._stream.end()})}):(this._stream.once("finish",function(){return G.emit("finish")}),setImmediate(function(){return G._stream.end()})))}},{key:"log",value:function(G){var X=this,ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};if(this.silent)return ce(),!0;if(this._drain){this._stream.once("drain",function(){X._drain=!1,X.log(G,ce)});return}if(this._rotate){this._stream.once("rotate",function(){X._rotate=!1,X.log(G,ce)});return}var fe="".concat(G[m]).concat(this.eol),re=_t.Buffer.byteLength(fe);function ge(){var ie=this;this._size+=re,this._pendingSize-=re,V("logged %s %s",this._size,fe),this.emit("logged",G),!this._rotate&&(this._opening||this._needsNewFile()&&(this._rotate=!0,this._endStream(function(){return ie._rotateFile()})))}this._pendingSize+=re,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);var ue=this._stream.write(fe,ge.bind(this));return ue?ce():(this._drain=!0,this._stream.once("drain",function(){X._drain=!1,ce()})),V("written",ue,this._drain),this.finishIfEnding(),ue}},{key:"query",value:function(G,X){typeof G=="function"&&(X=G,G={}),G=K(G);var ce=B.join(this.dirname,this.filename),fe="",re=[],ge=0,ue=x.createReadStream(ce,{encoding:"utf8"});ue.on("error",function(pe){if(ue.readable&&ue.destroy(),!!X)return pe.code!=="ENOENT"?X(pe):X(null,re)}),ue.on("data",function(pe){pe=(fe+pe).split(/\n+/);for(var j=pe.length-1,ee=0;ee<j;ee++)(!G.start||ge>=G.start)&&ie(pe[ee]),ge++;fe=pe[j]}),ue.on("close",function(){fe&&ie(fe,!0),G.order==="desc"&&(re=re.reverse()),X&&X(null,re)});function ie(pe,j){try{var ee=JSON.parse(pe);Y(ee)&&A(ee)}catch(me){j||ue.emit("error",me)}}function A(pe){if(G.rows&&re.length>=G.rows&&G.order!=="desc"){ue.readable&&ue.destroy();return}G.fields&&(pe=G.fields.reduce(function(j,ee){return j[ee]=pe[ee],j},{})),G.order==="desc"&&re.length>=G.rows&&re.shift(),re.push(pe)}function Y(pe){if(pe&&r(pe)==="object"){var j=new Date(pe.timestamp);if(!(G.from&&j<G.from||G.until&&j>G.until||G.level&&G.level!==pe.level))return!0}}function K(pe){return pe=pe||{},pe.rows=pe.rows||pe.limit||10,pe.start=pe.start||0,pe.until=pe.until||new Date,r(pe.until)!=="object"&&(pe.until=new Date(pe.until)),pe.from=pe.from||pe.until-24*60*60*1e3,r(pe.from)!=="object"&&(pe.from=new Date(pe.from)),pe.order=pe.order||"desc",pe}}},{key:"stream",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=B.join(this.dirname,this.filename),ce=new D,fe={file:X,start:G.start};return ce.destroy=ae(fe,function(re,ge){if(re)return ce.emit("error",re);try{ce.emit("data",ge),ge=JSON.parse(ge),ce.emit("log",ge)}catch(ue){ce.emit("error",ue)}}),ce}},{key:"open",value:function(){var G=this;this.filename&&(this._opening||(this._opening=!0,this.stat(function(X,ce){if(X)return G.emit("error",X);V("stat done: %s { size: %s }",G.filename,ce),G._size=ce,G._dest=G._createStream(G._stream),G._opening=!1,G.once("open",function(){G._stream.eventNames().includes("rotate")?G._stream.emit("rotate"):G._rotate=!1})})))}},{key:"stat",value:function(G){var X=this,ce=this._getFile(),fe=B.join(this.dirname,ce);x.stat(fe,function(re,ge){if(re&&re.code==="ENOENT")return V("ENOENTok",fe),X.filename=ce,G(null,0);if(re)return V("err ".concat(re.code," ").concat(fe)),G(re);if(!ge||X._needsNewFile(ge.size))return X._incFile(function(){return X.stat(G)});X.filename=ce,G(null,ge.size)})}},{key:"close",value:function(G){var X=this;this._stream&&this._stream.end(function(){G&&G(),X.emit("flush"),X.emit("closed")})}},{key:"_needsNewFile",value:function(G){return G=G||this._size,this.maxsize&&G>=this.maxsize}},{key:"_onError",value:function(G){this.emit("error",G)}},{key:"_setupStream",value:function(G){return G.on("error",this._onError),G}},{key:"_cleanupStream",value:function(G){return G.removeListener("error",this._onError),G.destroy(),G}},{key:"_rotateFile",value:function(){var G=this;this._incFile(function(){return G.open()})}},{key:"_endStream",value:function(){var G=this,X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};this._dest?(this._stream.unpipe(this._dest),this._dest.end(function(){G._cleanupStream(G._dest),X()})):X()}},{key:"_createStream",value:function(G){var X=this,ce=B.join(this.dirname,this.filename);V("create stream start",ce,this.options);var fe=x.createWriteStream(ce,this.options).on("error",function(ge){return V(ge)}).on("close",function(){return V("close",fe.path,fe.bytesWritten)}).on("open",function(){V("file open ok",ce),X.emit("open",ce),G.pipe(fe),X.rotatedWhileOpening&&(X._stream=new C,X._stream.setMaxListeners(30),X._rotateFile(),X.rotatedWhileOpening=!1,X._cleanupStream(fe),G.end())});if(V("create stream ok",ce),this.zippedArchive){var re=W.createGzip();return re.pipe(fe),re}return fe}},{key:"_incFile",value:function(G){V("_incFile",this.filename);var X=B.extname(this._basename),ce=B.basename(this._basename,X);this.tailable?this._checkMaxFilesTailable(X,ce,G):(this._created+=1,this._checkMaxFilesIncrementing(X,ce,G))}},{key:"_getFile",value:function(){var G=B.extname(this._basename),X=B.basename(this._basename,G),ce=this.rotationFormat?this.rotationFormat():this._created,fe=!this.tailable&&this._created?"".concat(X).concat(ce).concat(G):"".concat(X).concat(G);return this.zippedArchive&&!this.tailable?"".concat(fe,".gz"):fe}},{key:"_checkMaxFilesIncrementing",value:function(G,X,ce){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(ce);var fe=this._created-this.maxFiles,re=fe!==0?fe:"",ge=this.zippedArchive?".gz":"",ue="".concat(X).concat(re).concat(G).concat(ge),ie=B.join(this.dirname,ue);x.unlink(ie,ce)}},{key:"_checkMaxFilesTailable",value:function(G,X,ce){var fe=this,re=[];if(this.maxFiles){for(var ge=this.zippedArchive?".gz":"",ue=this.maxFiles-1;ue>1;ue--)re.push((function(ie,A){var Y=this,K="".concat(X).concat(ie-1).concat(G).concat(ge),pe=B.join(this.dirname,K);x.exists(pe,function(j){if(!j)return A(null);K="".concat(X).concat(ie).concat(G).concat(ge),x.rename(pe,B.join(Y.dirname,K),A)})}).bind(this,ue));H(re,function(){x.rename(B.join(fe.dirname,"".concat(X).concat(G)),B.join(fe.dirname,"".concat(X,"1").concat(G).concat(ge)),ce)})}}},{key:"_createLogDirIfNotExist",value:function(G){x.existsSync(G)||x.mkdirSync(G,{recursive:!0})}}]),q}(U),WE}var jE={},zE={exports:{}},XE={},ck;function YN(){return ck||(ck=1,function(r){r.fetch=a(ut.fetch)&&a(ut.ReadableStream),r.writableStream=a(ut.WritableStream),r.abortController=a(ut.AbortController);var n;function i(){if(n!==void 0)return n;if(ut.XMLHttpRequest){n=new ut.XMLHttpRequest;try{n.open("GET",ut.XDomainRequest?"/":"https://example.com")}catch{n=null}}else n=null;return n}function s(u){var h=i();if(!h)return!1;try{return h.responseType=u,h.responseType===u}catch{}return!1}r.arraybuffer=r.fetch||s("arraybuffer"),r.msstream=!r.fetch&&s("ms-stream"),r.mozchunkedarraybuffer=!r.fetch&&s("moz-chunked-arraybuffer"),r.overrideMimeType=r.fetch||(i()?a(i().overrideMimeType):!1);function a(u){return typeof u=="function"}n=null}(XE)),XE}var Ld={},hk;function KN(){if(hk)return Ld;hk=1;var r=YN(),n=co,i=tl,s=Ld.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},a=Ld.IncomingMessage=function(u,h,d,p){var T=this;if(i.Readable.call(T),T._mode=d,T.headers={},T.rawHeaders=[],T.trailers={},T.rawTrailers=[],T.on("end",function(){Ve.nextTick(function(){T.emit("close")})}),d==="fetch"){let W=function(){y.read().then(function($){if(!T._destroyed){if(p($.done),$.done){T.push(null);return}T.push(_t.Buffer.from($.value)),W()}}).catch(function($){p(!0),T._destroyed||T.emit("error",$)})};var H=W;if(T._fetchResponse=h,T.url=h.url,T.statusCode=h.status,T.statusMessage=h.statusText,h.headers.forEach(function($,m){T.headers[m.toLowerCase()]=$,T.rawHeaders.push(m,$)}),r.writableStream){var E=new WritableStream({write:function($){return p(!1),new Promise(function(m,I){T._destroyed?I():T.push(_t.Buffer.from($))?m():T._resumeFetch=m})},close:function(){p(!0),T._destroyed||T.push(null)},abort:function($){p(!0),T._destroyed||T.emit("error",$)}});try{h.body.pipeTo(E).catch(function($){p(!0),T._destroyed||T.emit("error",$)});return}catch{}}var y=h.body.getReader();W()}else{T._xhr=u,T._pos=0,T.url=u.responseURL,T.statusCode=u.status,T.statusMessage=u.statusText;var S=u.getAllResponseHeaders().split(/\r?\n/);if(S.forEach(function(W){var $=W.match(/^([^:]+):\s*(.*)/);if($){var m=$[1].toLowerCase();m==="set-cookie"?(T.headers[m]===void 0&&(T.headers[m]=[]),T.headers[m].push($[2])):T.headers[m]!==void 0?T.headers[m]+=", "+$[2]:T.headers[m]=$[2],T.rawHeaders.push($[1],$[2])}}),T._charset="x-user-defined",!r.overrideMimeType){var x=T.rawHeaders["mime-type"];if(x){var B=x.match(/;\s*charset=([^;])(;|$)/);B&&(T._charset=B[1].toLowerCase())}T._charset||(T._charset="utf-8")}}};return n(a,i.Readable),a.prototype._read=function(){var u=this,h=u._resumeFetch;h&&(u._resumeFetch=null,h())},a.prototype._onXHRProgress=function(u){var h=this,d=h._xhr,p=null;switch(h._mode){case"text":if(p=d.responseText,p.length>h._pos){var T=p.substr(h._pos);if(h._charset==="x-user-defined"){for(var E=_t.Buffer.alloc(T.length),y=0;y<T.length;y++)E[y]=T.charCodeAt(y)&255;h.push(E)}else h.push(T,h._charset);h._pos=p.length}break;case"arraybuffer":if(d.readyState!==s.DONE||!d.response)break;p=d.response,h.push(_t.Buffer.from(new Uint8Array(p)));break;case"moz-chunked-arraybuffer":if(p=d.response,d.readyState!==s.LOADING||!p)break;h.push(_t.Buffer.from(new Uint8Array(p)));break;case"ms-stream":if(p=d.response,d.readyState!==s.LOADING)break;var S=new ut.MSStreamReader;S.onprogress=function(){S.result.byteLength>h._pos&&(h.push(_t.Buffer.from(new Uint8Array(S.result.slice(h._pos)))),h._pos=S.result.byteLength)},S.onload=function(){u(!0),h.push(null)},S.readAsArrayBuffer(p);break}h._xhr.readyState===s.DONE&&h._mode!=="ms-stream"&&(u(!0),h.push(null))},Ld}var dk;function eG(){if(dk)return zE.exports;dk=1;var r=YN(),n=co,i=KN(),s=tl,a=i.IncomingMessage,u=i.readyStates;function h(E,y){return r.fetch&&y?"fetch":r.mozchunkedarraybuffer?"moz-chunked-arraybuffer":r.msstream?"ms-stream":r.arraybuffer&&E?"arraybuffer":"text"}var d=zE.exports=function(E){var y=this;s.Writable.call(y),y._opts=E,y._body=[],y._headers={},E.auth&&y.setHeader("Authorization","Basic "+_t.Buffer.from(E.auth).toString("base64")),Object.keys(E.headers).forEach(function(B){y.setHeader(B,E.headers[B])});var S,x=!0;if(E.mode==="disable-fetch"||"requestTimeout"in E&&!r.abortController)x=!1,S=!0;else if(E.mode==="prefer-streaming")S=!1;else if(E.mode==="allow-wrong-content-type")S=!r.overrideMimeType;else if(!E.mode||E.mode==="default"||E.mode==="prefer-fast")S=!0;else throw new Error("Invalid value for opts.mode");y._mode=h(S,x),y._fetchTimer=null,y._socketTimeout=null,y._socketTimer=null,y.on("finish",function(){y._onFinish()})};n(d,s.Writable),d.prototype.setHeader=function(E,y){var S=this,x=E.toLowerCase();T.indexOf(x)===-1&&(S._headers[x]={name:E,value:y})},d.prototype.getHeader=function(E){var y=this._headers[E.toLowerCase()];return y?y.value:null},d.prototype.removeHeader=function(E){var y=this;delete y._headers[E.toLowerCase()]},d.prototype._onFinish=function(){var E=this;if(!E._destroyed){var y=E._opts;"timeout"in y&&y.timeout!==0&&E.setTimeout(y.timeout);var S=E._headers,x=null;y.method!=="GET"&&y.method!=="HEAD"&&(x=new Blob(E._body,{type:(S["content-type"]||{}).value||""}));var B=[];if(Object.keys(S).forEach(function(m){var I=S[m].name,D=S[m].value;Array.isArray(D)?D.forEach(function(C){B.push([I,C])}):B.push([I,D])}),E._mode==="fetch"){var H=null;if(r.abortController){var W=new AbortController;H=W.signal,E._fetchAbortController=W,"requestTimeout"in y&&y.requestTimeout!==0&&(E._fetchTimer=ut.setTimeout(function(){E.emit("requestTimeout"),E._fetchAbortController&&E._fetchAbortController.abort()},y.requestTimeout))}ut.fetch(E._opts.url,{method:E._opts.method,headers:B,body:x||void 0,mode:"cors",credentials:y.withCredentials?"include":"same-origin",signal:H}).then(function(m){E._fetchResponse=m,E._resetTimers(!1),E._connect()},function(m){E._resetTimers(!0),E._destroyed||E.emit("error",m)})}else{var $=E._xhr=new ut.XMLHttpRequest;try{$.open(E._opts.method,E._opts.url,!0)}catch(m){Ve.nextTick(function(){E.emit("error",m)});return}"responseType"in $&&($.responseType=E._mode),"withCredentials"in $&&($.withCredentials=!!y.withCredentials),E._mode==="text"&&"overrideMimeType"in $&&$.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in y&&($.timeout=y.requestTimeout,$.ontimeout=function(){E.emit("requestTimeout")}),B.forEach(function(m){$.setRequestHeader(m[0],m[1])}),E._response=null,$.onreadystatechange=function(){switch($.readyState){case u.LOADING:case u.DONE:E._onXHRProgress();break}},E._mode==="moz-chunked-arraybuffer"&&($.onprogress=function(){E._onXHRProgress()}),$.onerror=function(){E._destroyed||(E._resetTimers(!0),E.emit("error",new Error("XHR error")))};try{$.send(x)}catch(m){Ve.nextTick(function(){E.emit("error",m)});return}}}};function p(E){try{var y=E.status;return y!==null&&y!==0}catch{return!1}}d.prototype._onXHRProgress=function(){var E=this;E._resetTimers(!1),!(!p(E._xhr)||E._destroyed)&&(E._response||E._connect(),E._response._onXHRProgress(E._resetTimers.bind(E)))},d.prototype._connect=function(){var E=this;E._destroyed||(E._response=new a(E._xhr,E._fetchResponse,E._mode,E._resetTimers.bind(E)),E._response.on("error",function(y){E.emit("error",y)}),E.emit("response",E._response))},d.prototype._write=function(E,y,S){var x=this;x._body.push(E),S()},d.prototype._resetTimers=function(E){var y=this;ut.clearTimeout(y._socketTimer),y._socketTimer=null,E?(ut.clearTimeout(y._fetchTimer),y._fetchTimer=null):y._socketTimeout&&(y._socketTimer=ut.setTimeout(function(){y.emit("timeout")},y._socketTimeout))},d.prototype.abort=d.prototype.destroy=function(E){var y=this;y._destroyed=!0,y._resetTimers(!0),y._response&&(y._response._destroyed=!0),y._xhr?y._xhr.abort():y._fetchAbortController&&y._fetchAbortController.abort(),E&&y.emit("error",E)},d.prototype.end=function(E,y,S){var x=this;typeof E=="function"&&(S=E,E=void 0),s.Writable.prototype.end.call(x,E,y,S)},d.prototype.setTimeout=function(E,y){var S=this;y&&S.once("timeout",y),S._socketTimeout=E,S._resetTimers(!1)},d.prototype.flushHeaders=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var T=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"];return zE.exports}var YE,fk;function tG(){if(fk)return YE;fk=1,YE=n;var r=Object.prototype.hasOwnProperty;function n(){for(var i={},s=0;s<arguments.length;s++){var a=arguments[s];for(var u in a)r.call(a,u)&&(i[u]=a[u])}return i}return YE}var KE,pk;function rG(){return pk||(pk=1,KE={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}),KE}var xf={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */xf.exports;(function(r,n){(function(i){var s=n&&!n.nodeType&&n,a=r&&!r.nodeType&&r,u=typeof ut=="object"&&ut;(u.global===u||u.window===u||u.self===u)&&(i=u);var h,d=2147483647,p=36,T=1,E=26,y=38,S=700,x=72,B=128,H="-",W=/^xn--/,$=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=p-T,C=Math.floor,U=String.fromCharCode,V;function te(ue){throw new RangeError(I[ue])}function ae(ue,ie){for(var A=ue.length,Y=[];A--;)Y[A]=ie(ue[A]);return Y}function de(ue,ie){var A=ue.split("@"),Y="";A.length>1&&(Y=A[0]+"@",ue=A[1]),ue=ue.replace(m,".");var K=ue.split("."),pe=ae(K,ie).join(".");return Y+pe}function we(ue){for(var ie=[],A=0,Y=ue.length,K,pe;A<Y;)K=ue.charCodeAt(A++),K>=55296&&K<=56319&&A<Y?(pe=ue.charCodeAt(A++),(pe&64512)==56320?ie.push(((K&1023)<<10)+(pe&1023)+65536):(ie.push(K),A--)):ie.push(K);return ie}function q(ue){return ae(ue,function(ie){var A="";return ie>65535&&(ie-=65536,A+=U(ie>>>10&1023|55296),ie=56320|ie&1023),A+=U(ie),A}).join("")}function J(ue){return ue-48<10?ue-22:ue-65<26?ue-65:ue-97<26?ue-97:p}function G(ue,ie){return ue+22+75*(ue<26)-((ie!=0)<<5)}function X(ue,ie,A){var Y=0;for(ue=A?C(ue/S):ue>>1,ue+=C(ue/ie);ue>D*E>>1;Y+=p)ue=C(ue/D);return C(Y+(D+1)*ue/(ue+y))}function ce(ue){var ie=[],A=ue.length,Y,K=0,pe=B,j=x,ee,me,Se,Ne,O,F,Oe,Ae,nt;for(ee=ue.lastIndexOf(H),ee<0&&(ee=0),me=0;me<ee;++me)ue.charCodeAt(me)>=128&&te("not-basic"),ie.push(ue.charCodeAt(me));for(Se=ee>0?ee+1:0;Se<A;){for(Ne=K,O=1,F=p;Se>=A&&te("invalid-input"),Oe=J(ue.charCodeAt(Se++)),(Oe>=p||Oe>C((d-K)/O))&&te("overflow"),K+=Oe*O,Ae=F<=j?T:F>=j+E?E:F-j,!(Oe<Ae);F+=p)nt=p-Ae,O>C(d/nt)&&te("overflow"),O*=nt;Y=ie.length+1,j=X(K-Ne,Y,Ne==0),C(K/Y)>d-pe&&te("overflow"),pe+=C(K/Y),K%=Y,ie.splice(K++,0,pe)}return q(ie)}function fe(ue){var ie,A,Y,K,pe,j,ee,me,Se,Ne,O,F=[],Oe,Ae,nt,P;for(ue=we(ue),Oe=ue.length,ie=B,A=0,pe=x,j=0;j<Oe;++j)O=ue[j],O<128&&F.push(U(O));for(Y=K=F.length,K&&F.push(H);Y<Oe;){for(ee=d,j=0;j<Oe;++j)O=ue[j],O>=ie&&O<ee&&(ee=O);for(Ae=Y+1,ee-ie>C((d-A)/Ae)&&te("overflow"),A+=(ee-ie)*Ae,ie=ee,j=0;j<Oe;++j)if(O=ue[j],O<ie&&++A>d&&te("overflow"),O==ie){for(me=A,Se=p;Ne=Se<=pe?T:Se>=pe+E?E:Se-pe,!(me<Ne);Se+=p)P=me-Ne,nt=p-Ne,F.push(U(G(Ne+P%nt,0))),me=C(P/nt);F.push(U(G(me,0))),pe=X(A,Ae,Y==K),A=0,++Y}++A,++ie}return F.join("")}function re(ue){return de(ue,function(ie){return W.test(ie)?ce(ie.slice(4).toLowerCase()):ie})}function ge(ue){return de(ue,function(ie){return $.test(ie)?"xn--"+fe(ie):ie})}if(h={version:"1.4.1",ucs2:{decode:we,encode:q},decode:ce,encode:fe,toASCII:ge,toUnicode:re},s&&a)if(r.exports==s)a.exports=h;else for(V in h)h.hasOwnProperty(V)&&(s[V]=h[V]);else i.punycode=h})(ut)})(xf,xf.exports);var nG=xf.exports;const iG=qs(nG);function oG(r,n){return Object.prototype.hasOwnProperty.call(r,n)}var sG=function(r,n,i,s){n=n||"&",i=i||"=";var a={};if(typeof r!="string"||r.length===0)return a;var u=/\+/g;r=r.split(n);var h=1e3;s&&typeof s.maxKeys=="number"&&(h=s.maxKeys);var d=r.length;h>0&&d>h&&(d=h);for(var p=0;p<d;++p){var T=r[p].replace(u,"%20"),E=T.indexOf(i),y,S,x,B;E>=0?(y=T.substr(0,E),S=T.substr(E+1)):(y=T,S=""),x=decodeURIComponent(y),B=decodeURIComponent(S),oG(a,x)?lG(a[x])?a[x].push(B):a[x]=[a[x],B]:a[x]=B}return a},lG=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"},Hu=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},aG=function(r,n,i,s){return n=n||"&",i=i||"=",r===null&&(r=void 0),typeof r=="object"?gk(cG(r),function(a){var u=encodeURIComponent(Hu(a))+i;return uG(r[a])?gk(r[a],function(h){return u+encodeURIComponent(Hu(h))}).join(n):u+encodeURIComponent(Hu(r[a]))}).join(n):s?encodeURIComponent(Hu(s))+i+encodeURIComponent(Hu(r)):""},uG=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function gk(r,n){if(r.map)return r.map(n);for(var i=[],s=0;s<r.length;s++)i.push(n(r[s],s));return i}var cG=Object.keys||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&n.push(i);return n},qN,ZN,hG=ZN=sG,dG=qN=aG;function fG(r){return encodeURIComponent(r)}function pG(r){return decodeURIComponent(r)}var gG={decode:hG,encode:dG,parse:ZN,stringify:qN,escape:fG,unescape:pG},mG={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}},$G=iG,Ii=mG,_G=Pc,EG=AG,JN=LG,TG=CG,vG=An;function An(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var bG=/^([a-z0-9.+-]+:)/i,yG=/:[0-9]*$/,wG=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,SG=["<",">",'"',"`"," ","\r",`
`,"	"],IG=["{","}","|","\\","^","`"].concat(SG),Iv=["'"].concat(IG),mk=["%","/","?",";","#"].concat(Iv),$k=["/","?","#"],OG=255,_k=/^[+a-z0-9A-Z_-]{0,63}$/,RG=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,kG={javascript:!0,"javascript:":!0},Ov={javascript:!0,"javascript:":!0},ba={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Rv=gG;function Pc(r,n,i){if(r&&Ii.isObject(r)&&r instanceof An)return r;var s=new An;return s.parse(r,n,i),s}An.prototype.parse=function(r,n,i){if(!Ii.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var s=r.indexOf("?"),a=s!==-1&&s<r.indexOf("#")?"?":"#",u=r.split(a),h=/\\/g;u[0]=u[0].replace(h,"/"),r=u.join(a);var d=r;if(d=d.trim(),!i&&r.split("#").length===1){var p=wG.exec(d);if(p)return this.path=d,this.href=d,this.pathname=p[1],p[2]?(this.search=p[2],n?this.query=Rv.parse(this.search.substr(1)):this.query=this.search.substr(1)):n&&(this.search="",this.query={}),this}var T=bG.exec(d);if(T){T=T[0];var E=T.toLowerCase();this.protocol=E,d=d.substr(T.length)}if(i||T||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var y=d.substr(0,2)==="//";y&&!(T&&Ov[T])&&(d=d.substr(2),this.slashes=!0)}if(!Ov[T]&&(y||T&&!ba[T])){for(var S=-1,x=0;x<$k.length;x++){var B=d.indexOf($k[x]);B!==-1&&(S===-1||B<S)&&(S=B)}var H,W;S===-1?W=d.lastIndexOf("@"):W=d.lastIndexOf("@",S),W!==-1&&(H=d.slice(0,W),d=d.slice(W+1),this.auth=decodeURIComponent(H)),S=-1;for(var x=0;x<mk.length;x++){var B=d.indexOf(mk[x]);B!==-1&&(S===-1||B<S)&&(S=B)}S===-1&&(S=d.length),this.host=d.slice(0,S),d=d.slice(S),this.parseHost(),this.hostname=this.hostname||"";var $=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!$)for(var m=this.hostname.split(/\./),x=0,I=m.length;x<I;x++){var D=m[x];if(D&&!D.match(_k)){for(var C="",U=0,V=D.length;U<V;U++)D.charCodeAt(U)>127?C+="x":C+=D[U];if(!C.match(_k)){var te=m.slice(0,x),ae=m.slice(x+1),de=D.match(RG);de&&(te.push(de[1]),ae.unshift(de[2])),ae.length&&(d="/"+ae.join(".")+d),this.hostname=te.join(".");break}}}this.hostname.length>OG?this.hostname="":this.hostname=this.hostname.toLowerCase(),$||(this.hostname=$G.toASCII(this.hostname));var we=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+we,this.href+=this.host,$&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),d[0]!=="/"&&(d="/"+d))}if(!kG[E])for(var x=0,I=Iv.length;x<I;x++){var J=Iv[x];if(d.indexOf(J)!==-1){var G=encodeURIComponent(J);G===J&&(G=escape(J)),d=d.split(J).join(G)}}var X=d.indexOf("#");X!==-1&&(this.hash=d.substr(X),d=d.slice(0,X));var ce=d.indexOf("?");if(ce!==-1?(this.search=d.substr(ce),this.query=d.substr(ce+1),n&&(this.query=Rv.parse(this.query)),d=d.slice(0,ce)):n&&(this.search="",this.query={}),d&&(this.pathname=d),ba[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var we=this.pathname||"",fe=this.search||"";this.path=we+fe}return this.href=this.format(),this};function CG(r){return Ii.isString(r)&&(r=Pc(r)),r instanceof An?r.format():An.prototype.format.call(r)}An.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var n=this.protocol||"",i=this.pathname||"",s=this.hash||"",a=!1,u="";this.host?a=r+this.host:this.hostname&&(a=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&Ii.isObject(this.query)&&Object.keys(this.query).length&&(u=Rv.stringify(this.query));var h=this.search||u&&"?"+u||"";return n&&n.substr(-1)!==":"&&(n+=":"),this.slashes||(!n||ba[n])&&a!==!1?(a="//"+(a||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):a||(a=""),s&&s.charAt(0)!=="#"&&(s="#"+s),h&&h.charAt(0)!=="?"&&(h="?"+h),i=i.replace(/[?#]/g,function(d){return encodeURIComponent(d)}),h=h.replace("#","%23"),n+a+i+h+s};function AG(r,n){return Pc(r,!1,!0).resolve(n)}An.prototype.resolve=function(r){return this.resolveObject(Pc(r,!1,!0)).format()};function LG(r,n){return r?Pc(r,!1,!0).resolveObject(n):n}An.prototype.resolveObject=function(r){if(Ii.isString(r)){var n=new An;n.parse(r,!1,!0),r=n}for(var i=new An,s=Object.keys(this),a=0;a<s.length;a++){var u=s[a];i[u]=this[u]}if(i.hash=r.hash,r.href==="")return i.href=i.format(),i;if(r.slashes&&!r.protocol){for(var h=Object.keys(r),d=0;d<h.length;d++){var p=h[d];p!=="protocol"&&(i[p]=r[p])}return ba[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(r.protocol&&r.protocol!==i.protocol){if(!ba[r.protocol]){for(var T=Object.keys(r),E=0;E<T.length;E++){var y=T[E];i[y]=r[y]}return i.href=i.format(),i}if(i.protocol=r.protocol,!r.host&&!Ov[r.protocol]){for(var I=(r.pathname||"").split("/");I.length&&!(r.host=I.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),I[0]!==""&&I.unshift(""),I.length<2&&I.unshift(""),i.pathname=I.join("/")}else i.pathname=r.pathname;if(i.search=r.search,i.query=r.query,i.host=r.host||"",i.auth=r.auth,i.hostname=r.hostname||r.host,i.port=r.port,i.pathname||i.search){var S=i.pathname||"",x=i.search||"";i.path=S+x}return i.slashes=i.slashes||r.slashes,i.href=i.format(),i}var B=i.pathname&&i.pathname.charAt(0)==="/",H=r.host||r.pathname&&r.pathname.charAt(0)==="/",W=H||B||i.host&&r.pathname,$=W,m=i.pathname&&i.pathname.split("/")||[],I=r.pathname&&r.pathname.split("/")||[],D=i.protocol&&!ba[i.protocol];if(D&&(i.hostname="",i.port=null,i.host&&(m[0]===""?m[0]=i.host:m.unshift(i.host)),i.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(I[0]===""?I[0]=r.host:I.unshift(r.host)),r.host=null),W=W&&(I[0]===""||m[0]==="")),H)i.host=r.host||r.host===""?r.host:i.host,i.hostname=r.hostname||r.hostname===""?r.hostname:i.hostname,i.search=r.search,i.query=r.query,m=I;else if(I.length)m||(m=[]),m.pop(),m=m.concat(I),i.search=r.search,i.query=r.query;else if(!Ii.isNullOrUndefined(r.search)){if(D){i.hostname=i.host=m.shift();var C=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;C&&(i.auth=C.shift(),i.host=i.hostname=C.shift())}return i.search=r.search,i.query=r.query,(!Ii.isNull(i.pathname)||!Ii.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!m.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var U=m.slice(-1)[0],V=(i.host||r.host||m.length>1)&&(U==="."||U==="..")||U==="",te=0,ae=m.length;ae>=0;ae--)U=m[ae],U==="."?m.splice(ae,1):U===".."?(m.splice(ae,1),te++):te&&(m.splice(ae,1),te--);if(!W&&!$)for(;te--;te)m.unshift("..");W&&m[0]!==""&&(!m[0]||m[0].charAt(0)!=="/")&&m.unshift(""),V&&m.join("/").substr(-1)!=="/"&&m.push("");var de=m[0]===""||m[0]&&m[0].charAt(0)==="/";if(D){i.hostname=i.host=de?"":m.length?m.shift():"";var C=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;C&&(i.auth=C.shift(),i.host=i.hostname=C.shift())}return W=W||i.host&&m.length,W&&!de&&m.unshift(""),m.length?i.pathname=m.join("/"):(i.pathname=null,i.path=null),(!Ii.isNull(i.pathname)||!Ii.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=r.auth||i.auth,i.slashes=i.slashes||r.slashes,i.href=i.format(),i};An.prototype.parseHost=function(){var r=this.host,n=yG.exec(r);n&&(n=n[0],n!==":"&&(this.port=n.substr(1)),r=r.substr(0,r.length-n.length)),r&&(this.hostname=r)};function NG(r,n){for(var i=0,s=r.length-1;s>=0;s--){var a=r[s];a==="."?r.splice(s,1):a===".."?(r.splice(s,1),i++):i&&(r.splice(s,1),i--)}if(n)for(;i--;i)r.unshift("..");return r}function xG(){for(var r="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var s=i>=0?arguments[i]:"/";if(typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)continue;r=s+"/"+r,n=s.charAt(0)==="/"}return r=NG(MG(r.split("/"),function(a){return!!a}),!n).join("/"),(n?"/":"")+r||"."}function MG(r,n){if(r.filter)return r.filter(n);for(var i=[],s=0;s<r.length;s++)n(r[s],s,r)&&i.push(r[s]);return i}var QN=function(r){function n(){var s=this||self;return delete r.prototype.__magic__,s}if(typeof globalThis=="object")return globalThis;if(this)return n();r.defineProperty(r.prototype,"__magic__",{configurable:!0,get:n});var i=__magic__;return i}(Object),DG=TG,ex=_G,tx=EG,rx=vG,Jo=QN.URL,nx=QN.URLSearchParams,PG=/%/g,BG=/\\/g,FG=/\n/g,UG=/\r/g,HG=/\t/g,GG=47;function VG(r){var n=r??null;return!!(n!==null&&(n!=null&&n.href)&&(n!=null&&n.origin))}function WG(r){if(r.hostname!=="")throw new TypeError('File URL host must be "localhost" or empty on browser');for(var n=r.pathname,i=0;i<n.length;i++)if(n[i]==="%"){var s=n.codePointAt(i+2)|32;if(n[i+1]==="2"&&s===102)throw new TypeError("File URL path must not include encoded / characters")}return decodeURIComponent(n)}function jG(r){return r.includes("%")&&(r=r.replace(PG,"%25")),r.includes("\\")&&(r=r.replace(BG,"%5C")),r.includes(`
`)&&(r=r.replace(FG,"%0A")),r.includes("\r")&&(r=r.replace(UG,"%0D")),r.includes("	")&&(r=r.replace(HG,"%09")),r}var ix=function(n){if(typeof n>"u")throw new TypeError('The "domain" argument must be specified');return new Jo("http://"+n).hostname},ox=function(n){if(typeof n>"u")throw new TypeError('The "domain" argument must be specified');return new Jo("http://"+n).hostname},sx=function(n){var i=new Jo("file://"),s=xG(n),a=n.charCodeAt(n.length-1);return a===GG&&s[s.length-1]!=="/"&&(s+="/"),i.pathname=jG(s),i},lx=function(n){if(!VG(n)&&typeof n!="string")throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof n+" ("+n+")");var i=new Jo(n);if(i.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return WG(i)},ax=function(n,i){var s,a,u;if(i===void 0&&(i={}),!(n instanceof Jo))return DG(n);if(typeof i!="object"||i===null)throw new TypeError('The "options" argument must be of type object.');var h=(s=i.auth)!=null?s:!0,d=(a=i.fragment)!=null?a:!0,p=(u=i.search)!=null?u:!0,T=new Jo(n.toString());return h||(T.username="",T.password=""),d||(T.hash=""),p||(T.search=""),T.toString()},zG={format:ax,parse:ex,resolve:tx,resolveObject:JN,Url:rx,URL:Jo,URLSearchParams:nx,domainToASCII:ix,domainToUnicode:ox,pathToFileURL:sx,fileURLToPath:lx};const XG=Object.freeze(Object.defineProperty({__proto__:null,URL:Jo,URLSearchParams:nx,Url:rx,default:zG,domainToASCII:ix,domainToUnicode:ox,fileURLToPath:lx,format:ax,parse:ex,pathToFileURL:sx,resolve:tx,resolveObject:JN},Symbol.toStringTag,{value:"Module"})),ux=Pv(XG);var Ek;function cx(){return Ek||(Ek=1,function(r){var n=eG(),i=KN(),s=tG(),a=rG(),u=ux,h=r;h.request=function(d,p){typeof d=="string"?d=u.parse(d):d=s(d);var T=ut.location.protocol.search(/^https?:$/)===-1?"http:":"",E=d.protocol||T,y=d.hostname||d.host,S=d.port,x=d.path||"/";y&&y.indexOf(":")!==-1&&(y="["+y+"]"),d.url=(y?E+"//"+y:"")+(S?":"+S:"")+x,d.method=(d.method||"GET").toUpperCase(),d.headers=d.headers||{};var B=new n(d);return p&&B.on("response",p),B},h.get=function(p,T){var E=h.request(p,T);return E.end(),E},h.ClientRequest=n,h.IncomingMessage=i.IncomingMessage,h.Agent=function(){},h.Agent.defaultMaxSockets=4,h.globalAgent=new h.Agent,h.STATUS_CODES=a,h.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}(jE)),jE}var qE={exports:{}},Tk;function YG(){return Tk||(Tk=1,function(r){var n=cx(),i=ux,s=r.exports;for(var a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);s.request=function(h,d){return h=u(h),n.request.call(this,h,d)},s.get=function(h,d){return h=u(h),n.get.call(this,h,d)};function u(h){if(typeof h=="string"&&(h=i.parse(h)),h.protocol||(h.protocol="https:"),h.protocol!=="https:")throw new Error('Protocol "'+h.protocol+'" not supported. Expected "https:"');return h}}(qE)),qE.exports}var ZE,vk;function KG(){if(vk)return ZE;vk=1;function r(U){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},r(U)}function n(U,V){var te=Object.keys(U);if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(U);V&&(ae=ae.filter(function(de){return Object.getOwnPropertyDescriptor(U,de).enumerable})),te.push.apply(te,ae)}return te}function i(U){for(var V=1;V<arguments.length;V++){var te=arguments[V]!=null?arguments[V]:{};V%2?n(Object(te),!0).forEach(function(ae){s(U,ae,te[ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(te)):n(Object(te)).forEach(function(ae){Object.defineProperty(U,ae,Object.getOwnPropertyDescriptor(te,ae))})}return U}function s(U,V,te){return V=d(V),V in U?Object.defineProperty(U,V,{value:te,enumerable:!0,configurable:!0,writable:!0}):U[V]=te,U}function a(U,V){if(!(U instanceof V))throw new TypeError("Cannot call a class as a function")}function u(U,V){for(var te=0;te<V.length;te++){var ae=V[te];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(U,d(ae.key),ae)}}function h(U,V,te){return V&&u(U.prototype,V),te&&u(U,te),Object.defineProperty(U,"prototype",{writable:!1}),U}function d(U){var V=p(U,"string");return r(V)==="symbol"?V:String(V)}function p(U,V){if(r(U)!=="object"||U===null)return U;var te=U[Symbol.toPrimitive];if(te!==void 0){var ae=te.call(U,V||"default");if(r(ae)!=="object")return ae;throw new TypeError("@@toPrimitive must return a primitive value.")}return(V==="string"?String:Number)(U)}function T(U,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(V&&V.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),V&&E(U,V)}function E(U,V){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ae,de){return ae.__proto__=de,ae},E(U,V)}function y(U){var V=B();return function(){var ae=H(U),de;if(V){var we=H(this).constructor;de=Reflect.construct(ae,arguments,we)}else de=ae.apply(this,arguments);return S(this,de)}}function S(U,V){if(V&&(r(V)==="object"||typeof V=="function"))return V;if(V!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(U)}function x(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function B(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function H(U){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(te){return te.__proto__||Object.getPrototypeOf(te)},H(U)}var W=cx(),$=YG(),m=tl,I=m.Stream,D=el(),C=Mc;return ZE=function(U){T(te,U);var V=y(te);function te(){var ae,de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return a(this,te),ae=V.call(this,de),ae.options=de,ae.name=de.name||"http",ae.ssl=!!de.ssl,ae.host=de.host||"localhost",ae.port=de.port,ae.auth=de.auth,ae.path=de.path||"",ae.agent=de.agent,ae.headers=de.headers||{},ae.headers["content-type"]="application/json",ae.batch=de.batch||!1,ae.batchInterval=de.batchInterval||5e3,ae.batchCount=de.batchCount||10,ae.batchOptions=[],ae.batchTimeoutID=-1,ae.batchCallback={},ae.port||(ae.port=ae.ssl?443:80),ae}return h(te,[{key:"log",value:function(de,we){var q=this;this._request(de,null,null,function(J,G){G&&G.statusCode!==200&&(J=new Error("Invalid HTTP Status Code: ".concat(G.statusCode))),J?q.emit("warn",J):q.emit("logged",de)}),we&&setImmediate(we)}},{key:"query",value:function(de,we){typeof de=="function"&&(we=de,de={}),de={method:"query",params:this.normalizeQuery(de)};var q=de.params.auth||null;delete de.params.auth;var J=de.params.path||null;delete de.params.path,this._request(de,q,J,function(G,X,ce){if(X&&X.statusCode!==200&&(G=new Error("Invalid HTTP Status Code: ".concat(X.statusCode))),G)return we(G);if(typeof ce=="string")try{ce=JSON.parse(ce)}catch(fe){return we(fe)}we(null,ce)})}},{key:"stream",value:function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},we=new I;de={method:"stream",params:de};var q=de.params.path||null;delete de.params.path;var J=de.params.auth||null;delete de.params.auth;var G="",X=this._request(de,J,q);return we.destroy=function(){return X.destroy()},X.on("data",function(ce){ce=(G+ce).split(/\n+/);for(var fe=ce.length-1,re=0;re<fe;re++)try{we.emit("log",JSON.parse(ce[re]))}catch(ge){we.emit("error",ge)}G=ce[fe]}),X.on("error",function(ce){return we.emit("error",ce)}),we}},{key:"_request",value:function(de,we,q,J){de=de||{},we=we||this.auth,q=q||this.path||"",this.batch?this._doBatch(de,J,we,q):this._doRequest(de,J,we,q)}},{key:"_doBatch",value:function(de,we,q,J){if(this.batchOptions.push(de),this.batchOptions.length===1){var G=this;this.batchCallback=we,this.batchTimeoutID=setTimeout(function(){G.batchTimeoutID=-1,G._doBatchRequest(G.batchCallback,q,J)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,q,J)}},{key:"_doBatchRequest",value:function(de,we,q){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);var J=this.batchOptions.slice();this.batchOptions=[],this._doRequest(J,de,we,q)}},{key:"_doRequest",value:function(de,we,q,J){var G=Object.assign({},this.headers);q&&q.bearer&&(G.Authorization="Bearer ".concat(q.bearer));var X=(this.ssl?$:W).request(i(i({},this.options),{},{method:"POST",host:this.host,port:this.port,path:"/".concat(J.replace(/^\//,"")),headers:G,auth:q&&q.username&&q.password?"".concat(q.username,":").concat(q.password):"",agent:this.agent}));X.on("error",we),X.on("response",function(ce){return ce.on("end",function(){return we(null,ce)}).resume()}),X.end(_t.Buffer.from(C(de,this.options.replacer),"utf8"))}}]),te}(D),ZE}const Ai=r=>r!==null&&typeof r=="object"&&typeof r.pipe=="function";Ai.writable=r=>Ai(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object";Ai.readable=r=>Ai(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object";Ai.duplex=r=>Ai.writable(r)&&Ai.readable(r);Ai.transform=r=>Ai.duplex(r)&&typeof r._transform=="function";var hx=Ai,JE,bk;function qG(){if(bk)return JE;bk=1;function r(m){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},r(m)}function n(m,I){if(!(m instanceof I))throw new TypeError("Cannot call a class as a function")}function i(m,I){for(var D=0;D<I.length;D++){var C=I[D];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(m,a(C.key),C)}}function s(m,I,D){return I&&i(m.prototype,I),D&&i(m,D),Object.defineProperty(m,"prototype",{writable:!1}),m}function a(m){var I=u(m,"string");return r(I)==="symbol"?I:String(I)}function u(m,I){if(r(m)!=="object"||m===null)return m;var D=m[Symbol.toPrimitive];if(D!==void 0){var C=D.call(m,I||"default");if(r(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(m)}function h(m,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(I&&I.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),I&&d(m,I)}function d(m,I){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,U){return C.__proto__=U,C},d(m,I)}function p(m){var I=y();return function(){var C=S(m),U;if(I){var V=S(this).constructor;U=Reflect.construct(C,arguments,V)}else U=C.apply(this,arguments);return T(this,U)}}function T(m,I){if(I&&(r(I)==="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(m)}function E(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(m){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(D){return D.__proto__||Object.getPrototypeOf(D)},S(m)}var x=hx,B=nr,H=B.MESSAGE,W=qt,$=el();return JE=function(m){h(D,m);var I=p(D);function D(){var C,U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n(this,D),C=I.call(this,U),!U.stream||!x(U.stream))throw new Error("options.stream is required.");return C._stream=U.stream,C._stream.setMaxListeners(1/0),C.isObjectMode=U.stream._writableState.objectMode,C.eol=typeof U.eol=="string"?U.eol:W.EOL,C}return s(D,[{key:"log",value:function(U,V){var te=this;if(setImmediate(function(){return te.emit("logged",U)}),this.isObjectMode){this._stream.write(U),V&&V();return}this._stream.write("".concat(U[H]).concat(this.eol)),V&&V()}}]),D}($),JE}(function(r){Object.defineProperty(r,"Console",{configurable:!0,enumerable:!0,get:function(){return KH()}}),Object.defineProperty(r,"File",{configurable:!0,enumerable:!0,get:function(){return Q2()}}),Object.defineProperty(r,"Http",{configurable:!0,enumerable:!0,get:function(){return KG()}}),Object.defineProperty(r,"Stream",{configurable:!0,enumerable:!0,get:function(){return qG()}})})(dN);var rl={},gp=np,ZG=nr,ly=ZG.configs;rl.cli=gp.levels(ly.cli);rl.npm=gp.levels(ly.npm);rl.syslog=gp.levels(ly.syslog);rl.addColors=gp.levels;var kv={exports:{}},Cv={exports:{}};(function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var i=ey,s=W(i),a=ty,u=W(a),h=LN,d=W(h),p=CN,T=W(p),E=AN,y=W(E),S=Ua(),x=W(S),B=Dc,H=W(B);function W(D){return D&&D.__esModule?D:{default:D}}function $(D,C,U){U=(0,T.default)(U);var V=0,te=0,{length:ae}=D,de=!1;ae===0&&U(null);function we(q,J){q===!1&&(de=!0),de!==!0&&(q?U(q):(++te===ae||J===u.default)&&U(null))}for(;V<ae;V++)C(D[V],V,(0,y.default)(we))}function m(D,C,U){return(0,d.default)(D,1/0,C,U)}function I(D,C,U){var V=(0,s.default)(D)?$:m;return V(D,(0,x.default)(C),U)}n.default=(0,H.default)(I,3),r.exports=n.default})(Cv,Cv.exports);var JG=Cv.exports,Av={exports:{}};(function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;function i(s){return(a,u,h)=>s(a,h)}r.exports=n.default})(Av,Av.exports);var QG=Av.exports;(function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var i=JG,s=E(i),a=QG,u=E(a),h=Ua(),d=E(h),p=Dc,T=E(p);function E(S){return S&&S.__esModule?S:{default:S}}function y(S,x,B){return(0,s.default)(S,(0,u.default)((0,d.default)(x)),B)}n.default=(0,T.default)(y,3),r.exports=n.default})(kv,kv.exports);var ay=kv.exports,eV=Object.prototype.toString,tV=function(n){if(typeof n.displayName=="string"&&n.constructor.name)return n.displayName;if(typeof n.name=="string"&&n.name)return n.name;if(typeof n=="object"&&n.constructor&&typeof n.constructor.name=="string")return n.constructor.name;var i=n.toString(),s=eV.call(n).slice(8,-1);return s==="Function"?i=i.substring(i.indexOf("(")+1,i.indexOf(")")):i=s,i||"anonymous"},rV=tV,dx=function(n){var i=0,s;function a(){return i||(i=1,s=n.apply(this,arguments),n=null),s}return a.displayName=rV(n),a},uy={};(function(r){r.get=function(a){var u=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var h={},d=Error.prepareStackTrace;Error.prepareStackTrace=function(T,E){return E},Error.captureStackTrace(h,a||r.get);var p=h.stack;return Error.prepareStackTrace=d,Error.stackTraceLimit=u,p},r.parse=function(a){if(!a.stack)return[];var u=this,h=a.stack.split(`
`).slice(1);return h.map(function(d){if(d.match(/^\s*[-]{4,}$/))return u._createParsedCallSite({fileName:d,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var p=d.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(p){var T=null,E=null,y=null,S=null,x=null,B=p[5]==="native";if(p[1]){y=p[1];var H=y.lastIndexOf(".");if(y[H-1]=="."&&H--,H>0){T=y.substr(0,H),E=y.substr(H+1);var W=T.indexOf(".Module");W>0&&(y=y.substr(W+1),T=T.substr(0,W))}S=null}E&&(S=T,x=E),E==="<anonymous>"&&(x=null,y=null);var $={fileName:p[2]||null,lineNumber:parseInt(p[3],10)||null,functionName:y,typeName:S,methodName:x,columnNumber:parseInt(p[4],10)||null,native:B};return u._createParsedCallSite($)}}).filter(function(d){return!!d})};function n(a){for(var u in a)this[u]=a[u]}var i=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],s=["topLevel","eval","native","constructor"];i.forEach(function(a){n.prototype[a]=null,n.prototype["get"+a[0].toUpperCase()+a.substr(1)]=function(){return this[a]}}),s.forEach(function(a){n.prototype[a]=!1,n.prototype["is"+a[0].toUpperCase()+a.substr(1)]=function(){return this[a]}}),r._createParsedCallSite=function(a){return new n(a)}})(uy);function xa(r){"@babel/helpers - typeof";return xa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xa(r)}function nV(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function yk(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,oV(s.key),s)}}function iV(r,n,i){return n&&yk(r.prototype,n),i&&yk(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function oV(r){var n=sV(r,"string");return xa(n)==="symbol"?n:String(n)}function sV(r,n){if(xa(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n||"default");if(xa(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function lV(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&Lv(r,n)}function Lv(r,n){return Lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Lv(r,n)}function aV(r){var n=hV();return function(){var s=Mf(r),a;if(n){var u=Mf(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return uV(this,a)}}function uV(r,n){if(n&&(xa(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cV(r)}function cV(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function hV(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mf(r){return Mf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Mf(r)}var dV=tl,fV=dV.Writable,fx=function(r){lV(i,r);var n=aV(i);function i(s){var a;if(nV(this,i),a=n.call(this,{objectMode:!0}),!s)throw new Error("ExceptionStream requires a TransportStream instance.");return a.handleExceptions=!0,a.transport=s,a}return iV(i,[{key:"_write",value:function(a,u,h){return a.exception?this.transport.log(a,h):(h(),!0)}}]),i}(fV);function Ic(r){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ic(r)}function pV(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function wk(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,mV(s.key),s)}}function gV(r,n,i){return n&&wk(r.prototype,n),i&&wk(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function mV(r){var n=$V(r,"string");return Ic(n)==="symbol"?n:String(n)}function $V(r,n){if(Ic(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n||"default");if(Ic(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}var Sk=qt,_V=ay,QE=pp("winston:exception"),EV=dx,Ik=uy,TV=fx,px=function(){function r(n){if(pV(this,r),!n)throw new Error("Logger is required to handle exceptions");this.logger=n,this.handlers=new Map}return gV(r,[{key:"handle",value:function(){for(var i=this,s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];a.forEach(function(h){if(Array.isArray(h))return h.forEach(function(d){return i._addHandler(d)});i._addHandler(h)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),Ve.on("uncaughtException",this.catcher))}},{key:"unhandle",value:function(){var i=this;this.catcher&&(Ve.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(function(s){return i.logger.unpipe(s)}))}},{key:"getAllInfo",value:function(i){var s=null;return i&&(s=typeof i=="string"?i:i.message),{error:i,level:"error",message:["uncaughtException: ".concat(s||"(no error message)"),i&&i.stack||"  No stack trace"].join(`
`),stack:i&&i.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(i)}}},{key:"getProcessInfo",value:function(){return{pid:Ve.pid,uid:Ve.getuid?Ve.getuid():null,gid:Ve.getgid?Ve.getgid():null,cwd:Ve.cwd(),execPath:Ve.execPath,version:Ve.version,argv:Ve.argv,memoryUsage:Ve.memoryUsage()}}},{key:"getOsInfo",value:function(){return{loadavg:Sk.loadavg(),uptime:Sk.uptime()}}},{key:"getTrace",value:function(i){var s=i?Ik.parse(i):Ik.get();return s.map(function(a){return{column:a.getColumnNumber(),file:a.getFileName(),function:a.getFunctionName(),line:a.getLineNumber(),method:a.getMethodName(),native:a.isNative()}})}},{key:"_addHandler",value:function(i){if(!this.handlers.has(i)){i.handleExceptions=!0;var s=new TV(i);this.handlers.set(i,s),this.logger.pipe(s)}}},{key:"_uncaughtException",value:function(i){var s=this.getAllInfo(i),a=this._getExceptionHandlers(),u=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(i):this.logger.exitOnError,h;!a.length&&u&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),u=!1);function d(){QE("doExit",u),QE("process._exiting",Ve._exiting),u&&!Ve._exiting&&(h&&clearTimeout(h),Ve.exit(1))}if(!a||a.length===0)return Ve.nextTick(d);_V(a,function(p,T){var E=EV(T),y=p.transport||p;function S(x){return function(){QE(x),E()}}y._ending=!0,y.once("finish",S("finished")),y.once("error",S("error"))},function(){return u&&d()}),this.logger.log(s),u&&(h=setTimeout(d,3e3))}},{key:"_getExceptionHandlers",value:function(){return this.logger.transports.filter(function(i){var s=i.transport||i;return s.handleExceptions})}}]),r}();function Oc(r){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Oc(r)}function vV(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function Ok(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,yV(s.key),s)}}function bV(r,n,i){return n&&Ok(r.prototype,n),i&&Ok(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function yV(r){var n=wV(r,"string");return Oc(n)==="symbol"?n:String(n)}function wV(r,n){if(Oc(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n||"default");if(Oc(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}var Rk=qt,SV=ay,eT=pp("winston:rejection"),IV=dx,kk=uy,OV=fx,gx=function(){function r(n){if(vV(this,r),!n)throw new Error("Logger is required to handle rejections");this.logger=n,this.handlers=new Map}return bV(r,[{key:"handle",value:function(){for(var i=this,s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];a.forEach(function(h){if(Array.isArray(h))return h.forEach(function(d){return i._addHandler(d)});i._addHandler(h)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),Ve.on("unhandledRejection",this.catcher))}},{key:"unhandle",value:function(){var i=this;this.catcher&&(Ve.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(function(s){return i.logger.unpipe(s)}))}},{key:"getAllInfo",value:function(i){var s=null;return i&&(s=typeof i=="string"?i:i.message),{error:i,level:"error",message:["unhandledRejection: ".concat(s||"(no error message)"),i&&i.stack||"  No stack trace"].join(`
`),stack:i&&i.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(i)}}},{key:"getProcessInfo",value:function(){return{pid:Ve.pid,uid:Ve.getuid?Ve.getuid():null,gid:Ve.getgid?Ve.getgid():null,cwd:Ve.cwd(),execPath:Ve.execPath,version:Ve.version,argv:Ve.argv,memoryUsage:Ve.memoryUsage()}}},{key:"getOsInfo",value:function(){return{loadavg:Rk.loadavg(),uptime:Rk.uptime()}}},{key:"getTrace",value:function(i){var s=i?kk.parse(i):kk.get();return s.map(function(a){return{column:a.getColumnNumber(),file:a.getFileName(),function:a.getFunctionName(),line:a.getLineNumber(),method:a.getMethodName(),native:a.isNative()}})}},{key:"_addHandler",value:function(i){if(!this.handlers.has(i)){i.handleRejections=!0;var s=new OV(i);this.handlers.set(i,s),this.logger.pipe(s)}}},{key:"_unhandledRejection",value:function(i){var s=this.getAllInfo(i),a=this._getRejectionHandlers(),u=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(i):this.logger.exitOnError,h;!a.length&&u&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),u=!1);function d(){eT("doExit",u),eT("process._exiting",Ve._exiting),u&&!Ve._exiting&&(h&&clearTimeout(h),Ve.exit(1))}if(!a||a.length===0)return Ve.nextTick(d);SV(a,function(p,T){var E=IV(T),y=p.transport||p;function S(x){return function(){eT(x),E()}}y._ending=!0,y.once("finish",S("finished")),y.once("error",S("error"))},function(){return u&&d()}),this.logger.log(s),u&&(h=setTimeout(d,3e3))}},{key:"_getRejectionHandlers",value:function(){return this.logger.transports.filter(function(i){var s=i.transport||i;return s.handleRejections})}}]),r}(),mx={exports:{}};const RV=Nr,{LEVEL:Nv}=nr,$x=el(),Bc=mx.exports=function(n={}){if($x.call(this,n),!n.transport||typeof n.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=n.transport,this.level=this.level||n.transport.level,this.handleExceptions=this.handleExceptions||n.transport.handleExceptions,this._deprecated();function i(s){this.emit("error",s,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=i.bind(this),this.transport.on("error",this.transport.__winstonError))};RV.inherits(Bc,$x);Bc.prototype._write=function(n,i,s){if(this.silent||n.exception===!0&&!this.handleExceptions)return s(null);(!this.level||this.levels[this.level]>=this.levels[n[Nv]])&&this.transport.log(n[Nv],n.message,n,this._nop),s(null)};Bc.prototype._writev=function(n,i){for(let s=0;s<n.length;s++)this._accept(n[s])&&(this.transport.log(n[s].chunk[Nv],n[s].chunk.message,n[s].chunk,this._nop),n[s].callback());return i(null)};Bc.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))};Bc.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)};var kV=mx.exports;function Ma(r){"@babel/helpers - typeof";return Ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ma(r)}function CV(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function Ck(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,LV(s.key),s)}}function AV(r,n,i){return n&&Ck(r.prototype,n),i&&Ck(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function LV(r){var n=NV(r,"string");return Ma(n)==="symbol"?n:String(n)}function NV(r,n){if(Ma(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n||"default");if(Ma(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}var xV=function(){function r(n){if(CV(this,r),!n)throw new Error("Logger is required for profiling.");this.logger=n,this.start=Date.now()}return AV(r,[{key:"done",value:function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];typeof s[s.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),s.pop());var u=Ma(s[s.length-1])==="object"?s.pop():{};return u.level=u.level||"info",u.durationMs=Date.now()-this.start,this.logger.write(u)}}]),r}(),tT,Ak;function MV(){if(Ak)return tT;Ak=1;class r extends Error{constructor(i){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${i.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,r)}}return tT=n=>{if(n.length>2)throw new r(n);function i(a={}){this.options=a}i.prototype.transform=n;function s(a){return new i(a)}return s.Format=i,s},tT}var rT,Lk;function DV(){if(Lk)return rT;Lk=1;const r=MV(),{MESSAGE:n}=nr,i=Mc;function s(a,u){return typeof u=="bigint"?u.toString():u}return rT=r((a,u)=>{const h=i.configure(u);return a[n]=h(a,u.replacer||s,u.space),a}),rT}function Xn(r,n,i){return n=_x(n),n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}function ro(r){"@babel/helpers - typeof";return ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ro(r)}function PV(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function Nk(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,_x(s.key),s)}}function BV(r,n,i){return n&&Nk(r.prototype,n),i&&Nk(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function _x(r){var n=FV(r,"string");return ro(n)==="symbol"?n:String(n)}function FV(r,n){if(ro(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n||"default");if(ro(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function UV(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&xv(r,n)}function xv(r,n){return xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},xv(r,n)}function HV(r){var n=WV();return function(){var s=Df(r),a;if(n){var u=Df(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return GV(this,a)}}function GV(r,n){if(n&&(ro(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VV(r)}function VV(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function WV(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Df(r){return Df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Df(r)}var Ex=tl,jV=Ex.Stream,zV=Ex.Transform,xk=ay,Tx=nr,vi=Tx.LEVEL,Mk=Tx.SPLAT,Dk=hx,XV=px,YV=gx,KV=kV,qV=xV,ZV=qb,JV=ZV.warn,QV=rl,eW=/%[scdjifoO%]/g,vx=function(r){UV(i,r);var n=HV(i);function i(s){var a;return PV(this,i),a=n.call(this,{objectMode:!0}),a.configure(s),a}return BV(i,[{key:"child",value:function(a){var u=this;return Object.create(u,{write:{value:function(d){var p=Object.assign({},a,d);d instanceof Error&&(p.stack=d.stack,p.message=d.message),u.write(p)}}})}},{key:"configure",value:function(){var a=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=u.silent,d=u.format,p=u.defaultMeta,T=u.levels,E=u.level,y=E===void 0?"info":E,S=u.exitOnError,x=S===void 0?!0:S,B=u.transports,H=u.colors,W=u.emitErrs,$=u.formatters,m=u.padLevels,I=u.rewriters,D=u.stripColors,C=u.exceptionHandlers,U=u.rejectionHandlers;if(this.transports.length&&this.clear(),this.silent=h,this.format=d||this.format||DV()(),this.defaultMeta=p||null,this.levels=T||this.levels||QV.npm.levels,this.level=y,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new XV(this),this.rejections=new YV(this),this.profilers={},this.exitOnError=x,B&&(B=Array.isArray(B)?B:[B],B.forEach(function(V){return a.add(V)})),H||W||$||m||I||D)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));C&&this.exceptions.handle(C),U&&this.rejections.handle(U)}},{key:"isLevelEnabled",value:function(a){var u=this,h=nT(this.levels,a);if(h===null)return!1;var d=nT(this.levels,this.level);if(d===null)return!1;if(!this.transports||this.transports.length===0)return d>=h;var p=this.transports.findIndex(function(T){var E=nT(u.levels,T.level);return E===null&&(E=d),E>=h});return p!==-1}},{key:"log",value:function(a,u){for(var h,d=arguments.length,p=new Array(d>2?d-2:0),T=2;T<d;T++)p[T-2]=arguments[T];if(arguments.length===1)return a[vi]=a.level,this._addDefaultMeta(a),this.write(a),this;if(arguments.length===2){var E;return u&&ro(u)==="object"?(u[vi]=u.level=a,this._addDefaultMeta(u),this.write(u),this):(u=(E={},Xn(E,vi,a),Xn(E,"level",a),Xn(E,"message",u),E),this._addDefaultMeta(u),this.write(u),this)}var y=p[0];if(ro(y)==="object"&&y!==null){var S=u&&u.match&&u.match(eW);if(!S){var x,B=Object.assign({},this.defaultMeta,y,(x={},Xn(x,vi,a),Xn(x,Mk,p),Xn(x,"level",a),Xn(x,"message",u),x));return y.message&&(B.message="".concat(B.message," ").concat(y.message)),y.stack&&(B.stack=y.stack),this.write(B),this}}return this.write(Object.assign({},this.defaultMeta,(h={},Xn(h,vi,a),Xn(h,Mk,p),Xn(h,"level",a),Xn(h,"message",u),h))),this}},{key:"_transform",value:function(a,u,h){if(this.silent)return h();a[vi]||(a[vi]=a.level),!this.levels[a[vi]]&&this.levels[a[vi]]!==0&&console.error("[winston] Unknown logger level: %s",a[vi]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",a);try{this.push(this.format.transform(a,this.format.options))}finally{this._writableState.sync=!1,h()}}},{key:"_final",value:function(a){var u=this.transports.slice();xk(u,function(h,d){if(!h||h.finished)return setImmediate(d);h.once("finish",d),h.end()},a)}},{key:"add",value:function(a){var u=!Dk(a)||a.log.length>2?new KV({transport:a}):a;if(!u._writableState||!u._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",u),this._onEvent("warn",u),this.pipe(u),a.handleExceptions&&this.exceptions.handle(),a.handleRejections&&this.rejections.handle(),this}},{key:"remove",value:function(a){if(!a)return this;var u=a;return(!Dk(a)||a.log.length>2)&&(u=this.transports.filter(function(h){return h.transport===a})[0]),u&&this.unpipe(u),this}},{key:"clear",value:function(){return this.unpipe(),this}},{key:"close",value:function(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}},{key:"setLevels",value:function(){JV.deprecated("setLevels")}},{key:"query",value:function(a,u){typeof a=="function"&&(u=a,a={}),a=a||{};var h={},d=Object.assign({},a.query||{});function p(E,y){a.query&&typeof E.formatQuery=="function"&&(a.query=E.formatQuery(d)),E.query(a,function(S,x){if(S)return y(S);typeof E.formatResults=="function"&&(x=E.formatResults(x,a.format)),y(null,x)})}function T(E,y){p(E,function(S,x){y&&(x=S||x,x&&(h[E.name]=x),y()),y=null})}xk(this.transports.filter(function(E){return!!E.query}),T,function(){return u(null,h)})}},{key:"stream",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=new jV,h=[];return u._streams=h,u.destroy=function(){for(var d=h.length;d--;)h[d].destroy()},this.transports.filter(function(d){return!!d.stream}).forEach(function(d){var p=d.stream(a);p&&(h.push(p),p.on("log",function(T){T.transport=T.transport||[],T.transport.push(d.name),u.emit("log",T)}),p.on("error",function(T){T.transport=T.transport||[],T.transport.push(d.name),u.emit("error",T)}))}),u}},{key:"startTimer",value:function(){return new qV(this)}},{key:"profile",value:function(a){var u=Date.now();if(this.profilers[a]){var h=this.profilers[a];delete this.profilers[a];for(var d=arguments.length,p=new Array(d>1?d-1:0),T=1;T<d;T++)p[T-1]=arguments[T];typeof p[p.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),p.pop());var E=ro(p[p.length-1])==="object"?p.pop():{};return E.level=E.level||"info",E.durationMs=u-h,E.message=E.message||a,this.write(E)}return this.profilers[a]=u,this}},{key:"handleExceptions",value:function(){var a;console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),(a=this.exceptions).handle.apply(a,arguments)}},{key:"unhandleExceptions",value:function(){var a;console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),(a=this.exceptions).unhandle.apply(a,arguments)}},{key:"cli",value:function(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}},{key:"_onEvent",value:function(a,u){function h(d){a==="error"&&!this.transports.includes(u)&&this.add(u),this.emit(a,d,u)}u["__winston"+a]||(u["__winston"+a]=h.bind(this),u.on(a,u["__winston"+a]))}},{key:"_addDefaultMeta",value:function(a){this.defaultMeta&&Object.assign(a,this.defaultMeta)}}]),i}(zV);function nT(r,n){var i=r[n];return!i&&i!==0?null:i}Object.defineProperty(vx.prototype,"transports",{configurable:!1,enumerable:!0,get:function(){var n=this._readableState.pipes;return Array.isArray(n)?n:[n].filter(Boolean)}});var tW=vx;function Da(r){"@babel/helpers - typeof";return Da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Da(r)}function Pk(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,nW(s.key),s)}}function rW(r,n,i){return n&&Pk(r.prototype,n),i&&Pk(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function nW(r){var n=iW(r,"string");return Da(n)==="symbol"?n:String(n)}function iW(r,n){if(Da(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n||"default");if(Da(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function oW(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function sW(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&Mv(r,n)}function Mv(r,n){return Mv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Mv(r,n)}function lW(r){var n=cW();return function(){var s=Pf(r),a;if(n){var u=Pf(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return aW(this,a)}}function aW(r,n){if(n&&(Da(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uW(r)}function uW(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function cW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pf(r){return Pf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Pf(r)}var hW=nr,dW=hW.LEVEL,fW=rl,pW=tW,gW=pp("winston:create-logger");function mW(r){return"is"+r.charAt(0).toUpperCase()+r.slice(1)+"Enabled"}var bx=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r.levels=r.levels||fW.npm.levels;var n=function(s){sW(u,s);var a=lW(u);function u(h){return oW(this,u),a.call(this,h)}return rW(u)}(pW),i=new n(r);return Object.keys(r.levels).forEach(function(s){if(gW('Define prototype method for "%s"',s),s==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}n.prototype[s]=function(){for(var a=this||i,u=arguments.length,h=new Array(u),d=0;d<u;d++)h[d]=arguments[d];if(h.length===1){var p=h[0],T=p&&p.message&&p||{message:p};return T.level=T[dW]=s,a._addDefaultMeta(T),a.write(T),this||i}return h.length===0?(a.log(s,""),a):a.log.apply(a,[s].concat(h))},n.prototype[mW(s)]=function(){return(this||i).isLevelEnabled(s)}}),i};function Rc(r){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Rc(r)}function $W(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function Bk(r,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,EW(s.key),s)}}function _W(r,n,i){return n&&Bk(r.prototype,n),i&&Bk(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function EW(r){var n=TW(r,"string");return Rc(n)==="symbol"?n:String(n)}function TW(r,n){if(Rc(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n||"default");if(Rc(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}var vW=bx,bW=function(){function r(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$W(this,r),this.loggers=new Map,this.options=n}return _W(r,[{key:"add",value:function(i,s){var a=this;if(!this.loggers.has(i)){s=Object.assign({},s||this.options);var u=s.transports||this.options.transports;u?s.transports=Array.isArray(u)?u.slice():[u]:s.transports=[];var h=vW(s);h.on("close",function(){return a._delete(i)}),this.loggers.set(i,h)}return this.loggers.get(i)}},{key:"get",value:function(i,s){return this.add(i,s)}},{key:"has",value:function(i){return!!this.loggers.has(i)}},{key:"close",value:function(i){var s=this;if(i)return this._removeLogger(i);this.loggers.forEach(function(a,u){return s._removeLogger(u)})}},{key:"_removeLogger",value:function(i){if(this.loggers.has(i)){var s=this.loggers.get(i);s.close(),this._delete(i)}}},{key:"_delete",value:function(i){this.loggers.delete(i)}}]),r}();(function(r){var n=np,i=qb,s=i.warn;r.version=bH.version,r.transports=dN,r.config=rl,r.addColors=n.levels,r.format=n.format,r.createLogger=bx,r.ExceptionHandler=px,r.RejectionHandler=gx,r.Container=bW,r.Transport=el(),r.loggers=new r.Container;var a=r.createLogger();Object.keys(r.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(function(u){return r[u]=function(){return a[u].apply(a,arguments)}}),Object.defineProperty(r,"level",{get:function(){return a.level},set:function(h){a.level=h}}),Object.defineProperty(r,"exceptions",{get:function(){return a.exceptions}}),["exitOnError"].forEach(function(u){Object.defineProperty(r,u,{get:function(){return a[u]},set:function(d){a[u]=d}})}),Object.defineProperty(r,"default",{get:function(){return{exceptionHandlers:a.exceptionHandlers,rejectionHandlers:a.rejectionHandlers,transports:a.transports}}}),s.deprecated(r,"setLevels"),s.forFunctions(r,"useFormat",["cli"]),s.forProperties(r,"useFormat",["padLevels","stripColors"]),s.forFunctions(r,"deprecated",["addRewriter","addFilter","clone","extend"]),s.forProperties(r,"deprecated",["emitErrs","levelLength"]),s.moved(r,"createLogger","Logger")})(Xu);const tr=Xu.createLogger({level:{}.LOG_LEVEL||"info",transports:[new Xu.transports.Console({format:Xu.format.combine(Xu.format.cli())})]});tr.verbose("Log level: "+{}.LOG_LEVEL);class yW{constructor(n,i,s){this._stream=n,this._channel=i,this._serializer=s}put(n){return this._serializer.put(n)}space(){return this._serializer.capacity()-this._serializer.size()}send(){this._stream.write(this._serializer.finalize(this._channel))}}class wW{constructor(n,i){this.closed=!1,this._stream=i,this._channels={},this.encoder=n,this._packetizer=new this.encoder.packetizer,this._serializerCapacity=new this.encoder.serializer().capacity()}start(){this._stream.onData(n=>this.receive(n))}receive(n){if(this.closed)throw new Error("Mux is closed");tr.silly("receive"+n.reduce((i,s)=>i+String.fromCharCode(s),"")+"");for(const i of n)if(this._packetizer.put(i)){const s=this._packetizer.decode();if(s){const a=this._channels[s.channel];a&&a.processPacket(_t.Buffer.from(s.data)),this._globalCallback&&this._globalCallback(s.channel,s.data)}}}buildPacket(n){if(this.closed)throw new Error("Mux is closed");return new yW(this._stream,n,new this.encoder.serializer)}maxPacketSize(){return this._serializerCapacity}subscribeChannel(n,i){if(!i){delete this._channels[n];return}this._channels[n]=i}setGlobalCallback(n){this._globalCallback=n}onError(n){this._stream.onError(n)}onEnd(n){this._stream.onEnd(()=>{this.closed=!0,n&&n()})}destroy(){return this._stream.destroy()}}class SW{constructor(n,i){this.mux=n,this.channel=i}put(n){this.write(_t.Buffer.from([n]))}write(n){let i=this.mux.buildPacket(this.channel);for(const s of n)i.put(s)&&(i.send(),i=this.mux.buildPacket(this.channel));i.space()<this.mux.maxPacketSize()&&i.send()}}class Gu{constructor(n,i){n.subscribeChannel(i,this)}processPacket(n){this._onData&&this._onData(n)}onData(n){this._onData=n}}class Fk{constructor(n,i){this.mux=n,this.channel=i}buildPacket(){return this.mux.buildPacket(this.channel)}maxPacketSize(){return this.mux.maxPacketSize()}}class Uk{constructor(n,i){n.subscribeChannel(i,this)}processPacket(n){this._onData&&this._onData(n)}onData(n){this._onData=n}}var dt;(function(r){r[r.READ_FILE=1]="READ_FILE",r[r.WRITE_FILE=2]="WRITE_FILE",r[r.DELETE_FILE=3]="DELETE_FILE",r[r.LIST_DIR=4]="LIST_DIR",r[r.CREATE_DIR=5]="CREATE_DIR",r[r.DELETE_DIR=6]="DELETE_DIR",r[r.FORMAT_STORAGE=7]="FORMAT_STORAGE",r[r.HAS_MORE_DATA=16]="HAS_MORE_DATA",r[r.LAST_DATA=17]="LAST_DATA",r[r.OK=32]="OK",r[r.ERROR=33]="ERROR",r[r.NOT_FOUND=34]="NOT_FOUND",r[r.CONTINUE=35]="CONTINUE",r[r.LOCK_NOT_OWNED=36]="LOCK_NOT_OWNED"})(dt||(dt={}));const Yn={[dt.READ_FILE]:"READ_FILE",[dt.WRITE_FILE]:"WRITE_FILE",[dt.DELETE_FILE]:"DELETE_FILE",[dt.LIST_DIR]:"LIST_DIR",[dt.CREATE_DIR]:"CREATE_DIR",[dt.DELETE_DIR]:"DELETE_DIR",[dt.FORMAT_STORAGE]:"FORMAT_STORAGE",[dt.HAS_MORE_DATA]:"HAS_MORE_DATA",[dt.LAST_DATA]:"LAST_DATA",[dt.OK]:"OK",[dt.ERROR]:"ERROR",[dt.NOT_FOUND]:"NOT_FOUND",[dt.CONTINUE]:"CONTINUE",[dt.LOCK_NOT_OWNED]:"LOCK_NOT_OWNED"};class IW{constructor(n,i){this._in=n,this._out=i,this._in.onData(s=>{this.processPacket(s)})}waitContinue(n){return new Promise(i=>{this._onContinue=()=>{this._onContinue=void 0,i()},n()})}processPacket(n){const i=_t.Buffer.from(n);if(i.length<1)return!1;const s=i[0];switch(s){case dt.HAS_MORE_DATA:return this._onData&&!this._onData(i.slice(1))?(this._onData=void 0,this._onDataComplete=void 0,!1):!0;case dt.LAST_DATA:if(this._onData){let a=this._onData(i.slice(1));return a?(this._onDataComplete&&(a=this._onDataComplete()),this._onData=void 0,this._onDataComplete=void 0,a):(this._onData=void 0,this._onDataComplete=void 0,!1)}return!0;case dt.OK:if(this._onOk){const a=this._onOk();return this._onOk=void 0,a}return!0;case dt.CONTINUE:return this._onContinue&&this._onContinue(),!0;case dt.ERROR:case dt.NOT_FOUND:case dt.LOCK_NOT_OWNED:if(this._onError){const a=this._onError(s);return this._onError=void 0,a}return!0;default:if(this._onError){const a=this._onError(s);return this._onError=void 0,a}return!1}}encodePath(n,i=!0){const s=_t.Buffer.alloc(n.length+(i?1:0));for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return i&&(s[n.length]=0),s}readFile(n){return tr.verbose("Reading file: "+n),new Promise((i,s)=>{let a=_t.Buffer.alloc(0);this._onData=h=>{const d=_t.Buffer.alloc(a.length+h.length);return d.set(a),d.set(h,a.length),a=d,!0},this._onDataComplete=()=>(i(a),!0),this._onError=h=>(s(Yn[h]),!0);const u=this._out.buildPacket();u.put(dt.READ_FILE);for(const h of this.encodePath(n,!1))u.put(h);u.send()})}writeFile(n,i){return tr.verbose("Writing file: "+n+" - "+i.length),new Promise((s,a)=>{this._onOk=()=>(s(dt.OK),!0),this._onError=u=>(a(Yn[u]),!0),(async()=>{let u=this._out.buildPacket();u.put(dt.WRITE_FILE);for(const T of this.encodePath(n,!0))u.put(T);let h=0,d=dt.HAS_MORE_DATA,p=!1;do{let T=Math.min(i.length-h,this._out.maxPacketSize()-1);u!=null?T=Math.min(T,u.space()-1):u=this._out.buildPacket(),h+T>=i.length&&(p=!0,d=dt.LAST_DATA),u.put(d);for(let E=0;E<T;E++,h++)u.put(i[h]);p?u.send():await this.waitContinue(()=>{u.send()}),u=null}while(h<i.length)})()})}deleteFile(n){return tr.verbose("Deleting file: "+n),new Promise((i,s)=>{this._onOk=()=>(i(dt.OK),!0),this._onError=u=>(s(Yn[u]),!0);const a=this._out.buildPacket();a.put(dt.DELETE_FILE);for(const u of this.encodePath(n,!1))a.put(u);a.send()})}listDirectory(n,i=""){return tr.verbose("Listing directory: "+n+" - '"+i+"'"),new Promise((s,a)=>{let u=_t.Buffer.alloc(0);this._onData=d=>{const p=_t.Buffer.alloc(u.length+d.length);return p.set(u),p.set(d,u.length),u=p,!0},this._onDataComplete=()=>{const d=_t.Buffer.alloc(270);let p=0;const T=[];for(let E=0;E<u.length;E++){const y=u[E];if(y==0){let S=d.toString("utf8",0,d.indexOf(0));const x=S.charAt(0)=="d";S=S.slice(1);let B=0;for(let H=0;H<4;H++)tr.debug("size: "+B+" + "+u[E+H+1]),B<<=8,B|=u[E+H+1];E+=4,T.push([S,x,B]),d.fill(0),p=0}else d[p++]=y}return s(T),!0},this._onError=d=>(a(Yn[d]),!0);const h=this._out.buildPacket();h.put(dt.LIST_DIR);for(const d of this.encodePath(n,!0))h.put(d);for(const d of i)h.put(d.charCodeAt(0));h.send()})}createDirectory(n){return tr.verbose("Creating directory: "+n),new Promise((i,s)=>{this._onOk=()=>(i(dt.OK),!0),this._onError=u=>(s(Yn[u]),!0);const a=this._out.buildPacket();a.put(dt.CREATE_DIR);for(const u of this.encodePath(n,!1))a.put(u);a.send()})}deleteDirectory(n){return tr.verbose("Deleting directory: "+n),new Promise((i,s)=>{this._onOk=()=>(i(dt.OK),!0),this._onError=u=>(s(Yn[u]),!0);const a=this._out.buildPacket();a.put(dt.DELETE_DIR);for(const u of this.encodePath(n,!1))a.put(u);a.send()})}async upload(n,i){if(tr.info("Uploading "+n+" to "+i),(void 0)(n).isDirectory()){const s=(void 0)(n);await this.createDirectory(i).catch(a=>{throw"Failed to create directory: "+Yn[a]});for(const a of s)await this.upload(vR.join(n,a),i+"/"+a).catch(u=>{throw u});return dt.OK}else{const s=(void 0)(n);return await this.writeFile(i,s).catch(a=>{throw"Failed to write file ("+i+"): "+Yn[a]}),dt.OK}}async push(n,i){if(tr.verbose("Pushing "+n+" to "+i),!(void 0)(n).isDirectory())throw"Source must be a directory";const s=(void 0)(n);for(const a of s)await this.upload(vR.join(n,a),i+"/"+a).catch(u=>{throw u});return dt.OK}async pullFile(n,i){tr.info("Pulling "+n+" to "+i);const s=await this.readFile(n).catch(a=>{throw"Failed to read file: "+Yn[a]});return(void 0)(i,s),dt.OK}async pullDir(n,i){tr.info("Pulling "+n+" to "+i);const s=await this.listDirectory(n).catch(a=>{throw"Failed to list directory: "+Yn[a]});if((void 0)(i)||(void 0)(i),!(void 0)(i).isDirectory())throw"Destination must be a directory";(void 0)(i).length>0;for(const a of s){const u=a[0];a[1]?await this.pullDir(n+"/"+u,i+"/"+u).catch(d=>{throw d}):await this.pullFile(n+"/"+u,i+"/"+u).catch(d=>{throw d})}return dt.OK}async pull(n,i){tr.verbose("Pulling "+n+" to "+i);const[,s]=await this.listDirectory(n).catch(a=>{throw"Failed to get file type: "+a});return s?this.pullDir(n,i):this.pullFile(n,i)}formatStorage(){return tr.verbose("Formatting storage"),new Promise((n,i)=>{this._onOk=()=>(n(dt.OK),!0),this._onError=a=>(i(Yn[a]),!0);const s=this._out.buildPacket();s.put(dt.FORMAT_STORAGE),s.put(dt.OK),s.send()})}}var yx;class Cs{constructor(n,i,s){this[yx]="TimeoutPromise",this.promise=new Promise((a,u)=>{this.onTimeout=()=>{s&&s(),u(new Error("Timeout"))},this.timeout=setTimeout(()=>{if(this.onTimeout)this.onTimeout();else throw new Error("Timeout callback not set")},n),i(h=>{clearTimeout(this.timeout),a(h)},h=>{clearTimeout(this.timeout),u(h)})})}then(n,i){return this.promise.then(n,i)}catch(n){return this.promise.catch(n)}finally(n){return this.promise.finally(n)}resetTimeout(n){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{if(this.onTimeout)this.onTimeout();else throw new Error("Timeout callback not set")},n)}}yx=Symbol.toStringTag;const As=5e3;var Pt;(function(r){r[r.START=1]="START",r[r.STOP=2]="STOP",r[r.STATUS=3]="STATUS",r[r.VERSION=4]="VERSION",r[r.LOCK=16]="LOCK",r[r.UNLOCK=17]="UNLOCK",r[r.FORCE_UNLOCK=18]="FORCE_UNLOCK",r[r.OK=32]="OK",r[r.ERROR=33]="ERROR",r[r.LOCK_NOT_OWNED=34]="LOCK_NOT_OWNED"})(Pt||(Pt={}));const Ls={[Pt.START]:"START",[Pt.STOP]:"STOP",[Pt.STATUS]:"STATUS",[Pt.VERSION]:"VERSION",[Pt.LOCK]:"LOCK",[Pt.UNLOCK]:"UNLOCK",[Pt.FORCE_UNLOCK]:"FORCE_UNLOCK",[Pt.OK]:"OK",[Pt.ERROR]:"ERROR",[Pt.LOCK_NOT_OWNED]:"LOCK_NOT_OWNED"};class OW{cancel(){this._onPacket=void 0}constructor(n,i){this._in=n,this._out=i,this._in.onData(s=>{this.processPacket(s)})}processPacket(n){const i=_t.Buffer.from(n);if(i.length<1)return!1;const s=i[0];return this._onPacket?this._onPacket(s,i.slice(1)):!1}start(n){return tr.verbose("Starting program: "+n),new Cs(As,(i,s)=>{this._onPacket=u=>(u==Pt.OK?i():s(Ls[u]),!0);const a=this._out.buildPacket();a.put(Pt.START);for(const u of n)a.put(u.charCodeAt(0));a.send()},()=>{this.cancel()})}stop(){return tr.verbose("Stopping program"),new Cs(As,(n,i)=>{this._onPacket=a=>(a==Pt.OK?n():i(Ls[a]),!0);const s=this._out.buildPacket();s.put(Pt.STOP),s.send()},()=>{this.cancel()})}status(){return tr.verbose("Getting status"),new Cs(As,(n,i)=>{this._onPacket=(a,u)=>(a==Pt.STATUS&&u.length>0?n({running:u[0]==1,exitCode:u[1],status:u.slice(2).toString("utf8")}):i(Ls[a]),!0);const s=this._out.buildPacket();s.put(Pt.STATUS),s.send()},()=>{this.cancel()})}version(){return tr.verbose("Getting version"),new Cs(As,(n,i)=>{this._onPacket=(a,u)=>{if(a==Pt.VERSION&&u.length>0){const h=[];for(let d of u.toString("utf8").split(`
`))d=d.trim(),d.length>0&&h.push(d);n(h)}else i(Ls[a]);return!0};const s=this._out.buildPacket();s.put(Pt.VERSION),s.send()},()=>{this.cancel()})}lock(){return tr.verbose("Locking controller"),new Cs(As,(n,i)=>{this._onPacket=a=>(a==Pt.OK?setTimeout(n,10):i(Ls[a]),!0);const s=this._out.buildPacket();s.put(Pt.LOCK),s.send()},()=>{this.cancel()})}unlock(){return tr.verbose("Unlocking controller"),new Cs(As,(n,i)=>{this._onPacket=a=>(a==Pt.OK?n():i(Ls[a]),!0);const s=this._out.buildPacket();s.put(Pt.UNLOCK),s.send()},()=>{this.cancel()})}forceUnlock(){return tr.verbose("Force unlocking controller"),new Cs(As,(n,i)=>{this._onPacket=a=>(a==Pt.OK?n():i(Ls[a]),!0);const s=this._out.buildPacket();s.put(Pt.FORCE_UNLOCK),s.send()},()=>{this.cancel()})}}let Dv=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];typeof Int32Array<"u"&&(Dv=new Int32Array(Dv));const RW=(r,n=0)=>{let i=~~n;for(let s=0;s<r.length;s++)i=(Dv[(i^r[s])&255]^i>>8)&65535;return i},Hk=(r,n)=>_t.Buffer.from(r,n);function kW(r,n){const i=(s,a)=>n(Hk(s),a)>>>0;return i.signed=(s,a)=>n(Hk(s),a),i.unsigned=i,i.model=r,i}const wx=kW("crc-16",RW);class Sx{constructor(){this.DELIMITER=0,this.SIZE_CHECKSUM=2,this.SIZE_LENGTH=1,this.SIZE_CHANNEL=1,this.OFFSET_DELIMITER=0,this.OFFSET_LENGTH=1,this.OFFSET_COBS=2,this.OFFSET_CHANNEL=this.OFFSET_COBS+1,this.OFFSET_DATA=this.OFFSET_CHANNEL+this.SIZE_CHANNEL,this.SIZE_DATA_MAX=254-this.SIZE_CHANNEL-this.SIZE_CHECKSUM,this.buffer=_t.Buffer.alloc(this.OFFSET_DATA+this.SIZE_DATA_MAX+this.SIZE_CHECKSUM)}}class CW extends Sx{constructor(){super(...arguments),this._dataSize=0}capacity(){return this.SIZE_DATA_MAX}size(){return this._dataSize}is_empty(){return this._dataSize==0}reset(){this._dataSize=0}put(n){return this._dataSize<this.SIZE_DATA_MAX&&(this.buffer[this.OFFSET_DATA+this._dataSize]=n,this._dataSize++),this._dataSize==this.SIZE_DATA_MAX}finalize(n){const i=this.OFFSET_DATA+this._dataSize+this.SIZE_CHECKSUM,s=this.OFFSET_DATA+this._dataSize;this.buffer[this.OFFSET_DELIMITER]=this.DELIMITER,this.buffer[this.OFFSET_LENGTH]=s+this.SIZE_CHECKSUM-this.OFFSET_COBS,this.buffer[this.OFFSET_COBS]=this.DELIMITER,this.buffer[this.OFFSET_CHANNEL]=n;const a=wx(this.buffer.subarray(this.OFFSET_CHANNEL,s));this.buffer[s]=a&255,this.buffer[s+1]=a>>8&255;let u=2;for(let h=3;h<i;h++)this.buffer[h]==this.DELIMITER&&(this.buffer[u]=h-u,u=h);return this.buffer[u]=i-u,this.reset(),_t.Buffer.from(this.buffer.subarray(0,i))}}class AW extends Sx{constructor(){super(...arguments),this.length=0}expectedLength(){return this.length<this.OFFSET_LENGTH+this.SIZE_LENGTH?this.OFFSET_LENGTH+this.SIZE_LENGTH:this.OFFSET_LENGTH+this.SIZE_LENGTH+this.buffer[this.OFFSET_LENGTH]}reset(){this.length=0}put(n){return n==this.DELIMITER?(this.buffer[0]=this.DELIMITER,this.length=1,!1):this.length==0?!1:(this.length<this.expectedLength()&&(this.buffer[this.length]=n,this.length++),this.length==this.expectedLength())}decode(){const n=this.expectedLength();if(this.length<n)return null;const i=this.OFFSET_COBS+this.buffer[this.OFFSET_LENGTH]-this.SIZE_CHECKSUM;let s=0;for(let h=2;h<n;h++)s==0&&(s=this.buffer[h],this.buffer[h]=this.DELIMITER),s--;const a=wx(this.buffer.subarray(this.OFFSET_CHANNEL,i)),u=this.buffer[i]|this.buffer[i+1]<<8;return s!=0||a!=u?null:{channel:this.buffer[this.OFFSET_CHANNEL],data:_t.Buffer.from(this.buffer.subarray(this.OFFSET_DATA,i))}}}const LW={serializer:CW,packetizer:AW};class NW{constructor(n){this._mux=new wW(LW,n),this.programOutput=new Gu(this._mux,16),this.programInput=new SW(this._mux,16),this.programError=new Gu(this._mux,17),this.errorOutput=new Gu(this._mux,255),this.logOutput=new Gu(this._mux,253),this.debugOutput=new Gu(this._mux,251),this.controller=new OW(new Uk(this._mux,0),new Fk(this._mux,0)),this.uploader=new IW(new Uk(this._mux,1),new Fk(this._mux,1)),this._mux.start()}onError(n){this._mux.onError(n)}onEnd(n){this._mux.onEnd(n)}destroy(){return this.controller.unlock(),this._mux.destroy()}}const xW={kind:"categoryToolbox",contents:[{kind:"category",name:"Logic",colour:210,contents:[{kind:"block",type:"controls_if"},{kind:"block",blockxml:'<block type="logic_compare"><field name="OP">EQ</field></block>'},{kind:"block",blockxml:'<block type="logic_operation"><field name="OP">AND</field></block>'},{kind:"block",type:"logic_negate"},{kind:"block",blockxml:'<block type="logic_boolean"><field name="BOOL">TRUE</field></block>'},{kind:"block",type:"logic_null"},{kind:"block",type:"logic_ternary"}]},{kind:"category",name:"Loops",colour:120,contents:[{kind:"block",blockxml:`<block type="controls_repeat_ext">
      <value name="TIMES">
        <shadow type="math_number">
          <field name="NUM">10</field>
        </shadow>
      </value>
    </block>`},{kind:"block",blockxml:`    <block type="controls_whileUntil">
      <field name="MODE">WHILE</field>
    </block>`},{kind:"block",blockxml:`    <block type="controls_for">
      <field name="VAR" id="C(8;cYCF}~vSgkxzJ+{O" variabletype="">i</field>
      <value name="FROM">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="TO">
        <shadow type="math_number">
          <field name="NUM">10</field>
        </shadow>
      </value>
      <value name="BY">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="controls_forEach">
      <field name="VAR" id="Cg!CSk/ZJo2XQN3=VVrz" variabletype="">j</field>
    </block>
`},{kind:"block",blockxml:`    <block type="controls_flow_statements">
      <field name="FLOW">BREAK</field>
    </block>
`}]},{kind:"category",name:"Math",colour:230,contents:[{kind:"block",blockxml:`    <block type="math_round">
      <field name="OP">ROUND</field>
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">3.1</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="math_number">
      <field name="NUM">0</field>
    </block>
`},{kind:"block",blockxml:`    <block type="math_single">
      <field name="OP">ROOT</field>
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">9</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="math_trig">
      <field name="OP">SIN</field>
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">45</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="math_constant">
      <field name="CONSTANT">PI</field>
    </block>
`},{kind:"block",blockxml:`    <block type="math_number_property">
      <mutation divisor_input="false"></mutation>
      <field name="PROPERTY">EVEN</field>
      <value name="NUMBER_TO_CHECK">
        <shadow type="math_number">
          <field name="NUM">0</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="math_arithmetic">
      <field name="OP">ADD</field>
      <value name="A">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="B">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="math_on_list">
      <mutation op="SUM"></mutation>
      <field name="OP">SUM</field>
    </block>
`},{kind:"block",blockxml:`    <block type="math_modulo">
      <value name="DIVIDEND">
        <shadow type="math_number">
          <field name="NUM">64</field>
        </shadow>
      </value>
      <value name="DIVISOR">
        <shadow type="math_number">
          <field name="NUM">10</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="math_constrain">
      <value name="VALUE">
        <shadow type="math_number">
          <field name="NUM">50</field>
        </shadow>
      </value>
      <value name="LOW">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="HIGH">
        <shadow type="math_number">
          <field name="NUM">100</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="math_random_int">
      <value name="FROM">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="TO">
        <shadow type="math_number">
          <field name="NUM">100</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",type:"math_random_float"}]},{kind:"category",name:"Text",colour:160,contents:[{kind:"block",blockxml:`    <block type="text_charAt">
      <mutation at="true"></mutation>
      <field name="WHERE">FROM_START</field>
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR" id="q@$ZF(L?Zo/z\`d{o.Bp!" variabletype="">text</field>
        </block>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="text">
      <field name="TEXT"></field>
    </block>
`},{kind:"block",blockxml:`    <block type="text_append">
      <field name="VAR" id=":};P,s[*|I8+L^-.EbRi" variabletype="">item</field>
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT"></field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="text_length">
      <value name="VALUE">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="text_isEmpty">
      <value name="VALUE">
        <shadow type="text">
          <field name="TEXT"></field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="text_indexOf">
      <field name="END">FIRST</field>
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR" id="q@$ZF(L?Zo/z\`d{o.Bp!" variabletype="">text</field>
        </block>
      </value>
      <value name="FIND">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="text_join">
      <mutation items="2"></mutation>
    </block>
`},{kind:"block",blockxml:`    <block type="text_getSubstring">
      <mutation at1="true" at2="true"></mutation>
      <field name="WHERE1">FROM_START</field>
      <field name="WHERE2">FROM_START</field>
      <value name="STRING">
        <block type="variables_get">
          <field name="VAR" id="q@$ZF(L?Zo/z\`d{o.Bp!" variabletype="">text</field>
        </block>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="text_changeCase">
      <field name="CASE">UPPERCASE</field>
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="text_trim">
      <field name="MODE">BOTH</field>
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="text_print">
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="text_prompt_ext">
      <mutation type="TEXT"></mutation>
      <field name="TYPE">TEXT</field>
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
`}]},{kind:"category",name:"Lists",colour:259,contents:[{kind:"block",blockxml:`    <block type="lists_indexOf">
      <field name="END">FIRST</field>
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR" id="e\`(L;x,.j[[XN\`F33Q5." variabletype="">list</field>
        </block>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="lists_create_with">
      <mutation items="0"></mutation>
    </block>
`},{kind:"block",blockxml:`    <block type="lists_repeat">
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">5</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_isEmpty"},{kind:"block",blockxml:`    <block type="lists_create_with">
      <mutation items="3"></mutation>
    </block>
`},{kind:"block",blockxml:`    <block type="lists_getIndex">
      <mutation statement="false" at="true"></mutation>
      <field name="MODE">GET</field>
      <field name="WHERE">FROM_START</field>
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR" id="e\`(L;x,.j[[XN\`F33Q5." variabletype="">list</field>
        </block>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="lists_setIndex">
      <mutation at="true"></mutation>
      <field name="MODE">SET</field>
      <field name="WHERE">FROM_START</field>
      <value name="LIST">
        <block type="variables_get">
          <field name="VAR" id="e\`(L;x,.j[[XN\`F33Q5." variabletype="">list</field>
        </block>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="lists_getSublist">
      <mutation at1="true" at2="true"></mutation>
      <field name="WHERE1">FROM_START</field>
      <field name="WHERE2">FROM_START</field>
      <value name="LIST">
        <block type="variables_get">
          <field name="VAR" id="e\`(L;x,.j[[XN\`F33Q5." variabletype="">list</field>
        </block>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="lists_split">
      <mutation mode="SPLIT"></mutation>
      <field name="MODE">SPLIT</field>
      <value name="DELIM">
        <shadow type="text">
          <field name="TEXT">,</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="lists_sort">
      <field name="TYPE">NUMERIC</field>
      <field name="DIRECTION">1</field>
    </block>
`}]},{kind:"category",name:"Colour",colour:19,contents:[{kind:"block",blockxml:`    <block type="colour_picker">
      <field name="COLOUR">#ff0000</field>
    </block>
`},{kind:"block",type:"colour_random"},{kind:"block",blockxml:`    <block type="colour_rgb">
      <value name="RED">
        <shadow type="math_number">
          <field name="NUM">100</field>
        </shadow>
      </value>
      <value name="GREEN">
        <shadow type="math_number">
          <field name="NUM">50</field>
        </shadow>
      </value>
      <value name="BLUE">
        <shadow type="math_number">
          <field name="NUM">0</field>
        </shadow>
      </value>
    </block>
`},{kind:"block",blockxml:`    <block type="colour_blend">
      <value name="COLOUR1">
        <shadow type="colour_picker">
          <field name="COLOUR">#ff0000</field>
        </shadow>
      </value>
      <value name="COLOUR2">
        <shadow type="colour_picker">
          <field name="COLOUR">#3333ff</field>
        </shadow>
      </value>
      <value name="RATIO">
        <shadow type="math_number">
          <field name="NUM">0.5</field>
        </shadow>
      </value>
    </block>
`}]},{kind:"sep"},{kind:"category",name:"Custom Button",colour:19,contents:[{kind:"button",text:"A button",callbackKey:"myFirstButtonPressed"}]},{kind:"category",name:"Variables",custom:"VARIABLE",colour:330},{kind:"category",name:"Functions",custom:"PROCEDURE",colour:290}]};function MW(r){let n=()=>yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{className:"px-2 text-green-500",children:"Connected"}),yt.jsx(Sf,{text:"Disconnect",onClick:r.onDisconnection})]}),i=()=>yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{className:"px-2 text-orange-500",children:"Not connected"}),yt.jsx(Sf,{text:"Connect",onClick:()=>{navigator.serial.requestPort().then(async s=>{await s.open({baudRate:921600});let a=new MP(s);r.onConnection(new NW(a))}).catch(s=>{alert(s.toString()),r.onDisconnection()})}})]});return yt.jsx("div",{className:"w-full bg-gray-200 rounded p-2 mb-2",children:r.device?n():i()})}function DW(r){let n="code/demo.js",i='console.log("Hello World!");';async function s(){if(!r.device)return;let h=r.device;await h.controller.lock().catch(T=>{throw console.log("Error locking device: "+T),1});let d=_t.Buffer.from(i,"utf-8");const p=await h.uploader.writeFile(n,d).catch(T=>{throw console.log("Error: "+T+`
`),1});await h.controller.unlock().catch(T=>{throw console.log("Error unlocking device: "+T),1}),console.log(p.toString()+`
`)}function a(){return yt.jsx(Sf,{text:"Upload",onClick:s})}function u(){return yt.jsx("p",{children:"Not connected"})}return yt.jsx("div",{className:"w-full bg-gray-200 rounded p-2 mb-2",children:r.device?a():u()})}function PW(r){const[n,i]=Yo.useState(""),s=a=>i(n+a);return Yo.useEffect(()=>{r.device&&(r.device.programOutput.onData(a=>{s(a.toString())}),r.device.programError.onData(a=>{s(a.toString())}))},[r.device,i,n]),yt.jsxs("div",{className:"h-full flex flex-col m-0 p-0",children:[yt.jsx("div",{className:"w-full m-0",children:yt.jsx(Sf,{text:"Clear",classNames:"bg-blue-300 m-1 w-full ",onClick:()=>i("")})}),yt.jsx("div",{className:"flex-1 w-full h-full overflow-y-scroll bg-gray-50 m-2 p-2 font-mono",children:yt.jsx("pre",{className:"inline-block",children:n})})]})}function BW(r){Yo.useRef();const n=i=>{console.log("Workspace changed");const s=iL.javascriptGenerator.workspaceToCode(i);console.log(s)};return yt.jsx(Nb,{className:"w-full h-full",toolboxConfiguration:xW,onWorkspaceChange:n})}function FW(){return yt.jsx("div",{className:"w-full text-xl p-2",children:"JacLy"})}function UW(){const[r,n]=Yo.useState(null),[i,s]=Yo.useState(""),a=u=>{r&&r.destroy(),n(u)};return yt.jsxs("div",{className:"flex flex-col h-full",children:[yt.jsx(FW,{}),yt.jsx(MW,{device:r,onConnection:a,onDisconnection:()=>a(null)}),yt.jsx(DW,{device:r}),yt.jsxs("div",{className:"w-full flex flex-1",children:[yt.jsx("div",{className:"w-2/3",children:yt.jsx(BW,{device:r,onCodeChange:s})}),yt.jsx("div",{className:"w-1/3",children:yt.jsx(PW,{device:r})})]})]})}function HW(){return yt.jsx("div",{className:"h-full w-full bg-red-500 text-white p-8",children:"Your browser doesn't support web serial. You cannot use this application."})}iT.createRoot(document.getElementById("root")).render(yt.jsx(Dt.StrictMode,{children:"serial"in navigator?yt.jsx(UW,{}):yt.jsx(HW,{})}));
